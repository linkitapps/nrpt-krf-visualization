// DVSL Charting library, version 1.4.1.
// GIT revision: 50f55d38deeb30376ff3b754f6fbd31aa453b78a
// (c) 2013 - 2015 Data Visualization Software Lab
//
// http://zoomcharts.com
//
//
// 3rd party software license acknowledgement:
// moment.js
// version : 2.0.0
// author : Tim Wood
// license : MIT
// momentjs.com
//
// CssColorParser.js
// author : Dean McNamee <dean@gmail.com>, 2012.
// license : MIT
// github.com/deanm/css-color-parser-js


(function(){
var Netchart_Graph;Netchart_Graph=function(){function t(t,e){this.chart=t,this.layer=e,this.settings=this.chart.settings,this.idToNode={},this.idToLink={},this.state={},this.userLoading=!1}return t.prototype.exportCoordinates=function(t){var e,i,n,s;for(n=0,s=t.length;s>n;n++)i=t[n],e=this.idToNode[i.id],e&&(i.x=e.x,i.y=e.y)},t.prototype.save=function(){var t,e,i,n;i={},n=this.idToNode;for(t in n)e=n[t],i[e.id]={x:e.x,y:e.y,r:e.currentHHeight,w:e.currentHwidth};return i},t.prototype.restore=function(t){var e,i,n;this.state={};for(e in t)n=t[e],this.idToNode.hasOwnProperty(e)?(i=this.idToNode[e],i.x=n.x,i.y=n.y,i.hHeight=n.r,i.hWidth=n.w?n.w:n.r):this.state[e]=n},t.prototype.lockNode=function(t,e,i){var n;return this.idToNode.hasOwnProperty(t)?(n=this.idToNode[t],n.userLock=!0,void 0!==e&&void 0!==i&&(n.x=e,n.y=i),this.layer.touchNode(n)):this.chart.error("Locking nonexistant node: "+t)},t.prototype.unlockNode=function(t){var e;return this.idToNode.hasOwnProperty(t)?(e=this.idToNode[t],e.userLock=!1,this.layer.touchNode(e)):this.chart.error("Locking nonexistant node: "+t)},t.prototype.addNode=function(t){var e,i,n,s;if(i=this.layer.addNode(t),this.idToNode[t]=i,s=this.chart.getData("default"),e=s.getNodeData(t),!e)throw"Internal error";return i.data=e,i.dataLinks=s.getNodeLinksRaw(t),i.dataLinksFiltered=[],null!=e.x&&(i.x=e.x),null!=e.y&&(i.y=e.y),this.state.hasOwnProperty(t)&&(n=this.state[t],delete this.state[t],i.x=n.x,i.y=n.y,i.hHeight=n.r,i.hHwidth=n.w?n.w:n.r),i},t.prototype.tryAddLink=function(t){var e;return this.idToLink.hasOwnProperty(t.id)?(e=this.idToLink[t.id],e.data!==t&&(e.data=t,this.layer.touchLink(e)),e):this.idToNode.hasOwnProperty(t.from)&&this.idToNode.hasOwnProperty(t.to)?(e=this.layer.addLink(t.id,t.from,t.to),e.data=t,this.idToLink[t.id]=e,e.from=this.idToNode[t.from],e.from.links.push(e),this.layer.touchNode(e.from),e.to=this.idToNode[t.to],e.to.links.push(e),this.layer.touchNode(e.to),e):null},t.prototype.removeNode=function(t){var e,i,n,s,o,r,a;if(this.idToNode.hasOwnProperty(t)){for(i=this.idToNode[t],a=i.links,o=0,r=a.length;r>o;o++)e=a[o],delete this.idToLink[e.id],n=e.otherEnd(i),n!==i&&(Base_Helpers.removeFromArray(n.links,e),this.layer.touchNode(n)),this.layer.removeLink(e);return i.links=[],delete this.idToNode[t],this.layer.removeNode(i),s=this.chart.getData("default"),s.nodeRemoved(t)}},t.prototype.removeLink=function(t){var e;return this.idToLink.hasOwnProperty(t)?(e=this.idToLink[t],delete this.idToLink[t],Base_Helpers.removeFromArray(e.from.links,e),Base_Helpers.removeFromArray(e.to.links,e),this.layer.touchNode(e.from),this.layer.touchNode(e.to),this.layer.removeLink(e)):void 0},t.prototype.removeAll=function(){return this.replaceGraph({},{})},t.prototype.exportData=function(){var t,e,i,n,s,o,r;s=[],i=[],o=this.idToNode;for(t in o)n=o[t],s.push(n.data);r=this.idToLink;for(t in r)e=r[t],i.push(e.data);return{nodes:s,links:i}},t.prototype.replaceGraph=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x;l=!0,p={},x=this.idToNode;for(o in x)for(f=x[o],h=f.links;h.length>0;)h.pop();g=this.idToNode,this.idToNode=a={};for(o in t)if(v=t[o],n=g[o],n?(l=!1,a[o]=n):n=this.addNode(o),e.hasOwnProperty(o))for(n.dataLinksFiltered=d=e[o],_=0,b=d.length;b>_;_++)h=d[_],p[h.id]=h;m=this.idToLink,this.idToLink=r={};for(o in p)u=p[o],i=m[o],i?(s=u.from,y=u.to,a.hasOwnProperty(s)&&a.hasOwnProperty(y)&&(a[s].links.push(i),a[y].links.push(i),r[o]=i)):this.tryAddLink(u);for(o in m)c=m[o],r.hasOwnProperty(o)||(this.layer.touchNode(c.from),this.layer.touchNode(c.to),this.layer.removeLink(c));for(o in g)f=g[o],a.hasOwnProperty(o)||this.layer.removeNode(f);return l},t.prototype.updateGraphWithNewData=function(t,e){var i,n,s,o,r,a,l;if(a=this.chart.getData("default"),t)for(n in t)o=t[n],this.idToNode.hasOwnProperty(n)&&(r=this.idToNode[n],r.data=a.getNodeData(n),r.dataLinks=a.getNodeLinksRaw(n),null!=o.x&&(r.x=o.x),null!=o.y&&(r.y=o.y),this.layer.touchNode(r));if(e){l=[];for(n in e)i=e[n],this.idToLink.hasOwnProperty(n)?(s=this.idToLink[n],s.data=a.getLinkData(n),l.push(this.layer.touchLink(s))):l.push(void 0);return l}},t}();var builtinImages={"no-data-light.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABPCAYAAABWIbNMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzIyQjVERERFNTYzMTFFMkFCQzA5QTIyQ0RFNjkyMTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzIyQjVEREVFNTYzMTFFMkFCQzA5QTIyQ0RFNjkyMTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MjJCNUREQkU1NjMxMUUyQUJDMDlBMjJDREU2OTIxNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MjJCNUREQ0U1NjMxMUUyQUJDMDlBMjJDREU2OTIxNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqaQJv8AAA0dSURBVHja7FwLVJTHFV5w0YVdwAVUXFACCqiVl9IjEkTemAKmFhCDSQFBLIoHKb6NJ7WnNqipJoqJNTWa06MmimiaaMFXQFN8YagaFRFFLYLgCzHJgsuj34VZsq67sC9w18Occ8+/O/PPnTvff+fOvfPP/EZtbW2cpUuXcuRTdnY2R5WkqK6SxAWNA00CuYNcQI4gAYjP7vmR0U3QddBF0AlQKahFEVNV5VRHZuLJ5fRsMgH9BvQW6A2QhWxhv379GoyNjRu4XO49ekAtLS1mra2tfFx9Uewrc+sT0EHQTlCBMpB0mXoKGNKCFNAfQcMYCE8sLCyKBg0a9IOjo+M1V1fXapFI9BhFzSAJyIjJw62urhaWlZWJKisrR92/f9/t6dOnHgArHmVEt0DrQdtAPxsKMMQvFbQKZGNkZNQsFAoLXVxcjoWFhZ0xMzOrQz6BUU+dgko3K1FlLkCj4WUJsmpsbBx0+PDhX1+9ejWsvr7eD9q1EfnLQCvAYwfub9NnYMaCdoDGEyBDhgz5KigoKNfd3Z3sRDXoITrRpqINaGbDh+gOOm40derU70EHS0tLPQsLC6Pr6ureAECfoXw27k/BPVf0EZg00AbQAAyXc9COzd7e3mfw/zaEFmvLnAH6kAgAlHt5eZ0tKSnZV1BQMB/DbCLyS3BPOso+0wtgIEw/XD4EpcOINsFubExISPgc/8tQ1iPjnwF9FSDcBkBXduzYkVhRUZEC7dmGsjEoW6SLocXVQsD+bJaIMTExuRceHr7Sz88vH/lVnF5IDPhzAKG2qKjo0tGjR/8skUiykDcUZUnIf6YNf2NNNQV2ZBeBwuPxbsTHx6cBlC96CxS5dGfy5Mk7IyMjM6G1BFY8ZNsOWYxehsZsgupGA5RbycnJc4cNG1YEQZo4Lymh7RaAkgQfyIzAwZWm9Tts5uodjYEQZGjT+vfvXx0dHZ0BUI6/ZFDMoCEHAEawubn593FxcbMxtB90FC2d2SvAoCE3CPEhGdqQkJBlbm5uBcp8kV5K7aBAe0MJlJSUlAwPD4/9AQEBy5AvAW2BfM49CgwaAB7Gn0OI/s7Ozp/4+/vnIbtJn0CB73QK+eLg4OA9I0eO3IoyAWTWyN6oDAwaSIa6ekGI80lJSX9jwZ6+gSKNoRrgNqwTCAQXIPPr+P/7HgEGiJtDiPdJPX19fSmcrdJjUDpmFS73to+PTzbubQGtRR9MdQ4MtGU+BLFGAHgwMDDw3/oOijTBDn5jY2NTgPsHI4hN0ikwQJqWDjIIebj5m/D7J0MARbq+4+npmYN65AkvIjupM2CgLREYp4MRJZ+AwS3WJ1DIf+muIgxxkaWlZXFLS8tr6EugzoCBCibSFYLsw6XRkEBh6Wfcn8fsTqJOgEHj3Obm5hBaaQsNDd1vgKC0J/g1e6EtP6EvkaoOJ+NutGU8hOJbWFicFYlENYYICiVHR8e7bOoeiD65aQ0M3P4QuvL5fDJybYYICkutAOY0/UC4EKo1MBBuPF2hMWcMGJT2BF6n2GTipTUwGJNOdLW2tr5oyKAwYC7RFbOTi9bAgMkwMrwRERE1hgwKpZiYmFsU/KJPIq2BgZC0vkExUbMhg8JSE73DggE21woYikjBhAdm4lcAFKmzKkY7plprDNOatlcBFHX7ohQYWmkHwo00nF4FUGRMg1hrjYHgtH5q9iqAwiYTc2YztQNmwIABNWA2EAILDB0U8LdFmzw4rTVaAwMv8Q67jjZkUNobNjMbw7z5W1oDA2aXGTC+hgwKS7TEyeHxeFe0BgYe70k2NgMNHBTqw2S62trantQamNDQ0O/oBZZEIpnMVvIMEhS0xUMffMiLj4qKOq01MOjA44EDB/6HwnUAFG6IoDDHLop2atEqJMxDgy4cvDaoXh5bm5ltiKAw2Wl3F0ckEuXqZAWPUnh4+AEY3zpE2hHolKOhgYI2XTCMQjAb3Y2MjDyoM2DQoVogvQ+d7MflcpcYEihMW1ZQP4cPH77LwsLioc6AoeEUFBSUgwbqYdmT0cFRhgIK2vWEbXmbXvJPmTJlC0eNVUiVFoZdXV2vOTk5bUeHuTBkHxsIKEaQdTPkMXZxcdlib29/S536qr6Aapk+ffpGWPRyPIFANJqsz6CwlAlZffl8/g8zZsz4BP9bewIYWhq87e/v/yc8hWcAYRM67a6voKBtb8iUTa9M4IutxFCqVnuKVydqDwgI+BrDinZTmaLhQ7T3RA9BcYBMX0Emk7Fjx27w8fEp0Mj3UfP+HxMSEjYMHTqUZik7CHBez0AZDJmOQSaRnZ3dl/Hx8ZuRLe4NYCjdTU9Pf9fKyuo4BKD1DbGfn99qPQDlNYDyHWQaQTsc0tLS3kP2PY29ZQ19g7LU1NTFAOdbGDjT/Pz8jyDY2JdsU04BFGcCZd68eYvhc13TKozQtCJiqNKsrKxMNqzsSTBkz+F0HJborWQEUGhvbzFksMWUvDszM3ORqanpJa3jKy3qtkJzLmRkZKxwc3Nby/agkBN1HPSrXgCF3igWgj7AcJZ4enr+FUP8Pch0iaOD18nGOlDjazNnzvxo2rRpafBzriIrAPRf0FbQyB4AxJXTcSTnLMhfIBBcio2NTYWvQpuaruuqEa6Oxnh1dnZ27rhx48p3794dXVZWNgtBJ0Xj5AgeAP0TRFvUNN3lyQNFcDo2GUbSAyU3f/To0f+Ii4vbz7REp++/uDo0gLRd/TQAuvPkyZMjeXl5UZWVldHPnj37HfKJ6IxSESPaJEDa9VgJOyGI1mh9QJMZtZ+Ooyh5xIgR+6ChXyMopKXXHnl9rPMTbkx77iUlJV0FKLlHjhzxgQYFPnr0yBdB6Ju45U1Zvwh0n13JaNPhrcGcX85ISmfBJ5gBD0FDCsPCws5ixrmB7Gq01arJmciXAgwDh+KS/0HoqoiIiEugbwDS0JMnT46BFo2GRjmIxWJRU1PTYIBlgxllOBlMGHAxQHhKK/mwV1WY+W6MGjXq4sSJE6/DwNYy7Xis6oGwlwpMN0+MOvCICJ29EhwcfI5mek7HmUl6kWfKZJDK0cyI9vrR7tCnbLg9VaPNngVGjWPDKsdanF+O8+l9Mub0pT5g+oDpA6YPmD5g+oDpA6YPmFcqST3fEhDtAveGu31TzgOOxWUPaDrK9srkUwS8hJE0HQXtZWsxXSUpT0VpDbHvou4NJuscmXbGsz50l6xkIvpOPujXVoXAIFrlNzc3CxHE0W6AcbI3ILQf2NDQ0H6VAcUJ9x5FwFfj6ek5PyYmpn2BaO3atZGIov/OGlTaOSlPJyen1ampqZ0beXJzc51LS0v/gMCSDnd4K6hK+U4mJibX6dUr7tvKYidqf4r0pvXr10+vq6ub5e3t3SmbNJpnoc5zfBQ9yM5YiXYz0ilZVFyChtZ0BTsBiKDw0apVqzLwtxx1GpiA5Tk5Oa1VVVWkRTe705wHDx7Q10IKZILDUzwer6a4uHg7ZMmWBxcP8B1E4jVWVlZ5tbW1S9gDuMna7+QjEAiC6FpRUXERZSde6LQcH3rQ8iOl08ZAoPOEIDq9jA0TZcFlKph62dnZ0SdJSqSgsLLK9PT0daampqUAOl2D5YqGyMjIQ3w+vwj14+XLoSG/NTMzKxEKhf9i6zTxmtgPVfgYy9z8bMKECXTC3Rj0qTKm0BR/0i4MgS+VdK4KwNAuLDf2RNUFR4z2ScWHydWPxQOxoM4kJiaWEvj4P1sDXFTi89ysRE/L2tr6C/qgBTO6ipINEG7/glAXQ62Mrnjytpo8UdR/IF+f1J9s2ty5c/cTeAz84czwqj7bKOGD3+O7mq7FWVlZ77MhtU7RkCKNAnBd7hyQSCTt324BH40WwiBoi1x9Ie26NDc3/xYytT8QLy+vbaS56OjbarBWmY8iP6bSwcEhB52nl+Nr5Qtp5yMEt+sGGAdmt+o1tAGWsvUheBqpf319fTxb8Go7duxYKeQQgKJVdtrU4KPQwUtJSdmJKfUQmKQ0Nja6y5YB7WI68wPEQ7oAJoC0bsGCBRq950F9D1J3aX08oLeIH2aOKbJkb2+/kdmiWBWHaJd8ZM2HMlV/OGnSpL/k5+d7QcjnPhiRmZm5a+XKleRrvMscuhd8DfhErw8ZMmSNhh/uckJ9P9i63az+eLQ11tLS8mPZqZ1N75eXL18+C5rwDurs7YavQj60foyZtJMPc1CVhwQApgRT8hZSPbmie2z2GokGjsgZP/ItjsA/2AMAczSZMZiPVLFw4cI1zM5EkA1YvHjxB4pmQBjoQrbrW9gV4674IHXykdrVrmIlCSz3VlR4YYs5zV6rV6+Ox7C6y1zx9vEKAxZFaonGV6ryvSp4v1uldTkdr08+pZdocBznkE/E7E0yCS39/4I1FQppk5AF2Y9u7JZafIzYoS/6lhy9SbygoI4HyJaVye83kX5ItHMIsnu6A8WW8X3hYbC65TJ5/ozvZSW8rFn4QHWknXZkstEOjAZN+Bj17Mk+w03/F2AAHZMD17Q4OMAAAAAASUVORK5CYII=","no-data-dark.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABPCAYAAABWIbNMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUI0RTA2RDZFNTYzMTFFMkJDOTdGRTQ2M0VGMEIxOEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUI0RTA2RDdFNTYzMTFFMkJDOTdGRTQ2M0VGMEIxOEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1QjRFMDZENEU1NjMxMUUyQkM5N0ZFNDYzRUYwQjE4QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1QjRFMDZENUU1NjMxMUUyQkM5N0ZFNDYzRUYwQjE4QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjyBbi0AAAvnSURBVHja7JwLUFTnFcdZ2EVYEQNxMkgEI9MoaoVQpdakom0hE6t2nFocFRrHlqSatlOLio+pjDOZjCYkdmKiE9vRacahoyMdH4wYsE2iIdIWEIurRV4LldfyXJ7Lm/7Pci69ud1d7t59Ycs3c+Yu997vfOf+7vnO97yoxsbGvCwllUrlJSdZy28hqSHfgKyGREEWQhZAAiAz+Z4elmpIBaQUchtSAhlxxE57bVa5GIwG8n3INsg6SKD44tDQUBekd3BwsI/K02g0WshMSKBETyfkOiQTkiuG9KSBIS9IgaRCwhhCZ319/b1Hjx7pbt++/ejGjRsNJSUlHbg0TJepSPYqdUxMTND69etDV69eHYm0bO7cudEiWDWQE5CzkD5XgTHfZEnsKUQkasgbkBbI2Ojo6FB1dfVnp0+f/k1wcHACbo+GhLPnqG2UTYBm870vzJ49O+HkyZOH9Xr959A5PDaeGiA7ISolYCYTZ4L5OqSILB4ZGRkqLS29smXLlmSOJ3ME71Qi7E1PE9ikpKQdOp3uGpXBgO5AlkxVMLsh/WRlXV3d33fu3LkDlyIh/kph2LDLH7KYymhsbCxiOH2Qn0wZMLjPB/IBWTY8PNyfnZ39Prc8WmcDsWAfBerY3NzcU/CeAQb0rpyq5VIwuMcXcoms6e3tbdyzZw8F23muBmLBzvC0tLRdfX19zQwnk2zzCBjyFATBLLLCaDRWbty4cRO1RO6GIrJz1q5du5Ko6ecYl2nLc1wJ5jRD0a9cufJlnJrhCSiCnThqAeXPZJMAB+mYW8FwoB3r6empT0xM/IGtZtdNooX35pFNCMbFW7du3Y5q1cJwktwCBueXwYgBCrT79+9/1ZOeYgnK0qVLv02t1pEjR1JQnQZxrRuXnncpGJzzhpveJSNycnJ+y73bqQbFh80NzMvL+5Bby3xpvHEqGBTwGhtRRK2PPYW4GYo5+fn5zTcYDPe4Su1wCRj8PQuu2UrueejQoR/ZW4i7oQjp6NGjW2kIAbsNuN3f6WBQhQ6TIQ8ePLgsmiLwBBjZUITBbFlZ2XW6HyP4N5wKBr81qEYGIr9v377vKglkHoJiTunp6euQbxRg9BQnnQYGUDaRMVVVVZ9S1fUQGItQZA5dtLW1tfncx/me08Cgu3+FlGIc9HOlfQJXQZE7prt+/Xoq973OOwUMza8gcPUMDAx0xsTEhHoAjE0ocsHExcWFwVt64P0dVJ0cBoN6uZKMqqmpuclzIu4EMykUO6ZHvOvq6r7kIBwtp3xvW9rgevF0bG5uLiAGXu5LNG1xRaVSJTQ1Nd2Nj4//FVrEAhofKtQ3imf4K/3AcCFBFslJBovL6Yg39rcnGIo5QVcBNyYxDoPx9fWNoGNlZWXpkwyFX+5987KFRrPQoWk+jjFtFHh5ctrLxTFGVkxROgVLA14a/JpMpnqHgy8UmdBc1zs6G+YqKHaC8QKUZlrLcggMjUjJ0K6urkoXg1EMxV4waExqaUnHKWC6u7srXAjGISj2goH31/Cyi+NVCc2bq6qSw1CUVCXEzS6HwSDwtkFRhwvAOAWKvWDgLRQzGxwG09bWpuOJngAngnEaFDsXBkOozJaWlmKHe76oRv/i4+Kp3k+ZLOElLxHijMMdvPb29gd07O/vf/FJhsK7N16io9FofOgwGPR4vzBvPVCrv/MkQ+FnWENHnU73hcM9X9T/YFrA4uG6RmGMcWpMUbjG7odnME+fBAcHBzpjokpVXV2dx8sQGxSAcSkUuWBgeyLZUF5enu20GbyrV6/u4oX7q3aCcTkUuWBgey7ZcfHixR1OA4MHCkGrZOCdTAtkgnELFJm7MhZSLMNwoC40NHSOM5dPVPn5+eZFfLROH8kA4zYocsAgrnxMtty8efMdYRbSaetK69atW4ICOngAFmkDjFuhyNiV8QLsGaFF/tjY2AhXLNH65ObmnuAliE+tgHE7lEl2Zahgq3me9/Lly2+KuyZOXbsOCQl5Dr3HRzxE+KmkEI9AmQSMecmkubn5vlarDXXlNhDVwYMHt6HpGwAE2gwYJWza8RQUG9tVVtDiIy2Z7N69e5M7Ng4FZGdnv8t7eOto74knoVjZrjIfo+h6bp7f5F2ebtlq9uy9e/eyGE6XJ6FY2JXxDGyqJJuKi4svUARw6x48X1/fyKqqqr9wMO5LS0v7oSegSDYfPAco5dzD/WTGjBmLPLKdNTw8fDkt9LPnPMYh2lNgOKY0ClCCgoKiPLkB2luj0USLqhUF5J/xXLG7wFBZe2nllWwoLCz8I7x5mbXlZLdumUdadOnSpbfRWgnbSD+DLHUDlBjILWELa2Zm5luw5fkp9S0BUmhKSsqrra2tDxkO9ZB/B/maC4AsgpzlMsYMBkNpcnJykrVA6/GvT3hv/7eysrIyTCZTGwMagfwJQpuPHNn66gfZDLnKOseom3/hwoVjKPOblprkqfRZzoT3hIWFvZyTk/MBRrQNY/9JNNlFm5B+DXkREmTDMLr2EsePa5BOQQmNkuljDoyUaSfGXCWzeR4Bw3lpXBIWEBCw5r333jtQVlb2Ca/nSBNtUK6GlELu8+8e6U3Ia6RNhhkZGfv9/PzW8HZab3uXT+wB49JvIlXjSoLozc6cOXNuamrqkri4uMXwqPloUkMB7hm0IgE+Pj5aUkXrPoDQi2qCYVlbXW1tbRU8r/TUqVMVtEGSNi1AyPPG7LVTrs0Teh0FY89Evdf4J39P8a5yLccGtWg3xTBLP028QboJBB+dlhwC8/+evKcRTIOZBjMNZhrMNJhpMNNgpsH8b4Kh7xzbIRE0FBALUqLX+HcEiZLzNAY6ztcEoY8xXpdRbqIkn1iOT5K3iu8Tl7Pchj6xBFnSY+GZx8H09/fT53w01M+SWtHQ0PCU+MhjjQiaiEe+1efOnfsllL1Cotfry3D5zGQPJ+i6devWW0JeEtKFQeQGflGWEk01RGCQWYH7kkXjugqxnocPH56j82LbWHps6fmvAZXJZPonRq/dPMo/IL5eX19v/nqWjsK50dHRu52dnWT8ChoYiqYbFhQWFr7Pel63NqQX65RMVwSeOHFiM2yhKYrj0nyw8+OBgYEGnU53nMuIsKTfYDC8TRcxOo+zdN2SHimTiRhjNBqLiSBOHqKJIhsjU3K9mJKSEnor9G9KukTX9LGxsRnQVYKH+4WCUW9XampqTktLyy3k3y697uvru6m9vb2opqbmGv2Nt71dSfyQo2cCjEajGTxz5swheIM35PfWlPb29sbRV29r1669aOXh6jo6Or5Uq9U0Wx+hAI4J+iuQP0ySP9Hb2zuQHmbDhg0lBN/Hx+c1BVxk6flKq0Rvq7Ky8gIy0vxqohXD55Ab4mebtZIBlmKNV2tra4iSN4oyWqX5UeaP8WYbV61adZngEXw8UDgHXtnJmh7h2yxrzbUpMjLyGFUpPFyGpSpFHoU0aqtwf3//QTpCj1oJGHjLiCR/EDx6TVNTEy3NmF/I+fPnz5LnogFItkO1bD2W+jH6O3fufIiHnw8I70gvUmCE8mdtla7VaufTEQHaqAQM9M8W50eZu8n9w8PDtwtNb3p6OlWBAEDcLFevPXosdvASEhIy0aTmQElKYGBglKSpvQNFs0A83poBfn5+a8nroqKiKpSAgcdFk7sL+VHWNtInaXpfKSoqOsmxKFFmFbWp5yvhQ2iu8XbyxEr27t27imIJ3KxT0lyHIACXDw0NfS7kl0g83c9NoV3NNUsElVleXv4R/72cP4g/ZWE1Yh51M1ANrslori3q4TShZ2JO2BoY8mhUqXRhCUPcj6G+Bt4o7Y+5yQUKBR2ge6urq6nFmqcATCL3kYqpT0Tn8IbTyWjhb6k0NjZm88sLsgXGmh4hSfXYAmP2jubm5ttSMF7js/txqFZ/EK//QE8+dfBwbaGtNRsBjDQBivHx48f0Nf0K4V48TC0ZbU1XQUFBCq9fH7YFxpoeIUn1mFcJUM9WUSMA+YcFOPTfDkP4WpPkmvCPRIXUxvfUTVLdQ1ivNA1x3nLRuTjW+8CKrqe5B0559HxuAdtGnxR32auHOqrTyydW0r8FGADOGvuNcLn3BwAAAABJRU5ErkJggg=="},Piechart_images_back="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAA1CAYAAADRarJRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgFJREFUeNrUmc8rBGEYx9/dUbTkoIhCcXSQLUV74szRH6C9uConJy9HZwdylisnjsuNxE2ituS0tChx8eP1fXmnpm1mza/X7vepT00708znfd/Z533fZ4RIP1YEaWhxxSyumMUVs7hiFlfM4opZXDGLK2ZxxSyumMUVs/i/yWdCiMuY99aNeDbHL+AePIAKuAHX4BJcga9m6PE46AYegCUwzCTuxymYB21s4l7uQBFk2cS9HIMhRnGXKigwiru8gglGcRedbvtd8WyIXN9M0Q22an+URL2vmdbSjpEvmRGYIhmBHrDDOgLv+hVyauRZRkD/Vy8cnxMsDSg7AScYGlBx6pxM0oAn8AFaLcpXW/64QMYsnnZ5jjvBABgEo2DS0JtQ3gl7YdQsFCbyYN1sUOJknFKUlkphZxvYZjYijxHl96MOlRT29rB94DCC/Each0hhbwPumLVLGPnFuA+Rwl71QGe43RDyidK4tFj6yJnqQtD9dRruSPoQabFuM1tH/iStyUJaks+Ymo6f/Fqas520VDFbDpAfT3u6lhbkCz7iZVvrDZmyfM5HftXmak+mfD/vzPsZpobTVOt2j/yeIIvbtCamRoT72pyxibd7en2OTT5vxM/JimM/UTTyM4IwtsGRIA397WqMUXwEbLL2+kJNFSJ++aAB8SZ+v0sFxrcAAwAU8YKsEeepXgAAAABJRU5ErkJggg==",Base_Random;Base_Random=function(){function t(t){this.seed=t,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,this.R=this.M%this.A,this.oneOverM=1/this.M}return t.prototype.get=function(){var t,e,i;return t=this.seed/this.Q,e=this.seed%this.Q,i=this.A*e-this.R*t,this.seed=i>0?i:i+this.M,this.seed*this.oneOverM},t.prototype.getArrayIndex=function(t){return t[Math.floor(t.length*this.get())]},t}();var RadialLayout;RadialLayout=function(){function t(){}return t.prototype.setParams=function(t,e,i,n,s){return this.cx=t,this.xy=e,this.spacing=i,this.startAngle=n,this.endAngle=s,1},t.prototype.getMainLinks=function(t){var e,i,n,s,o,r,a,l,h,c,u;for(this.visitedNodes={},this.visitedNodes[t.id]=!0,o={},e=1,s=[t];s.length>0;){for(r=[],a=0,h=s.length;h>a;a++)for(n=s[a],u=this.getSublinks(n),l=0,c=u.length;c>l;l++)i=u[l],o[i.id]=!0,r.push(i.otherEnd(n));s=r,e+=1}return o},t.prototype.layoutGraph=function(t){return this.visitedNodes={},this.visitedNodes[t.id]=!0,this.subnodes={},this.radiuses=[],this.minAngle={},this.computeMaxRadius(t),this.placeNodeRec(t,0,this.startAngle,this.endAngle-this.startAngle)},t.prototype.getSubnodes=function(t){var e,i,n,s,o,r,a;if(e=t.id,this.subnodes[e])return this.subnodes[e];for(s=[],a=t.links,o=0,r=a.length;r>o;o++)i=a[o],n=i.otherEnd(t),this.visitedNodes.hasOwnProperty(n.id)||(s.push(n),this.visitedNodes[n.id]=!0);return this.subnodes[e]=s,s},t.prototype.getSublinks=function(t){var e,i,n,s,o,r;for(n=[],r=t.links,s=0,o=r.length;o>s;s++)e=r[s],e.removed||(i=e.otherEnd(t),this.visitedNodes.hasOwnProperty(i.id)||(n.push(e),this.visitedNodes[i.id]=!0));return n},t.prototype.getNodeSize=function(t){return Math.max(t.bRight-t.bLeft,t.bBottom-t.bTop)*t.visibility},t.prototype.computeMaxRadius=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y;for(l=this.spacing,r=0,this.radiuses[0]=r,e=1,o=[t],y=[];o.length>0;){for(i=0,n=0,u=[],d=0,f=o.length;f>d;d++)for(t=o[d],s=this.getNodeSize(t),g=this.getSubnodes(t),p=0,m=g.length;m>p;p++)c=g[p],h=this.getNodeSize(c),i=Math.max(i,h+s),n+=l+h,u.push(c);a=Math.max(r+.5*i+l,n/(2*Math.PI)),this.radiuses[e]=a,r=a,o=u,y.push(e+=1)}return y},t.prototype.computeMinAngle=function(t,e){var i,n,s,o,r,a,l,h,c,u;if(i=t.id,this.minAngle.hasOwnProperty(i))return this.minAngle[i];for(r=this.spacing,s=this.radiuses[e],o=this.getNodeSize(t),n=(o+r)/s,a=0,u=this.getSubnodes(t),h=0,c=u.length;c>h;h++)l=u[h],a+=this.computeMinAngle(l,e+1);return n=Math.max(n,a),this.minAngle[i]=n,n},t.prototype.placeNodeRec=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g;if(r=i+.5*n,a=this.radiuses[e],t.x=this.cx+a*Math.cos(r),t.y=this.cx+a*Math.sin(r),c=this.getSubnodes(t),c.length>0){for(u=0,d=0,f=c.length;f>d;d++)h=c[d],u+=this.computeMinAngle(h,e+1);for(l=n/u,s=i,g=[],p=0,m=c.length;m>p;p++)h=c[p],o=this.computeMinAngle(h,e+1)*l,this.placeNodeRec(h,e+1,s,o),g.push(s+=o);return g}},t}();var Base_Data,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Base_Data=function(){function t(t,e){this.chart=t,this.dataSettings=e,this._runRequests=__bind(this._runRequests,this),this.settings=t.settings,this.removed=!1,this.requestScheduled=!1,this.cleanupScheduled=!1,this.requestsRunning=!1,this.requests=[],this.CS=String.fromCharCode(63743)}return t.settings={id:"default",url:null,urlParameters:[],postprocessorFunction:null,preloaded:null,format:"JSON",requestTimeout:4e4,numberOfParallelRequests:3},t.prototype.buildRequest=function(){return 1},t.prototype.dataFunc=function(){return 1},t.prototype.verifyData=function(){return 1},t.prototype.addVerifiedData=function(){return{}},t.prototype.requestTimeout=function(){return 1},t.prototype.requestFailedPermanently=function(){return 1},t.prototype.removeData=function(){return 1},t.prototype.exportData=function(){return 1},t.prototype.remove=function(){return this.removed=!0},t.prototype.hasPendingRequests=function(){return this.requests.length>0},t.prototype.addData=function(t){return this._dataArrived(null,t)},t.prototype.hasDataFunc=function(){return this.dataSettings.dataFunction||this.dataSettings.url},t.prototype.applyPreloadedData=function(){return this.dataSettings.preloaded?this._dataArrived(null,this.dataSettings.preloaded):void 0},t.prototype.scheduleRequests=function(){return this.requestScheduled?void 0:(this.requestScheduled=!0,setTimeout(this._runRequests,0))},t.prototype._runRequests=function(){var t,e,i,n,s,o,r;if(!this.removed&&!this.requestsRunning){if(this.requestScheduled=!1,i=(new Date).getTime(),n=this.dataSettings.requestTimeout,this.cleanupScheduled){for(this.cleanupScheduled=!1,e=[],r=this.requests,s=0,o=r.length;o>s;s++)t=r[s],t.time+n>i?e.push(t):(this.requestTimeout(t),0!==t.time&&this.chart.error("Data request timed out, timeout "+n+" ms"));this.requests=e}for(this.requestsRunning=!0;this.requests.length<this.dataSettings.numberOfParallelRequests&&(t=this.buildRequest());)!function(e){return function(){var n,s,o,r,a;r=t,r.time=i,o=function(t){return e._dataArrived(r,t)},s=function(){return e._dataError(r)},e.requests.push(r),e.chart.log("Requesting data for",r);try{a=e.dataFunc(r,o,s)}catch(l){throw n=l,e.requestsRunning=!1,n}return a?a!==!0?e._dataArrived(r,a):void 0:Base_Helpers.removeFromArray(e.requests,r)}}(this)();return this.requestsRunning=!1,this.requests.length>0&&!this.cleanupScheduled?(this.cleanupScheduled=!0,setTimeout(this._runRequests,n)):void 0}},t.prototype._dataError=function(t){return this.removed?void 0:(this.chart.error("Data request failed for nodes: "+t.nodes),t.time=0,this.cleanupScheduled=!0,this._runRequests())},t.prototype._dataArrived=function(t,e){var i,n,s;if(!this.removed)return this.chart.log("Data arrived for request",t),t&&Base_Helpers.removeFromArray(this.requests,t),e?(s=Base_Helpers.parseData(e,this.dataSettings.format,this.chart),null!=s.error&&this.chart.error(s.error),i=this.verifyData(t,s)):(i=!1,this.chart.error("Got empty response")),i?(n=this.addVerifiedData(t,s),n.dataArrived={},n.dataArrived[this.dataSettings.id]=!0,this.chart.events.notifySceneChanges(n)):this.requestFailedPermanently(t),this._runRequests()},t.doRequest=function(t,e,i,n,s){var o,r,a,l,h;for(h=e.urlParameters,a=0,l=h.length;l>a;a++)o=h[a],i.push([o.name,o.value]);return r=e.postprocessorFunction?function(t){return n(e.postprocessorFunction(t))}:n,Base_Helpers.doRequest(t,i,r,s)},t}();var moment=function(t){function e(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function i(t,e){return Ce.call(t,e)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function s(t){be.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function o(t,e){var i=!0;return f(function(){return i&&(s(t),i=!1),e.apply(this,arguments)},e)}function r(t,e){mi[t]||(s(e),mi[t]=!0)}function a(t,e){return function(i){return y(t.call(this,i),e)}}function l(t,e){return function(i){return this.localeData().ordinal(t.call(this,i),e)}}function h(t,e){var i,n,s=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(s,"months");return 0>e-o?(i=t.clone().add(s-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(s+1,"months"),n=(e-o)/(i-o)),-(s+n)}function c(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function u(){}function d(t,e){e!==!1&&I(t),m(this,t),this._d=new Date(+t._d),yi===!1&&(yi=!0,be.updateOffset(this),yi=!1)}function p(t){var e=P(t),i=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||0,r=e.day||0,a=e.hour||0,l=e.minute||0,h=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*h+6e4*l+36e5*a,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=be.localeData(),this._bubble()}function f(t,e){for(var n in e)i(e,n)&&(t[n]=e[n]);return i(e,"toString")&&(t.toString=e.toString),i(e,"valueOf")&&(t.valueOf=e.valueOf),t}function m(t,e){var i,n,s;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Ie.length>0)for(i in Ie)n=Ie[i],s=e[n],"undefined"!=typeof s&&(t[n]=s);return t}function g(t){return 0>t?Math.ceil(t):Math.floor(t)}function y(t,e,i){for(var n=""+Math.abs(t),s=t>=0;n.length<e;)n="0"+n;return(s?i?"+":"":"-")+n}function v(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function _(t,e){var i;return e=H(e,t),t.isBefore(e)?i=v(t,e):(i=v(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function b(t,e){return function(i,n){var s,o;return null===n||isNaN(+n)||(r(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,s=be.duration(i,n),x(this,s,t),this}}function x(t,e,i,n){var s=e._milliseconds,o=e._days,r=e._months;n=null==n?!0:n,s&&t._d.setTime(+t._d+s*i),o&&me(t,"Date",fe(t,"Date")+o*i),r&&pe(t,fe(t,"Month")+r*i),n&&be.updateOffset(t,o||r)}function S(t){return"[object Array]"===Object.prototype.toString.call(t)}function w(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function C(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),r=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&T(t[n])!==T(e[n]))&&r++;return r+o}function k(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=li[t]||hi[e]||e}return t}function P(t){var e,n,s={};for(n in t)i(t,n)&&(e=k(n),e&&(s[e]=t[n]));return s}function M(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}be[e]=function(s,o){var r,a,l=be._locale[e],h=[];if("number"==typeof s&&(o=s,s=t),a=function(t){var e=be().utc().set(n,t);return l.call(be._locale,e,s||"")},null!=o)return a(o);for(r=0;i>r;r++)h.push(a(r));return h}}function T(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function D(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function L(t,e,i){return he(be([t,11,31+e-i]),e,i).week}function B(t){return A(t)?366:365}function A(t){return t%4===0&&t%100!==0||t%400===0}function I(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Pe]<0||t._a[Pe]>11?Pe:t._a[Me]<1||t._a[Me]>D(t._a[ke],t._a[Pe])?Me:t._a[Te]<0||t._a[Te]>24||24===t._a[Te]&&(0!==t._a[De]||0!==t._a[Le]||0!==t._a[Be])?Te:t._a[De]<0||t._a[De]>59?De:t._a[Le]<0||t._a[Le]>59?Le:t._a[Be]<0||t._a[Be]>999?Be:-1,t._pf._overflowDayOfYear&&(ke>e||e>Me)&&(e=Me),t._pf.overflow=e)}function F(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function O(t){return t?t.toLowerCase().replace("_","-"):t}function E(t){for(var e,i,n,s,o=0;o<t.length;){for(s=O(t[o]).split("-"),e=s.length,i=O(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=N(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&C(s,i,!0)>=e-1)break;e--}o++}return null}function N(t){var e=null;if(!Ae[t]&&Fe)try{e=be.locale(),require("./locale/"+t),be.locale(e)}catch(i){}return Ae[t]}function H(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(be.isMoment(t)||w(t)?+t:+be(t))-+i,i._d.setTime(+i._d+n),be.updateOffset(i,!1),i):be(t).local()}function R(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function z(t){var e,i,n=t.match(He);for(e=0,i=n.length;i>e;e++)n[e]=fi[n[e]]?fi[n[e]]:R(n[e]);return function(s){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(s,t):n[e];return o}}function U(t,e){return t.isValid()?(e=j(e,t.localeData()),ci[e]||(ci[e]=z(e)),ci[e](t)):t.localeData().invalidDate()}function j(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Re.lastIndex=0;n>=0&&Re.test(t);)t=t.replace(Re,i),Re.lastIndex=0,n-=1;return t}function Y(t,e){var i,n=e._strict;switch(t){case"Q":return Je;case"DDDD":return Ke;case"YYYY":case"GGGG":case"gggg":return n?$e:je;case"Y":case"G":case"g":return ei;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ti:Ye;case"S":if(n)return Je;case"SS":if(n)return Qe;case"SSS":if(n)return Ke;case"DDD":return Ue;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ve;case"a":case"A":return e._locale._meridiemParse;case"x":return qe;case"X":return Xe;case"Z":case"ZZ":return Ge;case"T":return Ze;case"SSSS":return We;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Qe:ze;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return ze;case"Do":return n?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return i=new RegExp(K(Q(t.replace("\\","")),"i"))}}function W(t){t=t||"";var e=t.match(Ge)||[],i=e[e.length-1]||[],n=(i+"").match(ri)||["-",0,0],s=+(60*n[1])+T(n[2]);return"+"===n[0]?s:-s}function V(t,e,i){var n,s=i._a;switch(t){case"Q":null!=e&&(s[Pe]=3*(T(e)-1));break;case"M":case"MM":null!=e&&(s[Pe]=T(e)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(e,t,i._strict),null!=n?s[Pe]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[Me]=T(e));break;case"Do":null!=e&&(s[Me]=T(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=T(e));break;case"YY":s[ke]=be.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":s[ke]=T(e);break;case"a":case"A":i._meridiem=e;break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":s[Te]=T(e);break;case"m":case"mm":s[De]=T(e);break;case"s":case"ss":s[Le]=T(e);break;case"S":case"SS":case"SSS":case"SSSS":s[Be]=T(1e3*("0."+e));break;case"x":i._d=new Date(T(e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=W(e);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=T(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=be.parseTwoDigitYear(e)}}function G(t){var i,n,s,o,r,a,l;i=t._w,null!=i.GG||null!=i.W||null!=i.E?(r=1,a=4,n=e(i.GG,t._a[ke],he(be(),1,4).year),s=e(i.W,1),o=e(i.E,1)):(r=t._locale._week.dow,a=t._locale._week.doy,n=e(i.gg,t._a[ke],he(be(),r,a).year),s=e(i.w,1),null!=i.d?(o=i.d,r>o&&++s):o=null!=i.e?i.e+r:r),l=ce(n,s,o,a,r),t._a[ke]=l.year,t._dayOfYear=l.dayOfYear}function Z(t){var i,n,s,o,r=[];if(!t._d){for(s=X(t),t._w&&null==t._a[Me]&&null==t._a[Pe]&&G(t),t._dayOfYear&&(o=e(t._a[ke],s[ke]),t._dayOfYear>B(o)&&(t._pf._overflowDayOfYear=!0),n=oe(o,0,t._dayOfYear),t._a[Pe]=n.getUTCMonth(),t._a[Me]=n.getUTCDate()),i=0;3>i&&null==t._a[i];++i)t._a[i]=r[i]=s[i];for(;7>i;i++)t._a[i]=r[i]=null==t._a[i]?2===i?1:0:t._a[i];24===t._a[Te]&&0===t._a[De]&&0===t._a[Le]&&0===t._a[Be]&&(t._nextDay=!0,t._a[Te]=0),t._d=(t._useUTC?oe:se).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Te]=24)}}function q(t){var e;t._d||(e=P(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],Z(t))}function X(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function J(e){if(e._f===be.ISO_8601)return void te(e);e._a=[],e._pf.empty=!0;var i,n,s,o,r,a=""+e._i,l=a.length,h=0;for(s=j(e._f,e._locale).match(He)||[],i=0;i<s.length;i++)o=s[i],n=(a.match(Y(o,e))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&e._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),h+=n.length),fi[o]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(o),V(o,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(o);
e._pf.charsLeftOver=l-h,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[Te]<=12&&(e._pf.bigHour=t),e._a[Te]=c(e._locale,e._a[Te],e._meridiem),Z(e),I(e)}function Q(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})}function K(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(t){var e,i,s,o,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)r=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[o],J(e),F(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==s||s>r)&&(s=r,i=e));f(t,i||e)}function te(t){var e,i,n=t._i,s=ii.exec(n);if(s){for(t._pf.iso=!0,e=0,i=si.length;i>e;e++)if(si[e][1].exec(n)){t._f=si[e][0]+(s[6]||" ");break}for(e=0,i=oi.length;i>e;e++)if(oi[e][1].exec(n)){t._f+=oi[e][0];break}n.match(Ge)&&(t._f+="Z"),J(t)}else t._isValid=!1}function ee(t){te(t),t._isValid===!1&&(delete t._isValid,be.createFromInputFallback(t))}function ie(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function ne(e){var i,n=e._i;n===t?e._d=new Date:w(n)?e._d=new Date(+n):null!==(i=Oe.exec(n))?e._d=new Date(+i[1]):"string"==typeof n?ee(e):S(n)?(e._a=ie(n.slice(0),function(t){return parseInt(t,10)}),Z(e)):"object"==typeof n?q(e):"number"==typeof n?e._d=new Date(n):be.createFromInputFallback(e)}function se(t,e,i,n,s,o,r){var a=new Date(t,e,i,n,s,o,r);return 1970>t&&a.setFullYear(t),a}function oe(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function re(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function ae(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function le(t,e,i){var n=be.duration(t).abs(),s=we(n.as("s")),o=we(n.as("m")),r=we(n.as("h")),a=we(n.as("d")),l=we(n.as("M")),h=we(n.as("y")),c=s<ui.s&&["s",s]||1===o&&["m"]||o<ui.m&&["mm",o]||1===r&&["h"]||r<ui.h&&["hh",r]||1===a&&["d"]||a<ui.d&&["dd",a]||1===l&&["M"]||l<ui.M&&["MM",l]||1===h&&["y"]||["yy",h];return c[2]=e,c[3]=+t>0,c[4]=i,ae.apply({},c)}function he(t,e,i){var n,s=i-e,o=i-t.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=be(t).add(o,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ce(t,e,i,n,s){var o,r,a=oe(t,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:s,o=s-a+(a>n?7:0)-(s>a?7:0),r=7*(e-1)+(i-s)+o+1,{year:r>0?t:t-1,dayOfYear:r>0?r:B(t-1)+r}}function ue(e){var i,n=e._i,s=e._f;return e._locale=e._locale||be.localeData(e._l),null===n||s===t&&""===n?be.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),be.isMoment(n)?new d(n,!0):(s?S(s)?$(e):J(e):ne(e),i=new d(e),i._nextDay&&(i.add(1,"d"),i._nextDay=t),i))}function de(t,e){var i,n;if(1===e.length&&S(e[0])&&(e=e[0]),!e.length)return be();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function pe(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),D(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function fe(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function me(t,e,i){return"Month"===e?pe(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function ge(t,e){return function(i){return null!=i?(me(this,t,i),be.updateOffset(this,e),this):fe(this,t)}}function ye(t){return 400*t/146097}function ve(t){return 146097*t/400}function _e(t){be.duration.fn[t]=function(){return this._data[t]}}for(var be,xe,Se="2.9.0",we=("undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Math.round),Ce=Object.prototype.hasOwnProperty,ke=0,Pe=1,Me=2,Te=3,De=4,Le=5,Be=6,Ae={},Ie=[],Fe="undefined"!=typeof module&&module&&module.exports,Oe=/^\/?Date\((\-?\d+)/i,Ee=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ne=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,He=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Re=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ze=/\d\d?/,Ue=/\d{1,3}/,je=/\d{1,4}/,Ye=/[+\-]?\d{1,6}/,We=/\d+/,Ve=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ge=/Z|[\+\-]\d\d:?\d\d/gi,Ze=/T/i,qe=/[\+\-]?\d+/,Xe=/[\+\-]?\d+(\.\d{1,3})?/,Je=/\d/,Qe=/\d\d/,Ke=/\d{3}/,$e=/\d{4}/,ti=/[+-]?\d{6}/,ei=/[+-]?\d+/,ii=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ni="YYYY-MM-DDTHH:mm:ssZ",si=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],oi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ri=/([\+\-]|\d\d)/gi,ai=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),li={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hi={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ci={},ui={s:45,m:45,h:22,d:26,M:11},di="DDD w W M D d".split(" "),pi="M D H h m s w W".split(" "),fi={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return y(this.year()%100,2)},YYYY:function(){return y(this.year(),4)},YYYYY:function(){return y(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+y(Math.abs(t),6)},gg:function(){return y(this.weekYear()%100,2)},gggg:function(){return y(this.weekYear(),4)},ggggg:function(){return y(this.weekYear(),5)},GG:function(){return y(this.isoWeekYear()%100,2)},GGGG:function(){return y(this.isoWeekYear(),4)},GGGGG:function(){return y(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return y(T(this.milliseconds()/10),2)},SSS:function(){return y(this.milliseconds(),3)},SSSS:function(){return y(this.milliseconds(),3)},Z:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+y(T(t/60),2)+":"+y(T(t)%60,2)},ZZ:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+y(T(t/60),2)+y(T(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},mi={},gi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],yi=!1;di.length;)xe=di.pop(),fi[xe+"o"]=l(fi[xe],xe);for(;pi.length;)xe=pi.pop(),fi[xe+xe]=a(fi[xe],2);fi.DDDD=a(fi.DDD,3),f(u.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,i){var n,s,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(s=be.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=be([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.apply(e,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return he(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),be=function(e,i,s,o){var r;return"boolean"==typeof s&&(o=s,s=t),r={},r._isAMomentObject=!0,r._i=e,r._f=i,r._l=s,r._strict=o,r._isUTC=!1,r._pf=n(),ue(r)},be.suppressDeprecationWarnings=!1,be.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),be.min=function(){var t=[].slice.call(arguments,0);return de("isBefore",t)},be.max=function(){var t=[].slice.call(arguments,0);return de("isAfter",t)},be.utc=function(e,i,s,o){var r;return"boolean"==typeof s&&(o=s,s=t),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=s,r._i=e,r._f=i,r._strict=o,r._pf=n(),ue(r).utc()},be.unix=function(t){return be(1e3*t)},be.duration=function(t,e){var n,s,o,r,a=t,l=null;return be.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(l=Ee.exec(t))?(n="-"===l[1]?-1:1,a={y:0,d:T(l[Me])*n,h:T(l[Te])*n,m:T(l[De])*n,s:T(l[Le])*n,ms:T(l[Be])*n}):(l=Ne.exec(t))?(n="-"===l[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},a={y:o(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=_(be(a.from),be(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),s=new p(a),be.isDuration(t)&&i(t,"_locale")&&(s._locale=t._locale),s},be.version=Se,be.defaultFormat=ni,be.ISO_8601=function(){},be.momentProperties=Ie,be.updateOffset=function(){},be.relativeTimeThreshold=function(e,i){return ui[e]===t?!1:i===t?ui[e]:(ui[e]=i,!0)},be.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return be.locale(t,e)}),be.locale=function(t,e){var i;return t&&(i="undefined"!=typeof e?be.defineLocale(t,e):be.localeData(t),i&&(be.duration._locale=be._locale=i)),be._locale._abbr},be.defineLocale=function(t,e){return null!==e?(e.abbr=t,Ae[t]||(Ae[t]=new u),Ae[t].set(e),be.locale(t),Ae[t]):(delete Ae[t],null)},be.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(t){return be.localeData(t)}),be.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return be._locale;if(!S(t)){if(e=N(t))return e;t=[t]}return E(t)},be.isMoment=function(t){return t instanceof d||null!=t&&i(t,"_isAMomentObject")},be.isDuration=function(t){return t instanceof p};for(xe=gi.length-1;xe>=0;--xe)M(gi[xe]);be.normalizeUnits=function(t){return k(t)},be.invalid=function(t){var e=be.utc(0/0);return null!=t?f(e._pf,t):e._pf.userInvalidated=!0,e},be.parseZone=function(){return be.apply(null,arguments).parseZone()},be.parseTwoDigitYear=function(t){return T(t)+(T(t)>68?1900:2e3)},be.isDate=w,f(be.fn=d.prototype,{clone:function(){return be(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=be(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():U(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&C(this._a,(this._isUTC?be.utc(this._a):be(this._a)).toArray())>0:!1},parsingFlags:function(){return f({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.utcOffset(0,t)},local:function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(t){var e=U(this,t||be.defaultFormat);return this.localeData().postformat(e)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(t,e,i){var n,s,o=H(t,this),r=6e4*(o.utcOffset()-this.utcOffset());return e=k(e),"year"===e||"month"===e||"quarter"===e?(s=h(this,o),"quarter"===e?s/=3:"year"===e&&(s/=12)):(n=this-o,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-r)/864e5:"week"===e?(n-r)/6048e5:n),i?s:g(s)},from:function(t,e){return be.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(be(),t)},calendar:function(t){var e=t||be(),i=H(e,this).startOf("day"),n=this.diff(i,"days",!0),s=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this,be(e)))},isLeapYear:function(){return A(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=re(t,this.localeData()),this.add(t-e,"d")):e},month:ge("Month",!0),startOf:function(t){switch(t=k(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=k(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){var i;return e=k("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this>+t):(i=be.isMoment(t)?+t:+be(t),i<+this.clone().startOf(e))},isBefore:function(t,e){var i;return e=k("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+t>+this):(i=be.isMoment(t)?+t:+be(t),+this.clone().endOf(e)<i)},isBetween:function(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)},isSame:function(t,e){var i;return e=k(e||"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this===+t):(i=+be(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),this>t?this:t}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),t>this?this:t}),zone:o("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),utcOffset:function(t,e){var i,n=this._offset||0;return null!=t?("string"==typeof t&&(t=W(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=this._dateUtcOffset()),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==t&&(!e||this._changeInProgress?x(this,be.duration(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,be.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(W(this._i)),this},hasAlignedHourOffset:function(t){return t=t?be(t).utcOffset():0,(this.utcOffset()-t)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(t){var e=we((be(this).startOf("day")-be(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=he(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=he(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=he(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return L(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return L(this.year(),t.dow,t.doy)},get:function(t){return t=k(t),this[t]()},set:function(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else t=k(t),"function"==typeof this[t]&&this[t](e);return this},locale:function(e){var i;return e===t?this._locale._abbr:(i=be.localeData(e),null!=i&&(this._locale=i),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),be.fn.millisecond=be.fn.milliseconds=ge("Milliseconds",!1),be.fn.second=be.fn.seconds=ge("Seconds",!1),be.fn.minute=be.fn.minutes=ge("Minutes",!1),be.fn.hour=be.fn.hours=ge("Hours",!0),be.fn.date=ge("Date",!0),be.fn.dates=o("dates accessor is deprecated. Use date instead.",ge("Date",!0)),be.fn.year=ge("FullYear",!0),be.fn.years=o("years accessor is deprecated. Use year instead.",ge("FullYear",!0)),be.fn.days=be.fn.day,be.fn.months=be.fn.month,be.fn.weeks=be.fn.week,be.fn.isoWeeks=be.fn.isoWeek,be.fn.quarters=be.fn.quarter,be.fn.toJSON=be.fn.toISOString,be.fn.isUTC=be.fn.isUtc,f(be.duration.fn=p.prototype,{_bubble:function(){var t,e,i,n=this._milliseconds,s=this._days,o=this._months,r=this._data,a=0;r.milliseconds=n%1e3,t=g(n/1e3),r.seconds=t%60,e=g(t/60),r.minutes=e%60,i=g(e/60),r.hours=i%24,s+=g(i/24),a=g(ye(s)),s-=g(ve(a)),o+=g(s/30),s%=30,a+=g(o/12),o%=12,r.days=s,r.months=o,r.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(t){var e=le(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var i=be.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=be.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=k(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,i;if(t=k(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,i=this._months+12*ye(e),"month"===t?i:i/12;switch(e=this._days+Math.round(ve(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:be.fn.lang,locale:be.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||s||o?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),be.duration.fn.toString=be.duration.fn.toISOString;for(xe in ai)i(ai,xe)&&_e(xe.toLowerCase());return be.duration.fn.asMilliseconds=function(){return this.as("ms")},be.duration.fn.asSeconds=function(){return this.as("s")},be.duration.fn.asMinutes=function(){return this.as("m")},be.duration.fn.asHours=function(){return this.as("h")},be.duration.fn.asDays=function(){return this.as("d")},be.duration.fn.asWeeks=function(){return this.as("weeks")},be.duration.fn.asMonths=function(){return this.as("M")},be.duration.fn.asYears=function(){return this.as("y")},be.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===T(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),be}.call(),Linearchart_DataLimitRenderer;Linearchart_DataLimitRenderer=function(){"use strict";function t(t){this.r=t,this.scene=t.scene}return t.prototype.paint=function(t,e,i){},t.prototype.paintFancyRect=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m,g,y;if(!(n>=i||e>=s)&&(m=Math.max(n,e),g=Math.min(s,i),t.beginPath(),t.rect(m,o,g-m,r),Base_Graphics.paint(t,a),null!=a.image&&(h=this.r.getImage(a.image),null!=h)))if(c=h.width,l=h.height,f=(m+g)/2,y=o+(r-l)/2,p=c/2+2,f+p-2>s){if(f=s-c-2,d=m-f,(c-d|0)>0&&(0|c)>(0|d))return t.drawImage(h,0|d,0,c-d|0,l,f+d|0,0|y,c-d|0,0|l)}else{if(!(n>f-p))return t.drawImage(h,f-c/2|0,0|y);if(f=n+2,u=Math.min(g-f,c),(0|u)>0)return t.drawImage(h,0,0,0|u,l,0|f,0|y,0|u,0|l)}},t}();var Base_images_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAAkCAYAAACkCKB2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFbxJREFUeNrsXQt4FFWWPp2k0yEPHgKB8BaQlzwEwgwP37LKMrwcHUQcmRnHDYzuuLPKqviBozI64Koz6qoQ0XHcHWARR8URGQmgO6IYExCIMPIOCEh4JyGvTrrn/tXndm5XV3VXd7qTdq3/+87X1VW3bt261fXfc/977m2H1+slGzZsRI7cfIddCTbihqI8LyXZ1WDDRpPwz8KOCfPaZlsM7Bj/pjTYBG3DRtPwirAcuxpsxAg5/JvSkGLXh40WlQlyc1u2G1lUhDL8iLffiPKFsmEj1iRtTNCO/OLvbrUkOynt1GEa9OZCSmpwk9cRcQfjamGv8/ZqYfd+l6oPZNcCyBOW38Q8FvHnGzY32EgkJJIHfRkcKmGXCksXdljYNmGFwk59S+ozQ1h33u6c4GVFOSfyNnSvd7+Fv98HmFzbCVtsv842bIKOPX4gbJ6wsXDgDY4fF7ZC2CPCKhK8Pj3Kdn2Cl3WosCW8/XkLEvRI/oym69bbfoVt2AQdP4B050NcCJEmh6UCEPgdwnbbjy0mUBuQqhYsRx5/zo7i3MW2NGHDJuj4AF7zr5Xvu4S9Qz5JA55yJ2FXCZvK26PZy7tc2Df2o/t/A8gTZ6M890CUxG7DxrcCLRVmN1nYE8p3bEN/fkjY28I2CFvOL18uEzfQR9h/h/G4EwWJPgOo0sSbbm6MtF9DGzase9AIkv6eRYKBZrxO2Gdh0rXi/Gr4+wLl2OPkkznM8LUwhEGtFTaebZKwreTTrzGo2ENYlrAGTl/IBH9eWJqwa4R9X1hfYdl83zi2m/P92AKJYEBtEHt8uM5JYXuFbebz6w3qBufdIKy/sI68/xjX159CSAud+LyhfG+t+ZroOewgX4TI0TBlRmM2TthAYd2EXcR1gm0X14WadgE1jgHgWkspcHAWvZkJfC8Z3Mv5SthGblAjRm5u7nje7K1IHQXsGRM/d2wX87ZMn8/7evM+9RwJ+Vtpp3jb+U3w1mOO7LR+NGvw/dQ5qxtV1pZT4dGPaG3pC9qx2UOepqU77zM8z+zYoLbX0sS+M7X8vqn4mtbuW067zm3U9g/LHkcr9iwMm8+4TjNocPYow+uqadWy41qvlzxJZTV7Qt7vrf0W0PayzVqZQu3H99auttp2ee052nD4f03zRtr+HYZQpqt1wD2rx63kZVZH2H9F9x/4vyMPfRqjdEZ1Fg0c+qnejvziV8XHzyLIAyPpT+r29WSiBzFeIqwN+QbQTpNv0G8Ke+87mDhrLFwH5LiFibhMmFN5+Yywh8lzLJOKGTxMRg9RsvOcLsyuEzcgs/h6ZnhG2H18z2vlsyRfNIqZjIQIlblMcPq6+0RYlxDXQ+PwNNe7V1dHN3I5LmMiVYFBwTkWn+sQYSWcx9NhpIS/gECLiopqIiDnPK73IP6hxrC5/Uy+xZz2AD/zf+J9Mg/1HPmbXMRkfFZpBA5wj8xP0hwHvZ+3+0TUwPimekfVU8IL/czEFXSy8hs6UXHc1ypn5dDta4Zpx16fvoFmrbouiMzMjk3seTc9eM1i2nV8O1XWVVBmapYgrKP0yCfTNSK+cciPacLyTv70c3OX0bAuo7TrqcD+8f0ma9vpqRlUVXfBf2zWn6/QyE1fdpS7Y2ZnunftrUHlVbFu5gl6a+f/BJGWfj++y7wH5wzXyrFo0wP+xsv/Y75hM/Vq35dKjm/z11/Pi/oEpEVeKszyemTsKrq230S6eeWIAAJH3d02cjYVln6s1Smud6GukhYU/EvAvcp0an2pdRYNN2OqtxF5NESYkUfnKWNA7z+YlPXoq/v+hEVyBnax1zmHvWCjcqiSTT82o/tzsxfp4HN+Qb6wuB+SV8641IgJcstoA2nAw/fqVDxQPVqHuZ/hwtYIG0WBA58ZCjnXM9HL8rbl/R2ZgOAN/1JXn1NNrufmsiO/TL53h8lzdCs9gsd05OzhfJI4H+KGODWCZwkyzBfECPJdzyS8WPF0VbTje32Q01jRrAu4zG8oaSVp51EChOTNu/J3GrHM3TShyXmBMEHOfypeasljQ/opg2doRKXHU0V3CgtNqAvHvxxUdhAc7klP+NHi44MF/uvCC8b9Fa1c7yc7kDOgNjqyB7D5xMqAfeo9gEj1eWneSJeRGrle1+OWIA8Z+9V7RSOGBkpPvkinL088NOgXhU3nLqXephp4fLv4M4dfjN8YkHM5vyi1OhL4PMLyfqTTTZ/lco0RNoK98dvZM1e14H38ck5kz3Ioyw/zlDLdSElJNzlrKyi5rg7e8zMKOXvZ+xzLXuoAzmeasJXcM9CjhuvqLvb4ULaryTcwWqGQ8Yu654DyvCTsZr5Gf7YBLFm8pqT9VyZHI5LdxeR6M5cbb85/km+QFY3D3UraYt43gg0S10FuKFRyfp6PD+R6GMPEWUjGIZLhSFol4wMG5CylimKFVK1IFMUGcob8Pr6lyRmEA0/vyU/viUl+0wfNodIz+y13p+8Yfr/mEeq9SCuAp94xsxO9ui2w0/zi1vnaPeF4rAHCBPndeMlsfxkG5Qyj5z5bEJRWT85GkoOal5RrcE+HTu/T5JJwQCMGLxoST0to0NvYjHADe3wSz3GXHp7cB/ziSnzBZLKZ9dI6Ye2FDRY2g1+UCxGWt0zZvsDadaUuDcjiQ76HDvI3KexvJvfaoEg0eeTxvCn4+GKx/RPF4wbpr9Cde5waI0+MvOV3+D6NGpkPuDHLYNIeyvUlu/V3GZwHzfwEyx/p3IgSy1GblIZE4lFhq0LU4UW6BnSHQdoxikyC+9EzyhGWnZ6m+A2KtqOmzxQkRe5o8djpkV3HaQQZZdc3CKN7XaV5iVagacw5wzU5IipvveNwOll5IkjKwL2gkcDxtaWxrzOQZ5bL5/dd23uyJuWEklPC5ZWT1d3/HV4zSHvbsS10ff9plvL49NAmGtNL+EZxnjwbSRRHTybcLNlYsZyBQbhXdeT8W/ba4OEWMZmdZl34z0wukyny6IFMVaNRyqLH16yLynS9QuT5nl/WcTj6pNRWiRM817KkoD0LA3Imgx6CkQdthi1MtH45M8J6+LVSd+NNGohwkS4uC7+DDjrP3gz1UUhjkSBW6w8kxAAhCHLvqS9jkhfkig6Z2fS3I+9ZSj/n+/OoYM+7UZMbBgUPnt5reAyaMY7HAxmuzID623c6+ukQHbM60/GKI/7v8Joh2aAO4UnDow6Ho+WllJGaGfffilWCdjJJyenLZ4TdyS9lHnfhpQeHbjfC5aoDcsC6FtraFv6e8GYTaSAUIhG49inbbUOkq2bvHmVLS6kWDrnHM1w5vj5Odav+ys1+1Q4+BlnhCrZR3DBVKCTa2eTcpmK72pMm3xjACGreMEcz6aMliT5h0M6VbTkt9Nd0QSrookcLDMSZAVEUF7e/JC73iUFIkKJERe35qBs0kPCR8safFPRnNJhotKQOHfbFKNusNYzIT5+/NCtEH43EYYSF3N2VQJf/79z9/ZWyHxploLCVLC6RlEzwTDVXy+nSFiXSuBx0Xi+40euxUoa2FFl0iUoiobrfjUTmcJCzpjyZvN4eam8mTu+W6pGm6d8DrldISn0Negp1yrND+VPj6LlCkrmKv89k2aaE96+IY/3EAhifGEmN0T4tHnMdqccb1hvPHkWnKsssecRWu+/hiBIDeEYAacbaqwTJ3TXiN5rmCy1a1p8eajhdSdnnAVo0pBEZPog6gDwi9XepP8vnAU9a06GjUJ9QLkTYSOC5NHXQMMXij3yujoRlKBkGrS7m7XMsbTQitRV1OXucbv/ifRp9ZBfVJyfTedFVOdS2MxV1HUAeQS3bOvWlk1nthdcatoc8X7lWvCCI3OHUSQblzfDeqg3IlcL+GEaWSQ1xfizh5kZxGaQ/pWcwlO1ulpLm6noELQ3ozKuYkNVQuxaXOE7VfK15aZF4viG1tdpzltIhvGzLoY80bzFUjLUVSC04nkBYIAzlhraNsDa1/vSYOOBmrfFA+sLSSwMIGmGDMBxbU7IyoAch9WfEMMs4ZtRRVM9WELKq7aOs8fag4Um+qHij8JrUJztJ2cYkiMYp2CkuGn1oGz2+Pp96lJdRTYqPU5KEt3z54R10244PqE7sm3LrE/CwHYKgQ5HML3XXbU7CbE70ZK9UhtmVcWOIaJeD7HVnsOyxiMKH8sUCuO549p6ncKPcVSFr7MPAL6JDjicIOUtZSh9qt5RaOIoDg2kgBHhz4SIOLGlQWlf7Mc2zDOVF45qIiUaIGLzIaAkaHqaZzoyBN8QvxwLQyTHpBFDvS9afHjK876lr1gUdk2F2CM3Tlx3eMogbjYHamMGzDjWIa9bARqvtmyGUToo4X8xYkwNFZ9ibcitd68uV9O805ppMbarO0uMFL1NO5RnhNWdQbbJTs2pB3JXCs65KTaNk4TVP2vMJtGl08R8mX3gXCMjJkgaCD9Gfeo5zria9th1biHvyurk34O/VNeP7e49Czp+xB/gzbiTfJ1/YHtYjeamZPHu1wYL+DHEOMzevD3jePlJ8IEG85zwuD8L/9KF27RKhgOiux8oLlR5lrzYDLaXHjD906eFFxxqYzScn3TQVkEtAdkaEF239rfn7cvpez8sDtOE+HfprXjWkCGlWdOhIpKV4ETRm0I1SXtAfszclAVKVteQJ9J6dNL1kI3U7X0ZVTpdCfuob76C65BTKK3qXcku3V1NKKmbAIboBw9sYnNrNpHQdn4LmbBo3FHGiIS+507IayOFQA4XGNaPHrg6CPkW+aBTDd0FXn83576Xn2UOdRo0L3RMlQHyxIskdIOMV7hJi3Y+dx4q1WXyx8sgR9obwNqvpQUjR6tEYTEMUhREwQIiBwngDIW7R1B90Z8glMn4ZRI3Y7V0nA6OKrcRDo7eAdPGGGUFjcsO/Kd9/x2Rp4HH6CaZRRBaece7Rr6g+KWCwH4scYf2MIu6yF3ocSYXp7trl4458icHEM5wfuvlwB2RkAjzFPzJRb6DgAbVY8qTDndEGHn2hsnNCM767KtHWhkmbpjzDhiZeyxNleRcqDWZCeKffBqzatSSmkzo++OptbWag1agB6UVHc/239i7VJAD9uRiEQ57I2wz6+GNJksgPA3uWiXbf8qjrDwOccip7bidf8FnRicBALYTwhdKhISdhWvhHB9e1CEHjKb+qHENX1kiwgtRwkrfBxOrEB2pwBEVioUkazl5MLnvnozwOR/dT6ZBSvVJKgZeOiRdv8nXhVf6Uvcn4jk40NFBt646uhhRXgcPrlRNgLqPgCRp6dIgRMX+l7JsZIv1NSn0fCeFph0K1hfJjjCLU+hR4numy55ngvDiSEmSBf3SLMVHlnnEPB4Rp6QkWOqcatmUG6Kvwoh+76g8BeZgRtvSibx2WF5XHjrLjXFkmXAfx1eEm30BiALGpxIoIDZQ9Ej0e9Yfyo/4iJWl1yjd6HfCo9WX+9EhBUDy0fAZoiDClHZEgZosmWXlmVmE0SIhuqxrWBT14mQmZqwv6YCqzb7aeIOdTwhNNDgyfC/IIMWBY7sp4e3P3wZlUXy+JANrhqjBSQHzgqafai7qmVnfoXpZxYv/z3pTUeXwEE27Q3EL7LWWPExo5Ii4mcZf6JzEoARrGPG7wZnAv4gUmbjcTKXo3cxRSxz8AR/NPM3uZpDHWMJivs4yfExpQiGtYeQ9vDibdYILRZu7RQLdCTPZ8xZP/vybcdyzlkWJqXMXurE76SJiV7LC2Awa0lkxb4x/0grZ60+rG9vDZqYHzo17+9BnT8DxEOYA4Vs/Y6s8PURsYGDTzolcP3qoRXKRTvlF2DLjJssMDBmGFW1cE1xlUMlxbC+Oeuof9+6OZ1eiLxFgWlJeM1AgFDEBC4qkS9b39WLDnjsaiqu5Zvw6ths/hftEQGd2rPswOMFrwKiLPzWA1OyydGY3uCkFmqPbSp7aiH217nx7fsIzK0/wLqhVS4DRxyqyrPrvx4hG9754yd6bX0/ACeb0ggkvJfGJCOyaW9kwUWJ/CbFQCT+1R3kYUyH+ZpINXVcJEdYxcrQZkF79X0evD15wNqa1WsLeqop4bCnV1O/QyIOqpq9lB0pkVor6w1se/K43iPINy+317bhT0K+rtJF/4m1wWFL2OH/L2beSLrAmFZw16B26+Dtba2M313Vd3PEUnkWDC0diioqKIo0dzc3PXs3c7mxonksjnv58/zbx4o9XsQM7I8w1u7CU553H+I9X8Wmo1O9XLxboQmDiBrrb05oy8L/mih4rYkPG++lhgo6iEcJEK4Y6bXcvqPZst/xnuuvq0IFLEQKMce89vDTjXLC/pHZtdRz1PfRYYlDU7J9Qzi4abzVazi/ZfVvqyF7mE6mtp7YBxdMuXm2jgyVKqdrqCEqc21HsrU1v99KVRU73epORHqUGbufwxhZ415lC61OkUenDMabJtlGcrf57uOseZfqOp8/a/ul0Vp2/zJCXvZ4kl26R+KpjgpdQj4QpTX6km24+xXDBHIcZkXd6QX+BK3UuBazanRfgcEb+MAUe4Chm6upLdH3jOdygyiNPAY0UDGO3CEg8yocpeUz417V9SCjjPRUzMxJ7zdOV7wgAvu1HIW6gXO9QxEKURWRqRSjgSDHfc7FrR3rPV6+rTGkkN4fKK5N6tkmw8IjqMXmIMcXa06BngJZ7MLzCAyI9PyOPZcSEtk+Zfdye99tYiSnfXIGIjxc+w7prTF5xpv7r/+l+s2dlt4Gqqq5Ev/+/DXK+SXzQXe3KhIjrgPcoFiL4Ike4b9n5TNO/f01BVn9meKroOoLSSD2spNRnhY4hJupp8YYXtuG6gvyPqBOFwhzmvz1mCIJZCQgFEtMlAeya+3hKWja5nqUP+ycAXTGiHDPJcyDKJ7LGEA+rw5+RbpvQW7pHUcrlk/g+wt4/ZhGOYqL3cc3mfZQ93EyWJXEXmUKMvci3UodFi/Yt5/0glz7NkPtU7l2zYSEAYSRyR5gFPFsKLXJqzjLv2fyVXOk0q2Ui/LcintPq6dR5HUqv6pKT3tnS79JXfj72lemdOv+XkrpHrFz9P4QfjmgfONOq1IZ+yd2yghtQ0+1diEZALvkuIhcRhw0akEkekqGJpA15XF5YCMJniFaqt+sNfBl5ZfKR1x4YrSndOKE9Lp90derUp7tJvusfpuk+Qs/ynE8xQfCihqsdrv3c2bNhoWcTqX70h2GAxfMw2wyAfdMo5mtXXbd/edeDu7T2GXBCk1528ntFiX2ty+4M6MKg2k4LXdbZhw4YNm6BjBMz+Q9gZ/uYAC87Lga9hgpCHaavWBQIj/4hWwDTmBvtR2LBhw0b8CBrAoB1CxxCbi8FDxJ1gBbo2TMIgZQyI4R9FIIMctR+BDRs2bBgjaJDQhg0b1sCDhJjMk2PXho0YApFlORgkTLLrwoaNJuFOUhcKs2GjaYCq8HP5JcWuDxs2moS1tgdtI174hwADAIWSg7lTzeQwAAAAAElFTkSuQmCC",Base_images_error="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC",Base_AssetsLoader,__bind=function(t,e){return function(){return t.apply(e,arguments)
}};Base_AssetsLoader=function(){function t(t){this.chart=t,this.loadNextAsset=__bind(this.loadNextAsset,this),this.load=__bind(this.load,this),this.loadedAssets={},this.queuedAssets={},this.imgAssets={},this.callbacks=[]}return t.prototype.load=function(t,e){var i,n,s,o,r,a;for(n=!1,s=!0,r=0,a=t.length;a>r;r++)i=t[r],o=this.chart.settings.getAssetUrl(i),this.loadedAssets.hasOwnProperty(o)||(n=!0,this.queuedAssets.hasOwnProperty(o)||(this.queuedAssets[o]=!0,s=!0));return s?(this.callbacks.push(e),1===this.callbacks.length&&(this.chart.log("Loading assets"),this.loadNextAsset(!0)),!0):!1},t.prototype.loadNextAsset=function(t){var e,i,n,s,o,r,a,l,h;null==t&&(t=!1),i=null,l=this.queuedAssets;for(e in l){if(o=l[e],!this.loadedAssets.hasOwnProperty(e)){i=e;break}delete this.queuedAssets[e]}if(i)return s=function(t){return function(e){return t.chart.removed?void 0:(t.loadedAssets[e]=!0,t.loadNextAsset())}}(this),this.loadAsset(i,s);if(t)return setTimeout(this.loadNextAsset,0);if(this.callbacks.length>0){for(this.chart.log("Chart assets loaded"),h=this.callbacks,r=0,a=h.length;a>r;r++)(n=h[r])();return this.callbacks=[]}},t.prototype.loadAsset=function(t,e){var i,n;return n=Base_Helpers.getExtension(t),"css"===n?(i=document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("href",t),i.setAttribute("type","text/css"),Base_Helpers.listen(i,"load",function(){return e(t)}),Base_Helpers.listen(i,"error",function(i){return function(){return i.chart.error("Assets: Failed to load asset",t),e(t)}}(this)),document.getElementsByTagName("head")[0].appendChild(i),setTimeout(function(i){return function(){var n;return i.loadedAssets.hasOwnProperty(t)||i.imgAssets.hasOwnProperty(t)?void 0:(i.imgAssets[t]=!0,n=document.createElement("img"),n.onerror=function(){return e(t)},n.src=t)}}(this),200)):"js"===n?(i=document.createElement("script"),i.setAttribute("src",t),i.setAttribute("type","text/javascript"),Base_Helpers.listen(i,"load",function(){return e(t)}),Base_Helpers.listen(i,"error",function(i){return function(){return i.chart.error("Assets: Failed to load asset",t),e(t)}}(this)),document.getElementsByTagName("head")[0].appendChild(i)):(this.chart.error("Assets: Do not know how to load",t),e(t))},t}();var Base_Rect;Base_Rect=function(){function t(t,e,i,n){this.x0=t,this.y0=e,this.x1=i,this.y1=n}return t.prototype.x0=0,t.prototype.x1=0,t.prototype.y0=0,t.prototype.y1=0,t.prototype.isEmpty=function(){return this.x0>=this.x1||this.y0>=this.y1},t.prototype.clone=function(){return new t(this.x0,this.y0,this.x1,this.y1)},t.prototype.empty=function(){return this.x0=1/0,this.y0=1/0,this.x1=-1/0,this.y1=-1/0,this},t.prototype.w=function(){return this.x1-this.x0},t.prototype.h=function(){return this.y1-this.y0},t.prototype.inflate=function(t){var e,i;return e=(this.x0+this.x1)/2,i=(this.y0+this.y1)/2,this.x0=(this.x0-e)*t+e,this.x1=(this.x1-e)*t+e,this.y0=(this.y0-i)*t+i,this.y1=(this.y1-i)*t+i,this},t.prototype.clip=function(t){return this.x0=Math.max(this.x0,t.x0),this.x1=Math.min(this.x1,t.x1),this.y0=Math.max(this.y0,t.y0),this.y1=Math.min(this.y1,t.y1),this},t.prototype.isInside=function(t){return this.x0>=t.x0&&this.x1<=t.x1&&this.y0>=t.y0&&this.y1<=t.y1},t.prototype.isOutside=function(t){return this.x0>t.x1||this.x1<t.x0||this.y0>t.y1||this.y1<t.y0},t.prototype.overlapsRect=function(t,e,i,n){return t<this.x1&&i>this.x0&&e<this.y1&&n>this.y0},t.prototype.area=function(){return(this.x1-this.x0)*(this.y1-this.y0)},t.prototype.toString=function(){return""+this.x0+","+this.y0+", "+this.x1+", "+this.y1},t.prototype.addPoint=function(t,e){return this.x0=Math.min(this.x0,t),this.x1=Math.max(this.x1,t),this.y0=Math.min(this.y0,e),this.y1=Math.max(this.y1,e),this},t.prototype.containsPoint=function(t,e){return t>=this.x0&&t<this.x1&&e>=this.y0&&e<this.y1},t.prototype.addLine=function(t){var e,i,n;for(e=i=0,n=t.length-2;n>=i;e=i+=2)this.addPoint(t[e],t[e+1]);return this},t.prototype.overlaps=function(t){return this.x0<t.x1&&this.x1>t.x0&&this.y0<t.y1&&this.y1>t.y0},t}();var Netchart_Layout_BHTree;Netchart_Layout_BHTree=function(){function t(){this.root=null,this.freeNodeRoot=null,this.temperature=0,this.nodeCount=0}var e,i;return e=function(){function t(){}return t.prototype.forceLinkList=null,t.prototype.x=0,t.prototype.y=0,t.prototype.r=0,t.prototype.fx=0,t.prototype.fy=0,t.prototype.sizeEstimate=0,t.prototype.left=null,t.prototype.right=null,t.prototype.nodes=null,t}(),t.prototype.maxLeafCount=5,t.test=function(){var e,i,n;return n=new t,n.maxLeafCount=2,n.temperature=1,i=[],e={z:0,dx:0,dy:0,dz:0,repulsiveForceX:0,repulsiveForceY:0,repulsiveForceZ:0,fsum:0},i.push(Base_Helpers.extend({r:5,x:10,y:10},e)),i.push(Base_Helpers.extend({r:5,x:0,y:0},e)),i.push(Base_Helpers.extend({r:5,x:0,y:10},e)),i.push(Base_Helpers.extend({r:5,x:10,y:0},e)),i.push(Base_Helpers.extend({r:5,x:10,y:10},e)),i.push(Base_Helpers.extend({r:5,x:20,y:0},e)),i.push(Base_Helpers.extend({r:5,x:25,y:0},e)),n.buildTree(i,i.length)},t.prototype.buildTree=function(t){var e,i,n,s;for(this.iters=0,e=t.length,null!=this.root&&this.freeNode(this.root),this.root=this.newNode(),e>0&&this.buildTreeRecursive(t,0,e,this.root),i=n=0,s=e-1;s>=n;i=n+=1)t[i].repulsiveForceX=0,t[i].repulsiveForceY=0,t[i].repulsiveForceZ=0;return this.calculateForces()},t.prototype.freeNode=function(t){return null!=t.left&&this.freeNode(t.left),null!=t.right&&this.freeNode(t.right),t.left=this.freeNodeRoot,this.freeNodeRoot=t},t.prototype.newNode=function(){var t;return null!=this.freeNodeRoot?(t=this.freeNodeRoot,this.freeNodeRoot=t.left,t.left=null,t.right=null,t.leafCount=0,t.sizeEstimate=0,t.forceLinkList.length=0):(t=new e,t.forceLinkList=[],t.leaves=new Array(this.maxLeafCount)),t.repulsiveForceX=0,t.repulsiveForceY=0,t.repulsiveForceZ=0,t},i=function(t,e,i){var n;return n=t[e],t[e]=t[i],t[i]=n},t.prototype.addForceLink=function(t,e){return t.forceLinkList.push(e)},t.prototype.getMedianX=function(t,e,n){var s,o,r,a,l;for(n-=1,r=(e+n)/2|0;;){if(e>=n)return r;if(n===e+1&&t[e].x>t[n].x)return i(t,e,n),r;for(a=(e+n)/2|0,t[a].x>t[n].x&&i(t,a,n),t[e].x>t[n].x&&i(t,e,n),t[a].x>t[e].x&&i(t,a,e),i(t,a,e+1),o=e+1,s=n;;){for(;;)if(o+=1,!(t[e].x>t[o].x))break;for(;;)if(s-=1,!(t[s].x>t[e].x))break;if(o>s)break;l=t[o],t[o]=t[s],t[s]=l}i(t,e,s),r>=s&&(e=o),s>=r&&(n=s-1)}},t.prototype.getMedianY=function(t,e,n){var s,o,r,a,l;for(n-=1,r=(e+n)/2|0;;){if(e>=n)return r;if(n===e+1)return t[e].y>t[n].y&&i(t,e,n),r;for(a=(e+n)/2|0,t[a].y>t[n].y&&i(t,a,n),t[e].y>t[n].y&&i(t,e,n),t[a].y>t[e].y&&i(t,a,e),i(t,a,e+1),o=e+1,s=n;;){for(;;)if(o+=1,!(t[e].y>t[o].y))break;for(;;)if(s-=1,!(t[s].y>t[e].y))break;if(o>s)break;l=t[o],t[o]=t[s],t[s]=l}i(t,e,s),r>=s&&(e=o),s>=r&&(n=s-1)}},t.prototype.buildTreeRecursive=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;for(p=f=t[e].x,g=y=t[e].y,r=_=x=e+1,S=i-1;S>=_;r=_+=1)c=t[r],d=c.x,m=c.y,p>d&&(p=d),d>f&&(f=d),g>m&&(g=m),m>y&&(y=m);if(n.sizeEstimate=Math.max(f-p,y-g),n.sizeEstimate=n.sizeEstimate*n.sizeEstimate+.1,n.sizeEstimate*=2,o=i-e,o<=this.maxLeafCount){for(n.leafCount=o,d=0,m=0,v=0,u=0,r=b=0,w=o-1;w>=b;r=b+=1)h=t[r+e],d+=h.x,m+=h.y,v+=h.z,u+=h.r,n.leaves[r]=h;return a=1/o,n.r=u,n.x=d*a,n.y=m*a,void(n.z=v*a)}return l=f-p>y-g?this.getMedianX(t,e,i):this.getMedianY(t,e,i),l++,s=this.newNode(),n.left=s,this.buildTreeRecursive(t,e,l,s),s=this.newNode(),n.right=s,this.buildTreeRecursive(t,l,i,s),a=1/o,n.r=n.right.r+n.left.r,n.x=(n.left.x*(l-e)+n.right.x*(i-l))*a,n.y=(n.left.y*(l-e)+n.right.y*(i-l))*a,n.z=(n.left.z*(l-e)+n.right.z*(i-l))*a},t.prototype.calculateForces=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y;for(h=new Array(this.nodeCount),u=0,c=0,null!==this.root.left?(h[c]=this.root.left,c++,h[c]=this.root.right,c++,this.addForceLink(this.root.left,this.root.right)):(h[c]=this.root,c++),y=[];c>u;){if(r=h[u],u++,s=1/r.r,null!==r.left)this.processTreeNode(r,r.left),this.processTreeNode(r,r.right),h[c]=r.left,c++,h[c]=r.right,c++,t=r.left.r*s,e=r.repulsiveForceX*t,i=r.repulsiveForceY*t,r.left.repulsiveForceX+=e,r.left.repulsiveForceY+=i,r.right.repulsiveForceX+=r.repulsiveForceX-e,r.right.repulsiveForceY+=r.repulsiveForceY-i,this.addForceLink(r.left,r.right);else for(n=d=0,f=r.leafCount-1;f>=d;n=d+=1)for(a=r.leaves[n],this.processLeafNode(r,a),t=a.r*s,a.repulsiveForceX+=r.repulsiveForceX*t,a.repulsiveForceY+=r.repulsiveForceY*t,o=p=m=n+1,g=r.leafCount-1;g>=p;o=p+=1)l=r.leaves[o],this.forceBetweenParticles(a,l);y.push(r.forceLinkList.length=0)}return y},t.prototype.processTreeNode=function(t,i){var n,s,o,r,a,l,h,c,u,d,p,f,m;for(a=t.forceLinkList.length,m=[],o=p=0,f=a-1;f>=p;o=p+=1)l=t.forceLinkList[o],c=i.x-l.x,u=i.y-l.y,r=c*c+u*u,h=i.sizeEstimate,l instanceof e&&(h+=l.sizeEstimate),r>h?(d=i.r*l.r/(r*Math.sqrt(r)),n=c*d,i.repulsiveForceX+=n,l.repulsiveForceX-=n,s=u*d,i.repulsiveForceY+=s,m.push(l.repulsiveForceY-=s)):m.push(l instanceof e?this.addForceLink(l,i):this.addForceLink(i,l));return m},t.prototype.processLeafNode=function(t,i){var n,s,o,r,a,l,h,c,u,d,p,f;for(p=t.forceLinkList,f=[],u=0,d=p.length;d>u;u++)r=p[u],r instanceof e?(l=i.x-r.x,h=i.y-r.y,o=l*l+h*h,a=r.sizeEstimate,o>a?(c=i.r*r.r/(o*Math.sqrt(o)),n=l*c,i.repulsiveForceX+=n,r.repulsiveForceX-=n,s=h*c,i.repulsiveForceY+=s,f.push(r.repulsiveForceY-=s)):f.push(this.addForceLink(r,i))):f.push(this.forceBetweenParticles(i,r));return f},t.prototype.forceBetweenParticles=function(t,e){var i,n,s,o,r,a;return s=t.x-e.x,o=t.y-e.y,r=t.z-e.z,i=s*s+o*o+r*r,n=t.r+e.r,a=i*this.temperature<n?.25*this.temperature*Math.sqrt(this.temperature*n):.25*n*n/(i*Math.sqrt(i)),t.repulsiveForceX+=s*a,e.repulsiveForceX-=s*a,t.repulsiveForceY+=o*a,e.repulsiveForceY-=o*a,t.repulsiveForceZ+=r*a,e.repulsiveForceZ-=r*a},t}();var Netchart_Layout_GraphAdjacency;Netchart_Layout_GraphAdjacency=function(){function t(t,e){var i,n,s;for(this.edgecnt=0,this.nodecnt=t,this.maxedges=e,this.increment=e+1,this.nodestart=new Array(t),this.enodes=new Array(e),this.next=new Array(e),i=n=0,s=this.nodecnt-1;s>=n;i=n+=1)this.nodestart[i]=-1}return t.prototype.addEdge=function(t,e){return this.edgecnt>=this.maxedges&&(this.maxedges+=this.increment,this.increment*=2,this.next.length=this.maxedges,this.enodes.length=this.maxedges),this.enodes[this.edgecnt]=e,this.next[this.edgecnt]=this.nodestart[t],this.nodestart[t]=this.edgecnt,this.edgecnt++},t.prototype.addUndirectEdge=function(t,e){return this.addEdge(t,e),this.addEdge(e,t)},t}();var Base_Geometry;Base_Geometry=function(){function t(){}return t.distanceToLineSq=function(t,e,i,n,s,o){var r,a,l;return l=this.closestPointToLine(t,e,i,n,s,o),r=l[0],a=l[1],(s-r)*(s-r)+(o-a)*(o-a)},t.closestPointToLine=function(t,e,i,n,s,o){var r,a,l,h;return r=i-t,a=n-e,l=r*r+a*a,l>0?(h=((s-t)*r+(o-e)*a)/l,h=Math.min(Math.max(h,0),1)):h=0,[t+r*h,e+a*h]},t.rayIntersectsLine=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p;return l=1/0,c=r-s,u=a-o,h=i*u-n*c,0!==h&&(p=(e*c-t*u+s*u-o*c)/h,d=Math.abs(c)>Math.abs(u)?(t+i*p-s)/c:(e+n*p-o)/u,d>=0&&1>=d&&p>=0&&(l=p)),l},t.rayIntersectsLineBidir=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p;return l=1/0,c=r-s,u=a-o,h=i*u-n*c,0!==h&&(p=(e*c-t*u+s*u-o*c)/h,d=Math.abs(c)>Math.abs(u)?(t+i*p-s)/c:(e+n*p-o)/u,d>=0&&1>=d&&(l=p)),l},t.rayIntersectsCircle=function(t,e,i,n,s){var o,r,a,l,h,c,u;return o=i*i+n*n,r=t*i+e*n,a=t*t+e*e-s*s,h=r*r-o*a,l=1/0,h>0&&(h=Math.sqrt(h),c=(-r-h)/o,u=(-r+h)/o,c>=0&&(l=c),u>=0&&(l=Math.min(l,u))),l},t.rayIntersectsCircleOuter=function(t,e,i,n,s){var o,r,a,l;return o=i*i+n*n,r=t*i+e*n,a=t*t+e*e-s*s,l=r*r-o*a,l=Math.sqrt(l),Math.max((-r+l)/o,(-r-l)/o)},t.lineTouchingCircle=function(t,e,i,n,s){var o,r,a,l,h,c,u;return o=Math.sqrt(t*t+e*e),o>s?(a=Math.sqrt(o*o-s*s),c=s*a/o,u=s*s/o,l=t/o,h=e/o,r=t*n-e*i,0>r&&(c=-c),[l*u-h*c,h*u+l*c]):null},t.distanceToPolygonSq=function(e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m;if(t.isInsidePolygon(e,i,n))return 0;for(s=1/0,d=0,f=n.length;f>d;d++)for(a=n[d],r=a.length,l=a[r-2],c=a[r-1],o=p=0,m=r-2;m>=p;o=p+=2)h=a[o],u=a[o+1],s=Math.min(s,t.distanceToLineSq(l,c,h,u,e,i)),l=h,c=u;return s},t.distanceToLinesSq=function(e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m;for(s=1/0,d=0,f=n.length;f>d;d++)if(a=n[d],r=a.length,2===r)s=Math.min(s,(e-a[0])*(e-a[0])+(i-a[1])*(i-a[1]));else if(r>2)for(l=a[0],c=a[1],o=p=2,m=r-2;m>=p;o=p+=2)h=a[o],u=a[o+1],s=Math.min(s,t.distanceToLineSq(l,c,h,u,e,i)),l=h,c=u;return s},t.isInsidePolygon=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f;for(s=!1,u=0,p=i.length;p>u;u++)for(r=i[u],o=r.length,a=r[o-2],h=r[o-1],n=d=0,f=o-2;f>=d;n=d+=2)l=r[n],c=r[n+1],c>e!=h>e&&(l-a)*(e-h)/(c-h)+a>t&&(s=!s),a=l,h=c;return s},t.distanceToBalloon=function(e,i,n,s){var o,r;return e>=i?o=e:0===s?o=i:(r=Base_Helpers.sign(s),o=e/s*r,Math.abs(n*o)>i-e&&(o=t.rayIntersectsCircleOuter(-(i-e),0,Math.abs(n),s,e))),o},t.distanceToRect=function(t,e,i,n,s,o){var r,a;return r=i>t?i-t:t>s?t-s:0,a=n>e?n-e:e>o?e-o:0,Math.sqrt(r*r+a*a)},t.simplify=function(e,i){var n;return i&&e.length?(n=i*i,e=t.reducePoints(e,n),e=t.simplifyDP(e,n)):e},t.simplifyDP=function(e,i){var n,s,o,r,a,l;for(o=e.length,n=void 0!==typeof Uint8Array?Uint8Array:Array,r=new n(o),r[0]=r[o-2]=1,t.simplifyDPStep(e,r,i,0,o-2),a=[],s=l=0;o>l;s=l+=2)r[s]&&(a.push(e[s]),a.push(e[s+1]));return a},t.simplifyDPStep=function(e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g;for(l=0,a=0,c=e[s],d=e[s+1],u=e[o],p=e[o+1],r=f=m=s+2,g=o-2;g>=f;r=f+=2)h=t.distanceToLineSq(c,d,u,p,e[r],e[r+1]),h>l&&(a=r,l=h);return l>n?(i[a]=1,t.simplifyDPStep(e,i,n,s,a),t.simplifyDPStep(e,i,n,a,o)):void 0},t.reducePoints=function(t,e){var i,n,s,o,r,a,l,h;for(o=t[0],a=t[1],s=[o,a],n=t.length,i=h=2;n>h;i=h+=2)r=t[i],l=t[i+1],(o-r)*(o-r)+(a-l)*(a-l)>e&&(s.push(r),s.push(l),o=r,a=l);return o!==r&&a!==l&&s.push(r,l),s},t}();var Base_CssColorParser;Base_CssColorParser=function(){function t(){}return t.clamp_css_byte=function(t){return t=Math.round(t),0>t?0:t>255?255:t},t.clamp_css_float=function(t){return 0>t?0:t>1?1:t},t.parse_css_int=function(e){return t.clamp_css_byte("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))},t.parse_css_float=function(e){return t.clamp_css_float("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))},t.css_hue_to_rgb=function(t,e,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t},t.parseCSSColor=function(e){var i,n,s,o,r,a,l,h,c,u,d,p;if(p=e.replace(RegExp(" ","g"),"").toLowerCase(),p in t.kCSSColorTable)return t.kCSSColorTable[p].slice();if("#"===p[0])return 4===p.length?(r=parseInt(p.substr(1),16),r>=0&&4095>=r?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null):7===p.length?(r=parseInt(p.substr(1),16),r>=0&&16777215>r?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null):null;if(c=p.indexOf("("),n=p.indexOf(")"),-1!==c&&n+1===p.length){if(s=p.substr(0,c),u=p.substr(c+1,n-(c+1)).split(","),i=1,"rgba"===s){if(4!==u.length)return null;i=t.parse_css_float(u.pop())}if("rgba"===s||"rgb"===s)return 3!==u.length?null:[t.parse_css_int(u[0]),t.parse_css_int(u[1]),t.parse_css_int(u[2]),i];if("hsla"===s){if(4!==u.length)return null;i=t.parse_css_float(u.pop())}if("hsla"===s||"hsl"===s)return 3!==u.length?null:(o=(parseFloat(u[0])%360+360)%360/360,d=parse_css_float(u[1]),a=parse_css_float(u[2]),h=.5>=a?a*(d+1):a+d-a*d,l=2*a-h,[t.clamp_css_byte(255*t.css_hue_to_rgb(l,h,o+1/3)),t.clamp_css_byte(255*t.css_hue_to_rgb(l,h,o)),t.clamp_css_byte(255*t.css_hue_to_rgb(l,h,o-1/3)),i])}return null},t.kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},t}();var Base_Layer;Base_Layer=function(){function t(t){this.scene=t,this.bounds=null}return t.prototype.setBounds=function(t,e,i,n){return this.bounds=new Base_Rect(t,e,i,n)},t.prototype.doAnimations=function(){return 0},t.prototype.paint=function(){return 0},t.prototype.findObjectAt=function(){return null},t}();var PieChart_Renderer_Base;PieChart_Renderer_Base=function(){function t(t){this.renderer=t,this.settings=this.renderer.settings}return t.prototype.paintPie=function(t,e,i,n,s,o,r,a){return a.fillColor?(t.beginPath(),t.arc(e,i,s,o,r,!1),t.arc(e,i,n,r,o,!0),t.closePath(),Base_Graphics.fill(t,a)):void 0},t.prototype.paintSlices=function(){throw"paintSlices not implemented"},t.prototype.paintExpandableHilights=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g;for(s=this.settings.slice.expandableMarkStyle.distance,g=[],f=0,m=n.length;m>f;f++)u=n[f],u.expandable&&(a=u.renderParams,d=e+u.x,p=i+u.y,h=a[0],c=a[1],l=Math.max((h+c)/2,c-s),o=a[2],r=a[3],t.beginPath(),t.arc(d,p,l,o,r),g.push(Base_Graphics.paint(t,this.settings.slice.expandableMarkStyle)));return g},t.prototype.strokeSlice=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p;return h=n.renderParams,e+=n.x,i+=n.y,u=h[0],d=h[1],r=h[2],a=h[3],s=h[4],o=h[5],c=d*Math.abs(a-r),p=d-u,l=Math.min(.1*Math.min(c,p),3),u+d===-2&&(u=0,d=0),t.beginPath(),"zigzag"===n.lineDecoration?this.strokeZigZag(t,e,i,d,l,r,a):t.arc(e,i,d,r,a,!1,!0),s===o?t.lineTo(e+Math.cos(o)*u,i+Math.sin(s)*u):t.arc(e,i,u,o,s,!0),t.closePath()},t.prototype.strokeZigZag=function(t,e,i,n,s,o,r){var a,l;for(l=5/n,a=o,t.moveTo(e+n*Math.cos(o),i+n*Math.sin(o));r>a+l;)a+=l,t.lineTo(e+(n+s)*Math.cos(a),i+(n+s)*Math.sin(a)),s=-s;return t.lineTo(e+n*Math.cos(r),i+n*Math.sin(r))},t.prototype.strokeAndPaint=function(t,e,i,n){var s;return s=Base_Graphics.beginStrokeAndFill(t,n),this.strokeSlice(s,e,i,n),Base_Graphics.endStrokeAndFill(t,s,n)},t}();var Base_MonotoneCurve;Base_MonotoneCurve=function(){function t(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f;for(null==i&&(i=0),null==n&&(n=t.length),this.n0=i,l=[],l.length=n-i,c=0,l[n-i-1]=(e[n-1]-e[n-2])/(t[n-1]-t[n-2]),o=(e[i+1]-e[i])/(t[i+1]-t[i]),a=d=p=i+1,f=n-1;f>=p?f>d:d>f;a=f>=p?++d:--d)s=(e[a+1]-e[a])/(t[a+1]-t[a]),0===o?c=h=0:(h=(o+s)/2,r=(c*c+h*h)/(o*o),r>9&&(u=3/Math.sqrt(r),c=u*c,h=u*h)),l[a-i-1]=c,c=h,o=s;l[a-i-1]=c,this.x=t,this.y=e,this.m=l}return t.prototype.interpolate=function(t,e){var i,n,s,o,r,a,l,h,c;return i=this.x[t+1]-this.x[t],a=(e-this.x[t])/i,l=a*a,h=l*a,n=2*h-3*l+1,o=h-2*l+a,s=-2*h+3*l,r=h-l,c=n*this.y[t]+o*i*this.m[t-this.n0]+s*this.y[t+1]+r*i*this.m[t-this.n0+1]},t.prototype.interpolateArray=function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x;for(y=this.x[t],_=this.y[t],d=this.m[t-this.n0],b=this.y[t+1],p=this.m[t-this.n0+1],o=this.x[t+1]-y,c=1/o,u=x=i;n>=i?n>x:x>n;u=n>=i?++x:--x)f=(e[u]-y)*c,m=f*f,g=m*f,r=2*g-3*m+1,l=g-2*m+f,a=-2*g+3*m,h=g-m,v=r*_+l*o*d+a*b+h*o*p,s.push(v)},t.prototype.clear=function(){return this.m.length=0},t}();var Netchart_Data,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Data=function(t){function e(t,i){this.chart=t,this.dataSettings=i,e.__super__.constructor.call(this,t,this.dataSettings),this.nodes={},this.links={},this.nodeToLinks={},this.pendingNodes={},this.requestedNodes={},this.hasAllData=!this.hasDataFunc(),this.pendingAllData=!1,this.requestedAllData=!1}return __extends(e,t),e.prototype.nextLinkId=0,e.settings={dataFunction:null},e.prototype.buildRequest=function(){var t,e,i,n;if(this.pendingAllData&&!this.requestedAllData)return this.pendingNodes={},this.requestedAllData=!0,{nodes:[]};if(!Base_Helpers.hasProperties(this.pendingNodes))return null;e=[],n=this.pendingNodes;for(t in n)if(i=n[t],e.push(t),delete this.pendingNodes[t],this.requestedNodes[t]=!0,e.length>this.dataSettings.requestMaxUnits)break;return{nodes:e}},e.prototype.dataFunc=function(t,e,i){var n,s,o;return n=this.dataSettings,n.dataFunction?(o=n.dataFunction(t.nodes||null,e,i),o?o:!0):n.url?(s=[],t.nodes&&s.push(["nodes",t.nodes]),Base_Data.doRequest(n.url,n,s,e,i),!0):null},e.prototype.verifyData=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S;for(_=["links","nodes"],u=0,m=_.length;m>u;u++)h=_[u],e.hasOwnProperty(h)||(e[h]=[]);if(i=!0,!Base_Helpers.isArray(e.nodes)){l=e.nodes,e.nodes=[];for(r in l)c=l[r],c.id=r,e.nodes.push(c)}if(!Base_Helpers.isArray(e.links)){l=e.links,e.links=[];for(r in l)c=l[r],c.id=r,e.links.push(c)}for(this.chart.log(t?"Got "+e.nodes.length+" data on  "+t.nodes:"Got "+e.nodes.length+" data on all nodes"),s=!(t&&t.nodes.length>0),n=!(t&&t.nodes.length>0&&e.nodes.length>0),o={},b=e.nodes,d=0,g=b.length;g>d;d++)a=b[d],o.hasOwnProperty(a.id)&&this.chart.error("Data response: Multiple nodes with the same ID: "+a.id),o[a.id]=!0,t&&Base_Helpers.arrayContains(t.nodes,a.id)&&(s=!0,n||(n=a.loaded));for(o={},x=e.links,p=0,y=x.length;y>p;p++)a=x[p],a.hasOwnProperty("id")&&o.hasOwnProperty(a.id)&&this.chart.error("Data response: Multiple links with the same ID: "+a.id),o[a.id]=!0;if(s){if(!n)for(this.chart.error("Data response: loaded field was not set on any of the requested nodes, adding manually"),S=e.nodes,f=0,v=S.length;v>f;f++)a=S[f],Base_Helpers.arrayContains(t.nodes,a.id)&&(a.loaded=!0)}else this.chart.error("Data response: Results set did not contain any of requested nodes: ",t.nodes),i=!1;return i},e.prototype.addVerifiedData=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v;for(n=!this.hasDataFunc(),i={},this.updateGraph(e,n),m=e.nodes,a=0,u=m.length;u>a;a++)s=m[a],s.loaded&&(i[s.id]=!0,delete this.requestedNodes[s.id]),s.error&&(delete this.requestedNodes[s.id],i[s.id]=!0);if(t)if(0===t.nodes.length)this.pendingNodes={},this.hasAllData=!0;else for(g=t.nodes,l=0,d=g.length;d>l;l++)s=g[l],this.requestedNodes[s]&&(this.pendingNodes[s]=!0,delete this.requestedNodes[s]);for(r={},o={},y=e.nodes,h=0,p=y.length;p>h;h++)s=y[h],this.isFilteredNode(s.id)||(r[s.id]=s);for(v=e.links,c=0,f=v.length;f>c;c++)s=v[c],o[s.id]=!0;return{dataLoadedNodesIds:i,dataNodesIds:r,dataLinksIds:o}},e.prototype.requestTimeout=function(){return!0},e.prototype.requestFailedPermanently=function(t){var e,i,n,s,o;if(t.nodes){for(i=[],o=t.nodes,n=0,s=o.length;s>n;n++)e=o[n],i.push({id:e,error:"Bad response",loaded:!0});this.addVerifiedData(t,{nodes:i,links:[]})}return this.chart.error("Failed data request, giving up on nodes: ",t.nodes)},e.prototype.removeData=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p;if(n=[],t.nodes)for(u=t.nodes,o=0,l=u.length;l>o;o++)s=u[o],this.removeNode(s.id,n);if(t.links)for(d=t.links,r=0,h=d.length;h>r;r++)i=d[r],e=this.links[i.id],e&&this.removeLink(e);for(p=[],a=0,c=n.length;c>a;a++)i=n[a],p.push(this.removeLink(i));return p},e.prototype.exportData=function(){var t,e,i,n,s,o,r;s=[],i=[],o=this.nodes;for(t in o)n=o[t],s.push(n);r=this.links;for(t in r)e=r[t],i.push(e);return{nodes:s,links:i}},e.prototype.applyPreloadedData=function(){return this.dataSettings.randomNodes>0?this.addData(this.genRandomGraph(this.dataSettings)):e.__super__.applyPreloadedData.call(this)},e.otherEnd=function(t,e){return e===t.from?t.to:e===t.to?t.from:null},e.multiLinkId=function(t){return t.from<t.to?t.from+"#"+t.to:t.to+"#"+t.from},e.prototype.getNodeData=function(t){return this.nodes.hasOwnProperty(t)?this.nodes[t]:(this.requestNodeData(t),null)},e.prototype.nodeRemoved=function(t){return delete this.pendingNodes[t],delete this.requestedNodes[t]},e.prototype.getLinkData=function(t){return this.links[t]},e.prototype.getNodeLinks=function(t){return this.nodes.hasOwnProperty(t)&&this.nodes[t].loaded?this.applyLinkFilter(t):(this.requestNodeData(t),null)},e.prototype.getNodeCollectedLinks=function(t){return this.applyLinkFilter(t)},e.prototype.getNodeLinksRaw=function(t){return this.nodeToLinks[t]},e.prototype.isLoaded=function(t){return this.nodes.hasOwnProperty(t)&&this.nodes[t].loaded},e.prototype.isFilteredNode=function(t){var e,i;return i=this.settings.filters.nodeFilter,e=this.nodes[t],i&&e?!i(e,this.isLoaded(t)?this.nodeToLinks[t]:null):!1},e.prototype.getNodes=function(){var t,e,i,n,s;if(i=this.settings.filters.nodeFilter,!i)return this.nodes;n={},s=this.nodes;for(t in s)e=s[t],i(e,this.isLoaded(t)?this.nodeToLinks[t]:null)&&(n[t]=e);return n},e.prototype.applyLinkFilter=function(t){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T;if(f=this.nodes[t],h=this.nodeToLinks[t],!(h&&h.length>0))return[];if(l=this.settings.filters.linkFilter,m=this.settings.filters.nodeFilter,g=this.settings.filters.nodeLinksProcessor,d=this.settings.filters.multilinkProcessor,m&&!m(f,f.loaded?h:null))return[];if(m||l){for(s=[],x=0,k=h.length;k>x;x++)a=h[x],v=e.otherEnd(a,t),y=this.nodes[v],(!l||(a.from===t?(i=f,n=y):(i=y,n=f),l(a,i,n)))&&(!m||m(y,y.loaded?this.nodeToLinks[v]:null))&&s.push(a);h=s}if(g&&(h=g(f,h)),d){for(_={},S=0,P=h.length;P>S;S++)a=h[S],_[e.otherEnd(a,t)]=!0;if(Base_Helpers.countProperties(_)<h.length){for(s=[],u={},p={},w=0,M=h.length;M>w;w++)r=h[w],c=e.multiLinkId(r),u.hasOwnProperty(c)?p.hasOwnProperty(c)?p[c].push(r):p[c]=[u[c],r]:u[c]=r;for(C=0,T=h.length;T>C;C++)r=h[C],c=e.multiLinkId(r),p.hasOwnProperty(c)||s.push(r);for(o in p)h=p[o],r=h[0],b=d(h,this.nodes[r.from],this.nodes[r.to]),Base_Helpers.isArray(b)?s.concat(b):b&&s.push(b);h=s}}return h},e.prototype.requestAllNodes=function(){return this.hasAllData?!1:(this.pendingAllData||(this.pendingAllData=!0,this.scheduleRequests()),!0)},e.prototype.requestNodeData=function(t){return!this.hasDataFunc()||this.pendingNodes.hasOwnProperty(t)||this.requestedNodes.hasOwnProperty(t)?void 0:(this.pendingNodes[t]=!0,this.scheduleRequests())},e.prototype.updateGraph=function(t,e){var i,n,s,o,r,a,l,h;for(l=t.nodes,s=0,r=l.length;r>s;s++)i=l[s],i.id=i.id.toString(),e&&(i.loaded=!0),this.nodes.hasOwnProperty(i.id)?!i.error&&i.loaded&&(delete this.nodes[i.id]._noData,Base_Helpers.extendDataItem(this.nodes[i.id],i)):(this.nodes[i.id]=i,this.nodeToLinks[i.id]=[]);for(h=t.links,o=0,a=h.length;a>o;o++)if(i=h[o],i.hasOwnProperty("id")?i.id=i.id.toString():(i.id="°"+this.nextLinkId,this.nextLinkId+=1),this.links.hasOwnProperty(i.id))n=this.links[i.id],i.hasOwnProperty("from")&&(i.from=i.from.toString()),i.hasOwnProperty("to")&&(i.to=i.to.toString()),i.from&&n.from!==i.from||i.to&&n.to!==i.to?this.chart.error("Changing link from,to not supported"):Base_Helpers.extendDataItem(n,i);else{if(!i.hasOwnProperty("from")){this.chart.error("Link.from missing for link "+i.id);continue}if(i.from=i.from.toString(),!i.hasOwnProperty("to")){this.chart.error("Link.to missing for link "+i.id);continue}i.to=i.to.toString(),this.nodes.hasOwnProperty(i.from)||(this.nodes[i.from]={id:i.from,_noData:!0},this.nodeToLinks[i.from]=[],e&&(this.nodes[i.from].loaded=!0)),this.nodes.hasOwnProperty(i.to)||(this.nodes[i.to]={id:i.to,_noData:!0},this.nodeToLinks[i.to]=[],e&&(this.nodes[i.to].loaded=!0)),this.links[i.id]=i,this.nodeToLinks[i.from].push(i),this.nodeToLinks[i.to].push(i)}},e.prototype.removeNode=function(t,e){var i,n,s,o,r,a;if(this.chart.graph.removeNode(t),delete this.pendingNodes[t],delete this.requestedNodes[t],s=this.nodes[t],s&&(delete this.nodes[t],n=this.nodeToLinks[t])){for(delete this.nodeToLinks[t],a=[],o=0,r=n.length;r>o;o++)i=n[o],a.push(e.push(i));return a}},e.prototype.removeLink=function(t){return this.chart.graph.removeLink(t.id),delete this.links[t.id],this.nodeToLinks[t.from]&&Base_Helpers.removeFromArray(this.nodeToLinks[t.from],t),this.nodeToLinks[t.to]?Base_Helpers.removeFromArray(this.nodeToLinks[t.to],t):void 0},e.prototype.genRandomGraph=function(t){var e,i,n,s,o,r,a,l,h,c,u,d;for(r=new Base_Random(32131),o=t.randomNodes,s=t.randomLinks,e="grid"===t.random?this.genRandomGrid(o,t.randomGridLinkProbability):"tree"===t.random?this.genRandomTree(o,t.randomTreeDensity):this.genRandomUniform(o,s),u=e.nodes,a=0,h=u.length;h>a;a++)n=u[a],n.style={label:"Node "+n.id},n.value=10+40*r.get();for(d=e.links,l=0,c=d.length;c>l;l++)i=d[l],i.style={label:"Link "+i.id},i.value=1+5*r.get();return e},e.prototype.genRandomGrid=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;for(l=[],r=[],n=d=0,y=t-1;y>=0?y>=d:d>=y;n=y>=0?++d:--d)a={id:"n"+n,loaded:!0},l.push(a);for(i=Math.ceil(Math.sqrt(t)),h=new Base_Random(32131),u=p=0,v=i-1;v>=p;u=p+=1)for(c=f=0,_=i-1;_>=f;c=f+=1)s=c+u*i,s>=t||(c>0&&h.get()<=e&&r.push({from:"n"+s,to:"n"+(s-1)}),u>0&&h.get()<=e&&r.push({from:"n"+s,to:"n"+(s-i)}));for(s=m=0,g=r.length;g>m;s=++m)o=r[s],o.id=""+s;return{nodes:l,links:r}},e.prototype.genRandomUniform=function(t,e){var i,n,s,o,r,a,l,h,c,u;for(a=new Base_Random(32131),r=[],s=[],i=l=0;t>=0?t>l:l>t;i=t>=0?++l:--l)o={id:"n"+i,loaded:!0},r.length>0&&(n={id:"l"+i,from:o.id,to:r[a.get()*r.length|0].id},s.push(n)),r.push(o);for(i=h=c=s.length,u=e-1;u>=h;i=h+=1)n={id:"l"+(i+1),from:r[a.get()*r.length|0].id,to:r[a.get()*r.length|0].id},s.push(n);return{nodes:r,links:s}},e.prototype.genRandomTree=function(t,e){var i,n,s,o,r,a,l,h,c,u,d;
for(c=new Base_Random(31927832),u={id:"n0",loaded:!0},i=[u],h=[u],r=[];h.length<t;)for(l=c.getArrayIndex(i),Base_Helpers.removeFromArray(i,l),o=Math.max(1,Math.ceil(c.get()*e)),n=d=0;o>=0?o>d:d>o;n=o>=0?++d:--d)a={id:"n"+h.length,loaded:!0},s={id:"l"+h.length,from:l.id,to:a.id},r.push(s),h.push(a),i.push(a);return{nodes:h,links:r}},e}(Base_Data);var Base_TimeStep;Base_TimeStep=function(){"use strict";function t(t,e){this.unit=t,this.count=e,this.name=""+this.count+" "+this.unit}return t.parsingMap={milliseconds:"ms",millisecond:"ms",second:"s",seconds:"s",minute:"m",minutes:"m",hour:"h",hours:"h",day:"d",days:"d",week:"w",weeks:"w",month:"M",months:"M",year:"y",years:"y",ms:"ms",s:"s",m:"m",h:"h",d:"d",w:"w",M:"M",y:"y"},t.knownUnits=["ms","s","m","h","d","w","M","y"],t.isGoodUnit=function(e){return null!=t.parsingMap[e]},t.prototype.unit="s",t.prototype.count=1,t.prototype.name=null,t.parse=function(e){var i,n,s,o,r,a;if(null==e)return null;if(null!=e.unit?(s=e.name,a=e.unit):(a=e,s=e),null!=e.count)i=e.count,r=e.unit;else if(n=a.split(" "),2===n.length)i=parseInt(n[0],10),r=n[1];else{if(1!==n.length)return null;i=1,r=n[0]}return r=t.parsingMap[r],"number"==typeof i&&t.isGoodUnit(r)?(o=new t(r,i),o.name=s,o):null},t.prototype.clone=function(){return new t(this.unit,this.count)},t.prototype.add=function(t,e){return null==e&&(e=1),moment(t).utc().add(this.count*e,this.unit).valueOf()},t.prototype.sub=function(t,e){return null==e&&(e=1),moment(t).utc().subtract(this.count*e,this.unit).valueOf()},t.prototype.numberOfUnits=function(e,i){return Math.round(moment(i).utc().diff(e,t.unitsTranslation[this.unit],!0)/this.count)},t.prototype.toString=function(){return""+this.count+" "+this.unit},t.timeUnitDiffs={ms:1,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5,M:2592e6,y:31536e6},t.unitsTranslation={s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},t.toBiggerUnit={ms:"s",s:"m",m:"h",h:"d",d:"w",w:"M",M:"y",y:null},t.toSmallerUnit={ms:null,s:"ms",m:"s",h:"m",d:"h",w:"d",M:"d",y:"M"},t.prototype.approxTime=function(){return t.timeUnitDiffs[this.unit]*this.count},t.prototype.isSmallerOrEqual=function(t){return this.approxTime()<=t.approxTime()},t.prototype.isSmaller=function(t){return this.approxTime()<t.approxTime()},t.prototype.isBigger=function(t){return this.approxTime()>t.approxTime()},t.prototype.isEqual=function(t){return this.approxTime()===t.approxTime()},t.prototype.getBigger=function(){return"y"===this.unit?new t(this.unit,10*this.count):new t(t.toBiggerUnit[this.unit],1)},t.prototype.roundTimeDown=function(e){var i;return e=Math.round(e),i=this.count,"ms"===this.unit&&Math.floor(e/i)*i,"ms"!==this.unit&&(e=moment(e).utc().startOf(t.unitsTranslation[this.unit])),"y"===this.unit?e.year(Math.floor(e.year()/i)*i):"M"===this.unit?e.month(Math.floor(e.month()/i)*i):"w"===this.unit?e.week(Math.floor(e.week()/i)*i):"d"===this.unit?e.date(Math.floor(e.date()/i)*i):"h"===this.unit?e.hours(Math.floor(e.hours()/i)*i):"m"===this.unit?e.minutes(Math.floor(e.minutes()/i)*i):"s"===this.unit&&e.seconds(Math.floor(e.seconds()/i)*i),e.valueOf()},t.prototype.roundTimeUp=function(t){return this.roundTimeDown(moment(Math.round(t)).utc().add(this.count,this.unit).valueOf()-1)},t.prototype.roundTimeRound=function(t){var e;return e=moment(Math.round(t)).utc().add(this.count,this.unit),this.roundTimeDown((e.valueOf()+t-1)/2)},t}();var Piechart_Data,Piechart_PieData,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_PieData=function(){function t(){this.values=[],this.offset=0,this.totalCount=null,this.total=0,this.valuesSum=0,this.beforeSum=0,this.afterSum=0,this.done=!1}return t.prototype.addData=function(t,e,i,n,s,o,r){var a,l;if(a=t.length,0===this.values.length&&(this.offset=e),e<this.offset){if(e+a<this.offset)return void r.error("Data cannot be merged");for(;e<this.offset;)this.offset--,l=t[this.offset-e],this.values.unshift(l),this.valuesSum+=l.value,this.beforeSum-=l.value}if(e+a>this.offset+this.values.length){if(this.offset+this.values.length<e)return void r.error("Data cannot be merged");for(;this.offset+this.values.length<e+a;)l=t[this.offset+this.values.length-e],this.values.push(l),this.valuesSum+=l.value,this.afterSum-=l.value}return(!i||t.length<i)&&(this.done=!0),this.beforeSum=(e=0)?0:n?parseFloat(n):Math.max(0,this.beforeSum),this.done?(this.afterSum=0,this.totalCount=this.values.length+this.offset):this.afterSum=s?parseFloat(s):Math.max(0,this.afterSum),o?(this.total=parseFloat(o),s||!this.beforeSum&&0!==this.offset||(this.afterSum=this.total-this.valuesSum-this.beforeSum),n||!this.afterSum&&!this.done?void 0:this.beforeSum=this.total-this.valuesSum-this.afterSum):this.total=this.beforeSum+this.valuesSum+this.afterSum},t.prototype.markDone=function(){return this.done?void 0:(this.done=!0,this.afterSum=0,this.totalCount=this.offset+this.values.length)},t}(),Piechart_Data=function(t){function e(t,i){var n,s,o;if(this.chart=t,this.dataSettings=i,e.__super__.constructor.call(this,t,i),this.pies={},this.pendingPies={},this.requestedPies={},this.nextId=0,this.applyPreloadedData(),!this.hasDataFunc()){o=this.pies;for(n in o)s=o[n],s.markDone();this.chart.scene.loading=!1}}return __extends(e,t),e.settings={itemsToLoad:50,partialLoad:!0,autoCategories:null,sortField:null,dataFunction:null},e.prototype.getRootId=function(){return Base_Helpers.isArray(this.settings.navigation.initialDrilldown)?this.settings.navigation.initialDrilldown[0]:this.settings.navigation.initialDrilldown},e.prototype.canExpand=function(t){return this.pies.hasOwnProperty(t)||Base_Helpers.isString(t)&&t[0]!==this.CS},e.prototype.getPieData=function(t){var e;return this.pies.hasOwnProperty(t)?(e=this.pies[t],this.needPostprocessing()&&(e=this.filterAndSortData(e)),e):null},e.prototype.requestMorePieData=function(t,e){return null==e&&(e=this.dataSettings.itemsToLoad),!this.pies.hasOwnProperty(t)||this.pies[t].done?!1:(this.requestPieData(t,this.pies[t].offset+this.pies[t].values.length,e),!0)},e.prototype.requestLessPieData=function(t,e){return null==e&&(e=this.dataSettings.itemsToLoad),this.pies.hasOwnProperty(t)&&!this.pies[t].done&&this.pies[t].offset>0?(this.requestPieData(t,Math.max(this.pies[t].offset-this.dataSettings.itemsToLoad,0),e),!0):!1},e.prototype.pieRemoved=function(t){return delete this.pendingPies[t],delete this.requestedPies[t]},e.prototype.requestPieData=function(t,e,i){var n,s,o,r,a,l;if(null==i&&(i=this.dataSettings.itemsToLoad),t[0]===this.CS)throw"Invalid Id: "+t;if(this.pies.hasOwnProperty(t))if(n=this.pies[t],l=n.offset,s=l+n.values.length,l>e)i=l-e;else{if(!(e+i>s))return;i=e+i-s,e=s}else(this.needPostprocessing()||!this.dataSettings.partialLoad||this.settings.autoCategories)&&(i=2147483647,e=0);if(!this.requestedPies.hasOwnProperty(t))if(this.pendingPies.hasOwnProperty(t))a=this.pendingPies[t],r=Math.min(a.offset,e),o=Math.max(a.offset+a.count,e+i),a.offset=r,a.count=o-r;else if(null!=this.dataFunc)return this.pendingPies[t]={id:t,offset:e,count:i},this.scheduleRequests()},e.prototype.autoCategorize=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y;if(t.offset||t.afterSum>0||t.total>t.values.length)return this.chart.error("Cannot auto categorize partial data"),t;if(!(e.length>0))return t;for(t.subvalues=t.values,a=[t],u=0,f=e.length;f>u;u++){for(n=e[u],l=[],d=0,m=a.length;m>d;d++){for(i=a[d],o=[],s={},y=i.subvalues,p=0,g=y.length;g>p;p++)c=y[p],h=Base_Helpers.isFunction(n)?n(c):c[n],h=void 0===h||null===h?"None":h.toString(),s.hasOwnProperty(h)?r=s[h]:(r=Base_Helpers.clone(c),delete r.id,r.subvalues=[],r.name=h,r.__category=n,r.value=0,s[h]=r,o.push(r),l.push(r)),r.subvalues.push(c),Base_Helpers.isNumber(c.value)&&(r.value+=parseFloat(c.value));i.subvalues=o}a=l}return t.values=t.subvalues,delete t.subvalues,t},e.prototype.addDataInt=function(t,e,i,n,s,o,r,a,l){var h,c,u,d,p,f,m,g,y;for(d={},m=0,g=e.length;g>m;m++)p=e[m],p.value=parseFloat(p.value),p.id?(p.__id=""+p.id,d.hasOwnProperty(p.__id)&&this.chart.error("Data response: Multiple slices with the same ID: "+p.__id),d[p.__id]=!0):(p.__id=this.CS+this.nextId,this.nextId++),p.subvalues&&(l[p.__id]=!0,this.addDataInt(p.__id,p.subvalues,0,1/0,0,0,0,null,l),this.markDone(p.__id));if(u=this.pies.hasOwnProperty(t)?this.pies[t]:this.pies[t]=new Piechart_PieData(t),u.addData(e,i,n,s,o,r,this.chart),a){h={values:!0,id:!0,offset:!0,limit:!0,afterSum:!0,beforeSum:!0,subvalues:!0,sum:!0},y=[];for(c in a)f=a[c],y.push(h[c]?void 0:u[c]=f);return y}},e.prototype.markDone=function(t){return this.pies.hasOwnProperty(t)?this.pies[t].markDone():void 0},e.prototype.needPostprocessing=function(){return null!=this.chart.settings.filters.sliceFilter||this.dataSettings.sortField},e.prototype.filterAndSortData=function(t){var e,i,n,s,o,r,a,l,h,c;if(i=this.chart.settings.filters.sliceFilter){for(o=t.total||0,r=t.totalCount||0,a=[],c=t.values,l=0,h=c.length;h>l;l++)s=c[l],i(s)?a.push(s):(o-=s.value,r-=1);n={values:a,done:t.done,beforeSum:t.beforeSum,afterSum:t.afterSum},t.total&&(n.total=o),t.totalCount&&(n.totalCount=r),t=n}return this.dataSettings.sortField&&(e=this.dataSettings.sortField,t.values.sort(function(t,i){return i[e]-t[e]})),t},e.prototype.buildRequest=function(){var t,e,i;return Base_Helpers.hasProperties(this.pendingPies)?(i=Base_Helpers.removePropertyValue(this.pendingPies),t=i[0],e=i[1],this.requestedPies[t]=e,e):null},e.prototype.dataFunc=function(t,e,i){var n,s,o;return n=this.dataSettings,n.dataFunction?(o=n.dataFunction(t.id,t.limit,t.offset,e,i),o?o:!0):n.url?(s=[],t.id&&s.push(["id",t.id]),s.push(["limit",t.limit]),s.push(["offset",t.offset]),Base_Data.doRequest(n.url,n,s,e,i),!0):null},e.prototype.verifyData=function(t,e){var i,n,s,o,r,a;for(n=e.id=e.hasOwnProperty("id")?e.id:t?t.id:this.getRootId(),delete this.requestedPies[n],i=!0,a=["values"],o=0,r=a.length;r>o;o++)s=a[o],e.hasOwnProperty(s)||(i=!1,this.chart.error("Field "+s+" not set in data"));return e.hasOwnProperty("offset")&&parseInt(e.offset)>=0?(e.offset=parseInt(e.offset),t&&t.offset!==e.offset&&(i=!1,this.chart.error("Response Offset "+e.offset+" does not match request offset: "+t.offset),this.markDone(n))):e.offset=t?t.offset:0,e.limit=parseInt(e.limit)?parseInt(e.limit):null,i},e.prototype.addVerifiedData=function(t,e){var i,n;return this.chart.scene.loading=this.requests.length>0,i=e.id,n={},n[i]=!0,this.chart.log(t?"Data arrived, id="+i+", offset="+t.offset+", len="+e.values.length+" of "+(t.limit||"unset"):"Data arrived, id="+i+", offset="+e.offset+", len="+e.values.length+" of "+(e.limit||"unset")),this.dataSettings.autoCategories&&(e=this.autoCategorize(e,this.dataSettings.autoCategories)),this.addDataInt(i,e.values,e.offset,e.limit,e.afterSum,e.beforeSum,e.sum,e,n),{dataArrived:!0,dataArrivedIds:n}},e.prototype.requestTimeout=function(t){return this.chart.scene.loading=this.requests.length>0,delete this.requestedPies[t.id]},e.prototype.requestFailedPermanently=function(t){var e;return this.chart.scene.loading=this.requests.length>0,t?(e=new Piechart_PieData(t.id),e.done=!0,this.pies[t.id]=e,this.chart.error("Data request failed for pie: "+t.id),delete this.requestedPies[t.id]):this.chart.error("Data request failed")},e.prototype.removeData=function(){return 1},e.prototype.exportData=function(){return 1},e}(Base_Data);var Netchart_Layout_TimedSpringEmbedder;Netchart_Layout_TimedSpringEmbedder=function(){function t(t){this.random=t,this.nodeCount=0,this.nodes=[],this.forceX=[],this.forceY=[],this.forceZ=[],this.forceSum=[],this.oldForceX=[],this.oldForceY=[],this.oldForceZ=[],this.componentX=[],this.componentY=[],this.componentSum=[],this.componentNodeCount=[],this.nodePermutation=[],this.nodesAspect=1,this.idToIndex={},this.repulsiveForceTree=new Netchart_Layout_BHTree}var e,i;return e=function(){function t(){}return t.prototype.to=null,t.prototype.K=0,t.prototype.len=0,t.prototype.strength=0,t}(),i=function(){function t(){}return t.prototype.x=0,t.prototype.y=0,t.prototype.z=0,t.prototype.r=1,t.prototype.zattr=1,t.prototype.repulsiveForceX=0,t.prototype.repulsiveForceY=0,t.prototype.repulsiveForceZ=0,t.prototype.fsum=0,t.prototype.edges=[],t}(),t.prototype.temperature=0,t.prototype.unitTemperature=0,t.prototype.randomLayoutRadius=0,t.prototype.repulsiveForceTree=null,t.prototype.randomGenerator=null,t.prototype.nodePermutation=null,t.prototype.nodeRepulsionFactor=15,t.prototype.componentCenterFactor=.005,t.prototype.linkForceFactor=.2,t.prototype.zAxisAttraction=1,t.prototype.nodeDegreeModifier=1.2,t.prototype.forceReductionFactor=1,t.prototype.stability=1,t.prototype.globalForceX=0,t.prototype.globalForceY=0,t.prototype.centerX=0,t.prototype.centerY=0,t.prototype.aspectRatio=null,t.prototype.updateParams=function(t,e,i){this.spacing=t,this.nodeDegreeModifier=e,this.aspectRatio=i},t.prototype.updateGraph=function(t,e,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X,J,Q,K,$,te,ee,ie;if(n|=t.length!==this.nodeCount){for(k=this.nodes,P=this.oldForceX,M=this.oldForceY,T=this.oldForceZ,S=this.idToIndex,this.nodeCount=t.length,this.oldForceX=new Array(this.nodeCount),this.oldForceY=new Array(this.nodeCount),this.oldForceZ=new Array(this.nodeCount),this.forceX=new Array(this.nodeCount),this.forceY=new Array(this.nodeCount),this.forceZ=new Array(this.nodeCount),this.forceSum=new Array(this.nodeCount),this.nodes=new Array(this.nodeCount),this.idToIndex={},b=0,x=0,d=R=0,Y=t.length;Y>R;d=++R)y=t[d],u=y.id,_=new i,_.edges=[],H=y.bRight-y.bLeft,c=y.bBottom-y.bTop,c>0&&(b+=c/H,x+=1),this.idToIndex[u]=d,this.nodes[d]=_,S.hasOwnProperty(u)?(w=S[u],C=k[w],_.z=C.z,this.oldForceX[d]=P[w],this.oldForceY[d]=M[w],this.oldForceZ[d]=T[w]):(this.oldForceX[d]=0,this.oldForceY[d]=0,this.oldForceZ[d]=0);this.nodePermutation=this.nodes.slice(0),this.nodesAspect=x>0?Math.max(.3,b/x):1}for(d=z=0,W=t.length;W>z;d=++z)y=t[d],H=y.bRight-y.bLeft,c=y.bBottom-y.bTop,v=this.nodes[d],v.offsetX=y.bRight+y.bLeft,v.offsetY=y.bTop+y.bBottom,v.x=y.x+v.offsetX,v.y=y.y+v.offsetY,v.r=.5*Math.max(1,H),v.minr=Math.max(1,(c+.5*H)/3),v.zattr=y.visibility,v.edges.length=0,v.locked=y.locked,this.forceX[d]=0,this.forceY[d]=0,this.forceZ[d]=0,this.forceSum[d]=0;for(r={U:"D","null":null,D:"U",L:"R",R:"L"},U=0,V=e.length;V>U;U++)g=e[U],A=g.strength,f=g.length,E=g.visibility,l=this.nodes[this.idToIndex[g.from.id]],F=this.nodes[this.idToIndex[g.to.id]],l&&F?l!==F&&(l.edges.push({to:F,strength:A,len:f,vis:E,direction:g.direction}),F.edges.push({to:l,strength:A,len:f,vis:E,direction:r[g.direction]})):console.log("Layout: missing node for link: "+g.from.id+" "+g.to.id+", topology = "+n);for(n&&this.computeComponents(),B=this.spacing/2,$=this.nodes,j=0,G=$.length;G>j;j++){for(y=$[j],I=0,te=y.edges,J=0,Z=te.length;Z>J;J++)a=te[J],I+=a.to.edges.length*a.vis;N=Math.sqrt(I),y.r+=B,y.minr+=B,N>4&&(y.r+=(N-4)*y.r/4*this.nodeDegreeModifier,y.minr+=(N-4)*y.minr/4*this.nodeDegreeModifier)}for(p=0,D=0,L=0,ee=this.nodes,Q=0,q=ee.length;q>Q;Q++){for(y=ee[Q],h=0,ie=y.edges,K=0,X=ie.length;X>K;K++)a=ie[K],O=a.to,y.locked&&O.locked||y===O||(L++,s=y.minr+O.minr,m=a.len,o=Math.min(20,a.strength),a.len=Math.max(1,s*m),a.K=30*o/a.len,h+=a.K,p+=a.len);y.fsum=h,D+=y.r*y.r}return L>0?(this.randomLayoutRadius=Math.max(1,p/10),this.unitTemperature=p/L/50):(this.randomLayoutRadius=Math.max(1,Math.sqrt(D)),this.unitTemperature=1)},t.prototype.computeComponents=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g;for(this.componentX=[],this.componentY=[],this.componentSum=[],this.componentNodeCount=[],r=new Array(this.nodeCount),f=this.nodes,l=0,u=f.length;u>l;l++)o=f[l],o.component=-1;for(t=0,m=this.nodes,h=0,d=m.length;d>h;h++)if(o=m[h],!(o.component>=0)){for(o.component=t,e=0,a=0,n=0,r[n]=o,n+=1;n>a;)for(o=r[a],a+=1,e+=1,g=o.edges,c=0,p=g.length;p>c;c++)i=g[c],s=i.to,-1===s.component&&(s.component=t,r[n]=s,n+=1);this.componentNodeCount.push(e),this.componentX.push(0),this.componentY.push(0),this.componentSum.push(0),t+=1}},t.prototype.updateComponents=function(){var t,e,i,n,s,o,r,a,l,h;for(t=i=0,r=this.componentNodeCount.length-1;r>=i;t=i+=1)this.componentX[t]=0,this.componentY[t]=0,this.componentSum[t]=0;for(a=this.nodes,n=0,o=a.length;o>n;n++)e=a[n],t=e.component,this.componentX[t]+=e.x*e.r,this.componentY[t]+=e.y*e.r,this.componentSum[t]+=e.r;for(h=[],t=s=0,l=this.componentNodeCount.length-1;l>=s;t=s+=1)this.componentX[t]/=this.componentSum[t],h.push(this.componentY[t]/=this.componentSum[t]);return h},t.prototype.globalLayout=function(t,e,i){var n,s,o,r,a,l,h,c,u;if(!(this.nodeCount<=0)){if(i){if(1===this.nodeCount)return void(t[0].x=t[0].y=0);this.initialRandomLayout()}for(r=0,u=this.nodes,h=0,c=u.length;c>h;h++)o=u[h],o.locked||r++;for(a=Math.floor(Math.sqrt(r)+10),s=2*a,this.forceReductionFactor=1,this.temperature=(2*Math.sqrt(r)+20)*this.unitTemperature,this.zAxisAttraction=.02,l=(new Date).getTime(),n=3;this.temperature>this.unitTemperature&&(s--<=0&&(s=3*a/n++,this.temperature=this.temperature/1.5-.5,this.temperature<20*this.unitTemperature&&(this.zAxisAttraction=1.5*this.zAxisAttraction+.02)),this.randomNodePermutation(),this.repulsiveForceTree.temperature=1.75*this.zAxisAttraction,this.repulsiveForceTree.buildTree(this.nodePermutation),this.moveNodesGlobal(),!((new Date).getTime()>l+e)););return i&&this.centerNodes(),this.storeNodes(t)}},t.prototype.initialRandomLayout=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f;for(s=this.nodeCount,o=new Array(s),i=l=0,d=s-1;d>=l;i=l+=1)o[i]=i;for(i=h=0;s>=h;i=h+=1)n=Math.floor(this.random.get()*(s-i))+i,a=o[i],o[i]=o[n],o[n]=a;for(t=this.randomLayoutRadius,e=2*Math.PI/this.nodeCount,p=this.nodes,f=[],i=c=0,u=p.length;u>c;i=++c)s=p[i],this.oldForceX[i]=0,this.oldForceY[i]=0,this.oldForceZ[i]=0,s.z=this.random.get()-.5,s.locked?f.push(void 0):(r=t+s.r,s.x=r*Math.cos(o[i]*e),f.push(s.y=r*Math.sin(o[i]*e)));return f},t.prototype.timedLayout=function(t,e){var i,n,s,o;if(!(this.nodeCount<=1)&&e>0){for(i=0,.1>e?(i=2,this.forceReductionFactor=Math.max(.002,Math.min(this.forceReductionFactor,10*e))):i=Math.min(6,Math.round(2+10*e)),this.zAxisAttraction=this.nodeRepulsionFactor/28,this.temperature=this.unitTemperature,n=s=0,o=i-1;o>=0?o>=s:s>=o;n=o>=0?++s:--s)this.randomNodePermutation(),this.applyAspect(1/this.nodesAspect),this.repulsiveForceTree.temperature=1.75*this.zAxisAttraction,this.repulsiveForceTree.buildTree(this.nodePermutation),this.applyAspect(this.nodesAspect),this.moveNodesIncremental();return this.storeNodes(t)}},t.prototype.prepareAspectRatio=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;for(a=this.nodes,f=a[0].x,g=a[0].y,m=f,y=g,n=v=1,_=this.nodeCount-1;_>=v;n=v+=1)f=Math.min(f,a[n].x),m=Math.max(m,a[n].x),g=Math.min(g,a[n].y),y=Math.max(y,a[n].y);return e=(f+m)/2,i=(g+y)/2,d=m-f,p=y-g,l=Math.sqrt(this.aspectRatio),u=Math.sqrt(d*p),h=u*l/d,c=u/l/p,h=t*h+(1-t),c=t*c+(1-t),s=e-e*h,o=i-i*c,r=1/this.forceReductionFactor,[h,s,c,o,r]},t.prototype.updateAspectRatioNode=function(t,e,i){return this.forceX[i]+=(e.x*(t[0]-1)+t[1])*t[4],this.forceY[i]+=(e.y*(t[2]-1)+t[3])*t[4]},t.prototype.updateAspectRatio=function(t){var e,i,n,s,o,r,a;for(s=this.prepareAspectRatio(t),i=this.nodes,a=[],e=o=0,r=this.nodeCount-1;r>=o;e=o+=1)n=i[e],a.push(this.updateAspectRatioNode(s,n,e));return a},t.prototype.moveNodesGlobal=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d;for(this.initIteration(),h=.5*this.temperature,e=this.forceReductionFactor,this.aspectRatio&&(t=this.prepareAspectRatio(.005)),d=[],r=c=0,u=this.nodeCount-1;u>=c;r=c+=1)l=this.nodes[r],l.locked||(this.calculateForce(r,.5),this.aspectRatio&&this.updateAspectRatioNode(t,l,r),this.oldForceX[r]=n=this.forceX[r],this.oldForceY[r]=s=this.forceY[r],this.oldForceZ[r]=o=this.forceZ[r],i=this.forceSum[r],n*=i,s*=i,o*=i,a=n*n+s*s+o*o,a<this.temperature*this.temperature&&a>.001&&(a=this.temperature/Math.sqrt(a),n*=a,s*=a,o*=a),l.x+=n*e+(this.random.get()-.5)*h,l.y+=s*e+(this.random.get()-.5)*h,d.push(l.z+=o*e+(this.random.get()-.5)*h));return d},t.prototype.moveNodesIncremental=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;for(this.initIteration(),h=g=0,b=this.nodeCount-1;b>=g;h=g+=1)this.nodes[h].locked||this.calculateForce(h,0);for(this.aspectRatio&&(r=Math.min(.4,.5/Math.pow(this.nodeCount,.5)),this.updateAspectRatio(r)),p=0,u=0,f=0,c=0,a=new Array(this.nodeCount),h=y=0,x=this.nodeCount-1;x>=y;h=y+=1)this.nodes[h].locked||(n=this.forceX[h],s=this.forceY[h],o=this.forceZ[h],l=this.forceSum[h],i=n*n+s*s+o*o,i*l*l>this.unitTemperature*this.unitTemperature*.05*.05?(c+=i,m=this.oldForceX[h]*n+this.oldForceY[h]*s+this.oldForceZ[h]*o,f+=m,m>0?u+=m:p-=m):a[h]=!0);for(this.stability=(u-5*p)/this.nodeCount,f>1e-7?this.forceReductionFactor*=1+.4/1.618033989:-1e-7>f&&(this.forceReductionFactor/=1.4),t=this.globalForceX/this.nodeCount,e=this.globalForceY/this.nodeCount,h=v=0,S=this.nodeCount-1;S>=v;h=v+=1)this.forceX[h]+=t,this.forceY[h]+=e;for(this.forceReductionFactor=Math.min(1,this.forceReductionFactor),this.forceReductionFactor=Math.max(.002,this.forceReductionFactor),h=_=0,w=this.nodeCount-1;w>=_;h=_+=1)d=this.nodes[h],d.locked||a[h]||(l=this.forceSum[h]*this.forceReductionFactor,d.x+=this.forceX[h]*l,d.y+=this.forceY[h]*l,d.z+=this.forceZ[h]*l),this.oldForceX[h]=this.forceX[h],this.oldForceY[h]=this.forceY[h],this.oldForceZ[h]=this.forceZ[h]},t.prototype.initIteration=function(){var t,e,i,n,s,o,r;for(t=0,e=0,n=0,r=this.nodes,s=0,o=r.length;o>s;s++)i=r[s],n+=i.r,t+=i.x*i.r,e+=i.y*i.r;return this.centerX=t/n,this.centerY=e/n,this.updateComponents(),this.globalForceX=0,this.globalForceY=0},t.prototype.applyAspect=function(t){var e,i,n,s,o;for(s=this.nodes,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.y*=t);return o},t.prototype.calculateForce=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;for(g=this.nodes[t],l=this.oldForceX[t]*e,h=this.oldForceY[t]*e,c=this.oldForceZ[t]*e,w=g.edges,x=0,S=w.length;S>x;x++)u=w[x],y=u.to,d=u.len,v=g.x-y.x,_=g.y-y.y,b=g.z-y.z,u.direction&&("U"===u.direction?(_-=d,d=0):"D"===u.direction?(_+=d,d=0):"L"===u.direction?(v-=d,d=0):"R"===u.direction&&(v+=d,d=0)),m=Math.sqrt(v*v+_*_+b*b),.01>m&&(m=.01),p=(d-m)*u.K/m*this.linkForceFactor,l+=p*v,h+=p*_,c+=p*b;if(l+=g.repulsiveForceX*this.nodeRepulsionFactor,h+=g.repulsiveForceY*this.nodeRepulsionFactor,c+=g.repulsiveForceZ*this.nodeRepulsionFactor,f=g.zattr*this.zAxisAttraction,c-=g.z*f,r=g.component,i=this.componentX[r]-this.centerX,n=this.componentY[r]-this.centerY,a=Math.min(10,Math.sqrt(this.componentNodeCount[r])),s=i*a*this.componentCenterFactor,o=n*a*this.componentCenterFactor,l-=s,h-=o,this.globalForceX+=s,this.globalForceY+=o,isNaN(l))throw"Internal error: Nan in layout";return this.forceX[t]=l,this.forceY[t]=h,this.forceZ[t]=c,this.forceSum[t]=1/(g.fsum+f)},t.prototype.storeNodes=function(t){var e,i,n,s;for(e=n=0,s=this.nodeCount-1;s>=n;e=n+=1)i=this.nodes[e],i.locked||(t[e].x=i.x-i.offsetX,t[e].y=i.y-i.offsetY)},t.prototype.centerNodes=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m;for(o=new Base_Random(243178931),n=this.nodes,a=l=n[0].x,h=c=n[0].y,i=u=1,p=this.nodeCount-1;p>=u;i=u+=1)a=Math.min(a,n[i].x),l=Math.max(l,n[i].x),h=Math.min(h,n[i].y),c=Math.max(c,n[i].y);for(t=(a+l)/2,e=(h+c)/2,m=[],i=d=0,f=this.nodeCount-1;f>=d;i=d+=1)s=n[i],s.x-=t,s.y-=e,s.locked?m.push(void 0):(r=.3*s.r,s.x+=o.get()*r,m.push(s.y+=o.get()*r));return m},t.prototype.randomNodePermutation=function(){var t,e,i,n,s;for(t=n=0,s=this.nodeCount-1;s>=n;t=n+=1)e=Math.floor(this.random.get()*(this.nodeCount-t))+t,i=this.nodePermutation[t],this.nodePermutation[t]=this.nodePermutation[e],this.nodePermutation[e]=i},t}();var Base_Animator;Base_Animator=function(){"use strict";function t(t,e,i,n,s){if(this.from=t,this.to=e,this.duration=i,null==n&&(n="<>"),(void 0===this.from||null===this.from)&&(this.from=this.to),this.startTime=s,this.x=this.from,this.t=this.startTime,!this.easing_formulas[n])throw"Easing formula not defined: "+n;this.formula=this.easing_formulas[n]}return t.prototype.formula=null,t.prototype.startTime=null,t.prototype.from=0,t.prototype.to=0,t.prototype.fromColor=null,t.prototype.toColor=null,t.prototype.t=0,t.prototype.startSpeed=0,t.prototype.easing_formulas={"=":function(t){return t},"<>":function(t){return.5>t?2*t*t:-.5*((2*t-1)*(2*t-3)-1)},scroll:function(t){return 1-(1-t)*(1-t)}},t.prototype.jump=function(t){return this.to=t,this.from=t,this.x=t,this.t=this.startTime=0},t.prototype.retarget=function(t,e){return this.startSpeed=this.finished(this.t)?0:this._getSpeed(),e?(this.from=this.get(e),this.startTime=e):(this.startTime=this.t,this.from=this.x),this.to=t,this},t.prototype.retargetColor=function(t,e){return this.startSpeed=0,this.from=this.x,this.to=t,this.fromColor=null,this.toColor=null,this.startTime=e,this},t.prototype.switchCoordinates=function(t,e){return this.from=this.from*e+t,this.x=this.x*e+t,this.to=this.to*e+t,this.startSpeed=this.startSpeed*e},t.prototype.updateAndGet=function(t,e){var i;return i=this.x!==t,t!==this.to&&this.retarget(t,e),[this.get(e),i]},t.prototype.updateAndGetFixed=function(t,e){var i;return i=this.x!==t,t!==this.to&&(this.startSpeed=0,this.startTime=e,this.from=this.x,this.to=t,this.fromColor=null,this.toColor=null),[this.get(e),i]},t.prototype.updateColorAndGet=function(t,e){var i;return i=this.x!==t,t!==this.to&&this.retargetColor(t,e),[this.getColor(e),i]},t.prototype.get=function(t){var e,i,n,s;return this.duration<=0?(this.t=t,this.x=this.to,this.to):(this.startTime||(this.startTime=t),i=Math.min(1,Math.max(t-this.startTime,0)/this.duration),i>=1?(this.t=0,this.x=this.to,this.to):(e=this.formula(i),s=e*(this.to-this.from),this.startSpeed&&1>i&&(n=this.startSpeed*i*this.duration,s=s*e+n*(1-e)),s=this.from+s,this.t=t,this.x=s,s))},t.prototype.getColor=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f;return this.t=t,this.duration<=0||this.from===this.to?this.to:(this.startTime||(this.startTime=t),null==this.fromColor&&(this.fromColor=Base_CssColorParser.parseCSSColor(this.from)),null==this.toColor&&(this.toColor=Base_CssColorParser.parseCSSColor(this.to)),a=Math.min(1,Math.max(t-this.startTime,0)/this.duration),r=this.formula(a),o=1-r,p=this.fromColor,s=p[0],n=p[1],i=p[2],e=p[3],f=this.toColor,u=f[0],c=f[1],h=f[2],l=f[3],d="rgba("+Math.round(s*o+u*r)+","+Math.round(n*o+c*r)+","+Math.round(i*o+h*r)+","+(e*o+l*r).toFixed(3)+")",this.t=t,this.x=d,d)},t.prototype.finished=function(t){return this.startTime||(this.startTime=t),t>=this.startTime+this.duration},t.prototype._getSpeed=function(){var t,e,i,n;return n=this.t,t=this.duration/1e3,e=this.get(n-t/2),i=this.get(n+t/2),this.t=n,(i-e)/t},t}();var Base_Graphics,Base_Graphics_DashedLineContext;Base_Graphics_DashedLineContext=function(){function t(t,e,i){this.g=t,this.lineDash=e,this.fill=i,this.beginPath()}return t.prototype.beginPath=function(){return this.remaining=this.lineDash[0],this.dashes=[],this.pos=0,this.x0=0,this.y0=0,this.x=0,this.y=0,this.hasPos=!1},t.prototype.moveTo=function(t,e){return this.x=t,this.y=e,this.fill&&this.dashes.push(0,t,e),this.g.moveTo(t,e),this.x0=t,this.y0=e,this.hasPos=!0},t.prototype.lineTo=function(t,e){var i,n,s,o,r,a,l,h,c,u;for(this.fill&&this.g.lineTo(t,e),r=t-this.x,a=e-this.y,c=this.x,u=this.y,this.x=t,this.y=e,h=Math.sqrt(r*r+a*a),l=1/h,r*=l,a*=l,i=this.lineDash.length,n=this.pos,s=this.remaining;;){if(o=Math.min(h,s),c+=r*o,u+=a*o,n%2===0?this.fill?this.dashes.push(1,c,u):this.g.lineTo(c,u):this.fill?this.dashes.push(0,c,u):this.g.moveTo(c,u),!(h>o)){s-=o;break}n=(n+1)%i,s=this.lineDash[n],h-=o}return this.pos=n,this.remaining=s,this.hasPos=!0},t.prototype.arc=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x;if(r=2*Math.PI,h=Math.min(.6,2/i),a=Math.cos(h),u=Math.sin(h),m=Math.sin(n)*i,d=Math.cos(n)*i,y=Math.sin(s)*i,f=Math.cos(s)*i,this.hasPos||(this.moveTo(t+d,e+m),this.hasPos=!0),o){for(s>n&&(n+=r),l=(n-s)/h,b=[],c=v=l;v>=0;c=v+=-1){if(0>=c-1){this.lineTo(t+f,e+y);break}this.lineTo(t+d,e+m),p=d*a+m*u,g=-d*u+m*a,d=p,b.push(m=g)}return b}for(n>s&&(n-=2*Math.PI),l=(s-n)/h,x=[],c=_=l;_>=0;c=_+=-1){if(0>=c-1){this.lineTo(t+f,e+y);break}this.lineTo(t+d,e+m),p=d*a-m*u,g=d*u+m*a,d=p,x.push(m=g)}return x},t.prototype.closePath=function(){return this.lineTo(this.x0,this.y0)},t.prototype.strokeDashes=function(){var t,e,i,n,s,o,r,a;for(t=this.dashes,a=[],e=o=0,r=t.length;r>o;e=o+=3)i=t[e],n=t[e+1],s=t[e+2],a.push(0===i?this.g.moveTo(n,s):this.g.lineTo(n,s));return a},t}(),Base_Graphics=function(){function t(){}return t.setLineDash=1,t.SQRT3D6=Math.sqrt(3)/6,t.stroke=function(t,e){return e.lineWidth&&(t.lineWidth=e.lineWidth),t.strokeStyle=e.lineColor,e.lineDash&&"undefined"!=typeof t.setLineDash?(t.setLineDash(e.lineDash),t.stroke(),t.setLineDash([])):t.stroke(),e.lineWidth?t.lineWidth=1:void 0},t.strokeWithShadow=function(t,e){return e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),e.lineWidth&&(t.lineWidth=e.lineWidth),t.strokeStyle=e.lineColor,t.stroke(),e.lineWidth&&(t.lineWidth=1),e.shadowColor?(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=null):void 0},t.beginStroke=function(t,e,i){return null==i&&(i=!1),t.beginPath(),e.lineColor&&e.lineDash&&e.lineDash.length>1&&"undefined"==typeof t.setLineDash?(i&&!e.fillColor&&(i=!1),new Base_Graphics_DashedLineContext(t,e.lineDash,i)):t},t.endStroke=function(e,i,n,s){return null==s&&(s=!1),e===i?s?t.paint(e,n):t.stroke(e,n):(i.fill&&(t.fill(e,n),e.beginPath(),i.strokeDashes()),t.strokeWithShadow(e,n))},t.beginStrokeAndFill=function(t,e){return this.beginStroke(t,e,!0)},t.endStrokeAndFill=function(t,e,i){return this.endStroke(t,e,i,!0)},t.fill=function(t,e){return e.fillColor?(t.fillStyle=e.fillColor,e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),t.fill(),e.shadowColor?(t.shadowBlur=0,t.shadowColor=null):void 0):void 0},t.fillGradient=function(t,e,i,n,s,o){var r,a,l,h,c,u;if(e.fillGradient){for(r=t.createLinearGradient(i,n,s,o),u=e.fillGradient,h=0,c=u.length;c>h;h++)l=u[h],r.addColorStop(l[0],l[1]);return a=e.fillColor,e.fillColor=r,this.fill(t,e),e.fillColor=a}return this.fill(t,e)},t.paint=function(t,e){return e.shadowColor&&(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor),e.fillColor&&(t.fillStyle=e.fillColor,t.fill()),e.lineColor&&(t.lineWidth=e.lineWidth?e.lineWidth:1,t.strokeStyle=e.lineColor,e.lineDash?(t.setLineDash(e.lineDash),t.stroke(),t.setLineDash([])):t.stroke()),e.shadowColor?(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=null):void 0},t.textStyle=function(t,e){return e.fillColor&&(t.fillStyle=e.fillColor),e.font&&(t.font=e.font),e.shadowColor?(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor):void 0},t.textStyleNoShadow=function(t,e){return e.fillColor&&(t.fillStyle=e.fillColor),e.font?t.font=e.font:void 0},t.rectStyle=function(t,e){return e.hasOwnProperty("lineColor")&&(t.strokeStyle=e.lineColor),e.hasOwnProperty("fillColor")&&(t.fillStyle=e.fillColor),e.hasOwnProperty("lineWidth")?t.lineWidth=e.lineWidth:void 0},t.pushClip=function(t,e,i,n,s){return t.save(),t.beginPath(),t.rect(e,i,n,s),t.clip()},t.popClip=function(t){return t.restore()},t.arcBetweenTwoPoints=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;return g=(s+r)/2,y=(o+a)/2,v=a-o,_=s-r,m=v*v+_*_,0!==m?(f=Math.sqrt(m),n=Math.min(Math.max(n,f/2),3*f),u=Math.sqrt(n*n/m-.25),b=g+v*u,S=y+_*u,x=g-v*u,w=y-_*u,d=(b-e)*(b-e)+(S-i)*(S-i),p=(x-e)*(x-e)+(w-i)*(w-i),d>p?(e=x,i=w):(e=b,i=S),l=Math.atan2(o-i,s-e),h=Math.atan2(a-i,r-e),l>h&&(h+=2*Math.PI),c=Math.abs(l-h)>Math.PI,t.arc(e,i,n,l,h,c)):void 0},t.strokeMarker=function(t,e,i,n,s){var o,r;if(r=1.41421356237*s,o=3*this.SQRT3D6*s,"rect"===e)return t.moveTo(i-s,n-s),t.lineTo(i+s,n-s),t.lineTo(i+s,n+s),t.lineTo(i-s,n+s),t.closePath();
if("romb"===e)return r=.9*r,t.moveTo(i-r,n),t.lineTo(i,n-r),t.lineTo(i+r,n),t.lineTo(i,n+r),t.closePath(),t.fill();if("triangle"===e)return t.beginPath(),t.moveTo(i-s,n+o),t.lineTo(i+s,n+o),t.lineTo(i,n-o),t.closePath(),t.fill();if("triangle2"===e)return t.beginPath(),t.moveTo(i-r,n-r),t.lineTo(i+r,n-r),t.lineTo(i,n+r),t.closePath(),t.fill();if("circle"===e)return t.beginPath(),t.arc(i,n,s,0,2*Math.PI,!0),t.closePath();throw"unknown marker shape "+e},t.strokeBalloon=function(t,e,i,n,s){var o,r,a,l,h;return n=Math.max(n,2*s),o=5,a=4,r=(s+2*a)/2,l=e,h=i,t.moveTo(l,h),l+=o,h+=o,t.lineTo(l,h),l+=n/2-a-o,t.lineTo(l,h),t.arc(l,h+r,r,-Math.PI/2,Math.PI/2),h+=2*r,l-=n-2*a,t.lineTo(l,h),t.arc(l,h-r,r,.5*Math.PI,1.5*Math.PI),h-=2*r,l+=n/2-a-o,t.lineTo(l,h),l+=o,h-=o,t.closePath(),i+o+r},t.strokeBalloon2=function(t,e,i,n,s){var o,r,a,l;return r=4,o=(s+2*r)/2,n=Math.max(n,2*s)/2-r,a=e+n,l=i-o,t.moveTo(a,l),t.arc(a,l+o,o,-Math.PI/2,Math.PI/2,!1),l+=2*o,a-=2*n,t.lineTo(a,l),t.arc(a,l-o,o,.5*Math.PI,1.5*Math.PI,!1),t.closePath()},t.applyColorToImage=function(e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;if(null==n&&(n=!0),y=t.parseColor(i),p=y[0],h=y[1],o=y[2],s=y[3],r=document.createElement("canvas"),f=r.width=e.width,u=r.height=e.height,c=r.getContext("2d"),c.drawImage(e,0,0),a=c.getImageData(0,0,f,u),l=a.data,n)for(d=m=0,v=l.length;v>=m;d=m+=4)255===l[d+3]&&(l[d]=l[d]*p>>8,l[d+1]=l[d+1]*h>>8,l[d+2]=l[d+2]*o>>8);else for(d=g=0,_=l.length;_>=g;d=g+=4)l[d]=l[d]*p>>8,l[d+1]=l[d+1]*h>>8,l[d+2]=l[d+2]*o>>8;return c.putImageData(a,0,0),r},t.cropImageToCircle=function(t,e){var i,n,s,o,r,a,l,h,c,u;return r=Math.min(t.width,t.height),o=Math.max(t.width,t.height),c=Math.min(o,2*r),i=document.createElement("canvas"),i.width=c,i.height=c,n=i.getContext("2d"),u=t.width,s=t.height,n.fillStyle="rgba(0,0,0,1)",n.beginPath(),n.arc(c/2,c/2,c/2,0,2*-Math.PI,!1),n.fill(),a=n.globalCompositeOperation,n.globalCompositeOperation="source-in","crop"===e?(l=Math.min(u,s)/2,n.drawImage(t,u/2-l,s/2-l,2*l,2*l,0,0,c,c)):"letterbox"===e?(n.fillColor="black",n.fillRect(0,0,c,c),h=c/Math.max(u,s),n.drawImage(t,0,0,u,s,c/2-u/2*h,c/2-s/2*h,u*h,s*h)):"fit"===e?(n.fillColor="black",n.fillRect(0,0,c,c),h=c/Math.sqrt(u*u+s*s),n.drawImage(t,0,0,u,s,c/2-u/2*h,c/2-s/2*h,u*h,s*h)):n.drawImage(t,0,0,u,s,0,0,c,c),n.globalCompositeOperation=a,i},t.parseColor=function(t){return Base_CssColorParser.parseCSSColor(t)},t.normalizeColor=function(t){var e,i,n,s,o;return o=Base_CssColorParser.parseCSSColor(t),s=o[0],n=o[1],i=o[2],e=o[3],"rgba("+s+","+n+","+i+","+e.toFixed(3)+")"},t.deriveColor=function(e,i,n){var s,o,r,a,l;return l=t.parseColor(e),a=l[0],r=l[1],o=l[2],s=l[3],this.deriveColorRGBA(a,r,o,s,i,n)},t.deriveColorRGBA=function(t,e,i,n,s,o){var r;return r=255*(s-1),t=Math.round(Math.min(255,Math.max(0,t+r))),e=Math.round(Math.min(255,Math.max(0,e+r))),i=Math.round(Math.min(255,Math.max(0,i+r))),n=Math.min(1,n*o),"rgba("+t+","+e+","+i+","+n.toFixed(3)+")"},t.blendColors=function(e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y;return g=t.parseColor(e),f=g[0],u=g[1],l=g[2],o=g[3],y=t.parseColor(i),m=y[0],d=y[1],h=y[2],r=y[3],p=Math.round(m*n+f*(1-n)),c=Math.round(d*n+u*(1-n)),a=Math.round(h*n+l*(1-n)),s=r*n+o*(1-n),"rgba("+p+","+c+","+a+","+s.toFixed(3)+")"},t.copyHue=function(e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v;return y=t.parseColor(e),m=y[0],d=y[1],a=y[2],s=y[3],v=t.parseColor(i),g=v[0],p=v[1],l=v[2],o=v[3],h=(m+d+a)/765,c=(g+p+l)/765,f=Math.round(m/h*c),u=Math.round(d/h*c),r=Math.round(a/h*c),n=o,"rgba("+f+","+u+","+r+","+n.toFixed(3)+")"},t.inverseColor=function(e){var i,n,s,o,r;return r=t.parseColor(e),o=r[0],s=r[1],n=r[2],i=r[3],o=255-o,s=255-s,n=255-n,"rgba("+o+","+s+","+n+","+i.toFixed(3)+")"},t.applyShadow=function(t,e){return e.shadowColor?(t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor):void 0},t.clearShadow=function(t){return t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=""},t.drawImageInSquare=function(t,e,i,n,s,o,r,a,l){var h,c,u;return u=l/Math.max(s,o),c=s*u,h=o*u,t.drawImage(e,i,n,s,o,r-c,a-h,2*c,2*h)},t.heightElem=null,t.heightCache={},t.getTextHeight=function(e,i){var n,s,o,r,a,l;return s=t.heightCache,s.hasOwnProperty(i)?s[i]:(r=t.heightElem,r||(n=document.getElementsByTagName("body")[0],o=document.createElement("div"),o.setAttribute("style","position:absolute; visibility:hidden; top: -9999px; left: -9999px"),t.heightElem=r=document.createElement("div"),a=document.createTextNode("Mg"),r.appendChild(a),o.appendChild(r),n.appendChild(o)),r.setAttribute("style","font:"+i+"; line-height:1em"),s[i]=l=r.offsetHeight,l)},t}();var Timechart_TimeSetup;Timechart_TimeSetup=function(){"use strict";function t(t){this.settings=t}return t.prototype.settigns=null,t.isSmallerOrEqualUnit=function(t,e){return Base_TimeStep.timeUnitDiffs[t]<=Base_TimeStep.timeUnitDiffs[e]},t.isSmallerUnit=function(t,e){return Base_TimeStep.timeUnitDiffs[t]<Base_TimeStep.timeUnitDiffs[e]},t.prototype.toBiggerDisplayPeriod=function(t){var e,i,n,s,o;for(e=null,o=this.settings.area._displayPeriodsParsed,n=0,s=o.length;s>n;n++)i=o[n],null!=i.displayPeriod&&i.displayPeriod.approxTime()>t.approxTime()&&(null===e||i.displayPeriod.approxTime()<e.approxTime())&&(e=i.displayPeriod);return e},t.prototype.getMinUnitForTime=function(t){var e,i,n,s,o,r,a;for(e=null,i=1/0,a=this.settings.area._displayUnitsParsed,o=0,r=a.length;r>o;o++)n=a[o],s=n.approxTime(),i>s&&s>t&&(e=n,i=s);return e},t.prototype.getBiggerDisplayPeriod=function(t,e){var i,n,s,o,r,a,l,h,c;for(s=Math.abs(e-t),n=0,i=null,c=this.settings.area._displayPeriodsParsed,l=0,h=c.length;h>l;l++)o=c[l],null!=o.displayPeriod&&null!=o.displayPeriod.unit&&(a=o.displayPeriod.approxTime(),r=s/a,.9>r&&r>n&&(n=r,i=o));return i},t.prototype.getClosestDisplayPeriod=function(t,e,i){var n,s,o,r,a,l,h,c,u;for(o=null,r=0,n=null,s=1/0,u=this.settings.area._displayPeriodsParsed,h=0,c=u.length;c>h;h++)a=u[h],null!=a.displayPeriod&&null!=a.displayPeriod.unit&&(l=a.displayPeriod.approxTime(),t>=l&&(null==o||l>r)&&(o=a,r=l),l>=t&&(null==n||s>l)&&(n=a,s=l));return i?null!=e&&e.approxTime()<.8*t?{displayPeriod:e}:null!=n&&1.2*t>s||null==o?n:o:null!=o&&(r>.8*t||s>1.2*t)?o:n},t.prototype.isAllowedDisplayUnit=function(t){var e,i,n,s;for(s=this.settings.area._displayUnitsParsed,i=0,n=s.length;n>i;i++)if(e=s[i],e.step===t.step&&(e.count=t.count))return!0;return!1},t.prototype.computeDisplayUnit=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g,y,v,_,b;if(g=Math.max(o.width,10),c=Math.min(g/3,this.settings.timeAxis.maxUnitWidth),u=(s-n)/g*this.settings.timeAxis.minUnitWidth,h=(s-n)/g*c,null!=t&&null!=e&&null!=i){if(y=(e-t)/(s-n),d=i.approxTime(),1===y)return i;if(y>1){if(h>=d)return i}else if(d>=u)return i}for(p=this.settings.timeAxis.unitSizePolicy,r=null,a=0,b=this.settings.area._displayUnitsParsed,v=0,_=b.length;_>v;v++)f=b[v],f.approxTime()<this.settings.area._minUnit.approxTime()||(m=f.approxTime(),l=null===r?!0:"min"===p?m>=u&&a>m||u>a&&m>a:h>=m&&m>a||a>h&&a>m,l&&(r=f,a=m));if(!r)throw console.error(t,e,i,n,s,g),"Could not calculate displayUnit";return r},t.prototype.tryComputeDisplayPeriod=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m,g,y,v,_;return l=null,m=null,null!=t&&Base_Helpers.arrayContains(t,">")?(v=t.split(">"),h=v[0],g=v[1],l=parseInt(h),m=parseInt(g)):"max"===t&&null!=n&&null!=s?(l=n,m="now"===e?r:s):"max"!==t&&(f=Base_TimeStep.parse(t),"now"===e?a=r:"newestData"===e&&null!=s?a=s:Base_Helpers.isNumber(e)&&(a=parseFloat(e)),null!=f&&null!=a&&(l=f.sub(a),m=a)),null===l||null===m?[null,null,null]:(_=this.computeTimeScaleRange(o),d=_[0],c=_[1],p=_[2],u=_[3],y="auto"===i?null:Base_TimeStep.parse(i),m-l>c&&(y=u,l=m-c),d>m-l&&(y=p,l=m-d),[l,m,y])},t.prototype.resolveFromTo=function(t,e,i,n,s,o){return"oldestData"===t&&null!=n&&(t=i.roundTimeDown(n)),"newestData"===e&&null!=s&&(e=i.roundTimeUp(s)),"now"===e&&(e=i.roundTimeUp(o)),[t,e]},t.prototype.computeTimeScaleRange=function(t,e){var i,n,s,o,r,a,l,h,c,u,d;for(null==e&&(e=this.settings.area._displayUnitsParsed),l=null,r=0,o=null,n=1/0,u=0,d=e.length;d>u;u++)h=e[u],i=h.approxTime(),(null===l||r>i)&&(l=h,r=i),(null===o||i>n)&&(o=h,n=i);return c=Math.max(10,t.width),s=c/this.settings.timeAxis.minUnitWidth*n,a=c/this.settings.timeAxis.maxUnitWidth*r,[a,s,l,o]},t.prototype.getLimits=function(t,e,i,n,s){var o,r,a,l,h,c,u;return h=this.settings.interaction.scrolling,a=h.limitMode,o=s?null!=a:"block"===a,r=null,l=null,o&&(r=h.limitFrom,l=h.limitTo,c=this.resolveFromTo(r,l,i,t,e,n),r=c[0],l=c[1],u=this.resolveFromTo(r,l,i,t,e,n),r=u[0],l=u[1],Base_Helpers.isNumber(r)||(r=null),Base_Helpers.isNumber(l)||(l=null)),[r,l]},t.prototype.preventOverscale=function(t,e,i,n,s,o,r,a,l,h){var c,u,d,p,f,m,g,y,v,_;return v=this.getLimits(r,a,o,l,h),d=v[0],p=v[1],_=this.computeTimeScaleRange(t,e),m=_[0],f=_[1],null!=d&&null!=p&&s-n>p-d?(c=(d+p)/2,g=(p-d)/2,g=Math.max(g,m/2),[c-g,c+g]):(f*=.99,m*=1.01,y=s-n,y>f&&(y=Math.min(y,f)),y=Math.max(y,m),u=y/(s-n),null==i&&(i=(n+s)/2),n===s&&console.error("From = To, trouble",n,s),[i+(n-i)*u,i+(s-i)*u])},t.prototype.preventOverscroll=function(t,e,i,n,s,o,r){var a,l,h,c,u;return u=this.getLimits(n,s,t,o,r),l=u[0],h=u[1],c=this.settings.interaction.scrolling,a=i-e,null!=l&&null!=h&&(a=Math.min(a,h-l)),a*=c.overscrollProportion,null!=l&&(l-=a),null!=h&&(h+=a),null!=l&&null!=h&&i-e>h-l?e>l?(a=e-l,e-=a,i-=a):h>i&&(a=i-h,e-=a,i-=a):null!=h&&i>h?(a=i-h,e-=a,i-=a):null!=l&&l>e&&(a=l-e,e=l,i+=a),[e,i]},t.prototype.scroll=function(t,e,i,n,s,o){var r;if("displayUnit"===o)r=i.clone();else if("page"===o)r=this.getTimeRangeStep(t,e);else{if(!Base_TimeStep.isGoodUnit(o))return void Base_Helpers.error("Incorrect scroll unit: "+o);r=Base_TimeStep.parse(o)}return r.count*=s,"<"===n?[r.sub(t),r.sub(e)]:[r.add(t),r.add(e)]},t.prototype.getTimeRangeStep=function(t,e){var i,n,s,o,r,a,l,h;for(t=Math.round(t),e=Math.round(e),i=null,h=Base_TimeStep.knownUnits,a=0,l=h.length;l>a;a++)r=h[a],s=new Base_TimeStep(r,1),n=s.roundTimeRound(t),o=s.roundTimeRound(e),t===n&&e===o&&(null===i||i.approxTime()<s.approxTime())&&(i=s);return i.count=Math.max(1,i.numberOfUnits(t,e)),i},t}();var ItemsChart_ItemsLayer,Itemschart_Link,Itemschart_Node,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Node=function(){function t(t,e){this.id=t,this.layer=e,this.data=null,this.x=null,this.y=null,this.targetHHeight=null,this.targetHWidth=null,this.hHeight=0,this.hWidth=0,this.bLeft=0,this.bRight=0,this.bTop=0,this.bBottom=0,this.currentLabel=null,this.currentItems=[],this.coordinatesCache=null,this.coordinatesCacheZoom=1/0,this.renderHheight=0,this.renderHwidth=0,this.links=[],this.dataLinks=[],this.dataLinksFiltered=[]}return t.styleSettings={fillColor:null,lineColor:null,lineWidth:1,lineDash:null,shadowColor:null,radius:1,label:null,display:"image",coordinates:null},t.prototype.zindex=0,t.prototype.isNode=!0,t.prototype.isLink=!1,t.prototype.removed=!1,t.prototype.added=!1,t.prototype.loading=!1,t.prototype.userLock=!1,t.prototype.expanded=!1,t.prototype.focused=!1,t.prototype.background=!1,t.prototype.cursor=null,t.prototype.relevance=1,t.prototype.opacity=1,t.prototype.selectable=!0,t.prototype.movable=!0,t.prototype.display="image",t.prototype.coordinates=null,t.prototype.fillColor=null,t.prototype.lineColor=null,t.prototype.lineWidth=1,t.prototype.image=null,t.prototype.imageCropping=!1,t.prototype.imageSlicing=null,t.prototype.tintImage=!1,t.prototype.items=[],t.prototype.label=null,t.prototype.labelStyle=null,t.prototype.locks=0,t}(),Itemschart_Link=function(){function t(t,e){this.id=t,this.layer=e}return t.styleSettings={fillColor:"#333",shadowColor:null,label:null,radius:1,length:1,strength:1,lineDash:null,toPieValue:0,toPieColor:null,direction:null,fromDecoration:null,toDecoration:null},t.prototype.from=null,t.prototype.to=null,t.prototype.removed=!1,t.prototype.background=!1,t.prototype.isNode=!1,t.prototype.isLink=!0,t.prototype.data=null,t.prototype.multiId=null,t.prototype.radius=1,t.prototype.length=1,t.prototype.cursor=null,t.prototype.strength=1,t.prototype.label=null,t.prototype.labelStyle=null,t.prototype.dashed=!1,t.prototype.currentRadius=0,t.prototype.direction=null,t.prototype.fromDecoration=null,t.prototype.toDecoration=null,t.prototype.relevance=1,t.prototype.items=[],t.prototype.toPieValue=0,t.prototype.toPieColor=null,t.prototype.toPie0=null,t.prototype.toPie1=null,t.prototype.currentItems=null,t.prototype.currentCenterOffset=0,t.prototype.otherEnd=function(t){return t===this.from?this.to:t===this.to?this.from:null},t.prototype.commonNode=function(t){return this.from===t.from||this.from===t.to?this.from:this.to===t.from||this.to===t.to?this.to:null},t}(),ItemsChart_ItemsLayer=function(t){function e(t,i){this.scene=t,this.layerSettings=i,e.__super__.constructor.call(this,this.scene),this.parentId=null,this.scaleObjectsWithZoom=!0,this._nodes=[],this._links=[],this._nodesDel=null,this._linksDel=null,this.idToNode={},this.idToLink={},this.clearModified(),this.styleUpdater=this.createStyleUpdater(this.layerSettings.style)}return __extends(e,t),e.prototype.onSettingsChanged=function(t){var e,i,n,s,o,r,a,l,h;if(t.style){for(this.styleUpdater=this.createStyleUpdater(this.layerSettings.style),a=this.nodes(),n=0,o=a.length;o>n;n++)i=a[n],this.touchNode(i);for(l=this.links(),h=[],s=0,r=l.length;r>s;s++)e=l[s],h.push(this.touchLink(e));return h}},e.prototype.doAnimations=function(t){return this.styleUpdater.updateItems(t,this,!0)},e.prototype.createStyleUpdater=function(){return null},e.prototype.paintPrepare=function(){return 0},e.prototype.paintSelection=function(){return 0},e.prototype.paintLinks=function(){return 0},e.prototype.paintNodes=function(){return 0},e.prototype.findObjectAt=function(){return null},e.prototype.getLegendItems=function(){return[]},e.prototype.paint=function(t){var e,i,n,s,o,r,a,l;if(this.paintPrepare(t),this.clearModified(),r=this.scene.selection,r.length>0){for(o=[],s=[],a=0,l=r.length;l>a;a++)n=r[a],n.layer===this&&n.isNode&&o.push(n),n.layer===this&&n.isLink&&s.push(n);(o.length>0||s.length>0)&&this.paintSelection(t,o,s)}return s=this.links(),e=this._makeHoveredLast(s,this.scene.hoverLink),this.paintLinks(t,s),this._restoreHovered(s,e),o=this.nodes(),i=this._makeHoveredLast(o,this.scene.hoverNode),this.paintNodes(t,o),this._restoreHovered(o,i)},e.prototype.clearObjects=function(){var t,e,i,n,s,o,r,a,l;for(r=this.nodes(),i=0,s=r.length;s>i;i++)e=r[i],this.removeNode(e);for(a=this.links(),l=[],n=0,o=a.length;o>n;n++)t=a[n],l.push(this.removeLink(t));return l},e.prototype.nodes=function(){var t,e,i,n,s;if(null===this._nodesDel)return this._nodes;for(t=[],s=this._nodes,i=0,n=s.length;n>i;i++)e=s[i],this._nodesDel[e.id]||t.push(e);return this._nodes=t,this._nodesDel=null,t},e.prototype.links=function(){var t,e,i,n,s;if(null===this._linksDel)return this._links;for(t=[],s=this._links,i=0,n=s.length;n>i;i++)e=s[i],this._linksDel[e.id]||t.push(e);return this._links=t,this._linksDel=null,t},e.prototype.addNode=function(t){var e;return this.nodes(),this.idToNode.hasOwnProperty(t)?(e=this.idToNode[t],e.removed=!1,e.added||(e.added=!0)):this.deletedNodes.hasOwnProperty(t)?(e=this.deletedNodes[t],e.removed=!1,e.added||(e.added=!0),this.idToNode[t]=e,this._nodes.push(e),delete this.deletedNodes[t]):(e=new Itemschart_Node(t,this),e.added=!0,this.idToNode[t]=e,this._nodes.push(e),this.newNodes[t]=e),this.modifiedNodes[t]=e,e},e.prototype.touchNodeOrLink=function(t){return t.isNode?this.modifiedNodes[t.id]=t:this.modifiedLinks[t.id]=t},e.prototype.touchNode=function(t){return this.modifiedNodes[t.id]=t},e.prototype.removeNode=function(t){var e;return e=t.id,this.idToNode.hasOwnProperty(e)?(t===this.lastClickedNode&&(this.lastClickedNode=null),this.scene.objectRemoved(t),this.newNodes.hasOwnProperty(t.id)?this.deleteNode(t):(t.removed||(t.removed=!0),t.added=!1,this.modifiedNodes[e]=t)):void 0},e.prototype.deleteNode=function(t){return null===this._nodesDel&&(this._nodesDel={}),this._nodesDel[t.id]=!0,this.scene.objectRemoved(t),delete this.newNodes[t.id],delete this.modifiedNodes[t.id],delete this.idToNode[t.id],this.deletedNodes[t.id]=t},e.prototype.addLink=function(t,e,i){var n;if(!this.idToNode.hasOwnProperty(e)||!this.idToNode.hasOwnProperty(i))throw"Cannot add link - missing nodes";return this.links(),this.idToLink.hasOwnProperty(t)?(n=this.idToLink[t],n.removed=!1,n.added||(n.added=!0)):this.deletedLinks.hasOwnProperty(t)?(n=this.deletedLinks[t],delete this.deletedLinks[t],this.idToLink[t]=n,this._links.push(n),n.removed=!1,n.added||(n.added=!0)):(n=new Itemschart_Link(t,this),n.added=!0,this._links.push(n),this.idToLink[t]=n,this.newLinks[t]=n),n.from=null,n.to=null,n.multiId=i>e?e+"#"+i:i+"#"+e,this.modifiedLinks[t]=n,n},e.prototype.removeLink=function(t){var e;return e=t.id,this.idToLink.hasOwnProperty(e)?(this.scene.objectRemoved(t),this.newLinks.hasOwnProperty(e)?this.deleteLink(t):(t.added=!1,t.removed||(t.removed=!0),this.modifiedLinks[e]=t)):void 0},e.prototype.deleteLink=function(t){return null===this._linksDel&&(this._linksDel={}),this._linksDel[t.id]=!0,this.scene.objectRemoved(t),this.newLinks.hasOwnProperty(t.id)?delete this.newLinks[t.id]:this.deletedLinks[t.id]=t,delete this.modifiedLinks[t.id],delete this.idToLink[t.id]},e.prototype.touchLink=function(t){return this.modifiedLinks[t.id]=t},e.prototype.getModified=function(){return[this.newNodes,this.newLinks,this.modifiedNodes,this.modifiedLinks,this.deletedNodes,this.deletedLinks]},e.prototype.hasTopologyChanges=function(){return Base_Helpers.hasProperties(this.newNodes)||Base_Helpers.hasProperties(this.newLinks)||Base_Helpers.hasProperties(this.deletedNodes)||Base_Helpers.hasProperties(this.deletedLinks)},e.prototype.hasStyleChanges=function(){return this.hasTopologyChanges()||Base_Helpers.hasProperties(this.modifiedLinks)||Base_Helpers.hasProperties(this.modifiedNodes)},e.prototype.clearModified=function(){return this.newNodes={},this.newLinks={},this.modifiedNodes={},this.modifiedLinks={},this.deletedNodes={},this.deletedLinks={}},e.prototype.paintNodeDetails=function(t,e,i,n,s,o,r,a,l){var h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C;if(g=a.labelRenderer,u=a.context,v=s/r,l&&t.currentLabel&&(m=t.currentLabel,y=m.scaleWithSize?v:m.scaleWithZoom?o:1,g.measure(u,m),m.hheight>1.5&&g.paint(u,e,i+s+m.hheight*y*.8,y,m)),t.currentItems){for(w=t.currentItems,C=[],x=0,S=w.length;S>x;x++)d=w[x],h=d.x||0,c=d.y||0,p=d.px||0,f=d.py||0,_=e+n*p+h,b=i+s*f+c,y=d.scaleWithSize?v:d.scaleWithZoom?o:1,C.push(d.hheight>1.5?g.paint(u,_,b,y,d):void 0);return C}},e.prototype.getGeometry=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p;return p=this.scene.toDisplayTransform(),e=p[0],t=p[1],n=p[2],i=p[3],s=this.bounds.x0,r=this.bounds.x1,l=this.bounds.y0,c=this.bounds.y1,o=(s-t)/e,a=(r-t)/e,h=(l-i)/n,u=(c-i)/n,d=this.scaleObjectsWithZoom?this.scene.zoom:1,[e,t,n,i,d,s,r,l,c,o,h,a,u]},e.prototype._makeHoveredLast=function(t,e){var i,n,s,o,r,a;if(n=t.length,2>n||!e||e===t[n-1])return n-1;for(i=r=0,a=t.length;a>r;i=++r)if(o=t[i],o===e)return s=t[n-1],t[n-1]=e,t[i]=s,i;return n-1},e.prototype._restoreHovered=function(t,e){var i,n;return i=t.length,e!==i-1?(n=t[e],t[e]=t[i-1],t[i-1]=n):void 0},e}(Base_Layer);var PieChart_Renderer_Flat,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Flat=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.paintSlices=function(t,e,i,n){var s,o,r,a;for(a=[],o=0,r=n.length;r>o;o++)s=n[o],a.push(this.strokeAndPaint(t,e,i,s));return a},e}(PieChart_Renderer_Base);var PieChart_Renderer_Can,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Can=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.paintPie=function(t,i,n,s,o,r,a,l){var h,c,u,d,p,f;if(e.__super__.paintPie.call(this,t,i,n,s,o,r,a,l),h=this.settings.pie.depth,h>0&&l.allSlices.length>0){for(t.fillStyle="rgba(0,0,0,0.05)",p=[5,10,18],f=[],u=0,d=p.length;d>u;u++)c=p[u],t.beginPath(),t.arc(i,n+c+h,o,r,a,!1),t.arc(i,n+c+h,s,a,r,!0),t.closePath(),f.push(t.fill());return f}},e.prototype.paintSlices=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;for(r=this.settings.pie.depth,o=2*this.settings.advanced.renderQuality,p=1/o,h=r*o,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=1.5*r,t.shadowColor="black",t.fillStyle="black",f=0,v=n.length;v>f;f++)d=n[f],this.strokeSlice(t,e,i+r,d),t.fill();for(t.shadowColor=null,t.shadowBlur=0,t.lineWidth=1,a=m=0;h>=m;a=m+=1)for(g=0,_=n.length;_>g;g++)d=n[g],this.strokeSlice(t,e,i+r-a*p,d),t.strokeStyle=a>=h-1?Base_Graphics.deriveColor(d.fillColor,1.35,1):Base_Graphics.deriveColor(d.fillColor,.5+a/h*.2,1),t.stroke();for(s=Math.PI,t.shadowBlur=r,t.shadowColor="rgba(0,0,0,0.1)",t.fillStyle="black",y=0,b=n.length;b>y;y++)if(d=n[y],c=d.renderParams,l=c[4],u=c[5],l!==u){for(;l>s;)l-=2*s,u-=2*s;0>l?u>0&&(u=Math.min(u,s),this.strokeInnerShadowSlice(t,e,i,d,0,u)&&t.fill()):s>u?this.strokeInnerShadowSlice(t,e,i,d,l,u)&&t.fill():(s>l&&this.strokeInnerShadowSlice(t,e,i,d,l,s)&&t.fill(),u>2*s&&this.strokeInnerShadowSlice(t,e,i,d,2*s,u)&&t.fill())}for(w=[],S=0,x=n.length;x>S;S++)d=n[S],w.push(this.strokeAndPaint(t,e,i,d));return w},e.prototype.strokeInnerShadowSlice=function(t,e,i,n,s,o){var r,a,l;return r=n.renderParams,a=r[0]+1,l=Math.min(r[1]-1,a+10),a>=r[1]||l<=r[0]?!1:(s+=1/a,o-=1/a,s>=o?void 0:(t.beginPath(),t.arc(e,i,l,s,o,!1),t.arc(e,i,a,o,s,!0),t.closePath(),!0))},e}(PieChart_Renderer_Base);var PieChart_Renderer_Smoothy,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Smoothy=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.gradients={},e.prototype.paintSlices=function(t,e,i,n){var s,o,r,a;for(this.g=t,a=[],o=0,r=n.length;r>o;o++)s=n[o],this.strokeAndPaint(t,e,i,s),a.push(this.elegantGradient(e,i,s));return a},e.prototype.getRadialGradient=function(t,e,i,n,s,o,r){var a,l;return a=Math.abs(Math.sin(r)),l=this.g.createRadialGradient(t,e,i,n,s,o),this.addColorStops(l,a,r),l},e.prototype.getLinearGradient=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m,g;return c=r-n,g=Math.sin(a),h=Math.cos(a),d=e+h*n,f=i+g*n,p=d+h*c,m=f+g*c,l=Math.abs(g),u=this.g.createLinearGradient(d,f,p,m),this.addColorStops(u,l,a),u},e.prototype.addColorStops=function(t,e,i){var n,s,o,r,a,l,h,c,u;return n="0,0,0",u="255,255,255",0>=i||i>Math.PI?(h=n,c=u):(h=u,c=n),s=.4*e,o=.2*e,r=.1*e,a=.3*e,l=.5*e,t.addColorStop(0,"rgba("+h+","+s.toFixed(3)+")"),t.addColorStop(.1,"rgba("+h+","+o.toFixed(3)+")"),t.addColorStop(.1,"rgba("+h+","+r.toFixed(3)+")"),t.addColorStop(.4,"rgba("+n+",0.1)"),t.addColorStop(.9,"rgba("+c+","+r.toFixed(3)+")"),t.addColorStop(.95,"rgba("+c+","+a.toFixed(3)+")"),t.addColorStop(1,"rgba("+c+","+l.toFixed(3)+")")},e.prototype.elegantGradient=function(t,e,i){var n,s,o,r,a,l,h,c,u,d;for(u=i.renderParams,h=u[0],c=u[1],n=u[2],s=u[3],l=this.settings.advanced.renderQuality,a=Math.PI/Math.max(1,180*l),o=n,d=[];s>o;)r=Math.min(o+a,s),this.g.beginPath(),this.g.arc(t,e,c,o,r),this.g.arc(t,e,h,r,o,!0),this.g.closePath(),Base_Graphics.paint(this.g,{fillColor:this.getRadialGradient(t,e,h,t,e,c,o)}),d.push(o=r);return d},e}(PieChart_Renderer_Base);var PieChart_Renderer_Bevel,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart_Renderer_Bevel=function(t){function e(){return this.getSmartGradient=__bind(this.getSmartGradient,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.gradients={},e.prototype.paintSlices=function(t,e,i,n){var s,o,r,a;for(this.g=t,a=[],o=0,r=n.length;r>o;o++)s=n[o],this.strokeAndPaint(t,e,i,s),a.push(this.smartGradient(e,i,s));return a},e.prototype.getSmartGradient=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f;c="g"+s+o+i+n,"inside"===s?"top"===o?(p=u=d=f=0,p=n-i,f=e,r="rgba(0,0,0,0.3)",a="rgba(0,0,0,0)"):(p=u=d=f=0,p=e,f=e+i,r="rgba(255,255,255,0)",a="rgba(255,255,255,0.3)"):"top"===o?(p=u=d=f=0,f=e,r="rgba(255,255,255,0.3)",a="rgba(255,255,255,0)"):(p=u=d=f=0,p=e,f=e+n,r="rgba(0,0,0,0)",a="rgba(0,0,0,0.3)");try{return h=this.g.createLinearGradient(u,p,d,f),h.addColorStop(0,r),h.addColorStop(1,a),this.gradients[c]=h,h}catch(m){throw l=m,"Could not create linear gradient: "+l}},e.prototype.smartOuterShineTop=function(t,e,i,n,s,o,r,a){var l;if(!(s>0&&o<Math.PI))return o>0&&0>s&&(o=0,a=0),s>0&&s<Math.PI&&(s=Math.PI,r=Math.PI),l={renderParams:[n-.1*(n-i),n,s,o,r,a],x:0,y:0},l.fillColor=this.getSmartGradient(t,e,i,n,"outside","top"),this.strokeAndPaint(this.g,t,e,l)},e.prototype.smartOuterShineBottom=function(t,e,i,n,s,o,r,a){var l;if(!(0>o||s>Math.PI))return 0>s&&(s=0,r=0),o>Math.PI&&(o=Math.PI,a=Math.PI),l={renderParams:[n-.1*(n-i),n,s,o,r,a],x:0,y:0},l.fillColor=this.getSmartGradient(t,e,i,n,"outside","bottom"),this.strokeAndPaint(this.g,t,e,l)},e.prototype.smartInnerShineTop=function(t,e,i,n,s,o,r,a){var l;if(!(s>0&&o<Math.PI))return o>0&&0>s&&(o=0,a=0),s>0&&s<Math.PI&&(s=Math.PI,r=Math.PI),l={renderParams:[i,i+.1*(n-i),s,o,r,a],x:0,y:0},l.fillColor=this.getSmartGradient(t,e,i,n,"inside","top"),this.strokeAndPaint(this.g,t,e,l)},e.prototype.smartInnerShineBottom=function(t,e,i,n,s,o,r,a){var l;if(!(0>o||s>Math.PI))return 0>s&&(s=0,r=0),o>Math.PI&&(o=Math.PI,a=Math.PI),l={renderParams:[i,i+.1*(n-i),s,o,r,a],x:0,y:0},l.fillColor=this.getSmartGradient(t,e,i,n,"inside","bottom"),this.strokeAndPaint(this.g,t,e,l)},e.prototype.smartGradient=function(t,e,i){var n,s,o,r,a,l;t+=i.x,e+=i.y,a=i.renderParams[0],l=i.renderParams[1],n=i.renderParams[2],s=i.renderParams[3],o=i.renderParams[4],r=i.renderParams[5],this.smartOuterShineTop(t,e,a,l,n,s,o,r),this.smartOuterShineBottom(t,e,a,l,n,s,o,r),this.smartInnerShineTop(t,e,a,l,n,s,o,r),this.smartInnerShineBottom(t,e,a,l,n,s,o,r)},e}(PieChart_Renderer_Base);var Linearchart_Renderer_Columns;Linearchart_Renderer_Columns=function(){"use strict";function t(t,e){this.scene=t,this.series=e,this.prevy=[]}return t.prototype.paintStack=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g;if(this.zeroY=o,e.length>0){for(c=this.series,l=this.prevy,l.length<e.length&&(l=this.prevy=new Array(e.length)),a=d=0,m=e.length-1;m>=d;a=d+=1)l[a]=o;for(r=i[0]+i[i.length-1],g=[],a=p=0,f=c.length;f>p;a=++p)h=c[a],u=s[a],g.push(r>=2||u?this.plainColumns(t,h.style,e,i,l,n,u,a):this.outline(t,h.style,e,i,l,n[a]));return g}},t.prototype.hitTest=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k;if(c=t.length,!(c>1))return[null,1/0];for(p=this.series,v=Base_Helpers.binSearch(t,o),f=t[v]-e[v],g=t[v]+e[v],f>o&&v>0&&(m=t[v-1]-e[v-1],y=t[v-1]+e[v-1],(y>o||Math.abs(y-o)<Math.abs(f-o))&&(v-=1,f=m,g=y)),u=null,l=1/0,_=s,h=C=0,k=p.length;k>C;h=++C)d=p[h],w=i[h][v],null!==w&&(x=_-w,b=Math.min(_,x),S=Math.max(_,x),a=Base_Geometry.distanceToRect(o,r,f,b,g,S),l>a&&(l=a,u={x0:f,y0:b,x1:g,y1:S,seriesIndex:h,isMarker:!1}),_=x);return[u,l]},t.prototype.outline=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g;if(a=i.length,a>1){for(t.fillStyle=e.strokeStyle?e.lineColor:e.fillColor,p=this.zeroY,g=[],r=f=0,m=a-1;m>=f;r=f+=1)h=i[r]-n[r],c=i[r]+n[r],u=o[r],null!==u&&(d=s[r],u=p-u,t.fillRect(h,d,c-h+.5,u-d),s[r]=u),g.push(l=c);return g}},t.prototype.plainColumns=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V;for(Y=[this.scene.y0,this.scene.height],A=Y[0],x=Y[1],P=e.minHeight,l=A+x,H=this.zeroY,N=o[a],p=null,g=e.depth,L=e.shadowColor,V=[],S=R=0,U=i.length;U>R;S=++R)if(h=i[S],F=N[S],null!==F){if(D=n[S],O=s[S],E=O-F,s[S]=E,u=h-D,f=D+D,E>O){for(c=Math.max(E-O,P),d=O,w=!0,k=a-1;k>0;){if(null!==o[k][S]){w=!1;break}k--}T=w}else{if(!(O>E))continue;for(c=Math.max(O-E,P),d=O-c,C=!0,k=a+1;k<o.length;){if(null!==o[k][S]){C=!1;break}k++}T=C}if(M=r?r[S]:e,M||(M=e),p!==M&&(p=M,B=p.lineColor?p.lineWidth:0,p.currentFillGradient?_=p.currentFillGradient:(_=p.fillColor,null!=p.gradient&&1!==p.gradient&&_&&(_=t.createLinearGradient(0,l,0,l-2*x/3),_.addColorStop(0,Base_Graphics.deriveColor(p.fillColor,p.gradient,1)),_.addColorStop(1,p.fillColor))),t.fillStyle=_,p.fillColor&&g?(y=p.fillColor,null!=p.depthBrightness&&(y=Base_Graphics.deriveColor(y,p.depthBrightness,1))):y=null),y&&(t.beginPath(),Base_Graphics.applyShadow(t,p),T?(t.moveTo(u+g,d-g),t.lineTo(u+f+g,d-g),t.lineTo(u+f+g,d+c-g),t.lineTo(u+f,d+c),t.lineTo(u+f,d),t.lineTo(u,d)):(t.moveTo(u+f,d),t.lineTo(u+f+g,d-g),t.lineTo(u+f+g,d+c-g),t.lineTo(u+f,d+c),t.lineTo(u+f,d)),t.closePath(),t.fillStyle=y,t.fill(),Base_Graphics.clearShadow(t),t.fillStyle=_),!y&&L&&Base_Graphics.applyShadow(t,p),_&&(t.fillRect(u,d,f,c),!y&&L&&Base_Graphics.clearShadow(t)),B>0&&(d+=B/2,u+=B/2,f-=B,c-=B,m=Base_Graphics.beginStroke(t,p),f>0?c>0?(m.moveTo(u,d),m.lineTo(u+f,d),m.lineTo(u+f,d+c),m.lineTo(u,d+c),m.lineTo(u,d)):B>0&&(t.moveTo(u,O),t.lineTo(u+f,O)):B>0&&(t.moveTo(h,d),t.lineTo(h,d+c)),Base_Graphics.endStroke(t,m,p)),_||y||!L||Base_Graphics.clearShadow(t),p.previewData){for(t.beginPath(),b=0,v=E-O,W=p.previewData,z=0,j=W.length;j>z;z++)I=W[z],b+=I,F=O+b*v,t.moveTo(u,F),t.lineTo(u+f,F);t.lineWidth=1,t.strokeStyle=p.previewLineColor,V.push(t.stroke())}else V.push(void 0)}return V},t}();var Linearchart_Renderer_Line;Linearchart_Renderer_Line=function(){"use strict";function t(t){var e,i,n;for(this.series=t,this.centers=[],this.seriesData=[],i=0,n=t.length;n>i;i++)e=t[i],this.seriesData.push({markerY:[],segments:[]});this.prevyL=[],this.prevyR=[]}return t.prototype.paintStack=function(t,e,i,n,s,o){var r,a,l,h,c,u;if(this.centers=e,this.styles=s,this.zeroY=o,e.length>0){for(this.paintLines(t,this.series,this.seriesData,i,n,o),c=this.series,u=[],r=l=0,h=c.length;h>l;r=++l)a=c[r],u.push(this.paintMarkers(t,a,this.centers,n[r],this.seriesData[r].markerY));return u}},t.prototype.paintLines=function(t,e,i,n,s,o){var r,a,l,h,c,u;for(this.zeroY=o,this.computeLineSegments(n,this.zeroY,s),a=[],u=[],r=h=0,c=e.length;c>h;r=++h)l=e[r],this.paintLine(t,l.style,a,i[r].segments),u.push(a=this.seriesData[r].segments);return u},t.prototype.paintMarkers=function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p;if(e.style.marker&&e.style.marker.shape&&e.style.marker.width){for(a=e.style.marker,o=a.fillColor,o||(o=e.style.lineColor),o||(o=e.style.fillColor),t.fillStyle=o,l=a.width/2,h=a.shape,p=[],r=u=0,d=n.length;d>u;r=++u)c=n[r],null!==c&&(t.beginPath(),Base_Graphics.strokeMarker(t,h,i[r],s[r],l),p.push(t.fill()));return p}},t.prototype.hitTest=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V;if(k=this.series,t=this.centers,_=t.length,!(_>0))return[null,1/0];for(L=Math.min(Base_Helpers.binSearch(t,o),_-2),h=null,l=1/0,p=s-r,C=N=0,U=k.length;U>N;C=++N){for(w=k[C],P=n[y]?n[y][L]:k[C].style,c=this.seriesData[C],y=H=j=Math.max(0,L-2),Y=Math.min(_,L+3);Y>H;y=H+=1)M=i[C][y],null!==M&&P.marker&&(A=t[y],E=c.markerY[y],x=P.marker.width/2,m=o-A,g=r-E,b=Math.sqrt(m*m+g*g),x+a>b&&l>b-x&&(l=b-x,h={x0:A,y0:E,x1:A,y1:E,seriesIndex:C,isMarker:!0}));for(f=null,S=c.segments,y=R=0,W=S.length;W>R;y=R+=2)for(B=S[y],O=S[y+1],T=B[0],v=z=1,V=B.length;V>z;v=z+=1)D=B[v],o+a>=T&&D>=o-a&&(I=O[v-1],F=O[v],d=Math.sqrt(Base_Geometry.distanceToLineSq(T,I,D,F,o,r)),a>d&&l>=d&&(l=d,h={x0:T,y0:I,x1:D,y1:F,seriesIndex:C,isMarker:!1})),o>=T&&D>=o&&(I=O[v-1],F=O[v],u=Base_Geometry.rayIntersectsLineBidir(o,r,0,1,T,I,D,F),1/0!==u&&(f=u)),T=D;
null!==f&&(Base_Helpers.sign(f)!==Base_Helpers.sign(p)&&(P.fillColor||P.fillGradient)&&l>=0&&(l=0,h={x0:0,y0:0,x1:1,y1:1,seriesIndex:C,isMarker:!1}),p=f)}return[h,Math.max(l,0)]},t.prototype.computeLineSegments=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b;for(r=this.centers.length,l=this.prevyL,h=this.prevyR,l.length<r&&(l.length=r,h.length=r),s=u=0;r>u;s=u+=1)l[s]=e,h[s]=e;for(a=l,m=this.series,b=[],s=d=0,f=m.length;f>d;s=++d){if(c=m[s],n=this.seriesData[s],n.segments.length=0,n.markerY.length<r&&(n.markerY.length=r),c.style.steps)g=this.buildStepSegments(this.centers,t,e,l,h,a,i[s],c.data.noDataPolicy),n.segments=g[0],n.markerY=g[1];else if(y=this.buildLineSegments(this.centers,e,l,h,a,i[s],c.data.noDataPolicy),n.segments=y[0],n.markerY=y[1],c.style.smoothing)for(o=p=0,v=n.segments.length;v>p;o=p+=2)_=this.smoothLine(n.segments[o],n.segments[o+1],c.style.smoothing),n.segments[o]=_[0],n.segments[o+1]=_[1];b.push(a=n.markerY)}return b},t.prototype.buildLineSegments=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I;if(d=[],b=[],S=[],"zero"===r){for(h=P=0,L=t.length;L>P;h=P+=1)v=t[h],w=o[h],m=i[h],g=n[h],null!==w?(d.push(s[h]-w),b.push(v),S.push(m-w),m!==g&&(b.push(v),S.push(g-w)),i[h]-=w,n[h]-=w):(d.push(s[h]),m!==g?(S.push(m),S.push(g),b.push(v),b.push(v)):(S.push(m),b.push(v)));return[[b,S],d]}if("join"===r){for(u=null,h=M=0,B=t.length;B>M;h=M+=1)if(v=t[h],w=o[h],m=i[h],g=n[h],null!==w){if(null===u)d.push(s[h]-w),b.push(v),S.push(g-w),n[h]-=w;else{if(h-1>u)for(C=o[u],_=t[u],a=(w-C)/(v-_),c=T=A=u+1;h>T;c=T+=1)x=t[c],k=C+a*(x-_),d.push(s[c]-k),p=i[c],f=n[c],b.push(x),S.push(p-k),p!==f&&(b.push(x),S.push(f-k)),i[c]-=k,n[c]-=k;d.push(s[h]-w),b.push(v),S.push(m-w),m!==g&&(b.push(v),S.push(g-w)),i[h]-=w,n[h]-=w}u=h}else null===u&&d.push(s[h]);return b.length>2&&b[b.length-1]===b[b.length-2]&&(b.pop(),S.pop()),[[b,S],d]}for(l=!1,y=[],h=D=0,I=t.length;I>D;h=D+=1)v=t[h],w=o[h],m=i[h],g=n[h],null!==w?(d.push(s[h]-w),l?(b.length>1&&i[h-1]!==n[h-1]&&(b.push(t[h-1]),S.push(n[h-1])),b.push(v),S.push(m-w),i[h]-=w,n[h]-=w):(b.push(v),S.push(g-w),n[h]-=w),l=!0):(d.push(s[h]),l&&(b.length>0&&(1===b.length&&(b.push(b[0]),S.push(S[0])),y.push(b,S),b=[],S=[]),n[h-1]+=o[h-1]),l=!1);return b.length>0&&(1===b.length&&(b.push(b[0]),S.push(S[0])),y.push(b,S)),[y,d]},t.prototype.buildStepSegments=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m,g,y,v,_;for(u=[],h=[],f=[],y=[],g=null,p=0,l=v=0,_=t.length;_>v;l=v+=1)d=t[l]-e[l],m=r[l],null!==m?(null!==g&&(f.push(d),y.push(g)),c=o[l]-m,f.push(d),y.push(c),g=c,p=d+2*e[l],h.push(c),n[l]=s[l]=c):"zero"===a?(c=o[l],h.push(c),s[l]=n[l]=c,null!==g&&(f.push(p),y.push(g)),f.push(d),y.push(c),g=c,p=d+2*e[l]):"join"===a?(c=null!==g?g:o[l],h.push(c),s[l]=n[l]=c):(c=o[l],h.push(c),s[l]=n[l]=c,f.length>0&&(null!==g&&(f.push(p),y.push(g)),g=null,u.push(f,y),f=[],y=[]));return f.length>0&&(null!==g&&(f.push(p),y.push(g)),u.push(f,y)),[u,h]},t.prototype.smoothLine=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g;if(d=t[0],p=t[t.length-1],u=(p-d)/t.length,2>u)return[t,e];for(h=[],c=[],h.push(d),c.push(e[0]),o=0;o+1<t.length;){if(r=o+1,t[o]!==t[r])for(;r+1<t.length&&t[r]!==t[r+1];)r+=1;if(r-o===1)h.push(t[r]),c.push(e[r]);else{for(i=new Base_MonotoneCurve(t,e,o,r+1),p=t[o],s=m=g=o+1;r>=m;s=m+=1){for(d=p,p=t[s],f=e[s],u=p-d,a=Math.ceil(Math.min(50,Math.max(2,u/3))),n=u/a,l=h.length;(d+=n)<p;)h.push(d);i.interpolateArray(s-1,h,l,h.length,c),h.push(p),c.push(f)}i.clear()}o=r}return t.length=0,e.length=0,[h,c]},t.prototype.paintLine=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p;if(e.fillColor||e.currentFillGradient){for(e.shadowColor&&Base_Graphics.applyShadow(t,e),t.fillStyle=e.currentFillGradient?e.currentFillGradient:e.fillColor,t.beginPath(),s=l=0,u=n.length-1;u>=l;s=l+=2)this.paintArea(t,n[s],n[s+1],i);t.fill(),e.shadowColor&&Base_Graphics.clearShadow(t)}if(e.lineColor){for(!e.fillColor&&e.shadowColor&&Base_Graphics.applyShadow(t,e),o=Base_Graphics.beginStroke(t,e),s=h=0,d=n.length-1;d>=h;s=h+=2)for(r=n[s],a=n[s+1],o.moveTo(r[0],a[0]),s=c=1,p=r.length;p>c;s=c+=1)o.lineTo(r[s],a[s]);if(Base_Graphics.endStroke(t,o,e),!e.fillColor&&e.shadowColor)return Base_Graphics.clearShadow(t)}},t.prototype.paintArea=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;for(t.moveTo(e[0],i[0]),r=_=1,S=e.length-1;S>=_;r=_+=1)t.lineTo(e[r],i[r]);for(p=e[0],f=e[e.length-1],v=this.zeroY,d=f,a=b=w=n.length-2;b>=0;a=b+=-2)if(m=n[a],y=n[a+1],!(m.length<2||m[0]>d||m[m.length-1]<p)){for(l=m.length-1,c=m[l],d>c&&(t.lineTo(d,v),t.lineTo(c,v),d=c),r=x=l;x>=0;r=x+=-1){if(o=m[r],d===c?(t.lineTo(c,y[r+1]),d=o):c>d&&d>o&&(s=y[r],h=y[r+1],u=(d-o)/(c-o),g=s+u*(h-s),t.lineTo(d,g),d=o),p>=d){d=p,s=y[r],h=y[r+1],u=(d-o)/(c-o),g=s+u*(h-s),t.lineTo(d,g);break}c=o}-1===r&&d===o&&t.lineTo(d,y[0])}return d!==p&&(t.lineTo(d,v),t.lineTo(p,v)),t.closePath()},t}();var Base_Helpers,lastTime,rafFunc,__hasProp={}.hasOwnProperty;"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),window.requestAnimationFrame||(rafFunc=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,rafFunc||(lastTime=0,rafFunc=function(t){var e,i,n;return e=(new Date).getTime(),n=Math.max(0,16-(e-lastTime)),i=window.setTimeout(function(){return t(e+n)},n),lastTime=e+n,i}),window.requestAnimationFrame=rafFunc),Base_Helpers=function(){"use strict";function t(){}var e,i;return t.extend=function(t,e){var i,n;if(null==t)return{};for(i in e)__hasProp.call(e,i)&&(n=e[i],t[i]=n);return t},t.extendDataItem=function(e,i){var n,s;for(n in i)__hasProp.call(i,n)&&(s=i[n],"style"===n&&e.style?t.extendDeep(e.style,s):e[n]=s);return e},t.extendDeep=function(e,i){var n,s,o;if(null==e)return i;for(n in i)__hasProp.call(i,n)&&(s=i[n],o=e[n],t.isObject(o)&&t.isObject(s)&&!t.isDomObject(o)&&!t.isDomObject(s)?this.extendDeep(o,s):e[n]=s);return e},t.extendCopy=function(t,e){var i,n,s;if(null==e)return t;for(i in e)__hasProp.call(e,i)&&(n=e[i],s=t[i],this.isObject(s)&&this.isObject(n)?this.extendCopy(s,n):t[i]=this.isObject(n)&&!this.isArray(n)?this.extendCopy({},n):n);return t},t.configure=function(t,e){var i;for(i in e)"undefined"==typeof t[i]&&e[i]&&(t[i]=e[i]);return t},t.clone=function(t){var e,i,n;i={};for(e in t)__hasProp.call(t,e)&&(n=t[e],i[e]=n);return i},t.isArray=function(t){return t instanceof Array},t.isObject=function(t){return null!==t&&"object"==typeof t},t.isDomObject=function(t){return null!==t&&t instanceof Element},t.isFunction=function(t){return"function"==typeof t},t.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},t.hasProperties=function(t){var e,i;if(!t)return!1;for(e in t)if(__hasProp.call(t,e))return i=t[e],!0;return!1},t.removeProperty=function(t){var e,i;for(e in t)if(__hasProp.call(t,e))return i=t[e],delete t[e],e;return null},t.removePropertyValue=function(t){var e,i;for(e in t)if(__hasProp.call(t,e))return i=t[e],delete t[e],[e,i];return null},t.countProperties=function(t){var e,i,n;e=0;for(i in t)__hasProp.call(t,i)&&(n=t[i],e+=1);return e},t.realClone=function(t){var e,i,n,s,o,r,a;if(s=this.isObject(t),e=this.isArray(t))for(i=[],n=r=0,a=t.length;a>r;n=++r)o=t[n],i[n]="function"!=typeof o?this.realClone(o):o;else if(s){i={};for(n in t)o=t[n],i[n]="function"!=typeof o?this.realClone(o):o}else i=t;return i},t.arrayContains=function(t,e){var i,n,s;for(n=0,s=t.length;s>n;n++)if(i=t[n],i===e)return!0;return!1},t.indexOf=function(t,e){var i,n,s,o;for(i=s=0,o=t.length;o>s;i=++s)if(n=t[i],n===e)return i;return-1},t.removeFromArray=function(t,e){var i,n,s;n=!1;for(i in t)s=t[i],s===e&&(t.splice(i,1),n=!0);return n},t.arraysEqual=function(t,e){var i,n,s;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(i=n=0,s=t.length-1;s>=n;i=n+=1)if(t[i]!==e[i])return!1;return!0},t.arrayToMap=function(t,e){var i,n,s,o,r;for(n={},s=o=0,r=t.length;r>o;s=++o)i=t[s],i.index=s,n[i[e]]=i;return n},t.log=function(t,e){return"undefined"!=typeof console&&null!==console?null!=e?console.info(t,e):console.info(t):void 0},t.error=function(t,e){return"undefined"!=typeof console&&null!==console?null!=e?console.error(t,e):console.error(t):void 0},t.getExtension=function(t){var e;return e=/(?:\.([^.]+))?$/,e.exec(t)[1]},t.createDom=function(t,e,i,n){var s;return s=document.createElement(t),null!=e&&(s.className=e),null!=i&&(s.innerHTML=i),null!=n&&n.appendChild(s),s},t.createStyledDom=function(t,e,i,n){var s,o,r;if(s=document.createElement(t),null!=e)for(o in e)__hasProp.call(e,o)&&(r=e[o],s.style[o]=r);return null!=i&&(s.innerHTML=i),null!=n&&n.appendChild(s),s},t.hasClass=function(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},t.addClass=function(e,i){return t.hasClass(e,i)?void 0:e.className=0===e.className.length?i:e.className+" "+i},t.toggleClass=function(e,i,n){var s;return s=t.hasClass(e,i),!n&&s?t.removeClass(e,i):n&&!s?t.addClass(e,i):void 0},t.removeClass=function(t,e){var i;return i=function(t,i){return i===e?"":t},t.className=t.className.replace(/(\S+)\s*/g,i).replace(/(^\s+|\s+$)/,"")},t.setClass=function(t,e){return t.className=e},t.listen=function(t,e,i){return t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,i)},t.unlisten=function(t,e,i){return t.removeEventListener?t.removeEventListener(e,i):t.detachEvent("on"+e,i)},t.stopPropagation=function(t){return t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1},t.createEvent=function(t){var e;return document.createEvent?(e=document.createEvent("Event"),e.initEvent(t,!0,!0)):e=document.createEventObject(),e},t.canvasScaling=function(){var t;return t=1,window.devicePixelRatio?t=window.devicePixelRatio:window.screen.systemXDPI&&(t=window.screen.systemXDPI/window.screen.logicalXDPI),[t,t]},t.elementPos=function(t){var e,i,n;return e=t.getBoundingClientRect(),n=e.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),i=e.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),[i,n]},t.isParentOf=function(t,e){for(;null!=e;){if(e===t)return!0;e=e.parentElement}return!1},t.fadeIn=function(t){return t.style.display="block"},t.fadeOut=function(t){return t.style.display="none"},t.hide=function(t){return t.style.display="none"},t.show=function(t){return t.style.display="block"},t.getProp=function(t,e){var i,n,s,o;for(o=e.split("."),n=0,s=o.length;s>n;n++){if(i=o[n],!t.hasOwnProperty(i))return void 0;t=t[i]}return t},t.wrapValue=function(t,e){var i,n,s,o,r,a;for(n=t,a=e.split(".").reverse(),o=0,r=a.length;r>o;o++)i=a[o],s={},s[i]=n,n=s;return n},t.hasProp=function(t,e){var i,n,s,o;for(o=e.split("."),n=0,s=o.length;s>n;n++){if(i=o[n],!t.hasOwnProperty(i))return!1;t=t[i]}return void 0!==t},t.getScroll=function(){var t,e,i,n;return e=document.documentElement,t=document.body,i=e&&e.scrollLeft||t&&t.scrollLeft||0,n=e&&e.scrollTop||t&&t.scrollTop||0,[i,n]},t.sign=function(t){return t?0>t?-1:1:0},t.detectBrowser=function(){var t,e,i,n;return e=navigator.appName,n=navigator.userAgent,t=n.match(/(opera|chrome|safari|firefox|msie|phantomjs)\/?\s*(\.?\d+(\.\d+)*)/i),t&&null!==(i=n.match(/version\/([\.\d]+)/i))&&(t[2]=i[1]),t=t?[t[1],t[2]]:[e,navigator.appVersion,"-?"],t[0].toLowerCase()},t.nextIdentifier=0,t.getIdentifier=function(){return t.nextIdentifier++},t.doRequest=function(t,e,i,n){var s,o,r,a,l;for(s=[],a=0,l=e.length;l>a;a++)o=e[a],s.push(""+encodeURIComponent(o[0])+"="+encodeURIComponent(o[1]));return s=s.join("&"),t+=-1!==t.indexOf("?")?"&"+s:"?"+s,window.XMLHttpRequest?r=new XMLHttpRequest:window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLHTTP")),r?(r.onreadystatechange=function(){return function(){return 4===r.readyState?200===r.status?i(r.responseText):n():void 0}}(this),r.open("GET",t,!0),r.send("")):void 0},t.openUrl=function(e){return t.isString(e)?window.open(e):window.open(e.url,e.name,e.specs,e.replace)},t.parseData=function(t,e,i){var n,s;if(n=null,e=e.toLowerCase(),"json"===e||"geojson"===e)if("string"==typeof t||t instanceof String)try{n=JSON.parse(t)}catch(o){s=o,i.error("Error: failed to parse JSON response: "+s+": "+t),n={error:"Error: failed to parse JSON response"}}else n=t;else i.error("Unsupported data format: "+e);return n},t.numberFormat=function(t,e,i,n){var s,o,r;return null==e&&(e=2),null==i&&(i="."),null==n&&(n="&nbsp;"),t=parseFloat(t),r=0>t?"-":"",s=parseInt(t=Math.abs(+t||0).toFixed(e))+"",o=(o=s.length)>3?o%3:0,r+(o?s.substr(0,o)+n:"")+s.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?i+Math.abs(t-s).toFixed(e).slice(2):"")},t.buildImage=function(t,e,i){var n,s,o;return n=new Image,o=function(){return e(n)},s=function(){return i(n)},n.src=t,n.complete?n.width>0?o():setTimeout(o,0):(n.onload=o,n.onerror=s),n},t.sort=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C;for(e||(e=function(t,e){return t-e}),i=t,h=0|i.length,s=g=0,b=h-2;b>=g;s=g+=2)f=i[s],m=i[s+1],e(f,m)>0&&(i[s]=m,i[s+1]=f);for(n=i.slice(0),d=2;h>d;){for(p=d<<1,c=y=0,x=h-1;p>0?x>=y:y>=x;c=y+=p)if(o=c,r=c+d,r>=h)for(s=v=o,S=h-1;S>=v;s=v+=1)n[s]=i[s];else for(a=r,l=Math.min(r+d,h),u=c,f=i[o],m=i[r];;)if(e(f,m)<=0){if(n[u]=f,u=u+1|0,o=o+1|0,o===a){for(n[u]=m,u=u+1|0,r=r+1|0;l>r;)n[u]=i[r],u=u+1|0,r=r+1|0;break}f=i[o]}else{if(n[u]=m,u=u+1|0,r=r+1|0,r===l){for(n[u]=f,u=u+1|0,o=o+1|0;a>o;)n[u]=i[o],u=u+1|0,o=o+1|0;break}m=i[r]}d=p,w=[i,n],n=w[0],i=w[1]}if(t!==i){for(s=_=0,C=h-1;C>=_;s=_+=1)t[s]=i[s];i.length=0}else n.length=0;return t},t.binSearch=function(t,e){var i,n,s;for(i=0,n=t.length-1;n>i;)if(s=(n+i)/2|0,t[s]<e)i=s+1;else{if(!(t[s]>e)){for(;s>0&&t[s-1]===e;)s-=1;return s}n=s}return i<t.length&&t[i]<e?i+1:i},t.listenResize=function(e,i){var n;return"undefined"!=typeof getComputedStyle&&null!==getComputedStyle&&(n=function(){return i(),t.updateResize(this)},"static"===getComputedStyle(e).position&&(e.style.position="relative"),(e.__resizeTriggers__=document.createElement("div")).className="DVSL-resize-triggers",e.__resizeTriggers__.innerHTML='<div class="DVSL-expand-trigger"><div></div></div><div class="DVSL-contract-trigger"></div>',e.insertBefore(e.__resizeTriggers__,e.firstChild),t.updateResize(e),e.__resizeListener__=n,e.addEventListener("scroll",n,!0)),e.onresize=i},t.updateResize=function(t){var e,i,n,s;return(s=t.__resizeTriggers__)?(i=s.firstElementChild,e=s.lastElementChild,n=i.firstElementChild,e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight,n.style.width=i.offsetWidth+1+"px",n.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight):void 0},t.unlistenResize=function(t){return t.removeEventListener("scroll",t.__resizeListener__),t.__resizeListener__=void 0,t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__),t.onresize=void 0},i=null,t.decodeEntities=function(t){return-1===t.indexOf("&")?t:(i||(i=document.createElement("textarea")),i.innerHTML=t,i.value)},e={sum:[0,function(t,e){return t+e},function(t){return t}],min:[1/0,function(t,e){return Math.min(t,e)},function(t){return t}],max:[-1/0,function(t,e){return Math.max(t,e)},function(t){return t}],avg:[0,function(t,e){return t+e},function(t,e){return t/e}],count:[0,function(){return 0},function(t,e){return e}],first:[null,function(t,e){return null!=t?t:e},function(t){return t}],last:[null,function(t,e){return null!=e?e:t},function(t){return t}]},t.aggregate=function(t,i,n){var s,o,r,a,l,h;for(r=0,h=e[t],o=h[0],l=h[1],a=h[2];i();)s=n(),l(o,s),r+=1;return r>0?a(o,r):null},t}();var Timechart_Data;Timechart_Data=function(){function t(t,e){this.chart=t,this.dataSettings=e,this.scene=this.chart.scene,this.cache={},this.requests={},this.updateDataLimit(null,null,this.dataSettings.limitStart,this.dataSettings.limitEnd,new Base_TimeStep("ms",1))}var e,i;return t.settings={id:"default",units:["s","m","h","d","M","y"],urlByUnit:{},limitStart:null,limitEnd:null,requestMaxUnits:1e4,prefetchRatio:1,minimizeRequests:!1,cacheSize:1e6,timestampInSeconds:!1,dataFunction:null},i=function(){function t(t,e,i,n){this.unit=t,this.from=e,this.to=i,this.values=n,this.updateLastTimestamp()}return t.prototype.unit="m",t.prototype.from=0,t.prototype.to=1e3,t.prototype.lastTimestamp=0,t.prototype.values=null,t.prototype.updateLastTimestamp=function(){return this.lastTimestamp=this.values.length>0?this.values[this.values.length-1][0]:this.from},t.prototype.merge=function(t,e,i,n){var s,o,r,a,l;if(!n&&(this.from>t.to||this.to<t.from))return this.values=t.values,this.from=t.from,void(this.to=t.to);for(t.values.length>0&&t.from>t.values[0][0]&&i.error("Data merge - oldest data before from"),t.values.length>0&&t.to<t.values[t.values.length-1][0]&&i.error("Data merge - newest data after to"),o=0;o<this.values.length&&this.values[o][0]<t.from;)o+=1;for(s=this.values.length;s>0&&this.values[s-1][0]>=t.to;)s-=1;return l=t.values,this.from=Math.min(this.from,t.from),this.to=Math.max(this.to,t.to),o>0&&(r=Math.max(0,l.length+o-e),l=this.values.slice(r,+(o-1)+1||9e9).concat(l),r>0&&(this.from=this.values[r-1][0]+1)),s<this.values.length&&(a=this.values.length-s,a=Math.min(a,e-l.length),l=l.concat(this.values.slice(s,+(s+a)+1||9e9)),a<this.values.length-s&&(this.to=this.values[s+a][0])),this.values=l,this.updateLastTimestamp()},t}(),e=function(){function t(t,e,i,n,s){this.unit=t,this.from=e,this.to=i,this.callback=n,this.time=s}return t.prototype.from=null,t.prototype.to=null,t.prototype.time=0,t.prototype.unit="y",t.prototype.callback=null,t}(),t.prototype.chart=null,t.prototype.scene=null,t.prototype.settings=null,t.prototype.noData=!1,t.prototype.dataLimitFrom=null,t.prototype.dataLimitTo=null,t.prototype.dataFrom=null,t.prototype.dataTo=null,t.prototype.dataLimitFromUnit=null,t.prototype.dataLimitToUnit=null,t.prototype.cache=null,t.prototype.requests={},t.prototype.applyPreloadedData=function(){return this.dataSettings.preloaded?this.addData(this.dataSettings.preloaded):void 0},t.prototype.remove=function(){var t,e,i,n;this.scene.setMessage(this,null),i=this.requests,n=[];for(e in i)t=i[e],n.push(t?t.callback=null:void 0);return n},t.prototype.determineDataLimits=function(t,e,i,n){var s,o,r,a,l,h;for(null==t&&(t="y");null!=t&&!Base_Helpers.arrayContains(this.dataSettings.units,t);)t=Base_TimeStep.toSmallerUnit[t];return null==t&&this.chart.error("Cannot load data - no suitable data unit configured"),r=new Base_TimeStep(t,1),s=null,l=null,a=r.approxTime(),null!=this.dataLimitFromUnit&&this.dataLimitFromUnit.approxTime()<=a&&(s=this.dataLimitFrom),null!=this.dataLimitToUnit&&this.dataLimitToUnit.approxTime()<=a&&(l=this.dataLimitTo),e&&null==s||i&&null==l?(this.scene.setMessage(this,this.chart.settings.localization.determiningDataBounds,999),h=function(t){return function(e,n,s,r,a){if(!a)return void t.scene.setMessage(t,null);if(null==t.dataLimitTo&&i){if(n!==r)return void t.scheduleDataLoading(a,r,null,!1,function(t,i,n){return h(e,r,t,i,n)});t.dataLimitTo=r}return o(e+1,e,r,a)}}(this),o=function(t){return function(i,s,r,a){if(!a)return void t.scene.setMessage(t,null);if(null==t.dataLimitFrom&&e){if(i!==s)return void t.scheduleDataLoading(a,null,s,!1,function(t,e,i){return o(s,t,e,i)});t.dataLimitFrom=s}return t.scene.setMessage(t,null),n(t.dataLimitFrom,t.dataLimitTo,a)}}(this),this.scheduleDataLoading(t,null,null,!1,function(){return function(t,e,i){return h(t,e-1,t,e,i)}}(this))):void n(this.dataLimitFrom,this.dataLimitTo,t)},t.prototype.getDataForRange=function(e,i,n,s){var o,r,a,l,h,c,u,d,p,f,m,g,y;for(m=n.unit,p=null,f=null;m;){if(this.cache.hasOwnProperty(m)&&(o=this.cache[m],null!==o&&o.from<i&&o.to>e)){p=o.from,f=o.to,o=o.values,u=p>e||i>f;break}m=Base_TimeStep.toSmallerUnit[m]}if(null===m&&(u=!0),d=!1,u&&(u&=null!=this.dataSettings.dataFunction||null!=this.dataSettings.url||null!=this.dataSettings.urlByUnit,l=e,h=i,null!=this.dataLimitFrom&&(l=Math.max(this.dataLimitFrom,l)),null!=this.dataLimitTo&&(h=Math.min(this.dataLimitTo,h)),a=!1,l>=p&&(a=!0,l=Math.max(l,f)),f>=h&&(h=Math.min(h,p)),u&=h>l,u&&(!this.dataSettings.minimizeRequests||!this.chart.scrolling.isActive())))for(c=n.unit;null!=c;){if(Base_Helpers.arrayContains(this.dataSettings.units,c)&&null!==this.cache[c]){d=this.scheduleDataLoading(c,l,h,a,s);break}c=Base_TimeStep.toSmallerUnit[c]}return m?(y=t.findSubrange(o,e,i),g=y[0],r=y[1],{unit:n.unit,count:n.count,from:p,to:f,values:o,startIndex:g,endIndex:r,loading:d}):d?{unit:n.unit,count:n.count,from:p,to:f,values:[],startIndex:0,endIndex:0,loading:!0}:{unit:null,count:null,from:null,to:null,values:[],startIndex:0,endIndex:0,loading:!1}},t.prototype.updateData=function(t,e,i){for(var n,s,o;null!=t&&!Base_Helpers.arrayContains(this.dataSettings.units,t);)t=Base_TimeStep.toSmallerUnit[t];return this.cache.hasOwnProperty(t)&&!this.requests[t]?(o=new Base_TimeStep(t,1),s=o.roundTimeUp(e),n=o.roundTimeDown(this.cache[t].lastTimestamp),s>=n?this.scheduleDataLoading(t,n,s,!0,i):void 0):void 0},t.prototype.scheduleDataLoading=function(t,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g,y,v;if(!t)throw"No unit";if(this.chart.log("Scheduling data loading"+t+","+i+","+n),m=(new Date).getTime(),this.requests.hasOwnProperty(t)&&null!=this.requests[t]){if(d=this.requests[t],!(d.time+this.dataSettings.requestTimeout<m))return this.chart.log("Already loading for selected period"),!0;d.callback=null,delete this.requests[t]}return u=i,y=n,v=new Base_TimeStep(t,1),null!=u&&(u=v.roundTimeDown(u)),null!=y&&(y=v.roundTimeUp(y)),null!=u&&null!=y&&(g=(y-u)/v.approxTime(),g>this.dataSettings.requestMaxUnits&&(s?y=v.add(u,this.dataSettings.requestMaxUnits):u=v.sub(y,this.dataSettings.requestMaxUnits))),l=this.getBiggerDataUnit(t),null!=l&&(v=new Base_TimeStep(l,1),null!=u&&(r=v.roundTimeDown(u),null!=this.dataLimitFrom&&r<=this.dataLimitFrom&&(u=this.dataLimitFrom)),null!=y&&(a=v.roundTimeUp(y),null!=this.dataLimitTo&&a>=this.dataLimitTo&&(y=this.dataLimitTo))),d=new e(t,u,y,o,m),(h=this.getDataFunction())?(f=function(t){return function(e){return t.dataRecievedRaw(d,e)}}(this),c=function(t){return function(){return t.dataFailed(d)}}(this),this.requests[t]=d,this.dataSettings.timestampInSeconds&&(null!=u&&(u/=1e3),null!=y&&(y/=1e3)),p=h(u,y,t,f,c),this.chart.log("Data requested "+t+", "+u+", "+y),null!=p&&(Base_Helpers.isObject(p)||Base_Helpers.isString(p))&&this.dataRecievedRaw(d,p),!0):(this.chart.log("No data function. Cannot load data?"),!1)},t.prototype.dataRecievedRaw=function(t,e){return this.scene.setMessage("data",null),delete this.requests[t.unit],this.dataArrived(t,e)},t.prototype.dataArrived=function(t,e){var i;return this.chart.log("Data arrived"),i=Base_Helpers.parseData(e,this.dataSettings.format,this.chart),this.addDataInt(t,i)},t.prototype.addData=function(t){return this.addDataInt(null,t,!0)},t.prototype.addDataInt=function(t,e,i){var n,s;if(null==i&&(i=!1),null!==e){if(this.cleanupData(e),e.error)return"no-unit"===e.error&&t&&(this.cache[t.unit]=null),void this.chart.error(e.errormessage?e.errormessage:e.error);if(s=t?this.analyzeData(e,t):this.analyzeDataNoRequest(e),t&&Base_TimeStep.timeUnitDiffs[s.unit]>Base_TimeStep.timeUnitDiffs[t.unit]){if(this.chart.error("Incorrect data - requested unit "+t.unit+", got bigger unit - "+s.unit),this.cache[t.unit]=null,null!=t.callback)return t.callback(null,null,null)}else if(t&&s.unit!==t.unit&&(this.cache[t.unit]=null),s.unit&&null!=s.from&&null!=s.to&&(n=this.cache[s.unit],null!=n?this.cache[s.unit].merge(s,this.dataSettings.cacheSize,this.chart,i):this.cache[s.unit]=s),t&&null!=t.callback)return t.callback(s.from,s.to,s.unit)}},t.prototype.dataFailed=function(t){return null==this.cache[t.unit]&&(this.cache[t.unit]=null),this.scene.setMessage("data",this.chart.settings.localization.dataRequestFailed,1e3),this.chart.error("Failed data loading request"),null!=t.callback?t.callback(null,null,null):void 0},t.prototype.updateDataLimit=function(t,e,i,n,s){return null!=t&&(null===this.dataFrom||this.dataFrom>t)&&(this.dataFrom=t),null!=e&&(null===this.dataTo||this.dataTo<e)&&(this.dataTo=e),null!=i&&(this.dataLimitFrom=i,this.dataLimitFromUnit=s,this.dataFrom=Math.max(this.dataFrom,i)),null!=n?(this.dataLimitTo=n,this.dataLimitToUnit=s,this.dataTo=Math.min(this.dataTo,n)):void 0},t.prototype.cleanupData=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k;if(!t.error){for(t.error="bad-response",null!=t.data&&null==t.values&&(t.values=t.data),S=["unit","values"],f=0,v=S.length;v>f;f++)if(h=S[f],!t.hasOwnProperty(h))return void(t.errormessage="Required field '"+h+"' not set in data");if(c=Base_TimeStep.parse(t.unit),null===c)return void(t.errormessage="Data error: unrecognized data unit: "+t.unit);for(w=["form","to","dataLimitForm","dataLimitTo"],m=0,_=w.length;_>m;m++)if(l=w[m],t.hasOwnProperty(l))if(d=t[l],null===d)delete t[l];else if(p=t[l]=parseInt(d),!Base_Helpers.isNumber(p))return void(t.errormessage="Field "+l+" needs to be an integer");if(t.error=null,null!=t.from&&null!=t.to&&t.from>=t.to&&(this.chart.error("Data logic error. from >= to: "+t.from+", "+t.to),delete t.from,delete t.to),null!=t.dataLimitFrom&&null!=t.dataLimitTo&&t.dataLimitFrom>=t.dataLimitTo&&(this.chart.error("Data logic error. dataLimitFrom >= dataLimitTo: "+t.dataLimitFrom+", "+t.dataLimitTo),delete t.dataLimitFrom,delete t.dataLimitTo),n=t.dataLimitFrom,s=t.dataLimitTo,t.values.length>0){for(r=[],C=t.values,g=0,b=C.length;b>g;g++)if(d=C[g],u=d[0]=parseFloat(d[0]),Base_Helpers.isNumber(d[0])){(n>u||u>s)&&this.chart.error("Data error: value timestamp outside data limits. Limits: "+n+"..."+s+", timestamp: "+u);for(a in d)e=d[a],null!==e&&(d[a]=parseFloat(e),Base_Helpers.isNumber(d[a])||(this.chart.error("Data error: series value not a number or null: "+d[a]),d[a]=null));r.push(d)}else this.chart.error("Data error: time value not a number: "+d[0]);if(t.values=r,this.dataSettings.timestampInSeconds)for(k=t.values,y=0,x=k.length;x>y;y++)d=k[y],d[0]*=1e3;t.values.sort(function(t,e){return t[0]-e[0]}),i=t.values[0][0],o=t.values[t.values.length-1][0]}this.dataSettings.timestampInSeconds&&(t.from&&(t.from*=1e3),t.to&&(t.to*=1e3),t.dataLimitFrom&&(t.dataLimitFrom*=1e3),t.dataLimitTo&&(t.dataLimitTo*=1e3)),null!=t.from&&i<t.from&&(this.chart.error("Data logic error. Data time "+i+" outside [from, to) range: "+t.from+", "+t.to),t.from=i),null!=t.to&&o>=t.to&&(this.chart.error("Data logic error. Data time "+o+" outside [from, to) range: "+t.from+", "+t.to),t.to=o+1)}},t.prototype.analyzeDataNoRequest=function(t){var e,n,s,o,r,a;return null==t.from&&null!=t.dataLimitFrom&&(t.from=t.dataLimitFrom),null==t.to&&null!=t.dataLimitTo&&(t.to=t.dataLimitTo),s=t.from,a=t.to,r=Base_TimeStep.parse(t.unit),t.values.length>0&&(e=t.values[0][0],n=t.values[t.values.length-1][0],e=r.roundTimeDown(e),n=r.roundTimeUp(n+1),null==s&&(s=e),null==a&&(a=n)),this.updateDataLimit(e,n,t.dataLimitFrom,t.dataLimitTo,r),o=new i(t.unit,s,a,t.values),null!=t.error&&(o.error=t.error),o},t.prototype.analyzeData=function(t,e){var n,s,o,r,a,l,h,c;return null==e.from&&null==t.from&&null!=t.dataLimitFrom&&(t.from=t.dataLimitFrom),null==e.to&&null==t.to&&null!=t.dataLimitTo&&(t.to=t.dataLimitTo),o=t.from,c=t.to,n=null,s=null,null!=o&&null!=c&&o>=c&&this.chart.error("Data logic error. from >= to: "+o+", "+c),h=Base_TimeStep.parse(t.unit),t.values.length>0?(n=t.values[0][0],s=t.values[t.values.length-1][0],n=h.roundTimeDown(n),s=h.roundTimeUp(s+1),null==o&&(o=null!=e.from?Math.min(e.from,n):n),null==c&&(c=null!=e.to?Math.max(e.to,s):s)):(null==o&&(o=e.from),null==c&&(c=e.to),null!=t.from&&null!=t.to?(n=t.from,s=t.to):(n=e.from,s=e.to,null===e.from&&null===e.to&&null==o&&null==c&&null==t.dataLimitFrom&&null==t.dataLimitTo&&(this.noData=!0,t.dataLimitFrom=0,t.dataLimitTo=0,t.from=0,t.to=0))),this.updateDataLimit(n,s,t.dataLimitFrom,t.dataLimitTo,h),null!=e.from&&null!=t.to&&(l=h.roundTimeDown(t.to),l<=e.from&&this.updateDataLimit(null,null,null,t.to,h)),null!=e.to&&null!=t.from&&(a=h.roundTimeUp(t.from),a>=e.to&&this.updateDataLimit(null,null,t.from,null,h)),null==t.from&&null==t.dataLimitFrom&&(null!=this.dataLimitFrom&&(null===e.from||e.from<=this.dataLimitFrom&&n>this.dataLimitFrom)||null==this.dataLimitFrom&&null==e.from)&&(this.updateDataLimit(null,null,n,null,h),o=n),null==t.to&&null==t.dataLimitTo&&(null!=this.dataLimitTo&&(null===e.to||e.to>=this.dataLimitTo&&s<this.dataLimitTo)||null==this.dataLimitTo&&null==e.to)&&(this.updateDataLimit(null,null,null,s,h),c=s),r=new i(t.unit,o,c,t.values),null!=t.error&&(r.error=t.error),r},t.prototype.getBiggerDataUnit=function(t){for(var e;null!=t;)if(t=Base_TimeStep.toBiggerUnit[t],e=this.dataSettings.units,Base_Helpers.arrayContains(e,t))return t;return null},t.binSearch=function(t,e){var i,n,s;if(i=0,!t)throw"no data";for(n=t.length-1;n>i;)if(s=(n+i)/2|0,t[s][0]<e)i=s+1;else{if(!(t[s][0]>e)){for(;s>0&&t[s-1][0]===e;)s-=1;return s}n=s}return i<t.length&&t[i][0]<e?i+1:i},t.linSearchUp=function(t,e,i,n){var s,o,r,a,l,h,c;if(n){for(s=o=a=e+1,l=t.length-1;l>=o;s=o+=1)if(null!==n(t[s]))return s}else for(s=r=h=e+1,c=t.length-1;c>=r;s=r+=1)if(null!==t[s][i])return s;return-1},t.linSearchDown=function(t,e,i,n){var s,o,r,a,l;if(n){for(s=o=a=e-1;o>=0;s=o+=-1)if(null!==n(t[s]))return s}else for(s=r=l=e-1;r>=0;s=r+=-1)if(null!==t[s][i])return s;return-1},t.findSubrange=function(e,i,n){var s,o;return s=t.binSearch(e,i),o=t.binSearch(e,n),[s,o]},t.prototype.getDataFunction=function(){var t;return t=this.dataSettings,t.dataFunction?t.dataFunction:t.url||Base_Helpers.hasProperties(t.urlByUnit)?function(e){return function(i,n,s,o,r){var a,l;if(Base_Helpers.hasProperties(t.urlByUnit)){if(l=t.urlByUnit[s],!l)return'{"error":"no-unit", "errormessage":"no data url for this time unit: '+s+'"}'}else l=t.url;if(!s)throw"No step";return a=[],null!=i&&a.push(["from",i]),null!=n&&a.push(["to",n]),a.push(["unit",s]),Base_Data.doRequest(l,e.dataSettings,a,o,r)}}(this):null},t.prototype.hasPendingRequests=function(){return Base_Helpers.hasProperties(this.requests)},t}();var Base_Label,Base_LabelLayoutBase,Base_LabelRenderer;Base_Label=function(){function t(t){Base_Helpers.extendCopy(this,t)}return t.styleSettings={aspectRatio:3,maxWidth:null,lineSpacing:0,align:"left",padding:0,margin:0,angle:0,text:null,image:null,borderRadius:0,backgroundStyle:null,textStyle:null,imageSlicing:null},t.prototype.data=null,t.prototype.aspectRatio=3,t.prototype.maxWidth=null,t.prototype.lineSpacing=.2,t.prototype.align="left",t.prototype.padding=0,t.prototype.margin=0,t.prototype.angle=0,t.prototype.text=null,t.prototype.image=null,t.prototype.borderRadius=0,t.prototype.backgroundStyle=null,t.prototype.textStyle=null,t.prototype.imageSlicing=null,t.prototype.onClick=null,t.prototype.onHover=null,t.prototype.url=null,t.prototype.visible=!0,t.prototype.userPlaced=!1,t.prototype.id=null,t.prototype.measureDone=!1,t.prototype.loadedImage=null,t.prototype.rows=null,t.prototype.lineHeight=0,t.prototype.lineHeightM=0,t.prototype.hwidth=0,t.prototype.hheight=0,t.prototype.curX=0,t.prototype.curY=0,t.prototype.x=null,t.prototype.y=null,t}(),Base_LabelRenderer=function(){function t(t,e){this.events=t,this.settings=e,this.scene=this.events.scene,this.cache={},this.frameLabels={},this.textLayout=null,this.numPaints=0,this.numCachedPaints=0}var e;return t.prototype.printStats=function(){var t,e;return e=Base_Helpers.countProperties(this.frameLabels),t=Base_Helpers.countProperties(this.cache),console.log("Paints:"+this.numPaints+", cached: "+this.numCachedPaints+", cache size:"+t+", frame size:"+e),this.numPaints=0,this.numCachedPaints=0},t.prototype.nextFrame=function(){var t,e,i;if(e=Base_Helpers.countProperties(this.frameLabels),t=Base_Helpers.countProperties(this.cache),t>3*e)for(i in this.cache)null==this.frameLabels[i]&&delete this.cache[i];return this.frameLabels={}},t.prototype.measure=function(t,e,i){var n,s,o,r,a,l,h,c,u;return null==i&&(i=e),e.measureDone?void 0:(e.id=null,n=!0,a=i.padding,h=0,s=0,e.text?(u=this.measureText(t,e,i),c=u[0],o=u[1],s=Math.max(s,o),h+=c):e.rows=[[],[]],e.image&&(e.imageSlicing?(h+=e.imageSlicing[2],s=Math.max(s,e.imageSlicing[3])):(r=this.settings.getAssetImage(e.image),r&&r.width?(h+=r.width,s=Math.max(s,r.height)):n=!1)),0===h&&(h=10,s=10),h+=2*a,s+=2*a,e.borderRadius>0&&e.text&&(l=Math.min(e.borderRadius,s/2),h+=.45*l,e.image||(h+=.45*l)),e.hwidth=h/2,e.hheight=s/2,e.measureDone=n)
},t.prototype.measureText=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y;return n=i.aspectRatio,h=i.maxWidth,p=new Base_LabelLayoutBase(t,i),c=i.padding,(n>0||h>0)&&e.text.split(" ").length>1?(n||(n=1e9),h||(h=1e9),a=function(t){return[0,0,0,0,Math.min(h,t*(n+.2))]},p.fitLabelInRect(e,i.align,i.align,a,!1),f=2*e.hwidth,o=2*e.hheight):(g=p.styleTagParser(e.text),m=g[0],l=g[1],s=g[2],s=function(){var t,e,i;for(i=[],t=0,e=s.length;e>t;t++)r=s[t],i.push(r-1);return i}(),y=p.stringsByFont(m,l,s),d=y[0],u=y[1],e.lineHeight=o=Base_Graphics.getTextHeight(t,i.textStyle.font),e.rows=[d,u],Base_Graphics.textStyleNoShadow(t,i.textStyle),f=u.reduce(function(t,e){return Math.max(t,e)}),o=o*(1+e.lineSpacing)*u.length+c),[f,o]},t.prototype.canCache=function(t,e,i,n,s){var o,r,a;return(null!=e?e.advanced.labelCache:void 0)?(o=this.scene.height*this.scene.width,a=2*i.hwidth*i.hheight*s*s,10>o/a?!1:null==i.image||(r=this.settings.getAssetImage(i.image))?!0:!1):!1},t.prototype.paint=function(t,e,i,n,s){return this.paintWithStyle(t,e,i,n,s,s)},t.prototype.realPaint=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N;if(g=o.hwidth,m=o.hheight,h=r.backgroundStyle,x=r.padding,c=Math.min(o.borderRadius,m),l=(r.angle||0)/180*Math.PI,(1!==n||0!==l)&&(t.save(),t.transform(n,0,0,s,e,i),0!==l&&t.rotate(l),e=0,i=0),h&&(f=Base_Graphics.beginStrokeAndFill(t,h),c>=m?(I=e+g-m,f.moveTo(I,i-m),f.arc(I,i,m,-Math.PI/2,Math.PI/2,!1),I=e-g+m,f.lineTo(I,i+m),f.arc(I,i,m,Math.PI/2,-Math.PI/2,!1),f.closePath()):c>0?(f.moveTo(e-g+c,i-m),f.lineTo(e+g-c,i-m),f.arc(e+g-c,i-m+c,c,-Math.PI/2,0,!1),f.lineTo(e+g,i+m-c),f.arc(e+g-c,i+m-c,c,0,+Math.PI/2,!1),f.lineTo(e-g+c,i+m),f.arc(e-g+c,i+m-c,c,+Math.PI/2,Math.PI,!1),f.lineTo(e-g,i-m+c),f.arc(e-g+c,i-m+c,c,Math.PI,Math.PI+Math.PI/2,!1)):(f.moveTo(e-g,i-m),f.lineTo(e+g,i-m),f.lineTo(e+g,i+m),f.lineTo(e-g,i+m),f.closePath()),Base_Graphics.endStrokeAndFill(t,f,h)),v=o.image,g-=x,m-=x,_=e-g,S=e+g,null!=v&&(y=this.settings.getAssetImage(v),y&&(T=o.imageSlicing,T?(t.drawImage(y,T[0],T[1],T[2],T[3],e-g,i-m,T[2],T[3]),_+=T[2]):(t.drawImage(y,e-g,i-m),_+=v.width))),N=o.rows,D=N[0],k=N[1],u=k.length,D.length>0)for(b=o.lineHeight*(1+o.lineSpacing),a=r.align,t.textBaseline="bottom",F=i-(u+1)*b/2+.58*o.lineHeight,"left"===a?(B=_,null==v&&(B+=.45*c),t.textAlign="start"):"right"===a?(B=S-.45*c,t.textAlign="end"):(B=(_+S)/2,t.textAlign="center"),Base_Graphics.textStyle(t,r.textStyle),w=-1,M=0,a=t.textAlign,p=r.textStyle.font,O=0,E=D.length;E>O;O++)P=D[O],A=M,M+=P.width,w!==P.row&&(w=P.row,F+=b,A=0,M=P.width,L=k[w],C="center"===a?B-L/2:"start"===a?B:B-L),t.textAlign="left",d=P.font,p!==d&&(p=d,t.font=d),A+=C,t.fillText(P.text,A,F);return 1!==n||0!==l?t.restore():void 0},e=String.fromCharCode(63743),t.prototype.paintWithStyle=function(t,i,n,s,o,r){var a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D;return o.measureDone||this.measure(t,o,r),o.curx=i,o.cury=n,this.canCache(this.scene,this.settings,o,r,s)?(k=this.events.scaleX,P=this.events.scaleY,u=k*s,d=P*s,y=o.hwidth,g=o.hheight,a=(r.angle||0)/180*Math.PI,o.id||(v=""+o.text+e+","+y+","+g+","+r.lineSpacing+", "+r.angle+", "+r.align+","+r.image+","+r.borderRadius+","+r.imageSlicing+","+r.maxWidth+","+r.aspectRatio,r.backgroundStyle&&(h=r.backgroundStyle,v+=""+e+h.fillColor+","+h.lineColor+","+h.lineWidth+","+h.shadowColor+","+h.shadowOffsetX+","+h.shadowOffsetY+","+h.shadowBlur),r.textStyle&&(M=r.textStyle,v+=""+e+M.fillColor+","+M.font),o.id=v),w=o.id+(""+u.toFixed(2)+","+d.toFixed(2)),S=this.cache[w]||null,S?(x=S.width,b=S.height,m=x/2,f=b/2,this.numCachedPaints+=1):(l=r.backgroundStyle,p=null!=l&&null!=l.lineWidth?l.lineWidth:0,x=Math.ceil(2*y+p+1)*u,b=Math.ceil(2*g+p+1)*d,S=document.createElement("canvas"),0!==a&&(c=Math.cos(a),C=Math.sin(a),T=[Math.abs(x*c)+Math.abs(b*C),Math.abs(b*c)+Math.abs(x*C)],x=T[0],b=T[1]),x=2*Math.ceil(x/2),b=2*Math.ceil(b/2),D=[x,b],S.width=D[0],S.height=D[1],_=S.getContext("2d"),m=x/2,f=b/2,this.realPaint(_,m,f,u,d,o,r),this.cache[w]=S,this.numPaints+=1),i=Math.round(i*k)/k,n=Math.round(n*P)/P,t.drawImage(S,0,0,x,b,i-m/k,n-f/P,x/k,b/P),this.frameLabels[w]=1):(this.numPaints+=1,this.realPaint(t,i,n,s,s,o,r))},t}(),Base_LabelLayoutBase=function(){function t(t,e){var i,n;this.g=t,this.textStyle=e.textStyle,this.angle=(e.angle||0)/180*Math.PI,this.borderRadius=e.borderRadius||0,this.margin=e.margin||0,this.padding=e.padding||0,i=Base_Graphics.getTextHeight(t,this.textStyle.font),n=e.lineSpacing,this.lineHeight=i,this.lineHeightM=i*(n+1),this.lineHeightC=-i*n,this.replaceSymbols=this.replaces}return t.prototype.replaces=[{smb:String.fromCharCode(63742),reg:new RegExp(String.fromCharCode(63742),"g")},{smb:String.fromCharCode(63740),reg:new RegExp(String.fromCharCode(63740),"g")}],t.prototype.fitLabelInRect=function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j;for(null==s&&(s=!0),k=this.margin,M=this.padding,S=this.lineHeightC,w=this.lineHeightM,t.measureDone&&t._textCache||(t._textCache=T=this.styleTagParser(t.text)),R=t._textCache,I=R[0],_=R[1],m=R[2],B=R[3],P=R[4],u=-1/0,c=null,p=0,f=0,d=0,a=0,x=E=z=m.length;P>=E;x=E+=1){if(b=S+w*x,U=n(b/2+k+M),F=U[0],O=U[1],y=U[2],v=U[3],r=U[4],r-=2*(k+M),C=B/x,j=this.splitWordsToLines(I,m,x,function(){return r}),L=j[0],o=j[1],D=j[2],L>u)for(c=D,u=L,l=y,h=v,p=F,f=O,d=r,a=0,N=0,H=o.length;H>N;N++)A=o[N],a=Math.max(A,a);if(L>=1)break}return c?(t.userPlaced||(1>u&&(e=i),g="left"===e?(a-d)/2:"right"===e?(d-a)/2:0,p+=l*g,f+=h*g),s&&(t.x=p,t.y=f),t.rows=this.stringsByFont(I,_,c),t.hheight=(S+w*c.length)/2+M,t.lineHeight=this.lineHeight,t.lineHeightM=w,t.hwidth=a/2+M,t.align=e,t.measureDone=!0,t.visible=!0,t.padding=M,t.borderRadius=this.borderRadius,this.borderRadius>0&&(t.hwidth+=.45*Math.min(this.borderRadius,t.hheight))):(t.rows=[[],[]],t.visible=!1),u},t.prototype.styleTagParser=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X;if(g=this.g,Base_Graphics.textStyleNoShadow(g,this.textStyle),u=p=g.font,Z=this.replaceSymbols,T=Z[0],r=Z[1],m={},m[p]={swidth:g.measureText(" ").width},O=0,U=0,k=0,W=[],n=[],A=[],i=0,h=0,B=t.replace(/<b>|<\/b>|<i>|<\/i>|<br>/g,function(t,e){var n;return A.push(e-h),h+=t.length-2,-1!==t.indexOf("</")?(n=t.substr(2,t.length-3),r.smb+n):(n=t.substr(1,t.length-2),"<br>"===t&&(i++,n="r"),T.smb+n)}),a=i!==A.length,D=Base_Helpers.decodeEntities(B),W.push({word:"",width:0,font:p,spaceWidth:0,spaceFonts:null}),a){for(C=D.split(""),N=-1,d=-1,f=!1,P=!1,_=!1,L=!0,I=[],l=0,e=0,v=0,y=G=0,X=C.length-1;X>=G;y=G+=1)y!==A[0]?y-1!==A[0]?(w=C[y],x=C[d],c=" "!==w,_=null==x?null:" "!==x,L=null!=_,-1===N&&(N=y),-1===d&&(d=y),0===l&&(l=1),f=d+1!==y,L&&(o=!c&&_,F=c&&!_,s=f&&c&&_),f&&c&&_||!L||F||o||P||(l++,d=y),c||P||(O+=m[p].swidth,b=I[I.length-1],null!=b&&b.font===p?(b.space+=" ",b.count++):I.push({font:p,space:" ",count:1})),(L&&(o||F||s)||P)&&(P&&n.push(W.length+(_?1:0)),(o||s||P&&_)&&(g.font=u,H=D.substr(N,l),Y=g.measureText(H).width,W.push({word:H,width:Y,spaceWidth:0,font:u,spaceFonts:null}),P&&(W[W.length-1].spaceFonts=[]),U+=Y),(F||P&&!_)&&(S=W[W.length-1],null==S.space&&(S.spaceWidth=O,S.spaceFonts=I,U+=O)),P=!1,d=N=y,l=1,u=p,!s&&F&&(O=0,I=[]))):A.shift():(z=C[y+1],M=[null!=C[y].match(T.reg),null!=C[y].match(r.reg)][0],M?("i"===z&&(p=-1===p.indexOf("italic")?"italic "+p:p,v++),"b"===z&&(p=-1===p.indexOf("bold")?"bold "+p:p,e++),"r"===z&&(P=!0)):("i"===z&&(v--,0>=v&&(p=p.replace(/(italic)/g,""))),"b"===z&&(e--,0>=e&&(p=p.replace(/(bold)/g,"")))),p=p.replace(/^\s+|\s+$/g,""),m.hasOwnProperty(p)||(m[p]={swidth:g.measureText(" ").width}),-1===d&&(u=p));l>=1&&c&&(H=D.substr(N,l),Y=g.measureText(H).width,W.push({word:H,width:Y,spaceWidth:0,font:u,spaceFonts:[]}),U+=Y)}else{for(H="",l=0,D=D.replace(new RegExp(T.smb+"r","gi")," "+T.smb+"r "),R=g.measureText(" ").width,E=D.split(" "),y=V=0,q=E.length;q>=V;y=V+=1)j=E[y],j!==T.smb+"r"?j?(O=R*l,O&&(S=W[W.length-1],S.spaceWidth=O,S.spaceFonts=[{font:p,space:H,count:l}],U+=O),l=1,H=" ",Y=g.measureText(j).width,W.push({word:j,width:Y,spaceWidth:0,font:p}),U+=Y):(H+=" ",l++):n.push(W.length);W[W.length-1].space={fonts:[]}}return n[n.length-1]!==W.length&&n.push(W.length),k=0===W[0].spaceWidth?W.length-1:W.length,[W,m,n,U,k]},t.prototype.stringsByFont=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;for(s=this.textStyle.font!==t[0].font?t[0].font:this.textStyle.font,n=Base_Helpers.realClone(i),f=[],h=[],o=e[s].height,c=0,p=0,d="",a=0,r=g=0,_=t.length-1;_>=g;r=g+=1)if(m=t[r],l=r===n[0],m.font!==s&&(o=Math.max(o,e[s].height),p&&f.push({text:d,width:p,font:s,row:a}),s=m.font,d="",p=0),p+=m.width,d+=m.word,c+=m.width+m.spaceWidth,l&&(f.push({text:d,width:p,font:s,row:a}),h.push(c-m.spaceWidth),d="",a++,p=c=0,n.shift()),!l&&(u=m.spaceFonts,null!=u))for(y=0,v=u.length;v>y;y++)r=u[y],r.font!==s&&(f.push({text:d,width:p,font:s,row:a}),s=r.font,d="",p=0),p+=r.count*e[s].swidth,d+=r.space;return d&&(f.push({text:d,width:p,font:s,row:a}),h.push(c-m.spaceWidth)),[f,h]},t.prototype.fitLabelInLines=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X,J,Q,K,$,te,ee,ie,ne,se,oe,re,ae,le,he;for(D=this.margin,O=this.padding,P=this.lineHeightC,M=this.lineHeightM,t.measureDone&&t._textCache||(t._textCache=E=this.styleTagParser(t.text)),te=t._textCache,Y=te[0],b=te[1],g=te[2],U=te[3],L=te[4],d=-1/0,h=null,p=0,p=0,f=0,c=null,u=null,F=[],_=[],_.push(o(e,i)),k=G=1,ee=g.length-1;ee>=G;k=G+=1)a=k%2===1?F:_,r=o(e,i-x/2-D),a.unshift([r[0]-D,r[1]-D]),r=o(e,i+x/2+D),a.push([r[0]-D,r[1]-D]);for(k=Z=ie=g.length;L>=Z;k=Z+=1){if(x=P+M*k,a=k%2===1?F:_,r=o(e,i-x/2-D),a.unshift([r[0]-D,r[1]-D]),r=o(e,i+x/2+D),a.push([r[0]-D,r[1]-D]),l=function(t){return Math.min(a[t][0]+a[t][1],a[t+1][0]+a[t+1][1])},ne=this.splitWordsToLines(Y,g,k,l),H=ne[0],T=ne[1],N=ne[2],H>d&&(m=i-x/2,h=N,d=H,c=T,u=a.slice(0),N.length+1>a.length))throw"Internal error";if(H>=1)break}if(h){if(A=0,I=0,"left"===n){for(w=1e30,S=q=0,se=h.length;se>=q;S=q+=1)w=Math.min(u[S][0]);for(C=-w,W=C,V=C,S=X=0,oe=h.length-1;oe>=X;S=X+=1)j=c[S],R=Math.min(u[S][1],u[S+1][1]),V=Math.max(C+j),I=Math.max(I,j-(R-C))}else if("right"===n){for(R=1e30,S=J=0,re=h.length;re>=J;S=J+=1)R=Math.min(u[S][1]);for(z=R,B=0,W=z,V=z,S=Q=0,ae=h.length-1;ae>=Q;S=Q+=1)j=c[S],w=Math.min(u[S][0],u[S+1][0]),W=Math.min(z-j),A=Math.max(A,j-(R+z))}else if("center"===n){for(w=1e30,R=1e30,S=K=0,le=h.length-1;le>=K;S=K+=1)j=c[S]/2,w=Math.min(u[S][0]-j,Math.min(u[S+1][0]-j,w)),R=Math.min(u[S][1]-j,Math.min(u[S+1][1]-j,R));for(y=w>0&&R>0?0:w>-R?R:R>-w?-w:(R-w)/2,B=0,W=y,V=y,S=$=0,he=h.length-1;he>=$;S=$+=1)j=c[S],w=Math.min(u[S][0],u[S+1][0]),R=Math.min(u[S][1],u[S+1][1]),W=Math.min(W,y-j/2),V=Math.max(V,y+j/2),A=Math.max(A,j/2-w-y),I=Math.max(I,j/2-R+y)}"left"===s&&A>0?(W+=A,V+=A):"right"===s&&I>0?(W-=I,V-=I):"center"===s&&(v=(A-I)/2,W+=v,V+=v),t.rows=this.stringsByFont(Y,b,h),t.hwidth=(V-W)/2+O,t.hheight=(P+M*h.length)/2+O,t.lineHeight=this.lineHeight,t.lineHeightM=M,t.visible=!0,t.align=n,t.measureDone=!0,t.padding=O,t.borderRadius=this.borderRadius,this.borderRadius>0&&(t.hwidth+=.45*Math.min(this.borderRadius,t.hheight)),t.userPlaced||(t.x=e+(W+V)/2,t.y=m+t.hheight)}else t.rows=[[],[]],t.visible=!1;return d},t.prototype.splitWordsToLines=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v;for(m=100,s=[],p=[],u=0,c=e[u],o=i-e.length,f=t[0],l=0,r=n(0),a=0,d=y=1,v=t.length-1;v>=y;d=y+=1)g=t[d],h=l+(f.spaceWidth+g.width),c===d||f.spaceWidth>0&&h>r&&o>0?(p.push(d-1),s.push(l),m=Math.min(m,r/l),l=g.width,a+=1,r=n(a),c!==d?o-=1:(u+=1,c=e[u])):l=h,f=g;return p.push(t.length),s.push(l),m=Math.min(m,r/l),[m,s,p]},t.prototype.lineBreaking=function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p;for(l=[],u=0,o=0;0!==i.length;)if(p=t.measureText(i[o]).width,s>=u+p){if(u+=p+n,o===i.length-1)return l.push(i.join(" ")),l;o++}else{if(d=e.reduce(function(t,e){return t+e})+(n*e.length-1),r=d-u-o*n,!(r/s>1)){if(a=i.splice(o).join(" "),e.splice(o),o=i.length-1,h=t.measureText(a).width,c=e.reduce(function(t,e){return t+e}),.5>=h/c)for(;h+t.measureText(i[o]).width+n<=c-t.measureText(i[o]).width;)a=i.pop()+" "+a,e.splice(-1),h+=t.measureText(i[o]).width,c-=t.measureText(i[o]).width,o=i.length-1;l.push(i.join(" ")),l.push(a);break}l.push(i.splice(0,o).join(" ")),e.splice(0,o),o=0,u=0}return l},t}();var Linearchart_ValueAxis,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Linearchart_ValueAxis=function(){"use strict";function t(t,e){this.options=e,this.computePanelSize=__bind(this.computePanelSize,this),this.events=t.events,this.scene=t.scene,this.isLogScale=this.options.logScale,this.isInside="inside"===this.options.position,this.locations=[],this.values=[],this.title=null,this.cachedUnits=[],this.panel=new Base_ChartPanel,this.panel.packingOrder=110,this.panel.computeSize=this.computePanelSize,this.lastMaxValue=0,this.lastMinValue=0,this.minValue=0,this.maxValue=0,this.scale=0,this.zeroY=0,this.logOffset=1,this.minValueAnimation=null,this.maxValueAnimation=null,this.axisChanged=!1,this.seriesDepth=0,this.seriesMinValue=null,this.seriesMaxValue=null,this.series=0}return t.settings={enabled:!0,logScale:!1,position:"outside",side:"left",title:null,minValue:null,maxValue:null,size:null,hgrid:!0,axisLine:!1,scaleAdjustmentTolerance:.3,scaleAdjustmentAnimationDelay:200,scaleAdjustmentAnimation:"=",scaleStep:null,scaleMinStep:0,zeroLine:"visible",valueFormatterFunction:null,style:{title:{fillColor:"#000000",font:"13px Arial",reverseDirection:!1,alignment:"center",margin:5},tick:{lineColor:"#AAAAAA"},axisLine:{lineColor:"rgba(127,127,127,0.5)",lineWidth:1},valueLabel:{fillColor:"#000000",font:"11px Arial",margin:0},labelSpacing:25,baseLine:{lineColor:"rgba(127,127,127,0.5)",depthColor:"rgba(127,127,127,0.5)",lineWidth:1,lineDepth:1},hgrid:{lineColor:"rgba(255,255,255,0.2)"}}},t.prototype.getPanel=function(){return this.options.enabled?(this.panel.location=this.options.position,this.panel.side=this.options.side,this.panel):null},t.prototype.computePanelSize=function(t,e,i,n){var s,o,r,a,l;return a=0,this.options.title&&Base_Helpers.isString(this.options.title)&&(l=new Base_Label,l.text=this.options.title,l.textStyle=this.options.style.title,l.maxWidth=e,l.align=this.options.style.title.alignment,l.aspectRatio=0,o="right"===this.options.side,r=this.options.style.title.reverseDirection,s=o?90:-90,l.angle=r?-s:s,n.measure(i,l,l),a+=2*(this.options.style.title.margin+l.hheight),this.title=l),this.options.size?a=this.options.size:(Base_Graphics.textStyle(i,this.options.style.valueLabel),a+=2*this.options.style.valueLabel.margin+i.measureText("1999.9 M").width),[Math.round(a),e]},t.prototype.recieveSeriesGeometry=function(t,e,i){return null!==this.options.minValue?this.seriesMinValue=this.options.minValue:void 0!==t&&(this.seriesMinValue=null!==this.seriesMinValue?Math.min(t,this.seriesMinValue):t),null!==this.options.maxValue?this.seriesMaxValue=this.options.maxValue:void 0!==e&&(this.seriesMaxValue=null!==this.seriesMaxValue?Math.max(e,this.seriesMaxValue):e),this.seriesDepth=Math.max(i,this.seriesDepth)},t.prototype.updateMinMax=function(t){var e,i,n,s;return e=(null!=(s=t.changes)?s.bounds:void 0)||0===this.locations.length,t.changes.settings&&(this.isLogScale=this.options.logScale,this.isInside="inside"===this.options.position,e=!0),this.shouldChangeScale()&&(this.seriesMinValue!==this.lastMinValue&&(e=!0,null==this.lastMinValue||t.changes.displayUnit||this.minValue===this.maxValue?this.minValueAnimation=null:null!=this.minValueAnimation?this.minValueAnimation.retarget(this.seriesMinValue,t.timeStamp):this.minValueAnimation=new Base_Animator(this.lastMinValue,this.seriesMinValue,this.options.scaleAdjustmentAnimationDelay,this.options.scaleAdjustmentAnimation,t.timeStamp),this.lastMinValue=this.seriesMinValue),this.seriesMaxValue!==this.lastMaxValue&&(e=!0,null==this.lastMaxValue||t.changes.displayUnit||this.minValue===this.maxValue?this.maxValueAnimation=null:null!=this.maxValueAnimation?this.maxValueAnimation.retarget(this.seriesMaxValue,t.timeStamp):this.maxValueAnimation=new Base_Animator(this.lastMaxValue,this.seriesMaxValue,this.options.scaleAdjustmentAnimationDelay,this.options.scaleAdjustmentAnimation,t.timeStamp),this.lastMaxValue=this.seriesMaxValue)),this.seriesMaxValue=this.options.minValue,this.seriesMinValue=this.options.maxValue,this.minValueAnimation?(e=!0,n=this.minValueAnimation.get(t.timeStamp),this.minValueAnimation.finished(t.timeStamp)&&(this.minValueAnimation=null)):n=this.lastMinValue,this.maxValueAnimation?(e=!0,i=this.maxValueAnimation.get(t.timeStamp),this.maxValueAnimation.finished(t.timeStamp)&&(this.maxValueAnimation=null)):i=this.lastMaxValue,this.axisChanged=e,e&&this.computeNewScale(n,i),this.minValueAnimation||this.maxValueAnimation?t.animating=!0:void 0},t.prototype.doAnimations=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P;if(this.axisChanged&&(this.axisChanged=!1,this.options.enabled)){if(this.locations=[],this.values=[],a=parseInt(this.options.style.valueLabel.font)/2*1.5,n="right"===this.options.side,v=this.scene.y0,_=v+this.scene.height,this.scale>0){if(this.isLogScale){for(S=this.calcExpValuePerLine(),o=S[0],s=S[1],d=1/o;;){if(d*=s,m=this.zeroY-this.valueToRelativeY(d),v>m-a)break;this.locations.push((0|m)-.5),this.values.push(d)}for(d=-1/o;;){if(d*=s,m=this.zeroY-this.valueToRelativeY(d),m>=_)break;this.locations.push((0|m)-.5),this.values.push(d)}}else{for(f=this.calcLinearValuePerLine(),d=0;;){if(d+=f,m=this.zeroY-this.valueToRelativeY(d),v>=m-a)break;this.locations.push(0|m),this.values.push(d)}for(d=0;;){if(d-=f,m=this.zeroY-this.valueToRelativeY(d),m>=_)break;this.locations.push(0|m),this.values.push(d)}}this.minValue<0&&this.maxValue>0&&(this.locations.push(0|this.zeroY),this.values.push(0))}else for(f=this.options.scaleStep?this.options.scaleStep:100,g=this.options.style.labelSpacing,y=_-g,c=this.options.logScale?1:f;y>v;)this.locations.push(0|y),this.values.push(c),this.options.logScale?c*=10:c+=f,y-=g;for(p=this.options.valueFormatterFunction,this.isLogScale||(w=this.getUnitAndName(f,this.scene.settings),l=w[0],e=w[1],h=w[2]),C=this.values,P=[],i=b=0,x=C.length;x>b;i=++b)d=C[i],this.isLogScale&&(k=this.getUnitAndName(d,this.scene.settings),l=k[0],e=k[1],h=k[2]),r=(d/l).toFixed(e),""!==l&&d&&(r=r+" "+h),p&&(r=p(d,h,l,r)),this.isInside||(t=n?"start":"end"),u=new Base_Label,u.text=r.toString(),u.align=t,u.aspectRatio=0,u.textStyle=this.options.style.valueLabel,P.push(this.values[i]=u);return P}},t.prototype.paintUnder=function(t){return this.options.enabled&&this.locations.length>0?this.paintZeroLine(t.context):void 0},t.prototype.paint=function(t){var e,i;return e=t.context,this.options.enabled&&this.locations.length>0&&(this.paintGrid(e),this.paintLabels(e,t.labelRenderer)),this.options.enabled&&this.options.axisLine?(i=Base_Graphics.beginStrokeAndFill(e,this.options.style.axisLine),this.paintAxisLine(i),Base_Graphics.endStrokeAndFill(e,i,this.options.style.axisLine)):void 0},t.prototype.shouldChangeScale=function(){var t,e,i;return e=this.seriesMinValue,t=this.seriesMaxValue,null===e||null===t?!1:null!==this.lastMinValue&&null!==this.lastMaxValue&&this.lastMinValue<this.lastMaxValue?("center"===this.options.zeroLine?(t=Math.max(t,-e),e=-t):"visible"===this.options.zeroLine&&(e=Math.min(e,0),t=Math.max(t,0)),e<this.minValue||t>this.maxValue?!0:(i=(this.lastMaxValue-this.lastMinValue)*this.options.scaleAdjustmentTolerance,e>this.lastMinValue+i||t<this.lastMaxValue-i?!0:!1)):!0},t.prototype.computeNewScale=function(t,e){var i,n,s,o,r,a,l,h;return n=this.scene.height,h=this.scene.y0,"center"===this.options.zeroLine?(e=Math.max(e,-t),t=-e):"visible"===this.options.zeroLine&&(t=Math.min(t,0),e=Math.max(e,0)),null!==this.options.minValue&&(t=this.options.minValue),null!==this.options.maxValue&&(e=this.options.maxValue),!n>0||!(e>t)?(this.minValue=0,this.maxValue=0,this.logOffset=1,this.scale=0,void(this.zeroY=h+n)):(this.options.scaleStep>0?r=this.options.scaleStep:this.options.scaleMinStep>0&&(r=this.options.scaleMinStep),r>0&&(0>t&&(t=Math.floor(t/r)*r),e>0&&(e=Math.ceil(e/r)*r)),i=e-t,0!==t&&-100!==t&&(this.isLogScale?t=Base_Helpers.sign(t)*Math.pow(Math.abs(t),1-Base_Helpers.sign(t)*this.options.scaleAdjustmentTolerance):(o=t-i*this.options.scaleAdjustmentTolerance,t>0?t=Math.max(0,o):0>t&&(t=Math.min(0,o)))),0!==e&&100!==e&&(this.isLogScale?e=Base_Helpers.sign(e)*Math.pow(Math.abs(e),1+Base_Helpers.sign(e)*this.options.scaleAdjustmentTolerance):(s=e+i*this.options.scaleAdjustmentTolerance,e>0?e=Math.max(0,s):0>e&&(e=Math.min(0,s)))),null!==this.options.minValue&&(t=this.options.minValue),null!==this.options.maxValue&&(e=this.options.maxValue),this.minValue=t,this.maxValue=e,this.isLogScale?0>=t||e>=0?(this.logOffset=1,a=Math.log(e+this.logOffset)+Math.log(-t+this.logOffset)):0>t?(this.logOffset=1-t,a=Math.log(e+this.logOffset)):e>0&&(this.logOffset=1+e,a=Math.log(-t+this.logOffset)):a=e-t,this.scale=n/a,l=this.valueToRelativeY(t),this.zeroY=h+n+l)},t.prototype.valueToRelativeY=function(t){return this.isLogScale?t>0?this.scale*Math.log(t+this.logOffset):0>t?-this.scale*Math.log(-t+this.logOffset):0:this.scale*t},t.prototype.calcLinearValuePerLine=function(){var t,e,i;if(this.options.scaleStep)return this.options.scaleStep;for(e=this.options.style.labelSpacing/this.scale,i=Math.log(e)/Math.log(10),t=Math.pow(10,Math.floor(i-1)),t=Math.max(t,this.options.scaleMinStep);e>t;){if(2*t>=e)return 2*t;if(t>10&&2.5*t>=e)return 2.5*t;if(5*t>=e)return 5*t;t*=10}return t},t.prototype.calcExpValuePerLine=function(){var t,e,i,n;if(t=this.valueToRelativeY(10)-this.valueToRelativeY(1),n=10,i=10,e=t,e>4*this.options.style.labelSpacing)return[2,2];for(;e<this.options.style.labelSpacing;)n*=10,e+=t;return[i,n]},t.prototype.getUnitAndName=function(t,e){var i,n,s,o,r,a,l,h,c;if(t=Math.abs(t),n=this.isLogScale?"log":"lin","undefined"==typeof this.cachedUnits[n]&&(this.cachedUnits[n]=[]),l=1,o="",this.cachedUnits[n][t])return this.cachedUnits[n][t];c=e.localization.valueUnits;for(a in c)if(s=c[a],r=Math.abs(t/s),"lin"===n){if(1e3>r&&r>=1){l=s,o=a;break}}else"log"===n&&t===Math.round(t/s)*s&&s>l&&(l=s,o=a);if(i=0,t>0)for(h=1;h>t;)i+=1,h/=10;return this.cachedUnits[n][t]=[l,i,o],[l,i,o]},t.prototype.paintGrid=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f;if(this.options.hgrid){for(n=this.options.style.hgrid.lineColor,this.options.style.hgrid.lineColor=n,this.options.style.hgrid.lineWidth=1,i=Base_Graphics.beginStrokeAndFill(t,this.options.style.hgrid),Base_Graphics.clearShadow(i),r=this.scene.x0,a=this.scene.x0+this.scene.width,p=this.locations,o=h=0,u=p.length;u>h;o=++h)l=p[o],0!==this.values[o]&&(i.moveTo(r,l+.5),i.lineTo(a,l+.5));if(Base_Graphics.endStrokeAndFill(t,i,this.options.style.hgrid),e=Base_Graphics.parseColor(n),e[3]<.3){for(s=Base_Graphics.deriveColor(n,.5,.5),this.options.style.hgrid.lineColor=s,i=Base_Graphics.beginStrokeAndFill(t,this.options.style.hgrid),f=this.locations,o=c=0,d=f.length;d>c;o=++c)l=f[o],0!==this.values[o]&&(i.moveTo(r,l-.5),i.lineTo(a,l-.5));return Base_Graphics.endStrokeAndFill(t,i,this.options.style.hgrid),this.options.style.hgrid.lineColor=n}}},t.prototype.paintAxisLine=function(t){var e,i,n,s;return e=this.panel.left,i=this.panel.right,s=this.scene.y0+this.scene.height,this.isInside?("right"===this.options.side&&(n=e),"left"===this.options.side&&(n=i),t.moveTo(n,this.scene.y0),t.lineTo(n,s)):"right"===this.options.side?(n=e-.5,t.moveTo(n,this.scene.y0),t.lineTo(n,s)):(n=i+.5,t.moveTo(n,this.scene.y0),t.lineTo(n,s))},t.prototype.paintZeroLine=function(t){var e,i,n,s,o;return e=Math.max(this.options.style.baseLine.lineDepth,this.seriesDepth),n=this.scene.x0,s=this.scene.x0+this.scene.width,o=this.zeroY,e>0?(t.beginPath(),t.fillStyle=this.options.style.baseLine.depthColor,t.moveTo(n,o),t.lineTo(n+e,o-e),t.lineTo(s,o-e),t.lineTo(s,o),t.closePath(),t.fill()):(i=Base_Graphics.beginStroke(t,this.options.style.baseLine),i.moveTo(n,o),i.lineTo(s,o),Base_Graphics.endStroke(t,i,this.options.style.baseLine))},t.prototype.paintLabels=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;if(f=this.panel.left,m=this.panel.right,a="right"===this.options.side,this.options.title&&Base_Helpers.isString(this.options.title)&&(y=this.scene.y0,o=this.scene.height,s=this.title.hheight,c=this.options.style.title.margin,n=y+.5*o,a?(i=m-c-s,m-=s+2*c):(i=f+c+s,f+=s+2*c),e.paintWithStyle(t,i,n,1,this.title,this.title)),u=(f+m)/2,d=a?f:m-4,!this.isInside){for(t.beginPath(),x=this.locations,v=0,b=x.length;b>v;v++)g=x[v],t.moveTo(d,g),t.lineTo(d+4,g);Base_Graphics.stroke(t,this.options.style.tick)}for(w=[],r=_=0,S=this.locations.length;S>_;r=_+=1)p=this.locations[r],l=this.values[r],e.measure(t,l),h=this.isInside?u:a?d+l.hwidth+7:d-l.hwidth-3,w.push(e.paintWithStyle(t,h,p,1,l,l));return w},t}();var Linearchart_ValueAxisSet;Linearchart_ValueAxisSet=function(){function t(t,e){var i,n,s,o,r;if(this.chart=t,this.axisConfigList=e,this.axis=[],this.baseConfig=this.chart.settings.valueAxisDefault,this.axisConfigList.length>0)for(r=this.axisConfigList,s=0,o=r.length;o>s;s++)n=r[s],i=this.axis[n.id]=new Linearchart_ValueAxis(t,n)}return t.prototype.getAxis=function(t){return this.axis[t]},t.prototype.getPanels=function(){var t,e,i,n,s,o;for(e=[],o=this.axisConfigList,n=0,s=o.length;s>n;n++)i=o[n],t=this.axis[i.id].getPanel(),t&&e.push(t);return e},t.prototype.updateMinMax=function(t){var e,i,n,s;if(this.axisConfigList.length>0){n=this.axis,s=[];for(e in n)i=n[e],s.push(i.updateMinMax(t));return s}},t.prototype.doAnimations=function(t){var e,i,n,s;n=this.axis,s=[];for(e in n)i=n[e],s.push(i.doAnimations(t));return s},t.prototype.paintUnder=function(t){var e,i,n,s;n=this.axis,s=[];for(e in n)i=n[e],s.push(i.paintUnder(t));return s},t.prototype.paint=function(t){var e,i,n,s;n=this.axis,s=[];for(e in n)i=n[e],s.push(i.paint(t));return s},t}();var Base_Scene;Base_Scene=function(){"use strict";function t(){this.settings=null,this.chartWidth=1,this.chartHeight=1,this.mainData=null,this.x0=0,this.y0=0,this.height=0,this.width=0,this.leftMargin=0,this.rightMargin=0,this.topMargin=0,this.bottomMargin=0,this.loading=!0,this.messages={},this.selection=[],this.backStack=[]}return t.prototype.setMessage=function(t,e,i){var n;return null!=e?(n=null==this.messages[t]||this.messages[t].msg!==e||this.messages[t].pri!==i,this.messages[t]={msg:e,pri:i}):(n=null!=this.messages[t],delete this.messages[t]),n},t.prototype.getMessage=function(){var t,e,i,n,s;e=null,n=0,s=this.messages;for(t in s)i=s[t],i.pri>n&&(e=i.msg,n=i.pri);return e},t.prototype.pushBack=function(t){return this.backStack.push(t),this.backStack.length>1e3?this.backStack=this.backStack.slice(200):void 0},t}();var Base_MouseEvent,Base_MouseEvents,Base_MousePointer,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty;Base_MouseEvent=function(){function t(t,e,i,n){this.x=t,this.y=e,this.timeStamp=i,this.identifier=n}return t.prototype.time=0,t.prototype.changes={},t.prototype.consumed=!1,t.prototype.defaultPrevented=!1,t.prototype.preventDefault=function(){return this.defaultPrevented=!0},t.prototype.x=0,t.prototype.y=0,t.prototype.dx=0,t.prototype.dy=0,t.prototype.vx=0,t.prototype.vy=0,t.prototype.wheely=0,t.prototype.wheelx=0,t.prototype.identifier=0,t.prototype.pressed=!1,t.prototype.touch=!1,t.prototype._leaving=!1,t.prototype.swipeUp=!1,t.prototype.swipeDown=!1,t.prototype.swipeLeft=!1,t.prototype.swipeRight=!1,t.prototype.distance=function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},t.prototype.isWithinDistance=function(t,e,i){var n,s;return t?(n=this.pageX-t.pageX,s=this.pageY-t.pageY,e*e>n*n+s*s&&t.timeStamp+i>this.timeStamp):!1},t}(),Base_MousePointer=function(){function t(t,e){this.settings=e,this.identifier=t.identifier,this.x=t.x,this.y=t.y,this.pageX=t.pageX,this.pageY=t.pageY,this.timeStamp=t.timeStamp,this.pts=[[this.x,this.y,this.timeStamp]]}return t.prototype.moveTo=function(t){return t.timeStamp===this.timeStamp&&this.pts.pop(),this.timeStamp=t.timeStamp,(t.x||t.y)&&(this.x=t.x,this.y=t.y),this.pts.push([this.x,this.y,this.timeStamp]),this.pts.length>6?this.pts.unshift():void 0},t.prototype.getPosAndSpeed=function(t){var e,i,n,s,o,r,a,l,h,c,u;for(t.x=this.x,t.y=this.y,t.touch=this.touch,o=this.pts.length-2,o>=0?(t.dx=this.pts[o+1][0]-this.pts[o][0],t.dy=this.pts[o+1][1]-this.pts[o][1]):(t.dx=0,t.dy=0),r=1/0,s=h=0;o>=h;s=h+=1)e=this.pts[s+1][2]-this.pts[s][2],r=Math.min(r,this.pts[s+1][2]-this.pts[s][2]);for(r=Math.max(r,20),n=-1,s=c=o;c>=0&&(e=this.pts[s+1][2]-this.pts[s][2],!(e>2*r));s=c+=-1)n=s;if(-1===n)return t.vx=0,void(t.vy=0);for(a=0,l=0,i=1,s=u=n;o>=u;s=u+=1)e=this.pts[s+1][2]-this.pts[s][2],a=a*(1-i)+(this.pts[s+1][0]-this.pts[s][0])/e*i,l=a*(1-i)+(this.pts[s+1][1]-this.pts[s][1])/e*i,i=.6;return t.vx=1e3*a,t.vy=1e3*l},t}(),Base_MouseEvents=function(){"use strict";function t(t,e){var i,n,s,o;this.container=t,this.settings=e,this.fireClick=__bind(this.fireClick,this),this.handleTouchMove=__bind(this.handleTouchMove,this),this.handleTouchCancel=__bind(this.handleTouchCancel,this),this.handleTouchEnd=__bind(this.handleTouchEnd,this),this.handleTouchStart=__bind(this.handleTouchStart,this),this.handleMouseOut=__bind(this.handleMouseOut,this),this.handleMouseMove=__bind(this.handleMouseMove,this),this.handleMouseUp=__bind(this.handleMouseUp,this),this.handleMouseWheel=__bind(this.handleMouseWheel,this),this.handleCMenu=__bind(this.handleCMenu,this),this.handleMouseDown=__bind(this.handleMouseDown,this),this.handlePointerLeave=__bind(this.handlePointerLeave,this),this.handlePointerCancel=__bind(this.handlePointerCancel,this),this.handlePointerUp=__bind(this.handlePointerUp,this),this.handlePointerMove=__bind(this.handlePointerMove,this),this.handlePointerDown=__bind(this.handlePointerDown,this),this.filterEvent=__bind(this.filterEvent,this),this.handleKeyDown=__bind(this.handleKeyDown,this),this.scaleX=1,this.scaleY=1,this.mm=1,this.lastEvent=null,this.lastTouchEvent=null,this.clickEvent=null,this.clickTimeout=null,this.longPressTimeout=null,this.listeners={},this.downPointers={},this.inPointers={},this.containerList=[],window.PointerEvent?(this.container.style["touch-action"]="none",this.containerEvents={pointerdown:function(t){return function(e){return t.filterEvent(e,t.handlePointerDown)}}(this),contextmenu:function(t){return function(e){return t.filterEvent(e,t.handleCMenu)}}(this),mousewheel:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)}}(this)},this.windowEvents={pointermove:function(t){return function(e){return t.filterEvent(e,t.handlePointerMove)}}(this),pointerup:function(t){return function(e){return t.filterEvent(e,t.handlePointerUp)}}(this),pointercancel:function(t){return function(e){return t.filterEvent(e,t.handlePointerCancel)}}(this),pointerleave:function(t){return function(e){return t.filterEvent(e,t.handlePointerLeave)}}(this)}):window.MSPointerEvent?(this.container.style["-ms-touch-action"]="none",this.containerEvents={MSPointerDown:function(t){return function(e){return t.filterEvent(e,t.handlePointerDown)}}(this),contextmenu:function(t){return function(e){return t.filterEvent(e,t.handleCMenu)}}(this),mousewheel:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)}}(this)},this.windowEvents={MSPointerMove:function(t){return function(e){return t.filterEvent(e,t.handlePointerMove)}}(this),MSPointerUp:function(t){return function(e){return t.filterEvent(e,t.handlePointerUp)}}(this),MSPointerCancel:function(t){return function(e){return t.filterEvent(e,t.handlePointerCancel)}}(this),MSPointerLeave:function(t){return function(e){return t.filterEvent(e,t.handlePointerLeave)}}(this)}):(this.containerEvents={mousedown:function(t){return function(e){return t.filterEvent(e,t.handleMouseDown)}}(this),contextmenu:function(t){return function(e){return t.filterEvent(e,t.handleCMenu)}}(this),mousewheel:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)
}}(this),DOMMouseScroll:function(t){return function(e){return t.filterEvent(e,t.handleMouseWheel)}}(this),touchstart:function(t){return function(e){return t.filterEvent(e,t.handleTouchStart)}}(this)},this.windowEvents={mouseup:function(t){return function(e){return t.filterEvent(e,t.handleMouseUp)}}(this),mousemove:function(t){return function(e){return t.filterEvent(e,t.handleMouseMove)}}(this),touchend:function(t){return function(e){return t.filterEvent(e,t.handleTouchEnd)}}(this),touchcancel:function(t){return function(e){return t.filterEvent(e,t.handleTouchCancel)}}(this),touchmove:function(t){return function(e){return t.filterEvent(e,t.handleTouchMove)}}(this),mouseout:function(t){return function(e){return t.filterEvent(e,t.handleMouseOut)}}(this)}),s=this.containerEvents;for(i in s)n=s[i],Base_Helpers.listen(window,i,n);o=this.windowEvents;for(i in o)n=o[i],Base_Helpers.listen(window,i,n);this.addContainer(t)}return t.prototype.ID_MOUSE="mouse",t.EVENT_MOVE="move",t.EVENT_DOWN="down",t.EVENT_GLOBAL_DOWN="gdown",t.EVENT_DRAG="drag",t.EVENT_CANCEL="cancel",t.EVENT_UP="up",t.EVENT_LEAVE="leave",t.EVENT_CLICK="click",t.EVENT_RCLICK="rclick",t.EVENT_DBLCLICK="dblclick",t.EVENT_WHEEL="mwheel",t.EVENT_KEY="key",t.prototype.addContainer=function(t){var e,i,n,s;this.containerList.push(t),n=this.windowEvents;for(e in n)i=n[e],Base_Helpers.listen(t,e,i);s=this.containerEvents;for(e in s)i=s[e],Base_Helpers.listen(t,e,i);return Base_Helpers.listen(t,"keydown",this.handleKeyDown)},t.prototype.remove=function(){var t,e,i,n,s,o,r,a,l,h;o=this.windowEvents;for(e in o)i=o[e],Base_Helpers.unlisten(window,e,i);r=this.containerEvents;for(e in r)i=r[e],Base_Helpers.unlisten(window,e,i);for(a=this.containerList,h=[],n=0,s=a.length;s>n;n++){t=a[n],l=this.containerEvents;for(e in l)i=l[e],Base_Helpers.unlisten(t,e,i);h.push(Base_Helpers.unlisten(t,"keydown",this.handleKeyDown))}return h},t.prototype.listen=function(t,e){return this.listeners[t]=e},t.prototype.processConsumed=function(t,e){return e.consumed?Base_Helpers.stopPropagation(t):void 0},t.prototype.handleKeyDown=function(e){return e.keyCode||(e.keyCode=e.which),this.fireEvent(t.EVENT_KEY,e),this.processConsumed(e,e)},t.prototype.filterEvent=function(t,e){return t!==this.lastEvent?(this.lastEvent=t,e(t)):void 0},t.prototype.handlePointerDown=function(t){var e,i,n;return e=!1,i=this.buildEvent(t,t.pointerId,t.timeStamp,t.buttons>0),n="touch"===t.pointerType||2===t.pointerType,this.downHappened(i,n),this.processConsumed(t,i)},t.prototype.handlePointerMove=function(t){var e;return e=this.buildEvent(t,t.pointerId,t.timeStamp,t.buttons>0),this.moveHappened(e),this.processConsumed(t,e)},t.prototype.handlePointerUp=function(t){var e;if(0===t.buttons)return e=this.buildEvent(t,t.pointerId,t.timeStamp,!1),e.isRightMB=2===t.button,this.upHappened(e),this.processConsumed(t,e)},t.prototype.handlePointerCancel=function(t){var e;return e=this.buildEvent(t,t.pointerId,t.timeStamp,!1),this.cancelHappened(e)},t.prototype.handlePointerLeave=function(t){var e;return e=this.buildEvent(t,t.pointerId,t.timeStamp,!1),this.moveHappened(e)},t.prototype.handleMouseDown=function(t){var e;return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0),e.isWithinDistance(this.lastTouchEvent,this.settings.doubleClickSensitivity,this.settings.longPressTimeout)?void 0:(this.downHappened(e,!1),this.processConsumed(t,e))},t.prototype.handleCMenu=function(t){var e,i,n,s,o;if(i=t.which?3===t.which:2===t.button){e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0),o=this.downPointers;for(n in o)__hasProp.call(o,n)&&(s=o[n],e=this.rebuildEvent(t,s,!1),this.cancelHappened(e));return this.rclickHappened(e),this.processConsumed(t,e)}},t.prototype.handleMouseWheel=function(t){var e;if(this.isTargetOkay(t.target))return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!0),e.wheely=t.wheelDelta|-40*t.detail,this.wheelHappened(e),this.processConsumed(t,e)},t.prototype.handleMouseUp=function(t){var e,i;return t.shiftKey&&t.ctrlKey?(this.ID_MOUSE="mouse"+this.mm,void(this.mm+=1)):(i=!0,e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1),e.isRightMB=t.witch?3===t.which:2===t.button,this.upHappened(e),this.processConsumed(t,e),i?this.removeLostTouches(t,[],[]):void 0)},t.prototype.handleMouseMove=function(t){var e;return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1),e.isWithinDistance(this.lastTouchEvent,this.settings.doubleClickSensitivity,this.settings.longPressTimeout)?void 0:(this.moveHappened(e),this.processConsumed(t,e))},t.prototype.handleMouseOut=function(t){var e;return e=this.buildEvent(t,this.ID_MOUSE,t.timeStamp,!1),e.target=t.relatedTarget,this.moveHappened(e)},t.prototype.handleTouchStart=function(t){var e,i,n,s,o,r;for(this.removeLostTouches(t,t.touches,t.changedTouches),e=!1,n=t.changedTouches||t.touches,o=0,r=n.length;r>o;o++)s=n[o],i=this.buildEvent(s,s.identifier,t.timeStamp,!0),this.lastTouchEvent=i,this.downHappened(i,!0),e||(e=i.consumed);return this.processConsumed(t,i)},t.prototype.handleTouchEnd=function(t){var e,i,n,s,o,r;for(n=t.changedTouches||t.touches,e=!1,o=0,r=n.length;r>o;o++)s=n[o],i=this.buildEvent(s,s.identifier,t.timeStamp,!1),this.lastTouchEvent=i,this.upHappened(i),this.pointerLeave(i),e||(e=i.consumed),this.removeLostTouches(t,t.touches);return this.processConsumed(t,i)},t.prototype.handleTouchCancel=function(t){var e,i,n,s,o;for(i=t.changedTouches||t.touches,s=0,o=i.length;o>s;s++)n=i[s],e=this.buildEvent(n,n.identifier,t.timeStamp,!1),this.lastTouchEvent=e,this.cancelHappened(e);return this.removeLostTouches(t,t.touches)},t.prototype.handleTouchMove=function(t){var e,i,n,s,o,r;for(e=!1,this.removeLostTouches(t,t.touches),n=t.changedTouches||t.touches,o=0,r=n.length;r>o;o++)s=n[o],i=this.buildEvent(s,s.identifier,t.timeStamp,!0),this.lastTouchEvent=i,this.moveHappened(i),e||(e=i.consumed);return this.processConsumed(t,i)},t.prototype.removeLostTouches=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p;for(r=[],l=0,c=e.length;c>l;l++)a=e[l],r[a.identifier]=!0;d=this.downPointers;for(s in d)__hasProp.call(d,s)&&(o=d[s],r[s]||(n=this.rebuildEvent(t,o,!1),this.upHappened(n)));if(null!=i){for(p=[],h=0,u=i.length;u>h;h++)a=i[h],o=this.downPointers[a.identifier],null!=o?(n=this.rebuildEvent(t,o,!1),p.push(this.upHappened(n))):p.push(void 0);return p}},t.prototype.rebuildEvent=function(t,e,i){var n;return n=new Base_MouseEvent(e.x,e.y,t.timeStamp,e.identifier),n.pageX=e.pageX,n.pageY=e.pageY,n.pressed=i,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,n},t.prototype.buildEvent=function(t,e,i,n){var s,o,r,a,l,h,c,u;return u=Base_Helpers.elementPos(this.container),s=u[0],o=u[1],"undefined"!=typeof t.pageX?(a=t.pageX,l=t.pageY):(a=t.clientX+document.documentElement.scrollLeft,l=t.clientY+document.documentElement.scrollTop),h=a-s,c=l-o,r=new Base_MouseEvent(Math.round(h*this.scaleX),Math.round(c*this.scaleY),i,""+e),r.target=t.target||t.srcElement,r.pageX=a,r.pageY=l,r.shiftKey=t.shiftKey,r.altKey=t.altKey,r.ctrlKey=t.ctrlKey,r.pressed=n,r},t.prototype.downHappened=function(e,i){var n;return e.pressed=!0,this.fireEvent(t.EVENT_GLOBAL_DOWN,e),this.isTargetOkay(e.target)&&(this.container.focus(),null==this.downPointers[e.identifier])?(null!=this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.downPointers[e.identifier]=n=new Base_MousePointer(e,this.settings),n.touch=i,this.inPointers[e.identifier]=!0,this.fireEvent(t.EVENT_DOWN,e),this.startLongPress(e)):void 0},t.prototype.upHappened=function(e){var i;return null==this.downPointers[e.identifier]?!1:(i=this.downPointers[e.identifier],this.cancelLongPress(e),i.moveTo(e),i.getPosAndSpeed(e,!0),delete this.downPointers[e.identifier],Math.abs(e.vx)>2*Math.abs(e.vy)?(e.swipeSpeed=Math.abs(e.vx),e.vx>0&&(e.swipeLeft=!0),e.vx<0&&(e.swipeRight=!0)):Math.abs(e.vy)>2*Math.abs(e.vx)&&(e.swipeSpeed=Math.abs(e.vy),e.vy<0&&(e.swipeUp=!0),e.vy>0&&(e.swipeDown=!0)),this.fireEvent(t.EVENT_UP,e),i.scrolling||e.isRightMB||e.consumed||i.noClick?void 0:null!=this.clickEvent&&this.clickEvent.timeStamp+this.settings.doubleClickTimeout>=e.timeStamp&&this.clickEvent.distance(e)<this.settings.doubleClickSensitivity?(this.settings.noClickOnDoubleClick||this.fireEvent(t.EVENT_CLICK,e),this.clickEvent=null,this.fireEvent(t.EVENT_DBLCLICK,e)):this.settings.noClickOnDoubleClick?(this.clickEvent=e,this.clickTimeout=setTimeout(this.fireClick,this.settings.doubleClickTimeout)):(this.fireEvent(t.EVENT_CLICK,e),this.clickEvent=e,setTimeout(function(t){return function(){return t.clickEvent=null}}(this),this.settings.doubleClickTimeout)))},t.prototype.cancelHappened=function(e){var i;if(null!=this.downPointers[e.identifier])return this.cancelLongPress(e),i=this.downPointers[e.identifier],delete this.downPointers[e.identifier],this.fireEvent(t.EVENT_CANCEL,e)},t.prototype.moveHappened=function(e){var i;if(i=this.downPointers[e.identifier],e.pressed=null!=i,null!=i){if(e.distance(i)>=this.settings.dragSensitivity||i.scrolling)return this.cancelLongPress(e),i.scrolling=!0,i.moveTo(e),i.getPosAndSpeed(e,!1),this.fireEvent(t.EVENT_DRAG,e),this.clickEvent=null}else{if(!this.clickEvent||!this.settings.noClickOnDoubleClick)return this.isTargetOkay(e.target)?(this.inPointers[e.identifier]=!0,this.fireEvent(t.EVENT_MOVE,e)):this.pointerLeave(e);if(this.clickEvent.distance(e)>this.settings.doubleClickSensitivity)return this.fireEvent(t.EVENT_CLICK,this.clickEvent),this.clickEvent=null}},t.prototype.pointerLeave=function(e){return this.inPointers.hasOwnProperty(e.identifier)?this.clickEvent&&this.clickEvent.identifier===e.identifier?this.clickEvent._leaving=!0:(delete this.inPointers[e.identifier],this.fireEvent(t.EVENT_LEAVE,e)):void 0},t.prototype.fireClick=function(){return this.clickEvent?(this.fireEvent(t.EVENT_CLICK,this.clickEvent),this.clickEvent._leaving&&this.fireEvent(t.EVENT_LEAVE,this.clickEvent),this.clickEvent=null):void 0},t.prototype.startLongPress=function(e){var i;return i=function(i){return function(){return e.consumed=!1,i.fireEvent(t.EVENT_RCLICK,e),e.consumed?i.downPointers[e.identifier].noClick=!0:void 0}}(this),this.cancelLongPress(),this.longPressTimeout=setTimeout(i,this.settings.longPressTimeout)},t.prototype.cancelLongPress=function(){return null!==this.longPressTimeout?(clearTimeout(this.longPressTimeout),this.longPressTimeout=null):void 0},t.prototype.wheelHappened=function(e){return this.fireEvent(t.EVENT_WHEEL,e)},t.prototype.rclickHappened=function(e){return this.fireEvent(t.EVENT_RCLICK,e)},t.prototype.fireEvent=function(t,e){return this.listeners[t]?this.listeners[t].call(this,e):void 0},t.prototype.isTargetOkay=function(t){var e,i,n,s,o;for(o=this.containerList,e=n=0,s=o.length;s>n;e=++n)if(i=o[e],i===t||Base_Helpers.isParentOf(i,t))return!0;return!1},t}();var Base_Bar_Button,Base_Bar_Item,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_Item=function(){function t(t){this.chart=t,this.domElement=null}return t.prototype.updateSettings=function(){return 1},t.prototype.remove=function(){return 1},t.prototype.onSceneChange=function(){return 1},t.prototype.doAnimations=function(){return 1},t}(),Base_Bar_Button=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.createButton=function(t){var e;return this.options=t,this.li=Base_Helpers.createDom("li",null,null,null),this.a=Base_Helpers.createDom("a",null,null,this.li),this.p=Base_Helpers.createDom("p",null,null,this.a),e=this,this.onClickProxy=function(t){return e.onClick(t)},this.domElement=this.li,Base_Helpers.listen(this.a,"click",this.onClickProxy),this.updateSettings()},e.prototype.updateSettings=function(){var t,e;return e=this.options.title||this.options.label||"",this.a.setAttribute("title",e),t="DVSL-bar-btn "+(this.options.cssClass?this.options.cssClass:this.options.image?"DVSL-bar-btn-image":"DVSL-bar-btn-none"),this.a.className=t,this.p.innerHTML=this.options.showLabels!==!1?this.options.label||"":"",this.p.style.backgroundImage=this.options.image?"url('"+this.options.image+"')":null},e.prototype.remove=function(){return Base_Helpers.unlisten(this.a,"click",this.onClickProxy)},e.prototype.onClick=function(){return 1},e}(Base_Bar_Item);var Linearchart_Series_Stack;Linearchart_Series_Stack=function(){function t(t,e,i,n){this.scene=t,this.cluster=e,this.options=i,this.va=n,this.va.series++,this.series=[],this.seriesId=[],this.min=0,this.max=0,this.renderingType=null,this.needsAfterProcess=!1,this.paddingLeft=0,this.paddingRight=0,this.centers=[],this.radii=[],this.vstack=[],this.ystack=[],this.xes=[],this.times=[],this.styles=[],this.calculatedDepth=0}return t.prototype.addSeries=function(t,e){return this.renderingType||(this.renderingType=e.type),this.series.push(e),this.seriesId.push(t),this.calculatedDepth=Math.max(this.calculatedDepth,e.style.depth),"line"!==this.renderingType?(this.paddingLeft=Math.max(this.paddingLeft,e.style.padding[0]),this.paddingRight=Math.max(this.paddingRight,e.style.padding[1])):void 0},t.prototype.afterInit=function(){return this.renderer="line"===this.renderingType?new Linearchart_Renderer_Line(this.series):new Linearchart_Renderer_Columns(this.scene,this.series)},t.prototype.process=function(t){return this.processData(t),this.computeMinMax(),this.addLeads(t),this.needsAfterProcess=!0},t.prototype.afterProcess=function(){return this.needsAfterProcess||this.va.axisChanged?(this.needsAfterProcess=!1,this.computeY()):void 0},t.prototype.paint=function(t){var e,i,n,s;for(s=this.series,i=0,n=s.length;n>i;i++)e=s[i],e.style.fillGradient&&(e.style.currentFillGradient=this.computeFillGradient(t,e.style.fillGradient));return this.ystack.length>0?(this.ystackNegative&&this.renderer.paintStack(t,this.centers,this.radii,this.ystackNegative,this.styles,this.va.zeroY),this.renderer.paintStack(t,this.centers,this.radii,this.ystack,this.styles,this.va.zeroY)):void 0},t.prototype.hitTestStack=function(t){var e,i,n,s,o;return o=Base_Helpers.binSearch(this.centers,t),e=this.centers[o]-this.radii[o],n=this.centers[o]+this.radii[o],e>t&&o>0&&(i=this.centers[o-1]-this.radii[o-1],s=this.centers[o-1]+this.radii[o-1],(s>t||Math.abs(s-t)<Math.abs(e-t))&&(o-=1,e=i,n=s)),[{x0:e,y0:0,x1:n,y1:0,series:null,stack:this},Base_Geometry.distanceToRect(t,0,e,0,n,0)]},t.prototype.hitTest=function(t,e,i){var n,s,o,r,a,l;return a=this.renderer.hitTest(this.centers,this.radii,this.ystack,this.styles,this.va.zeroY,t,e,i),r=a[0],s=a[1],this.ystackNegative&&(l=this.renderer.hitTest(this.centers,this.radii,this.ystackNegative,this.styles,this.va.zeroY,t,e,i),o=l[0],n=l[1],s>n&&(r=o)),null!==r&&(r.seriesIndex=this.seriesId[r.seriesIndex],r.stack=this),[r,s]},t.prototype.computeFillGradient=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v;for(c=this.va,f=c.zeroY,d=this.scene.y0,u=this.scene.x0,o=this.scene.height,h=[],m=0,y=e.length;y>m;m++)l=e[m],p=f-c.valueToRelativeY(l[0]),n=(p-d)/o,h.push([n,l[1]]);for(h.sort(function(t,e){return t[0]-e[0]}),s=t.createLinearGradient(u,d,u,d+o),a=null,g=0,v=h.length;v>g;g++){if(l=h[g],r=l[0],i=l[1],r>0){if(a&&a[0]<0&&s.addColorStop(0,Base_Graphics.blendColors(a[1],i,(0-a[0])/(r-a[0]))),r>1){a&&s.addColorStop(1,Base_Graphics.blendColors(a[1],i,(1-a[0])/(r-a[0])));break}s.addColorStop(r,i)}a=l}return s},t.prototype.processData=function(t){var e,i,n,s,o,r,a;if(this.vstack=[],this.styles=[],n=t[this.seriesId[0]],0!==n.times.length){for(this.xes=n.xes.slice(n.fromIndex,n.toIndex),this.times=n.times.slice(n.fromIndex,n.toIndex),this.centers=new Array(this.xes.length-1),this.radii=new Array(this.xes.length-1),this.cluster.computeStackCenterRadius(this,this.xes,this.centers,this.radii),r=this.seriesId,a=[],e=s=0,o=r.length;o>s;e=++s)i=r[e],n=t[i],this.vstack.push(n.values.slice(n.fromIndex,n.toIndex-1)),a.push(n.style?this.styles.push(n.style.slice(n.fromIndex,n.toIndex-1)):this.styles.push(null));return a}},t.prototype.addLeads=function(t){var e,i,n,s,o,r,a;for(r=this.seriesId,a=[],e=s=0,o=r.length;o>s;e=++s)i=r[e],n=t[i],n.leadIn&&this.injectLead(n.leadIn,e),a.push(n.leadOut?this.injectLead(n.leadOut,e):void 0);return a},t.prototype.injectLead=function(t,e){var i,n,s,o,r,a,l,h,c;for(n=this.series.length,l=t.values[0],a=t.times[0],i=[0],r=[0],this.cluster.computeStackCenterRadius(this,t.xes,i,r),i=i[0],r=r[0],s=0;s<this.centers.length&&this.centers[s]<i;)s++;if(s===this.centers.length||this.centers[s]>i)for(this.centers.splice(s,0,i),this.radii.splice(s,0,r),this.times.splice(s,0,a),o=h=0,c=n-1;c>=h;o=h+=1)this.vstack[o].splice(s,0,null),this.styles[o]&&this.styles[o].splice(s,0,null);return this.vstack[e][s]=l},t.prototype.getSeparateNegative=function(){var t;return t=this.options.separateNegativeValues,null===t&&(t="line"!==this.renderingType),t},t.prototype.computeMinMax=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M;if(a=1/0,o=-1/0,this.vstack.length>0){for(y=this.vstack,s=y[0].length,d=y.length,f=this.options.type,u=this.getSeparateNegative(),n=this.scene.x0,h=n+this.scene.width,t=0,p=s-1;s>t&&this.centers[t]+this.radii[t]<n;)t+=1;for(;p>=t&&this.centers[p]-this.radii[p]>h;)p-=1;if("proportional"===f)a=0,o=100;else if(1===d)for(g=y[0],e=v=t;p>=t?p>=v:v>=p;e=p>=t?++v:--v)m=g[e],null!==m&&(a=Math.min(a,m),o=Math.max(o,m));else if("based"===f)for(e=_=t;p>=_;e=_+=1)for(i=b=0,k=d-1;k>=b;i=b+=1)m=y[i][e],null!==m&&(a=Math.min(a,m),o=Math.max(o,m));else if("normal"!==f||u){if("normal"!==f)throw"stack.type unknown value: "+f;for(e=w=t;p>=w;e=w+=1)for(l=0,r=0,i=C=0,M=d-1;M>=C;i=C+=1)m=y[i][e],m>0?r+=m:0>m&&(l+=m),a=Math.min(a,l),o=Math.max(o,r)}else for(e=x=t;p>=x;e=x+=1)for(c=0,i=S=0,P=d-1;P>=S;i=S+=1)m=y[i][e],null!==m&&(c+=m),a=Math.min(a,c),o=Math.max(o,c)}return this.min=a,this.max=o,o>=a?this.va.recieveSeriesGeometry(a,o,this.calculatedDepth):this.va.recieveSeriesGeometry(void 0,void 0,this.calculatedDepth)},t.prototype.computeY=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O;if(0!==this.vstack.length){if(a=this.options.type,s=this.getSeparateNegative(),u=this.vstack,o=u.length,t=u[0].length,h=this.va,m=null,"proportional"===a)for(f=function(){var t,i,n;for(n=[],t=0,i=u.length;i>t;t++)e=u[t],n.push([]);return n}(),e=g=0,T=t-1;T>=g;e=g+=1){for(r=0,i=y=0,D=o-1;D>=y;i=y+=1)l=u[i][e],null!==l&&(r+=Math.abs(l));if(r>0)for(r*=.01,i=v=0,L=o-1;L>=v;i=v+=1)l=u[i][e],f[i].push(null!==l?h.valueToRelativeY(Math.abs(l)/r):null);else for(i=_=0,B=o-1;B>=_;i=_+=1)f[i].push(null)}else if("based"===a||1===o)for(f=[],n=function(){var t,i,n,s;for(n=u[0],s=[],i=0,t=n.length;t>i;i++)e=n[i],s.push(0);return s}(),i=S=0,b=u.length;b>S;i=++S){for(c=u[i],p=new Array(t),e=w=0,x=c.length;x>w;e=++w)l=c[e],null!==l?(d=h.valueToRelativeY(l),p[e]=d-n[e],n[e]=d):p[e]=null;f.push(p)}else if("normal"===a&&s&&this.min<0&&this.max>0)for(f=function(){var t,i,n;for(n=[],i=0,t=u.length;t>i;i++)e=u[i],n.push([]);return n}(),m=function(){var t,i,n;for(n=[],i=0,t=u.length;t>i;i++)e=u[i],n.push([]);return n}(),e=C=0,A=t-1;A>=C;e=C+=1)for(i=k=0,I=o-1;I>=k;i=k+=1)l=u[i][e],l>0?(f[i].push(h.valueToRelativeY(l)),m[i].push(null)):0>l?(f[i].push(null),m[i].push(h.valueToRelativeY(l))):(f[i].push(null),m[i].push(null));else{if("normal"!==a)throw"stack.type unknown value: "+a;for(f=function(){var t,i,n;for(n=[],i=0,t=u.length;t>i;i++)e=u[i],n.push([]);return n}(),e=P=0,F=t-1;F>=P;e=P+=1)for(i=M=0,O=o-1;O>=M;i=M+=1)l=u[i][e],f[i].push(null!==l?h.valueToRelativeY(l):null)}return this.ystackNegative=m,this.ystack=f}},t.prototype.exportData=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M;if(this.times&&this.vstack){for(g=this.times,o=this.centers.length,h=0;o>h&&g[h+1]<=t;)h++;for(l=h;o>h&&g[h+1]<e;)h++;for(y=h,f=[],P=this.vstack,x=0,C=P.length;C>x;x++){for(_=P[x],m=0,d=-1/0,p=1/0,a=null,u=null,o=0,h=S=l;y>=S;h=S+=1)v=_[h],null===v||isNaN(v)||(m+=v,d=Math.max(d,v),p=Math.min(p,v),null===a&&(a=v),u=v,o+=1);o>0?(o>0&&(i=Math.round(m/o*100)/100),n=u-a,f.push({sum:m,max:d,min:p,first:a,last:u,count:o,avg:i,change:n})):f.push(null)}}else f=function(){var t,e,i,n;for(i=this.series,n=[],t=0,e=i.length;e>t;t++)b=i[t],n.push(null);return n}.call(this);for(r=[],M=this.series,c=w=0,k=M.length;k>w;c=++w)s=M[c],r.push({name:null!=s.name?s.name:"",values:f[c],config:s});return{name:this.options.name,stack:this,config:this.options,data:r}},t}();var Linearchart_Series_Cluster;Linearchart_Series_Cluster=function(){function t(t){this.scene=t,this.stacks=[],this.idToStack={},this.paddingSum=0}return t.prototype.addSeries=function(t,e,i,n){var s,o;return e.stack?(o=e.stack+"#"+e.type,s=this.idToStack[o],s||(s=this.idToStack[o]=new Linearchart_Series_Stack(this.scene,this,i,n),this.stacks.push(s))):(s=new Linearchart_Series_Stack(this.scene,this,i,n),this.stacks.push(s)),s.addSeries(t,e)},t.prototype.afterInit=function(){var t,e,i,n,s;for(n=this.stacks,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.afterInit());return s},t.prototype.process=function(t){var e,i,n,s,o;for(s=this.stacks,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.process(t));return o},t.prototype.afterProcess=function(){var t,e,i,n,s;for(n=this.stacks,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.afterProcess());return s},t.prototype.paint=function(t){var e,i,n,s,o;for(s=this.stacks,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.paint(t));return o},t.prototype.hitTestStack=function(t,e){var i,n,s,o,r,a,l,h;for(o=null,n=1/0,l=this.stacks,a=l.length-1;a>=0;a+=-1)r=l[a],h=r.hitTestStack(t,e),s=h[0],i=h[1],n>i&&(n=i,o=s);return[o,n]},t.prototype.hitTest=function(t,e,i){var n,s,o,r,a,l,h,c;for(r=null,s=1/0,h=this.stacks,l=h.length-1;l>=0;l+=-1)a=h[l],c=a.hitTest(t,e,i),o=c[0],n=c[1],s>n&&(s=n,r=o);return[r,s]},t.prototype.exportData=function(t,e,i){var n,s,o,r,a;for(r=this.stacks,a=[],s=0,o=r.length;o>s;s++)n=r[s],a.push(i.push(n.exportData(t,e)));return a},t.prototype.computeStackCenterRadius=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;if(!(e.length<2)){for(d=this.stacks.length,a=Base_Helpers.indexOf(this.stacks,t),o=(a+.5)/d,c=.5/d,h=0,l=0,b=this.stacks,r=m=0,v=b.length;v>m;r=++m)u=b[r],h+=u.paddingLeft+u.paddingRight;for(x=this.stacks,r=g=0,_=x.length;_>g&&(u=x[r],l+=u.paddingLeft,u!==t);r=++g)l+=u.paddingRight;for(s=e[1]-e[0],h>s/2&&(h=s/2,l=l/s*(s-h)),w=[],r=y=0,S=e.length-2;S>=y;r=y+=1)f=e[r],p=e[r+1]-f-h,i[r]=f+p*o+l,w.push(n[r]=p*c);return w}},t}();var Base_Bar_DropdownBase,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_DropdownBase=function(t){"use strict";function e(t,e){this.options=e,this.hideDropdown=__bind(this.hideDropdown,this),this.createButton(e),Base_Helpers.createDom("span",null,null,this.a),Base_Helpers.addClass(this.a,"DVSL-bar-show-more")}return __extends(e,t),e.prototype.buildDropdownList=function(){return 1},e.prototype.onHideDropdown=function(){return 1},e.prototype.onClick=function(t){return this.dropdown?this.hideDropdown():this.showDropdown(),Base_Helpers.stopPropagation(t)},e.prototype.showDropdown=function(){var t,e,i,n,s,o;for(this.dropdown=Base_Helpers.createDom("div","DVSL-bar-dropdown",null,this.li),this.dropdown.style.display="block",e=Base_Helpers.createDom("ul",null,null,this.dropdown),s=this.buildDropdownList(),o=[],i=0,n=s.length;n>i;i++)t=s[i],o.push(e.appendChild(t));return o},e.prototype.hideDropdown=function(){return this.onHideDropdown(),this.dropdown.parentNode.removeChild(this.dropdown),this.dropdown=null},e.prototype.previewPointerDown=function(t){var e,i,n,s,o,r,a,l,h;return s=Base_Helpers.isParentOf(this.li,t.target),this.dropdown&&!s&&(l=Base_Helpers.elementPos(this.chart.layers.container),i=l[0],n=l[1],h=Base_Helpers.elementPos(this.dropdown),o=h[0],a=h[1],o-=i,a-=n,r=o+this.dropdown.offsetWidth,e=a+this.dropdown.offsetHeight,o>t.x||a>t.y||e<t.y||r<t.x)?this.hideDropdown():void 0},e}(Base_Bar_Button);var Piechart_Icon,Piechart_Pie,Piechart_Scene,Piechart_Slice,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Icon=function(){function t(){}return t.prototype.hwidth=0,t.prototype.hheight=0,t.prototype.x=null,t.prototype.y=null,t.prototype.userPlaced=!1,t.prototype.inside=!0,t}(),Piechart_Slice=function(){function t(e,i){this.pie=e,this.index=i,Base_Helpers.extend(this,t.prototype.styleSettings)}return t.styleSettings={lineBrightness:0,brightness:1,cutoutDistance:0,fillColor:null,lineColor:null,lineWidth:1,label:null,insideLabel:null,url:null,icon:null,lineDash:null},t.prototype.id=null,t.prototype.pie=null,t.prototype.data=null,t.prototype.index=0,t.prototype.value=0,t.prototype.fraction=0,t.prototype.cutoutDistance=0,t.prototype.brightness=1,t.prototype.expandable=!0,t.prototype.expandable_doc={doc:"Whether to expand the slice as a default click behavior.",type:"bool"},t.prototype.selected=!1,t.prototype.active=!1,t.prototype.icon=null,t.prototype.iconOffset=null,t.prototype.url=null,t.prototype.userPlaced=!1,t.prototype.inside=!0,t.prototype.x=0,t.prototype.y=0,t.prototype.currentCutoutDistance=null,t.prototype.currentFraction=null,t.prototype.currentInsideLabel=null,t.prototype.currentLabel=null,t.prototype.currentIcon=null,t.prototype.currentLineColor=null,t.prototype.currentFillColor=null,t.prototype.label=null,t.prototype.insideLabel=null,t.prototype.lineColor=null,t.prototype.fillColor=null,t.prototype.lineWidth=1,t.prototype.labelStyle=null,t.prototype.lineDash=null,t}(),Piechart_Pie=function(){function t(){}return t.styleSettings={background:!1,brightness:0,fillColor:null,sliceColors:null,colorDistribution:null},t.prototype.id=null,t.prototype.data=null,t.prototype.total=1,t.prototype.parentSlice=null,t.prototype.othersSlice=null,t.prototype.previousSlice=null,t.prototype.slices=[],t.prototype.allSlices=[],t.prototype.offset=0,t.prototype.count=0,t.prototype.background=!1,t.prototype.activeSliceId=null,t.prototype.brightness=1,t.prototype.loading=!1,t.prototype.scrollOffset=0,t.prototype.fillColor=null,t.prototype.x=0,t.prototype.y=0,t.prototype.startAngle=0,t.prototype.endAngle=0,t.prototype.currentStartAngle=null,t.prototype.currentEndAngle=null,t.prototype.currentRadius=0,t.prototype.currentInnerRadius=0,t.prototype.colorDistribution=null,t.prototype.sliceColors=null,t.prototype.getActiveSlice=function(){var t,e,i,n;if(!this.activeSliceId)return null;for(n=this.slices,e=0,i=n.length;i>e;e++)if(t=n[e],t.id===this.activeSliceId)return t;return null},t}(),Piechart_Scene=function(t){function e(){e.__super__.constructor.call(this),this.radius=100,this.innerRadius=0,this.pies=[],this.stack=[],this.selection=[],this.selectionIds=[],this.hoverSlice=null,this.hoverLabel=null,this.hoverPie=null,this.view=null,this.pendingAction=null,this.pendingOffset=null}return __extends(e,t),e.prototype.addPie=function(t){return this.pies.push(t),this.stack.push(t),t},e.prototype.removePie=function(t){var e,i,n;for(t.removed=!0,Base_Helpers.removeFromArray(this.stack,t),e=0,n=[];e<this.selection.length;)i=this.selection[e],n.push(i.pie===t?Base_Helpers.removeFromArray(this.selection,i):e++);return n},e.prototype.deletePie=function(t){return Base_Helpers.removeFromArray(this.pies,t),Base_Helpers.removeFromArray(this.stack,t)},e.prototype.length=function(){return this.stack.length},e.prototype.peek=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1]},e.prototype.push=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p;if(o=this.peek(),o&&!e)for(u=o.slices,a=0,h=u.length;h>a;a++)if(r=u[a],r.id===t.id){e=r;break}if(e)for(t.parentSlice=e,s=e.pie,d=this.getSliceAngles(e),i=d[0],n=d[1],t.currentStartAngle=i,t.currentEndAngle=n,t.currentRadius=s.currentRadius,t.currentInnerRadius=s.currentInnerRadius,o.activeSliceId=e.id,p=t.allSlices,l=0,c=p.length;c>l;l++)r=p[l],e&&(r.currentFillColor=e.currentFillColor,r.currentLineColor=e.currentLineColor);else o&&(o.activeSliceId=null);return o&&(o.background=!0),this.addPie(t)},e.prototype.pop=function(){var t;if(this.stack.length>0)return this.removePie(this.peek()),t=this.peek(),t.background=!1,t.brightness=1},e.prototype.getParent=function(t){var e,i,n,s,o;for(i=null,o=this.stack,n=0,s=o.length;s>n;n++){if(e=o[n],e===t)return i;i=e}return null},e.prototype.getChild=function(t){var e,i,n,s,o;for(i=null,o=this.stack,n=0,s=o.length;s>n;n++){if(e=o[n],i===t)return e;i=e}return null},e.prototype.updateOnPieChanged=function(t){var e,i,n,s,o,r,a,l,h,c;if(i=this.getParent(t),e=this.getChild(t),i&&!t.parentSlice)for(l=i.slices,s=0,r=l.length;r>s;s++)if(n=l[s],n.id===t.id){t.parentSlice=n,i.activeSliceId=n.id;break}if(e&&!e.parentSlice){for(h=t.slices,c=[],o=0,a=h.length;a>o;o++){if(n=h[o],n.id===e.id){e.parentSlice=n,t.activeSliceId=n.id;break}c.push(void 0)}return c}},e.prototype.findPieAt=function(t,e,i){return this.view.findPieAt(t,e,i)},e.prototype.findSliceAt=function(t,e,i){return this.view.findSliceAt(t,e,i)},e.prototype.findLabelAt=function(t,e,i){return this.view.findLabelAt(t,e,i)},e.prototype.getSliceAngles=function(t){var e,i,n,s,o,r,a,l,h;for(s=0,o=t.pie,h=o.allSlices,a=0,l=h.length;l>a&&(r=h[a],n=s,s+=r.currentFraction,r.id!==t.id);a++);return i=o.currentEndAngle-o.currentStartAngle,e=o.currentStartAngle+i*o.scrollOffset,[e+i*n,e+i*s]},e.prototype.getSliceTargetAngles=function(t){var e,i,n,s,o,r,a,l,h;for(s=0,o=t.pie,h=o.allSlices,a=0,l=h.length;l>a&&(r=h[a],n=s,s+=r.currentFraction,r.id!==t.id);a++);return i=o.currentEndAngle-o.currentStartAngle,e=o.currentStartAngle+i*o.scrollOffset,[e+i*n,e+i*s]},e}(Base_Scene);var Base_ChartElement,Base_ChartEvents,Base_ChartPanel,Base_Profiler,Base_SceneEvent,__bind=function(t,e){return function(){return t.apply(e,arguments)}};Base_SceneEvent=function(){function t(){}return t.prototype.time=0,t.prototype.animating=!1,t.prototype.changes={},t}(),Base_ChartPanel=function(){function t(){}return t.styleSettings={side:"top",align:"fill",floating:!1,margin:0,location:"outside"},t.prototype.packingOrder=0,t.prototype.location="outside",t.prototype.side="top",t.prototype.align="fill",t.prototype.floating=!1,t.prototype.desiredWidth=0,t.prototype.desiredHeight=0,t.prototype.margin=0,t.prototype.left=0,t.prototype.top=0,t.prototype.right=0,t.prototype.bottom=0,t.prototype.computeSize=function(){return[this.desiredWidth,this.desiredHeight]},t.prototype.placePanel=function(t,e,i,n){return this.left=t,this.top=e,this.right=i,this.bottom=n,1},t}(),Base_ChartElement=function(){function t(){}return t.prototype.animationOrder=0,t.prototype.remove=function(){return!1},t.prototype.onSceneChange=function(){return!1},t.prototype.getPanels=function(){return[]},t.prototype.doAnimations=function(){return!1},t.prototype.paintScene=function(){return!1},t.prototype.onClick=function(){return!1},t.prototype.onRClick=function(){return!1},t.prototype.onDoubleClick=function(){return!1},t.prototype.onPointerDown=function(){return!1},t.prototype.onPointerUp=function(){return!1},t.prototype.onPointerDrag=function(){return!1},t.prototype.onPointerMove=function(){return!1},t.prototype.onPointerOut=function(){return!1},t.prototype.onPointerCancel=function(){return!1},t.prototype.onWheel=function(){return!1},t.prototype.onKeyDown=function(){return!1},t.prototype.previewWheel=function(){return!1},t.prototype.previewGlobalPointerDown=function(){return!1},t.prototype.previewPointerDown=function(){return!1},t.prototype.previewPointerUp=function(){return!1},t.prototype.previewPointerDrag=function(){return!1},t.prototype.previewPointerMove=function(){return!1},t.prototype.previewPointerOut=function(){return!1},t}(),Base_ChartEvents=function(){"use strict";function t(t,e,i){var n,s,o,r,a;for(this.container=t,this.canvas=e,this.chart=i,this._paintScene=__bind(this._paintScene,this),this.kd=__bind(this.kd,this),this.scene=this.chart.scene,this.settings=this.chart.settings,this.pointerToElement={},this.sceneChanges={},this.paintRequested=null,this.paintNowInProgreess=!1,this.labelRenderer=new Base_LabelRenderer(this,this.settings),this.animationOrder=[],this.updateOrder=[],this.paintOrder=[],this.prevTime=0,this.animationInProgress=!1,this.mouseEvents=new Base_MouseEvents(this.container,this.settings.advanced.pointer,this.chart,this.whiteList),a=this.mouseEventConfig,s=function(t){return function(){var e;
return e=n,t.mouseEvents.listen(e.ev,function(i){return t._notifyMouseEvent(i,e)})}}(this),o=0,r=a.length;r>o;o++)n=a[o],s();this.mouseEvents.listen(Base_MouseEvents.EVENT_KEY,this.kd),this.profiler=new Base_Profiler(this)}return t.prototype.verbose=!1,t.prototype.mouseEventConfig=[{ev:Base_MouseEvents.EVENT_GLOBAL_DOWN,name:"GlobalPointerDown"},{ev:Base_MouseEvents.EVENT_DOWN,name:"PointerDown",captures:!0},{ev:Base_MouseEvents.EVENT_UP,name:"PointerUp",needsCapture:!0,releasesCapture:!0},{ev:Base_MouseEvents.EVENT_DRAG,name:"PointerDrag",needsCapture:!1,captures:!0},{ev:Base_MouseEvents.EVENT_MOVE,name:"PointerMove",captures:!0},{ev:Base_MouseEvents.EVENT_LEAVE,name:"PointerOut"},{ev:Base_MouseEvents.EVENT_CANCEL,name:"PointerCancel",needsCapture:!0},{ev:Base_MouseEvents.EVENT_CLICK,name:"Click"},{ev:Base_MouseEvents.EVENT_RCLICK,name:"RightClick"},{ev:Base_MouseEvents.EVENT_DBLCLICK,name:"DoubleClick"},{ev:Base_MouseEvents.EVENT_WHEEL,name:"Wheel"}],t.prototype.addContainer=function(t){return this.mouseEvents.addContainer(t)},t.prototype.remove=function(){return this.mouseEvents.remove()},t.prototype.setScaling=function(t,e){return this.mouseEvents.scaleX=t,this.mouseEvents.scaleY=e},t.prototype.addElement=function(t){return this.paintOrder.push(t),this.updateOrder.push(t),this.animationOrder.push(t),this.animationOrder.sort(function(t,e){return t.animationOrder-e.animationOrder}),this.paintOrder.sort(function(t,e){return t.paintOrder-e.paintOrder}),this.updateOrder.sort(function(t,e){return t.updateOrder-e.updateOrder}),t},t.prototype.removeElement=function(t){return Base_Helpers.removeFromArray(this.paintOrder,t),Base_Helpers.removeFromArray(this.animationOrder,t),Base_Helpers.removeFromArray(this.updateOrder,t)},t.prototype.notifySceneChanges=function(t){Base_Helpers.hasProperties(t)&&(Base_Helpers.extendDeep(this.sceneChanges,t),this._requestPaint())},t.prototype.clearSceneChanges=function(t){var e,i,n;n=[];for(e in t)i=t[e],n.push(delete this.sceneChanges[e]);return n},t.prototype.kd=function(t){return this._notifyKeyEvent(t,"KeyDown"),this.notifySceneChanges(t.changes)},t.prototype._notifyMouseEvent=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f;if(!this.profiler.mouseEvent(t,e)){for(r=e.name,t.changes={},t.consumed=!1,t.capture=!1,t.noDefault=!1,t.cursor=null,i=null,s=null,o="preview"+r,p=this.updateOrder,h=0,u=p.length;u>h;h++)n=p[h],null!=n[o]&&n[o].call(n,t);if(o="on"+r,a=n=this.pointerToElement[t.identifier],n&&null!=n[o]&&(n[o].call(n,t),(t.consumed||t.capture||e.captures&&e.needsCapture)&&!e.releasesCapture&&(i=n,t.capture=!0,s=t.cursor)),!t.capture&&!e.needsCapture)for(f=this.updateOrder,c=0,d=f.length;d>c;c++)if(n=f[c],null!=n[o]&&n!==a&&(n[o].call(n,t),t.consumed||t.capture)){s=t.cursor,i=n,t.capture=!0;break}return t.target&&t.target.style&&(t.target.style.cursor=s),t.consumed||(t.consumed=t.noDefault),this.verbose&&(l=""+this.chart.constructor.name.toString()+" "+r+": "+t.identifier,i&&(l+=" captured By "+i.constructor.name),console.log(l)),this.pointerToElement[t.identifier]=e.captures?i:null,this.notifySceneChanges(t.changes)}},t.prototype._notifyKeyEvent=function(t,e){var i,n,s,o,r;if(!this.profiler.keyEvent(t,e)){for(t.changes={},t.consumed=!1,t.cursor=null,n="on"+e,r=this.updateOrder,s=0,o=r.length;o>s&&(i=r[s],null==i[n]||(i[n].call(i,t),!t.consumed));s++);return null}},t.prototype._requestPaint=function(){return null===this.paintRequested?this.paintRequested=this.settings.advanced.useAnimationFrame?window.requestAnimationFrame(this._paintScene):window.setTimeout(function(t){return function(){return t._paintScene((new Date).getTime())}}(this),5):void 0},t.prototype.updateSize=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v;for(null==i&&(i=!1),s=this.canvas.getContext("2d"),l=[],v=this.paintOrder,h=0,p=v.length;p>h;h++)o=v[h],o.getPanels&&(l=l.concat(o.getPanels(i)));for(Base_Helpers.sort(l,function(t,e){return t.packingOrder-e.packingOrder}),this.scene.chartHeight=e,this.scene.chartWidth=t,r=new Base_Rect(0,0,t,e),n=new Base_Rect(0,0,t,e),c=l.length-1;c>=0;c+=-1)a=l[c],"external"===a.location&&this._placePanel(a,r,!0,s);for(u=0,f=l.length;f>u;u++)a=l[u],("outside"===a.location||"outsideFill"===a.location)&&this._placePanel(a,n,!1,s);for(d=0,m=l.length;m>d;d++)a=l[d],"inside"!==a.location&&this._placePanelFinal(a,n);for(this.scene.x0=n.x0,this.scene.width=n.x1-n.x0,this.scene.y0=n.y0,this.scene.height=n.y1-n.y0,this.scene.leftMargin=n.x0,this.scene.rightMargin=t-n.x1,this.scene.topMargin=n.y0,this.scene.bottomMargin=e-n.y1,y=0,g=l.length;g>y;y++)a=l[y],"inside"===a.location&&(this._placePanel(a,n,!1,s),this._placePanelFinal(a,n));return r},t.prototype._placePanel=function(t,e,i,n){var s,o,r,a,l,h,c,u;return a=e.x0,c=e.y0,h=e.x1,s=e.y1,l=t.margin,u=t.computeSize(e.x1-e.x0,e.y1-e.y0,n,this.labelRenderer),r=u[0],o=u[1],r+=2*l,o+=2*l,i?"top"===t.side?(s=c,c=s-o,t.floating||(e.y0=c)):"bottom"===t.side?(c=s,s=c+o,t.floating||(e.y1=s)):"left"===t.side?(h=a,a=h-r,t.floating||(e.x0=a)):"right"===t.side&&(a=h,h=a+r,t.floating||(e.x1=h)):"top"===t.side?(s=Math.min(s,c+o),t.floating||(e.y0=s)):"bottom"===t.side?(c=Math.max(c,s-o),t.floating||(e.y1=c)):"left"===t.side?(h=Math.min(h,a+r),t.floating||(e.x0=h)):"right"===t.side&&(a=Math.max(a,h-r),t.floating||(e.x1=a)),t._tempData=[a,h,c,s,r,o]},t.prototype._placePanelFinal=function(t,e){var i,n,s,o,r,a,l,h,c,u;return u=t._tempData,o=u[0],a=u[1],l=u[2],i=u[3],s=u[4],n=u[5],"outside"===t.location&&("top"===t.side||"bottom"===t.side?(o=Math.max(o,e.x0),a=Math.min(a,e.x1)):(l=Math.max(l,e.y0),i=Math.min(i,e.y1))),"left"===t.align?a=Math.min(a,o+s):"right"===t.align?o=Math.max(o,a-s):"top"===t.align?i=Math.min(i,l+n):"bottom"===t.align?l=Math.max(l,i-n):"center"===t.align&&(h=Math.max(0,a-o-s)/2,c=Math.max(0,i-l-n)/2,o+=h,a-=h,l+=c,i-=c),r=t.margin,t.placePanel(o+r,l+r,a-r,i-r)},t.prototype.paintNow=function(t){return null==t&&(t=!1),this.paintNowInProgreess?void this.chart.erorr("painNow called from within paintNow call"):(this.paintNowInProgreess=!0,(null!==this.paintRequested||t)&&(this.settings.advanced.useAnimationFrame?window.cancelRequestAnimationFrame&&cancelAnimationFrame(this.paintRequested):window.clearTimeout(this.paintRequested),this._paintScene(null)),this.paintNowInProgreess=!1)},t.prototype._paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p;if(null==t&&(t=this.prevTime),!this.chart.removed){for(this.paintRequested=null,n=new Base_SceneEvent,n.timeStamp=t,n.changes=this.sceneChanges,n["export"]=!1,n.context=this.canvas.getContext("2d"),n.labelRenderer=this.labelRenderer,this.prevTime&&this.animationInProgress?(n.dtime=n.timeStamp-this.prevTime,n.dtime>1e3&&(n.dtime=1e3),n.dtime<1&&(n.dtime=1)):n.dtime=30,this.prevTime=t,this.sceneChanges={},u=this.updateOrder,o=0,l=u.length;l>o;o++)i=u[o],null!=i.onSceneChange&&i.onSceneChange(n);for(n.changes.bounds&&this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!1),n.context=this.prepareContext(n),d=this.animationOrder,r=0,h=d.length;h>r;r++)e=d[r],null!=e.doAnimations&&e.doAnimations(n);for(p=this.paintOrder,a=0,c=p.length;c>a;a++)e=p[a],null!=e.paintScene&&e.paintScene(n);return this.settings.advanced.labelCache&&(s=this.chart.labelRenderer,this.settings.advanced.logging&&this.labelRenderer.printStats(),this.labelRenderer.nextFrame()),n.animating?(this.animationInProgress=!0,this._requestPaint()):this.animationInProgress=!1,n.changes.position&&this.chart.notifyPositionChange(n),this.finalizeContext(n),this.profiler.paintDone()}},t.prototype.prepareContext=function(t){var e,i,n,s,o,r,a,l,h;return t.changes.bounds&&(o=this.chart.scene,this.settings.advanced.highDPI?(h=Base_Helpers.canvasScaling(),r=h[0],a=h[1],e=r,i=a):(e=1,i=1),this.scaleX=Math.min(e,o.settings.advanced.maxCanvasWidth/o.chartWidth),this.scaleY=Math.min(i,o.settings.advanced.maxCanvasHeight/o.chartHeight),l=Math.round(o.chartWidth*this.scaleX),s=Math.round(o.chartHeight*this.scaleY),this.canvas.width=l,this.canvas.height=s,this.canvas.style.width=""+o.chartWidth+"px",this.canvas.style.height=""+o.chartHeight+"px"),n=this.canvas.getContext("2d"),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,this.canvas.width,this.canvas.height),Base_Graphics.rectStyle(n,this.settings.area.style),n.fillRect(0,0,this.canvas.width,this.canvas.height),n.setTransform(this.scaleX,0,0,this.scaleY,0,0),n},t.prototype.finalizeContext=function(t){var e;return this.settings.area.style.overlayColor?(e=t.context,e.fillStyle=this.settings.area.style.overlayColor,e.setTransform(1,0,0,1,0,0),e.fillRect(0,0,this.canvas.width,this.canvas.height)):void 0},t.prototype.exportToImageGetDimensions=function(){return this.exportBounds=this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!0),this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!1),[this.exportBounds.w(),this.exportBounds.h()]},t.prototype.exportToContext=function(t,e,i,n){var s,o,r,a,l;for(this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!0),e=i=0,t.save(),t.setTransform(n,0,0,n,e-this.exportBounds.x0*n,i-this.exportBounds.y0*n),o=new Base_SceneEvent,o["export"]=!0,o.timeStamp=(new Date).getTime(),o.changes={},o.context=t,o.labelRenderer=this.labelRenderer,l=this.paintOrder,r=0,a=l.length;a>r;r++)s=l[r],null!=s.paintScene&&s.paintScene(o);return this.updateSize(this.scene.chartWidth,this.scene.chartHeight,!1),t.restore()},t}(),Base_Profiler=function(){function t(t){this.events=t,this.playNextEvent=__bind(this.playNextEvent,this),this.record={},this.recording=!1,this.playback=!1,this.eventPlays=!1,this.playbackCallack=null,this.playbackTimeDiff=0,this.playbackIndex=0,this.measureFpsIters=0,this.measureFpsT0=0,this.measureFpsIter=0,this.measureFpsCallback=null}return t.prototype.hasPendingRequests=function(){return this.events.chart.hasPendingRequests()},t.prototype.measureFps=function(t,e){var i,n;return this.measureFpsIters=t,this.measureFpsCallback=e,i=this.events.settings.advanced.useAnimationFrame,i&&(this.events.chart.updateSettings({advanced:{useAnimationFrame:!1}}),n=this.measureFpsCallback,this.measureFpsCallback=function(t){return function(){return t.events.chart.updateSettings({advanced:{useAnimationFrame:!0}}),n?n.apply(window,arguments):void 0}}(this)),this.measureFpsIter=0,this.measureFpsT0=(new Date).getTime(),this.events.notifySceneChanges({animation:!0}),!0},t.prototype.startRecording=function(){return this.record={width:this.events.scene.chartWidth,height:this.events.scene.chartHeight,events:[]},this.recording=!0,this.playback=!1,!0},t.prototype.stopRecording=function(){var t;return this.recording=!1,t=this.record,this.record={},t},t.prototype.startPlayback=function(t,e){var i;return this.playbackCallack=e,(null!=(i=t.events)?i.length:void 0)>0?(this.record=t,this.recording=!1,this.playback=!0,this.playbackIndex=0,this.events.updateSize(this.record.width,this.record.height,!1),this.playbackTimeDiff=(new Date).getTime()-t.events[0].event.timeStamp,setTimeout(this.playNextEvent,100),!0):void 0},t.prototype.stopPlayback=function(){return this.playback=!1,this.record={}},t.prototype.playNextEvent=function(){var t,e,i,n,s,o,r,a,l;if(this.playback){if(e=this.record.events[this.playbackIndex],n=Base_Helpers.clone(e.event),n.target=this.events.container,o=e.type,n.timeStamp+=this.playbackTimeDiff,this.eventPlays=!0,"KeyDown"===o)this.events._notifyKeyEvent(n,o);else{for(t=null,l=this.events.mouseEventConfig,r=0,a=l.length;a>r;r++)if(i=l[r],i.ev===o){t=i;break}this.events._notifyMouseEvent(n,t)}return this.eventPlays=!1,this.playbackIndex+=1,this.playbackIndex<this.record.events.length?(e=this.record.events[this.playbackIndex],s=e.event.timeStamp+this.playbackTimeDiff-(new Date).getTime(),setTimeout(this.playNextEvent,Math.max(0,s))):(this.stopPlayback(),this.playbackCallack?this.playbackCallack():void 0)}},t.prototype.mouseEvent=function(t,e){return this.playback&&!this.eventPlays?!0:this.recording?(t=Base_Helpers.clone(t),delete t.target,this.record.events.push({type:e.ev,event:t}),!1):!1},t.prototype.keyEvent=function(t,e){return this.playback&&!this.eventPlays?!0:this.recording?(t=Base_Helpers.clone(t),delete t.target,this.record.events.push({type:e,event:t}),!1):!1},t.prototype.paintDone=function(){var t,e;if(this.measureFpsIters)return this.measureFpsIter+=1,e=(new Date).getTime()-this.measureFpsT0,this.measureFpsIter>=this.measureFpsIters||e>2e3&&this.measureFpsIter>=5?(t=1e3*this.measureFpsIter/Math.max(.1,e),this.measureFpsCallback(t,this.measureFpsIter,e),this.measureFpsCallback=0,this.measureFpsIters=0):this.events.notifySceneChanges({animation:!0})},t}();var Itemschart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Selection=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.navigator=t.navigator,this.dragPointers={}}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=25,e.prototype.updateOrder=1100,e.prototype.scene=null,e.prototype.events=null,e.prototype.currentObject=null,e.prototype.currentSlice=null,e.prototype.onPointerMove=function(t){return this.updateCurrentObject(t),this.currentObject?(this.updateCursor(t),t.consumed=!0):void 0},e.prototype.onPointerOut=function(t){return this.switchCurrentObject(null,null,t)},e.prototype.onPointerDown=function(t){return this.updateCurrentObject(t),this.currentObject instanceof Itemschart_Node&&(this.updateSelection(t,this.currentObject,!0),this.updateCursor(t),this.scene.settings.interaction.nodesMovable)?(this.setPointerNode(t,this.currentObject),t.consumed=!0):void 0},e.prototype.onPointerUp=function(t){return this.dragPointers[t.identifier]?(this.dragPointers[t.identifier].dragging&&(t.consumed=!0,this.updateLastNode(t,this.dragPointers[t.identifier].node)),this.updateCursor(t),this.setPointerNode(t,null)):void 0},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.onPointerDrag=function(t){var e,i,n,s;return(n=this.dragPointers[t.identifier])?(s=this.scene.fromDisplay(t.x,t.y),e=s[0],i=s[1],n.mouseX=t.x,n.mouseY=t.y,n.dragging=!0,this.dragNodes(n,e,i,this.scene.settings.interaction.selection.lockNodesOnMove),this.updateCursor(t),t.consumed=!0):void 0},e.prototype.onClick=function(t){var e;if(this.scene.xyInChart(t.x,t.y))return this.buildClickEvent(t),e=this.chart.notifyClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.onRightClick=function(t){var e;if(this.scene.xyInChart(t.x,t.y))return this.buildClickEvent(t),this.updateSelection(t,this.currentObject,!1),e=this.chart.notifyRightClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){var e;if(this.scene.xyInChart(t.x,t.y))return this.buildClickEvent(t),e=this.chart.notifyDoubleClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.doAnimations=function(t){var e,i,n,s,o,r,a;o=this.dragPointers,a=[];for(e in o)s=o[e],r=this.scene.fromDisplay(s.mouseX,s.mouseY),i=r[0],n=r[1],this.dragNodes(s,i,n,!1),a.push(t.changes.coordinates=!0);return a},e.prototype.updateSelection=function(t,e,i){if(this.scene.settings.interaction.selection.enabled){if(!t.shiftKey&&!t.ctrlKey&&(!e||!this.scene.settings.interaction.selection.nodesSelectable&&e.isNode||!this.scene.settings.interaction.selection.linksSelectable&&e.isLink))return this.setSelection([],"user");if(e&&t.ctrlKey)return e.selected?this.scene.removeFromSelection(e):this.scene.addToSelection(e),this.notifySelectionChanged("user");if(e&&t.shiftKey||i&&e.selected){if(!this.scene.addToSelection(e))return this.notifySelectionChanged()}else if(e)return this.setSelection([e],"user")}},e.prototype.dragNodes=function(t,e,i,n){var s,o,r,a,l,h;if(s=e+t.x-t.node.x,o=i+t.y-t.node.y,0!==s||0!==o){if(1===Base_Helpers.countProperties(this.dragPointers)&&this.scene.selection.length>0)for(h=this.scene.selection,a=0,l=h.length;l>a;a++)r=h[a],r.isNode&&this.moveNode(r,s,o,n);else this.moveNode(t.node,s,o,n);return this.events.notifySceneChanges({coordinates:!0})}},e.prototype.moveNode=function(t,e,i,n){var s,o,r;return t.x+=e,t.y+=i,n&&(t.userLock=!0),this.scene.settings.interaction.selection.allowMoveNodesOffscreen?void 0:(s=this.scene.getVisibleBounds(),o=1.2*t.renderHwidth/this.scene.zoom,r=1.2*t.renderHheight/this.scene.zoom,t.x=Math.min(Math.max(t.x,s.x0+o),s.x1-o),t.y=Math.min(Math.max(t.y,s.y0+r),s.y1-r))},e.prototype.setPointerNode=function(t,e){var i,n,s,o,r;return i=t.identifier,n=this.dragPointers[i],n&&(n.node.locks-=1,delete this.dragPointers[i]),e?(r=this.scene.fromDisplay(t.x,t.y),s=r[0],o=r[1],this.dragPointers[t.identifier]={x:e.x-s,y:e.y-o,node:e,mouseX:t.x,mouseY:t.y},e.locks+=1):void 0},e.prototype.updateCurrentObject=function(t){var e,i;if(this.scene.xyInChart(t.x,t.y))return i=this.chart.renderer.findObjectAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),e=i?this.scene.findItem(t.x,t.y,i,this.scene.settings.interaction.selection.tolerance):null,this.switchCurrentObject(i,e,t)},e.prototype.updateCursor=function(t){return t.cursor=this.currentObject&&this.currentObject.cursor?this.currentObject.cursor:"default"},e.prototype.switchCurrentObject=function(t,e,i){return t!==this.currentObject||e!==this.currentItem?(i.changes.current=!0,this.scene.setActiveObject(t,e),this.currentObject instanceof Itemschart_Node&&(this.currentObject.locks-=1),this.currentObject=t,this.currentItem=e,this.currentObject instanceof Itemschart_Node&&(this.currentObject.locks+=1),this.chart.notifyHoverChanged(i)):void 0},e.prototype.buildClickEvent=function(t){return t.clickItem=this.currentItem,this.currentObject instanceof Itemschart_Node?(t.clickNode=this.currentObject,this.updateLastNode(t,this.currentObject)):t.clickLink=this.currentObject},e.prototype.updateLastNode=function(t,e){return this.scene.lastClickedNode=e,this.scene.settings.interaction.zooming.autoZoomAfterClick?(this.scene.autoZoomMode=!0,t.changes.zoom=!0):void 0},e.prototype.setSelection=function(t,e){var i;return i=this.scene.setSelection(t),i?this.notifySelectionChanged(e):void 0},e.prototype.notifySelectionChanged=function(){return this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged("api")},e}(Base_ChartElement);var Itemschart_Menu,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Menu=function(t){"use strict";function e(t){var e;this.chart=t,this.container=t.layers.container,this.scene=t.scene,this.events=t.events,this.buttons=[],this.popup=Base_Helpers.createDom("div","DVSL-Menu",null,this.container),e=Base_Helpers.createDom("a","DVSL-Menu-close","X",this.popup),this.popupValue=Base_Helpers.createDom("div","DVSL-Menu-title",null,this.popup),this.detailsDiv=Base_Helpers.createDom("div","DVSL-Menu-details",null,this.popup),this.popupActions=Base_Helpers.createDom("nav",null,null,this.popup),this.buildDetailsPanel(this.detailsDiv),this.buildCloseButton(e),this.popup.style.position="absolute",this.popup.style.display="none"}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=40,e.prototype.updateOrder=2e3,e.prototype.node=null,e.prototype.link=null,e.prototype.contents=null,e.prototype.x=0,e.prototype.y=0,e.prototype.doAnimations=function(){return null!=this.node?null!=this.node&&this.node.removed||null!=this.link&&this.link.removed?this.hideMenu():null!=this.node&&this.node.layer.modifiedNodes.hasOwnProperty(this.node.id)?this.updateMenu():void 0:void 0},e.prototype.previewPointerDown=function(){return this.hideMenu()},e.prototype.previewWheel=function(){return this.hideMenu()},e.prototype.toggleNodeMenu=function(t){return this.node===t?this.hideMenu():this.showNodeMenu(t)},e.prototype.toggleLinkMenu=function(t,e,i){return this.link===i?this.hideMenu():this.showLinkMenu(t,e,i)},e.prototype.showNodeMenu=function(t){return this.scene.settings.nodeMenu.enabled?this.node===t?this.updateMenu():(this.hideMenu(),this.showPopup(t,null)):void 0},e.prototype.showLinkMenu=function(t,e,i){return this.scene.settings.linkMenu.enabled?(this.x=t,this.y=e,this.link===i?this.updateMenu():(this.hideMenu(),this.showPopup(null,i))):void 0},e.prototype.showPopup=function(t,e){this.node=t,this.link=e,this.node&&(this.node.locks+=1),this.buildButtons(),this.contents=null,this.updateMenu(),this.popup.style.display="block",this.updateXY()},e.prototype.hideMenu=function(){return this.node||this.link?(this.node&&(this.node.locks-=1),this.node=null,this.link=null,this.popup.style.display="none",!1):!1},e.prototype.updateMenu=function(){var t,e,i,n,s,o,r;return null!=this.node?(o=this.scene.settings.nodeMenu,s=this.node):(o=this.scene.settings.linkMenu,s=this.link),o.contentsFunction?(n=this.node,i=this.link,t=function(t){return this.node===n&&this.link===i?(this.contents=t,this.popupValue.innerHTML=t):void 0},r=o.contentsFunction.call(this.chart.api,s.data,s,t),e=Base_Helpers.isString(r)?r:null===this.contents?"<small>"+this.scene.settings.localization.loadingLabel+"</small>":this.contents):e=s.label,e!==this.contents&&(this.contents=e,this.popupValue.innerHTML=e),this.updateButtons(),o.showData?(this.details.innerHTML=JSON.stringify(s.data,null,"  "),this.detailsDiv.style.display="block"):this.detailsDiv.style.display="none"},e.prototype.updateXY=function(){var t,e,i,n,s,o,r,a,l,h,c,u;return e=12,null!=this.node?(u=this.scene.toDisplay(this.node.x,this.node.y),i=u[0],o=u[1],r=o-this.node.renderHheight-e,a=o+this.node.renderHheight+e,n=i-this.node.renderHheight-e,s=i+this.node.renderHheight+e):(r=a=o=this.y,n=this.x-e,s=this.x+e),h=this.scene.x0,c=this.scene.x0+this.scene.width,l=this.popup.offsetWidth,t=this.popup.offsetHeight,o=Math.max(Math.min(o,this.scene.y0+this.scene.height-t),this.scene.y0),c>=s+l?i=s:n-l>=h?i=n-l:(i=Math.max(n-l/2,h),o=a),this.popup.style.left=i+"px",this.popup.style.top=o+"px"},e.prototype.buildButtons=function(){var t,e,i,n,s,o,r;if(this.popupActions.innerHTML="",this.buttons=[],null!=this.node){for(o=this.scene.settings.nodeMenu.buttons,r=[],n=0,s=o.length;s>n;n++)e=o[n],"expand"===e?(i=Base_Helpers.createDom("a","DVSL-NC-button-expand",null,this.popupActions),t=this.updateExpandButton):"focus"===e?(i=Base_Helpers.createDom("a","DVSL-NC-button-focus",null,this.popupActions),t=this.updateFocusButton):"lock"===e?(i=Base_Helpers.createDom("a","DVSL-NC-button-lock",null,this.popupActions),t=this.updateLockButton):"hide"===e&&(i=Base_Helpers.createDom("a","DVSL-NC-button-hide",null,this.popupActions),t=this.updateHideButton),i.href="#",r.push(this.buttons.push({e:i,a:t}));return r}},e.prototype.updateButtons=function(){var t,e,i,n;for(n=this.buttons,e=0,i=n.length;i>e;e++)t=n[e],t.a.call(this,t.e)},e.prototype.updateExpandButton=function(t){var e;return!this.node.expanded||this.node.dataLinksFiltered.length>this.node.links.length?(e=this.scene.settings.localization.menu.expand,t.className="DVSL-NC-button-expand",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.expandNode(t.node.id,1),e.preventDefault()}}(this)):(e=this.scene.settings.localization.menu.collapse,t.className="DVSL-NC-button-collapse",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.collapseNode(t.node.id),e.preventDefault()}}(this))},e.prototype.updateFocusButton=function(t){var e;return this.node.focused?(e=this.scene.settings.localization.menu.unfocus,t.className="DVSL-NC-button-unfocus",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.removeFocusNode(t.node.id),e.preventDefault()}}(this)):(e=this.scene.settings.localization.menu.focus,t.className="DVSL-NC-button-focus",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.addFocusNode(t.node.id,-1),e.preventDefault()}}(this))},e.prototype.updateLockButton=function(t){var e;return this.node.userLock?(e=this.scene.settings.localization.menu.fixed,t.className="DVSL-NC-button-lock",t.title=e,t.innerHTML=e,t.onclick=function(e){return function(i){return e.chart.unlockNode(e.node.id),e.updateLockButton(t),i.preventDefault()}}(this)):(e=this.scene.settings.localization.menu.dynaminc,t.className="DVSL-NC-button-unlock",t.title=e,t.innerHTML=e,t.onclick=function(e){return function(i){return e.chart.lockNode(e.node.id),e.updateLockButton(t),i.preventDefault()}}(this))},e.prototype.updateHideButton=function(t){var e;return e=this.scene.settings.localization.menu.hide,t.className="DVSL-NC-button-hide",t.title=e,t.innerHTML=e,t.onclick=function(t){return function(e){return t.chart.hideNode(t.node.id),e.preventDefault()}}(this)},e.prototype.buildCloseButton=function(t){return t.title=this.scene.settings.localization.closeButton,t.href="#",t.onclick=function(t){return function(e){return t.hideMenu(),e.preventDefault()}}(this)},e.prototype.buildDetailsPanel=function(t){var e,i;return e=Base_Helpers.createDom("small",null,"Technical data",t),this.details=i=Base_Helpers.createDom("pre",null,"",t),i.style.display="none",e.onclick=function(){return i.style.display="none"===i.style.display?"block":"none"}},e}(Base_ChartElement);var Itemschart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Scene=function(t){function e(){e.__super__.constructor.call(this),this.centerX=0,this.centerY=0,this.zoom=1,this.selection=[],this.hoverNode=null,this.hoverLink=null,this.hoverItem=null,this.lastClickedNode=null}return __extends(e,t),e.prototype.xyInChart=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height},e.prototype.toDisplay=function(t,e){return[(t-this.centerX)*this.zoom+this.x0+.5*this.width,(e-this.centerY)*this.zoom+this.y0+.5*this.height]},e.prototype.fromDisplay=function(t,e){return[(t-this.x0-.5*this.width)/this.zoom+this.centerX,(e-this.y0-.5*this.height)/this.zoom+this.centerY]},e.prototype.toDisplayTransform=function(){return[this.zoom,this.x0+.5*this.width-this.centerX*this.zoom,this.zoom,this.y0+.5*this.height-this.centerY*this.zoom]},e.prototype.objectRemoved=function(t){return Base_Helpers.removeFromArray(this.selection,t)&&(t.selected=!1),this.hoverNode===t||this.hoverLink===t?this.setActiveObject(null,null):void 0},e.prototype.addToSelection=function(t){return Base_Helpers.arrayContains(this.selection,t)?!1:(this.selection.push(t),t.layer.touchNodeOrLink(t),t.selected=!0,!0)},e.prototype.removeFromSelection=function(t){return Base_Helpers.removeFromArray(this.selection,t)?(t.selected=!1,t.layer.touchNodeOrLink(t),!0):!1},e.prototype.setSelection=function(t){var e,i,n,s,o,r,a;for(s=0,e=!1,i=r=0,a=t.length;a>r;i=++r){for(n=t[i];s<this.selection.length&&this.selection[s]!==n;)o=this.selection[s],o.selected=!1,o.layer.touchNodeOrLink(o),e=!0,s+=1;s<this.selection.length?s+=1:(n.selected=!0,n.layer.touchNodeOrLink(n),e=!0)}for(;s<this.selection.length;)o=this.selection[s],o.selected=!1,o.layer.touchNodeOrLink(o),e=!0,s+=1;return this.selection=t,e},e.prototype.setActiveObject=function(t,e){var i,n,s,o,r,a,l,h;if(null!=this.hoverNode){for(this.hoverNode.layer.touchNode(this.hoverNode),a=this.hoverNode.links,n=0,o=a.length;o>n;n++)i=a[n],i.layer.touchLink(i);this.hoverNode.hovered=!1}if(null!=this.hoverLink&&(this.hoverLink.layer.touchLink(this.hoverLink),this.hoverLink.from.layer.touchNode(this.hoverLink.from),this.hoverLink.to.layer.touchNode(this.hoverLink.to),this.hoverLink.hovered=!1),this.hoverNode=null,this.hoverLink=null,this.hoverItem=e,t instanceof Itemschart_Node){for(this.hoverNode=t,t.hovered=!0,this.hoverNode.layer.touchNode(this.hoverNode),l=this.hoverNode.links,h=[],s=0,r=l.length;r>s;s++)i=l[s],h.push(i.layer.touchLink(i));return h}if(t instanceof Itemschart_Link)return this.hoverLink=t,t.hovered=!0,this.hoverLink.layer.touchLink(this.hoverLink),this.hoverLink.from.layer.touchNode(this.hoverLink.from),this.hoverLink.to.layer.touchNode(this.hoverLink.to);if(null!==t)throw"scene.setActiveObject invalid active object type "+t},e.prototype.getVisibleBounds=function(){var t,e,i,n,s,o;return s=this.fromDisplay(this.x0,this.y0),t=s[0],i=s[1],o=this.fromDisplay(this.x0+this.width,this.y0+this.height),e=o[0],n=o[1],new Base_Rect(t,i,e,n)},e.prototype.findItem=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m;if(!i)return null;for(o=this.hoverItem,f=i.currentItems,c=0,d=f.length;d>c;c++)if(r=f[c],r.data===o&&r.hwidth&&(l=r.curx,h=r.cury,a=r.hwidth,s=r.hheight,t>l-a-n&&l+a+n>t&&e>h-s-n&&h+s+n>e))return r;for(m=i.currentItems,u=0,p=m.length;p>u;u++)if(r=m[u],r.hwidth&&(l=r.curx,h=r.cury,a=r.hwidth,s=r.hheight,t>l-a-n&&l+a+n>t&&e>h-s-n&&h+s+n>e))return r.data;return null},e}(Base_Scene);var Linearchart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Scrolling=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene,this.events=this.chart.events}return __extends(e,t),e.prototype.animationOrder=1e3,e.prototype.chart=null,e.prototype.scene=null,e.prototype.events=null,e.prototype._minDisplayRange=0,e.prototype.currentFrom=0,e.prototype.currentTo=0,e.prototype.pointer1=null,e.prototype.pointer2=null,e.prototype.t1=0,e.prototype.t2=0,e.prototype.x1=0,e.prototype.x2=0,e.prototype.scaleOrigin=null,e.prototype.initialZoom=null,e.prototype.dragStartFrom=null,e.prototype.dragStartTo=null,e.prototype.active=!1,e.prototype.lastScrollingY=0,e.prototype.scrollingActive=!1,e.prototype.scalingActive=!1,e.prototype.scrollingSpeed=null,e.prototype.scrollingDuration=null,e.prototype.from=null,e.prototype.to=null,e.prototype.highlight=null,e.prototype.highlightRemoveWhenDone=!1,e.prototype.xyInArea=function(){return!1},e.prototype.xyToPosition=function(){return 0},e.prototype.onStartDragging=function(){return null},e.prototype.onSnapWhileDragging=function(t,e){return[t,e]},e.prototype.onSnapAfterDragging=function(t,e){return[t,e]},e.prototype.onCancelDragging=function(){return null},e.prototype.onZoomOut=function(t,e,i,n){return null==n&&(n=2),[i-(i-t)*n,i+(e-i)*n,i]},e.prototype.onZoomIn=function(t,e,i,n){return null==n&&(n=.5),[i-(i-t)*n,i+(e-i)*n,i]},e.prototype.onScroll=function(t,e,i){return"<"===i?[2*t-e,t]:[e,2*e-t]},e.prototype.onGoHome=function(t,e){return[t,e,e]},e.prototype.onPositionChanged=function(){return 1},e.prototype.onAnimationDone=function(){return 1},e.prototype.getFrom=function(){return null!=this.panAnimF?this.panAnimF.to:this.currentFrom},e.prototype.getTo=function(){return null!=this.panAnimT?this.panAnimT.to:this.currentTo},e.prototype.onWheel=function(t){var e,i,n,s,o;if(this.currentFrom<this.currentTo&&this.xyInArea(t.x,t.y)&&this.scene.settings.interaction.zooming.wheel&&this.scene.settings.interaction.zooming.enabled)return this.active=!0,n=null!=this.scaleOrigin?this.scaleOrigin:this.scene.xyToPosition(t.x,t.y),e=Math.pow(1+this.scene.settings.interaction.zooming.sensitivity,.004*t.wheely),i=this.getFrom(),o=this.getTo(),i=(i-n)*e+n,o=(o-n)*e+n,s=this.onSnapAfterDragging(i,o,n,!1,!0),s&&(this.goToPosition(s[0],s[1],!0),null!=this.pointer1&&(this.scalingActive=!0)),t.consumed=!0,this.active=!1},e.prototype.onPointerDown=function(t){var e;if(this.currentFrom<this.currentTo&&this.xyInArea(t.x,t.y)&&(this.scene.settings.interaction.scrolling.enabled||this.scene.settings.interaction.zooming.enabled))return e=this.xyToPosition(t.x,t.y),null===this.pointer1?(this.pointer1=t.identifier,this.x1=t.x,this.t1=e,this.scaleOrigin=e,this.onStartDragging(this.getFrom(),this.getTo(),e),this.lastScrollingY=t.y,this.dragStartFrom=this.currentFrom,this.dragStartTo=this.currentTo,this.dragCurFrom=this.currentFrom,this.dragCurTo=this.currentTo,t.consumed=!0,(null!=this.panAnimF||null!=this.panAnimT)&&(this.stopAnimations(),this.scrollingActive=!0),this.scene.anchor=null,this.chart.cancelChartUpdateNotify(),t.noDefault=!0):null===this.pointer2?(this.pointer2=t.identifier,this.x2=t.x,this.t2=e,this.initialZoom=this.currentTo-this.currentFrom,this.scaleOrigin=(this.t1+this.t2)/2,t.consumed=!0):this.scalingActive||this.scrollingActive?t.consumed=!0:void 0
},e.prototype.xyToDragPosition=function(t){var e;return e=this.dragCurFrom+(t-this.scene.x0)/this.scene.width*(this.dragCurTo-this.dragCurFrom)},e.prototype.onPointerDrag=function(t){var e,i,n,s,o,r,a,l;if(n=this.dragCurFrom,o=this.dragCurTo,s=this.xyToDragPosition(t.x,t.y),t.identifier===this.pointer1&&null==this.pointer2)this.scaleOrigin=this.t1,this.x1=t.x,Math.abs(t.dx)>Math.abs(t.dy)?(this.lastScrollingY=t.y,Math.abs(t.dx)>4*Math.abs(t.dy)&&this.scene.settings.interaction.scrolling.enabled&&(this.scrollingActive=!0)):this.scene.settings.interaction.zooming.enabled&&this.scene.settings.interaction.zooming.swipe&&Math.abs(this.lastScrollingY-t.y)>this.scene.settings.interaction.zooming.upDownTreshold&&(this.scalingActive=!0),this.scalingActive&&(this.clearZoomHighlight(),e=Math.pow(1+this.scene.settings.interaction.zooming.sensitivity,-t.dy/this.scene.height),n=(n-this.scaleOrigin)*e+this.scaleOrigin,o=(o-this.scaleOrigin)*e+this.scaleOrigin,t.consumed=!0),this.scrollingActive&&(i=this.t1-s,n+=i,o+=i);else if(t.identifier===this.pointer1&&this.scene.settings.interaction.scrolling.enabled)this.x1=t.x,this.clearZoomHighlight(),r=this.twoPointerDrag(),n=r[0],o=r[1];else{if(t.identifier!==this.pointer2||!this.scene.settings.interaction.scrolling.enabled)return void((this.scalingActive||this.scrollingActive)&&(t.consumed=!0));this.x2=t.x,this.clearZoomHighlight(),a=this.twoPointerDrag(),n=a[0],o=a[1]}return this.dragCurFrom=n,this.dragCurTo=o,l=this.onSnapWhileDragging(n,o,this.scaleOrigin,this.scrollingActive,this.scalingActive),n=l[0],o=l[1],this.goToPositionDragging(n,o),t.consumed=!0},e.prototype.twoPointerDrag=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f;return a=this.scene.settings.interaction.zooming.fingersMaxZoom,this.scaleOrigin=(this.t1+this.t2)/2,s=this.t2-this.t1,o=this.dragCurFrom,d=this.dragCurTo,p=this.xyToDragPosition(this.x1,0),f=this.xyToDragPosition(this.x2,0),this.scene.settings.interaction.scrolling.enabled&&this.scene.settings.interaction.zooming.enabled&&this.scene.settings.interaction.zooming.fingers&&0!==s?(e=(this.t1+this.t2)/2,t=((p+f)/2-this.currentFrom)/(this.currentTo-this.currentFrom),i=(f-p)/(this.currentTo-this.currentFrom),c=s*i>0?s/i:1/0,r=this.initialZoom*a,l=Math.max(this.initialZoom/a,this._minDisplayRange),c=Math.max(l,Math.min(r,c)),o=e-t*c,d=e+(1-t)*c,this.scalingActive=!0,this.scrollingActive=!0):this.scene.settings.interaction.scrolling.enabled&&(h=(this.t1+this.t2)/2,u=(p+f)/2,n=h-u,o+=n,d+=n,this.scrollingActive=!0),[o,d]},e.prototype.onPointerUp=function(t){var e,i,n,s,o,r,a,l,h,c,u;return t.identifier===this.pointer2?(this.pointer2=null,t.consumed=!0,this.scaleOrigin=this.t1):t.identifier===this.pointer1&&null!=this.pointer2?(this.pointer1=this.pointer2,this.pointer2=null,this.t1=this.t2,this.scaleOrigin=this.t1,t.consumed=!0):t.identifier===this.pointer1?(this.pointer1=null,this.active=!0,this.scene.settings.interaction.scrolling.swipePageFlipping&&t.swipeUp&&this.scalingActive&&t.swipeSpeed>this.scene.height/this.scene.settings.interaction.swipeSensitivity?(h=this.onZoomOut(this.dragStartFrom,this.dragStartTo,this.scaleOrigin),s=h[0],a=h[1]):this.scene.settings.interaction.scrolling.swipePageFlipping&&t.swipeDown&&this.scalingActive&&t.swipeSpeed>this.scene.height/this.scene.settings.interaction.swipeSensitivity?(c=this.onZoomIn(this.dragStartFrom,this.dragStartTo,this.scaleOrigin),s=c[0],a=c[1]):(this.scrollingActive||this.scalingActive)&&(this.scrollingActive&&!this.scalingActive&&this.scene.settings.interaction.scrolling.swipePageFlipping&&(t.swipeLeft||t.swipeRight)&&t.swipeSpeed>this.scene.width/this.scene.settings.interaction.swipeSensitivity*.7?(e=t.swipeLeft?"<":">",u=this.onScroll(this.dragStartFrom,this.dragStartTo,e),s=u[0],a=u[1]):(s=this.currentFrom,a=this.currentTo,this.scrollingActive&&!this.scalingActive&&(l=-t.vx,l=l>0?Math.min(l,2*this.scene.width):Math.max(l,2*-this.scene.width),r=1e3*(this.xyToPosition(t.x,t.y)-this.xyToPosition(t.x-l/1e3,t.y)),n=Math.abs(t.vx/this.scene.width)/this.scene.settings.interaction.scrolling.kineticFriction,n=Math.min(n,1),i=n*r/2,this.scrollingSpeed=r,this.scrollingDuration=1e3*n,s+=i,a+=i)),this.scaleOrigin=(s+a)/2),(s||a)&&(o=this.onSnapAfterDragging(s,a,this.scaleOrigin,this.scrollingActive,this.scalingActive),o&&this.goToPosition(o[0],o[1],!0),t.consumed=!0,this.scaleOrigin=null),this.active=!1,this.dragStartFrom=null,this.dragStartTo=null,this.dragStartUnit=null,this.scalingActive=!1,this.scrollingActive=!1):this.scalingActive||this.scrollingActive?t.consumed=!0:void 0},e.prototype.onPointerCancel=function(t){var e;return t.identifier===this.pointer2?(this.pointer2=null,this.scaleOrigin=this.t1):t.identifier===this.pointer1&&null!=this.pointer2?(this.pointer1=this.pointer2,this.t1=this.t2,this.scaleOrigin=this.t1,this.pointer2=null,this.t2=null):t.identifier===this.pointer1?(this.active=!0,e=this.onCancelDragging(this.dragStartFrom,this.dragStartTo),e&&this.goToPosition(e[0],e[1],!1),this.pointer1=null,this.t1=null,this.scaleOrigin=null,this.dragStartFrom=null,this.dragStartTo=null,this.scalingActive=!1,this.scrollingActive=!1,this.active=!1):void 0},e.prototype.onKeyDown=function(t){var e,i,n,s,o,r,a,l,h,c,u,d;return this.active=!0,e=this.getFrom(),r=this.getTo(),r>e?(i=(e+r)/2,o=!1,s=!1,37===t.keyCode?(o=!0,l=this.onScroll(e,r,"<"),e=l[0],r=l[1],i=(e+r)/2):39===t.keyCode?(o=!0,h=this.onScroll(e,r,">"),e=h[0],r=h[1],i=(e+r)/2):36===t.keyCode?(s=!0,o=!0,c=this.onGoHome(e,r),e=c[0],r=c[1],i=c[2]):38===t.keyCode?(a=this.scene.settings.interaction.zooming.keyboardFactor,s=!0,u=this.onZoomOut(e,r,i,a),e=u[0],r=u[1],i=u[2]):40===t.keyCode&&(a=1/this.scene.settings.interaction.zooming.keyboardFactor,s=!0,d=this.onZoomIn(e,r,i,a),e=d[0],r=d[1]),(s||o)&&(n=this.onSnapAfterDragging(e,r,i,o,s),n&&this.goToPosition(n[0],n[1],!0),t.consumed=!0),this.active=!1):void 0},e.prototype.goToPositionDragging=function(t,e){var i,n,s;return s=this.stopAnimations(),i=s[0],n=s[1],this.currentFrom=t,this.currentTo=e,this.clearZoomHighlight(),this.onPositionChanged(t,e)},e.prototype.goToPosition=function(t,e,i){var n,s,o,r,a,l;if(e>t)return this.currentFrom<this.currentTo||(i=!1),l=this.stopAnimations(),o=l[0],r=l[1],i?(this.scrollingDuration>0?(this.panAnimF=new Base_Animator(this.currentFrom,t,this.scrollingDuration,"scroll"),this.panAnimT=new Base_Animator(this.currentTo,e,this.scrollingDuration,"scroll"),this.scrollingDuration=null):o||r?(this.panAnimF=o.retarget(t),this.panAnimT=r.retarget(e)):(this.panAnimF=new Base_Animator(this.currentFrom,t,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.panAnimT=new Base_Animator(this.currentTo,e,this.scene.settings.interaction.animation.scrollDuration,"<>")),n=Math.abs((t-e)/(this.currentFrom-this.currentTo+1)),n<1/this.scene.settings.interaction.zooming.zoomHighlightThreshold?this.setZoomHighlight(t,e,!0):n>this.scene.settings.interaction.zooming.zoomHighlightThreshold&&(s=null!=this.dragStartFrom?this.dragStartFrom:this.currentFrom,a=null!=this.dragStartTo?this.dragStartTo:this.currentTo,this.setZoomHighlight(s,a,!1)),this.events.notifySceneChanges({animation:!0})):(this.currentFrom=t,this.currentTo=e,this.clearZoomHighlight(),this.onPositionChanged(t,e),this.onAnimationDone(t,e))},e.prototype.switchCoordinates=function(t,e){var i,n,s,o;return i=this.getFrom(),n=this.getTo(),n>i?(o=(t-i)/(e-n),s=t-i*o,this.currentFrom=this.currentFrom*o+s,this.currentTo=this.currentTo*o+s,this.panAnimF&&this.panAnimF.switchCoordinates(s,o),this.panAnimT?this.panAnimT.switchCoordinates(s,o):void 0):(this.stopAnimations(),this.currentFrom=t,this.currentTo=e)},e.prototype.doAnimations=function(t){var e,i,n;n=t.timeStamp,(null!=this.panAnimF||this.panAnimT)&&(e=this.currentFrom,i=this.currentTo,null!=this.panAnimF&&(e=this.currentFrom=this.panAnimF.get(n),this.panAnimF.finished(n)&&(this.panAnimF=null)),null!=this.panAnimT&&(i=this.currentTo=this.panAnimT.get(n),this.panAnimT.finished(n)&&(this.panAnimT=null)),null!=this.panAnimF||this.panAnimT?(this.onPositionChanged(e,i),t.animating=!0):(this.stopAnimations(),this.onPositionChanged(e,i),this.onAnimationDone(e,i)))},e.prototype.stopAnimations=function(){var t,e;return t=this.panAnimF,e=this.panAnimT,this.panAnimF=null,this.panAnimT=null,null!=this.highlight&&(this.highlightRemoveWhenDone?this.clearZoomHighlight():(this.highlight.style.fillColor=this.scene.settings.area.style.zoomHighlightInactive.fillColor,this.events.notifySceneChanges({highlight:!0}))),[t,e]},e.prototype.isActive=function(){return this.active||this.panAnimF||this.pointer1},e.prototype.clearZoomHighlight=function(){return null!=this.highlight?(this.scene.removeHighlight("zoomTrace"),this.highlight=null,this.events.notifySceneChanges({highlight:!0})):void 0},e.prototype.setZoomHighlight=function(t,e,i){return this.highlight=this.scene.setHighlight("zoomTrace",t,e,this.scene.settings.area.style.zoomHighlight),this.highlightRemoveWhenDone=i,this.events.notifySceneChanges({highlight:!0})},e}(Base_ChartElement);var Base_TouchMarkers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_TouchMarkers=function(t){"use strict";function e(t){this.scene=t,this.scene.frameCount=0,this.touches={}}return __extends(e,t),e.prototype.animationOrder=0,e.prototype.scene=null,e.prototype.touches={},e.prototype.text=null,e.prototype.fps=0,e.prototype.fpsAveragingPeriod=1e3,e.prototype.prevFrame=null,e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y;if(r="",this.scene.settings.advanced.showFPS&&(this.scene.frameCount+=1,this.prevFrame&&(i=Math.max(t.timeStamp-this.prevFrame,1)/1e3,n=1/i,l=Math.min(1,3*i),this.fps=this.fps*(1-l)+n*l),this.prevFrame=t.timeStamp,r+="FPS:"+Math.round(this.fps)),s=t.context,this.scene.settings.advanced.showTouches){e=0,f=this.touches;for(o in f)if(__hasProp.call(f,o)){for(h=f[o],s.beginPath(),s.moveTo(h.dx,h.dy),m=h.trace,c=0,d=m.length;d>c;c++)a=m[c],s.lineTo(a.x,a.y);h.cancelled?(s.strokeStyle="red",s.fillStyle="red",s.lineWidth=1):h.up?(s.strokeStyle="gray",s.fillStyle="gray",s.lineWidth=3):(s.strokeStyle="rgba(0,139,139,0.5)",s.fillStyle="rgba(0,139,139,0.5)",s.lineWidth=3),s.moveTo(h.x+30,h.y),s.stroke(),s.beginPath(),s.arc(h.x,h.y,30,0,2*Math.PI),s.fill(),h.up||(e+=1)}s.beginPath(),s.fillStyle="black",g=this.touches;for(o in g)if(__hasProp.call(g,o))for(h=g[o],y=h.trace,u=0,p=y.length;p>u;u++)a=y[u],s.rect(a.x-1,a.y-1,2,2);s.fill(),r+=" touches:"+e}return r.length>0?(s.fillStyle="#000",s.textAlign="start",s.textBaseline="middle",s.fillText(r,this.scene.x0+this.scene.width/3,20)):void 0},e.prototype.previewPointerDown=function(t){var e,i,n;n=this.touches;for(e in n)__hasProp.call(n,e)&&(i=n[e],i.up&&delete this.touches[e]);return this.touches[t.identifier]={dx:t.x,dy:t.y,up:!1,cancelled:!1,trace:[]},t.changes.pointers=!0},e.prototype.previewPointerDrag=function(t){var e;return e=this.touches[t.identifier],e.x=t.x,e.y=t.y,e.trace.push({x:e.x,y:e.y}),t.changes.pointers=!0},e.prototype.previewPointerUp=function(t){return this.touches[t.identifier].up=!0,this.previewPointerDrag(t)},e.prototype.previewPointerCancel=function(t){return this.touches[t.identifier].up=!0,this.touches[t.identifier].cancelled=!0,this.previewPointerDrag(t),t.changes.pointers=!0},e}(Base_ChartElement);var Linearchart_Markers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Markers=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=40,e.prototype.updateOrder=800,e.prototype.scene=null,e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g;if(this.scene.markers.length>0&&null!=this.scene.displayUnit){for(h=this.scene.x0,c=h+this.scene.width,u=Math.round(this.scene.y0),s=this.scene.height,p=Math.round(u+s+.5*this.scene.bottomAxisSize),d=Math.round(u+s+this.scene.bottomAxisSize),i=t.context,Base_Graphics.pushClip(i,h,u,this.scene.width,this.scene.height+this.scene.bottomAxisSize),i.textBaseline="middle",e=this.scene.settings.localization.markerDates.timeFormats[this.scene.displayUnit.unit],Base_Graphics.textStyle(i,this.scene.settings.area.style.markerText),g=this.scene.markers,f=0,m=g.length;m>f;f++)o=g[f],l=this.scene.timeToX(o.time),l+200>=h-1&&c+1>=l-200&&(n=Base_Graphics.beginStrokeAndFill(i,o.style),n.moveTo(l,u),n.lineTo(l,d),Base_Graphics.endStrokeAndFill(i,n,o.style),Base_Graphics.textStyle(n,o.style),r=moment(o.time).utc().format(e),a=i.measureText(r).width,l+a>=c?(i.textAlign="end",l-=2):(i.textAlign="start",l+=2),i.fillText(r,l,p));return Base_Graphics.popClip(i)}},e}(Base_ChartElement);var Linearchart_Highlights,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Highlights=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.highlights={}}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=45,e.prototype.updateOrder=700,e.prototype.scene=null,e.prototype.customId=0,e.prototype.animating=!1,e.prototype.highlights={},e.prototype.doAnimations=function(t){var e,i,n,s,o,r,a,l,h,c,u,d;if(t.changes.highlight){e=[],h=this.highlights;for(i in h)n=h[i],n.mode="exiting",n.origin.keepTrack===!1&&(delete this.highlights[i],e.push(n));for(a=0,l=e.length;l>a;a++)n=e[a],this.highlights["__"+this.customId]=n,this.customId+=1;c=this.scene.highlights;for(i in c)s=c[i],null!=this.highlights[i]?(n=this.highlights[i],n.mode=null,n.from=s.from,n.to=s.to,n.style.fillColor!==s.style.fillColor&&s.style.fadeCross>0?(this.animating=!0,n.animator=new Base_Animator(n.style.fillColor,s.style.fillColor,s.style.fadeCross,"=",t.timeStamp)):n.style=Base_Helpers.clone(s.style)):(n={from:s.from,to:s.to,style:Base_Helpers.clone(s.style),origin:s},this.highlights[i]=n,s.style.fadeIn>0&&(this.animating=!0,n.animator=new Base_Animator(Base_Graphics.deriveColor(n.style.fillColor,1,0),n.style.fillColor,n.style.fadeIn,"=",t.timeStamp)));u=this.highlights;for(i in u)n=u[i],"exiting"!==n.mode||n.animator||(s=n.origin,s.style.fadeOut>0?(this.animating=!0,n.animator=new Base_Animator(n.style.fillColor,Base_Graphics.deriveColor(n.style.fillColor,1,0),n.style.fadeOut,"=",t.timeStamp)):delete this.highlights[i])}if(this.animating){o=!1,r=t.timeStamp,d=this.highlights;for(i in d)n=d[i],null!=n.animator&&(n.style.fillColor=n.animator.getColor(r),n.animator.finished(r)?(n.animator=null,"exiting"===n.mode&&delete this.highlights[i]):o=!0);return this.animating=o,t.animating|=o}},e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u;a=this.scene.x0,l=a+this.scene.width,h=Math.round(this.scene.y0),i=this.scene.height,e=t.context,c=this.highlights,u=[];for(r in c)n=c[r],s=Math.max(this.scene.timeToX(n.from),a),o=Math.min(this.scene.timeToX(n.to),l),o>=a&&l>=s&&(Base_Graphics.rectStyle(e,n.style),u.push(e.fillRect(s,h,o-s,i)));return u},e}(Base_ChartElement);var Linearchart_Layers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Layers=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.container=Base_Helpers.createDom("div","DVSL-container"),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="300px",this.background=Base_Helpers.createDom("div","DVSL-background",null,this.container),this.setContainerStyle(this.background),this.backgroundImage=Base_Helpers.createDom("div","DVSL-background-image",null,this.container),this.setContainerStyle(this.backgroundImage),this.timeAxisPanel=Base_Helpers.createDom("div","DVSL-TC-timeAxis",null,this.container),this.setContainerStyle(this.timeAxisPanel),this.canvas=Base_Helpers.createDom("canvas","DVSL-canvas",null,this.container),this.setContainerStyle(this.canvas),this.valueAxisPanel=Base_Helpers.createDom("div","DVSL-valueAxis",null,this.container),this.setContainerStyle(this.valueAxisPanel),this.secondaryValueAxisPanel=Base_Helpers.createDom("div","DVSL-valueAxis",null,this.container),this.setContainerStyle(this.secondaryValueAxisPanel),this.resizerBar=Base_Helpers.createDom("div","DVSL-resizer",null,this.container),this.outerBorder=Base_Helpers.createDom("div","DVSL-border",null,this.container),this.setContainerStyle(this.outerBorder),this.mouseTrackLayer=Base_Helpers.createDom("div",null,null,this.container),this.mouseTrackLayer.tabIndex=0,this.mouseTrackLayer.style.outline="none",this.setContainerStyle(this.mouseTrackLayer),this.updateSettings(this.scene.settings,"init")}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=50,e.prototype.updateOrder=600,e.prototype.chart=null,e.prototype.scene=null,e.prototype.container=null,e.prototype.background=null,e.prototype.backgroundImage=null,e.prototype.canvas=null,e.prototype.valueAxisPanel=null,e.prototype.timeAxisPanel=null,e.prototype.outerBorder=null,e.prototype.mouseTrackLayer=null,e.prototype.curTheme=null,e.prototype.updateSettings=function(t){return Base_Helpers.hasProp(t,"area.style.image")&&(this.backgroundImage.style.backgroundImage=t.area.style.image?"url("+t.area.style.image+")":""),Base_Helpers.hasProp(t,"advanced.themeCSSClass")?(null!=this.curTheme&&Base_Helpers.removeClass(this.container,this.curTheme),this.curTheme=this.scene.settings.advanced.themeCSSClass,Base_Helpers.addClass(this.container,this.curTheme)):void 0},e.prototype.doAnimations=function(t){var e,i;if(t.changes.bounds)return i=this.scene.settings.width,e=this.scene.settings.height,this.scene.chartWidth>10+this.container.clientWidth&&this.container&&""!==this.container.style.display&&(i=this.scene.chartWidth),this.scene.chartHeight>10+this.container.clientHeight&&this.container&&""!==this.container.style.display&&(e=this.scene.chartHeight),i&&(this.container.style.width=""+i+"px"),e&&(this.container.style.height=""+e+"px"),this.background.style.left=""+this.scene.x0+"px",this.background.style.right=""+(this.scene.chartWidth-(this.scene.x0+this.scene.width))+"px",this.backgroundImage.style.left=""+this.scene.x0+"px",this.backgroundImage.style.right=""+(this.scene.chartWidth-(this.scene.x0+this.scene.width))+"px",this.backgroundImage.style.bottom=""+this.scene.bottomMargin+"px",this.valueAxisPanel.style.width=""+this.scene.leftMargin+"px",this.valueAxisPanel.style.bottom=""+this.scene.bottomMargin+"px",this.secondaryValueAxisPanel.style.width=""+this.scene.rightMargin+"px",this.secondaryValueAxisPanel.style.bottom=""+this.scene.bottomMargin+"px",this.timeAxisPanel.style.top=""+(this.scene.y0+this.scene.height)+"px",this.timeAxisPanel.style.left=""+this.scene.x0+"px",this.timeAxisPanel.style.width=""+this.scene.width+"px",this.outerBorder.style.left=""+this.scene.x0+"px",this.outerBorder.style.width=""+this.scene.width+"px",this.resizerBar.style.width=""+this.scene.width+"px",this.resizerBar.style.left=""+this.scene.x0+"px"},e.prototype.setContainerStyle=function(t){return t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px"},e}(Base_ChartElement);var Linearchart_Highlight,Linearchart_Marker,Linearchart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Marker=function(){function t(){}return t.prototype.time=0,t.prototype.label=0,t.prototype.style=null,t}(),Linearchart_Highlight=function(){function t(){}return t.prototype.from=0,t.prototype.to=0,t.prototype.style=null,t}(),Linearchart_Scene=function(t){"use strict";function e(){e.__super__.constructor.call(this),this.highlights={},this.markers=[]}return __extends(e,t),e.prototype.settings=null,e.prototype.bottomAxisSize=0,e.prototype.hoverSeriesItem=null,e.prototype.xyInChart=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height},e.prototype.xyInChartOrBottom=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0&&e<this.y0+this.height+this.bottomAxisSize},e.prototype.xyInBottom=function(t,e){return t>=this.x0&&t<this.x0+this.width&&e>=this.y0+this.height&&e<this.y0+this.height+this.bottomAxisSize},e.prototype.timeToX=function(){throw"Need to implement timeToX"},e.prototype.xToTime=function(){throw"Need to implement xToTime"},e.prototype.setHighlight=function(t,e,i,n){var s;return s=this.highlights[t],null==s&&(s={},this.highlights[t]=s),s.from=e,s.to=i,s.style=n,s},e.prototype.removeHighlight=function(t,e){return null==e&&(e=!1),null!=this.highlights[t]?(this.highlights[t].keepTrack=e,delete this.highlights[t]):void 0},e}(Base_Scene);var Base_KeyShortcuts,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_KeyShortcuts=function(t){function e(t){this.chart=t}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=65,e.prototype.updateOrder=0,e.prototype.onKeyDown=function(t){var e;return this.chart.isFullscreen()&&27===event.keyCode?(this.chart.setFullscreen(!1),t.consumed=!0):8===event.keyCode&&this.chart.back(!0,e="user")?t.consumed=!0:void 0},e}(Base_ChartElement);var Base_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_InfoPopup=function(t){"use strict";function e(t){this.chart=t,this.container=t.layers.container,this.scene=t.scene,this.events=t.events,this.popup=Base_Helpers.createDom("div","DVSL-info-center",null,this.container),Base_Helpers.createDom("em",null,null,this.popup),this.events.addContainer(this.popup),this.popup.style.position="absolute",this.popup.style.display="none",this.contents=null,this.visible=!1,this.x0=null,this.x1=null,this.y=null,this.contentsChanged=!1,this.chart.events.addContainer(this.popup)}return __extends(e,t),e.prototype.hide=function(){return this.visible?(this.visible=!1,this.popup.style.display="none",!0):!1},e.prototype.show=function(t,e,i,n){return this.visible=!0,n?(-1===n.indexOf("<")&&-1===n.indexOf(">")&&(n="<b>"+n+"</b>"),this.popup.style.display="block",n!==this.popup.innerHTML&&(this.popup.innerHTML=n,this.contentsChanged=!0),this.updateXY(t,e,i)):this.popup.style.display="none"},e.prototype.updateContents=function(t){return this.visible?void 0:null===t?this.hide():this.show(this.x0,this.x1,this.y,t)},e.prototype.updateXY=function(t,e,i){var n,s,o,r,a,l;if(this.visible||this.contentsChanged||this.x0!==t||this.x1!==e||this.y!==i)return this.contentsChanged&&(this.contentsChanged=!1,this.width=this.popup.offsetWidth,this.height=this.popup.offsetHeight),this.x0=t,this.x1=e,this.y=i,r=12,n=10,a=this.width,o=this.height,this.scene.x0<=t-a-n?(l=t-a-n,s="DVSL-info-left"):this.scene.x0+this.scene.width>=e+a+n?(l=e+n,s="DVSL-info-right"):(l=(Math.max(t,this.scene.x0)+Math.min(e,this.scene.x0+this.scene.width)-a)/2,s="DVSL-info-center"),i=Math.min(Math.max(this.scene.y0+r,i-o/2),this.scene.y0+this.scene.height-o),this.popupX=l,this.popupY=i,this.popup.style.left=l+"px",this.popup.style.top=i+"px",this.popupClass!==s?(this.popupClass=s,Base_Helpers.setClass(this.popup,s)):void 0},e}(Base_ChartElement);var Piechart_View,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_View=function(t){function e(t){this.chart=t,this.animationOrder=1007}return __extends(e,t),e.prototype.updatePie=function(){return!0},e.prototype.scrollForward=function(){return!0},e.prototype.scrollBackward=function(){return!1},e.prototype.onSceneChange=function(){},e.prototype.doAnimations=function(){},e.prototype.paintScene=function(){},e.prototype.getMovement=function(){return[0,0]},e.prototype.findSliceAt=function(){},e.prototype.findPieAt=function(){},e.prototype.findLabelAt=function(){},e}(Base_ChartElement);var Piechart_Animations;Piechart_Animations=function(){function t(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.prevTime=0,this.radiusAnimator=null,this.innerRadiusAnimator=null}return t.prototype.doAnimations=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X,J;for(d=this.prevTime?Math.min(30,t.timeStamp-this.prevTime):0,M=this.scene.settings.interaction.animation.scrollDuration,f=this.scene.settings.interaction.animation.hoverDuration,P=t.timeStamp,_=[],h=[],S=!1,this.scene.settings.pie.adaptiveRadius?(this.innerRadiusAnimator||(this.innerRadiusAnimator=new Base_Animator(0,this.scene.innerRadius,M,"<>",P),this.radiusAnimator=new Base_Animator(0,this.scene.radius,M,"<>",P)),H=this.radiusAnimator.updateAndGet(this.scene.radius,P),this.scene.currentRadius=H[0],s=H[1],R=this.innerRadiusAnimator.updateAndGet(this.scene.innerRadius,P),this.scene.currentInnerRadius=R[0],o=R[1],S||(S=s||o),t.animating||(t.animating=S)):(this.scene.currentRadius!==this.scene.radius||this.scene.currentInnerRadius!==this.scene.innerRadius)&&(S=!0,this.scene.currentRadius=this.scene.radius,this.scene.currentInnerRadius=this.scene.innerRadius),u=this.scene.currentRadius-this.scene.currentInnerRadius,g=u>0?-this.scene.currentInnerRadius/u:0,Y=this.scene.pies,T=0,A=Y.length;A>T;T++)if(y=Y[T],v=!1,(t.changes.pie||t.changes.bounds)&&(v=!0),w=!1,y.removed===!0&&(y.removed=P+M),y.removed&&(t.animating=!0,w=y.removed<P),w)_.push(y);else{for(y.animatorA0||(v=!0,y.animatorA0=new Base_Animator(y.currentStartAngle,y.startAngle,M,"<>",P),y.animatorA1=new Base_Animator(y.currentEndAngle,y.endAngle,M,"<>",P),y.animatorR0=new Base_Animator(y.currentInnerRadius,y.innerRadius,M,"<>",P),y.animatorR1=new Base_Animator(y.currentRadius,y.radius,M,"<>",P),this.scene.settings.advanced.initialAnimation||(y.animatorA0.jump(y.startAngle),y.animatorA1.jump(y.endAngle),y.animatorR0.jump(y.innerRadius),y.animatorR1.jump(y.radius))),e=y.animatorA0,i=y.animatorA1,b=y.animatorR0,x=y.animatorR1,W=e.updateAndGet(y.startAngle,P),y.currentStartAngle=W[0],s=W[1],V=i.updateAndGet(y.endAngle,P),y.currentEndAngle=V[0],o=V[1],G=x.updateAndGet(y.radius,P),y.currentRadius=G[0],r=G[1],Z=b.updateAndGet(y.innerRadius,P),y.currentInnerRadius=Z[0],a=Z[1],y.currentInnerRadius=Math.min(y.currentInnerRadius,y.currentRadius),v||(v=s||o||r||a),k=[],l=!1,q=y.allSlices,D=0,I=q.length;I>D;D++)C=q[D],C.animatorF||(v=!0,C.animatorF=new Base_Animator(C.currentFraction,C.fraction,M,"<>",P)),X=C.animatorF.updateAndGetFixed(C.fraction,P),C.currentFraction=X[0],n=X[1],l||(l=n),C.removed&&0===C.currentFraction&&k.push(C);if(v||(v=l),k.length>0)for(v=!0,L=0,F=k.length;F>L;L++)C=k[L],Base_Helpers.removeFromArray(y.slices,C),Base_Helpers.removeFromArray(y.allSlices,C),C===y.othersSlice&&(y.othersSlice=null),C===y.previousSlice&&(y.previousSlice=null);for(J=y.allSlices,B=0,O=J.length;O>B;B++)C=J[B],C.animatorLineColor||(v=!0,C.animatorLineColor=new Base_Animator(C.currentLineColor,C.targetLineColor,f,"<>",P),C.animatorFillColor=new Base_Animator(C.currentFillColor,C.targetFillColor,f,"<>",P),C.animatorCutout=new Base_Animator(C.currentCutoutDistance,C.cutoutDistance,f,"<>",P)),m=C.animatorLineColor,p=C.animatorFillColor,c=C.animatorCutout,z=m.updateColorAndGet(C.targetLineColor,P),C.currentLineColor=z[0],s=z[1],U=p.updateColorAndGet(C.targetFillColor,P),C.currentFillColor=U[0],o=U[1],C.userPlaced||(j=c.updateAndGet(C.cutoutDistance,P),C.currentCutoutDistance=j[0],r=j[1]),v||(v=s||o||r);(v||S)&&h.push(y),t.animating||(t.animating=v)}for(N=0,E=_.length;E>N;N++)y=_[N],this.scene.deletePie(y);return this.prevTime=P,h},t}();var Piechart_LabelLayout,Piechart_PieLayout,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_PieLayout=function(){"use strict";function t(t,e){this.chart=t,this.view=e,this.scene=t.scene,this.events=t.events}return t.prototype.placeStack=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M;if(v=this.scene.settings,s=v.pie.depth,d=!1,r=this.scene.height-2*s,r=Math.max(2,r),b=v.pie.x,x=v.pie.y,null===b?b=this.scene.x0+this.scene.width/2:b>=0&&1>=b&&(b=this.scene.x0+this.scene.width*b),null===x?x=this.scene.y0+r/2:x>=0&&1>=x&&(x=this.scene.y0+this.scene.height*x),c=Math.min(r/2,this.scene.width/2),c-=v.pie.outerMargin,m=v.pie.radius,m?1>=m&&(m=c*m):v.labels.enabled&&v.pie.adaptiveRadius?(n=this.computeDesiredRadiusFromLabels(t,e),n=Math.min(c,n),n-=v.labels.connectorLength,n=Math.max(n,c/3),m=n):m=c,h=v.pie.innerRadius,1>h&&(h=m*h),this.scene.stack.length>1&&(l=v.pie.innerRadiusWhenDrilldown,1>l&&(l=m*l),h=Math.max(h,l)),_=v.pie.startAngle,o=v.pie.endAngle,m===h?(u=0,i=0):(u=1/(m-h),i=-h*u),(t.x!==b||t.y!==x||this.scene.radius!==m||this.scene.innerRadius!==h||_!==t.startAngle||o!==t.endAngle)&&(d=!0),this.scene.radius=m,this.scene.innerRadius=h,t.x=b,t.y=x,t.radius=1,t.innerRadius=h*u+i,t.startAngle=_,t.endAngle=o,f=this.scene.stack,p=f.length-1,p>0)for(h-=v.pie.margin,y=p,g=Math.max(0,Math.min(m-h,(h-v.pie.centerMargin)/y)),a=S=k=p-1;S>=0;a=S+=-1)m=h,h-=g,t=f[a],x+=s,t.x=b,t.y=x,t.radius=m*u+i,t.innerRadius=(h+v.pie.margin)*u+i,t.brightness=.8-.8*(y-a-1)/y,t.startAngle=v.pie.startAngle,t.endAngle=v.pie.endAngle;for(P=this.scene.pies,w=0,C=P.length;C>w;w++)t=P[w],t.removed&&t.parentSlice&&(M=this.scene.getSliceTargetAngles(t.parentSlice),t.startAngle=M[0],t.endAngle=M[1]);return d},t.prototype.computeDesiredRadiusFromLabels=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O;for(m=new Piechart_LabelLayout(e,1,0,100,0,100,this.scene.settings.slice.labelStyle,this.scene.settings.labels),f=m.lineHeightC+m.lineHeightM,y=0,w=0,g=0,S=0,d=0,M=t.startAngle,u=t.endAngle,h=u-M,r=t.startAngle+t.scrollOffset*h,P=r,F=t.slices,L=0,A=F.length;A>L;L++)if(C=F[L],k=P,d=Math.min(1,d+C.fraction),P=r+d*h,n=Math.max(k,M),s=Math.min(P,u),!(n>=u||M>=s)&&(o=(n+s)/2,C.label)){for(v="",O=C.label.split(" "),B=0,I=O.length;I>B;B++)T=O[B],T.length>v.length&&(v=T);p=e.measureText(v).width,T=e.measureText(C.label).width,i=f*T*1.2,D=Math.cos(o),D>0?(S+=i,w=Math.max(w,p)):(g+=i,y=Math.max(y,p))}return c=Math.min(this.scene.width,this.scene.height),a=this.scene.width*c,l=Math.max(1,a-2*Math.max(g,S)*1.2),b=Math.sqrt(l/Math.PI),_=Math.max(y,w),x=this.scene.width/2-1.1*_,Math.min(b,x)},t.prototype.placeLabels=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V;for(l=this.scene.settings.labels,x=l.enabled,Y=this.scene.settings.icons.sizeExtent,m=Y[0],f=Y[1],g=this.scene.settings.icons.placement,p=this.scene.settings.icons.autohideWhenTooSmall,this.scene.settings.advanced.iconMinSize&&(m=this.scene.settings.advanced.iconMinSize),C=this.scene.settings.slice.margin,R=t.x,z=t.y,s=this.scene.currentInnerRadius,k=this.scene.currentRadius-s,M=t.currentInnerRadius*k+s,T=t.currentRadius*k+s,u=0,E=t.currentStartAngle,c=t.currentEndAngle,h=c-E,r=t.currentStartAngle+t.scrollOffset*h,S=this.scene.x0-R,B=S+this.scene.width,H=this.scene.y0-z,a=H+this.scene.height,v=new Piechart_LabelLayout(e,T,S,B,H,a,this.scene.settings.slice.insideLabelStyle,this.scene.settings.labels),P=new Piechart_LabelLayout(e,T,S,B,H,a,this.scene.settings.slice.labelStyle,this.scene.settings.labels),w=[],A=[],O=r,W=t.allSlices,U=0,j=W.length;j>U;U++)I=W[U],F=O,u=Math.min(1,u+I.currentFraction),O=r+u*h,i=Math.max(F,E),n=Math.min(O,c),D=M+I.currentCutoutDistance,L=T+I.currentCutoutDistance,i>=c||E>=n?(I.currentLabel=null,I.currentInsideLabel=null,I.currentIcon=null):(o=(i+n)/2,I.removed||t.background?(I.currentLabel=null,I.currentInsideLabel=null):(I.insideLabel&&x?(N=I.insideLabel,I.currentInsideLabel?b=I.currentInsideLabel:(b=I.currentInsideLabel=new Base_Label,b.align="center"),I.currentInsideLabel.text!==N&&(b.text=N,b.measureDone=!1),_=v.fitLabelInSlice(b,D,L,i,n),b.shouldBeVisible="always"===l.insideLabel||_>=l.insideLabelVisibilityFraction,b.shouldBeVisible||I===this.scene.hoverSlice||b.userPlaced||(b.visible=!1)):I.currentInsideLabel=null,N=I.label&&x?I.label:"","append"===l.insideLabel&&I.insideLabel&&x&&!I.currentInsideLabel.userPlaced&&!I.currentInsideLabel.shouldBeVisible&&(N?(R=Math.cos(o),N=R>0?I.insideLabel+", "+N:N+", "+I.insideLabel):N=I.insideLabel),N?(b=null,b=I.currentLabel?I.currentLabel:I.currentLabel=new Base_Label,I.currentLabel.text!==N&&(b.text=N,b.measureDone=!1),b.userPlaced||P.placeOutsideLabelInitial(b,o),b.x>0?(b.align="left",A.push(b)):(b.align="right",w.push(b))):I.currentLabel=null),d=null,!I.icon||t.background&&I.id!==t.activeSliceId||(V=v.fitBoxInSlice(1,1,D,L,i,n),R=V[0],z=V[1],y=V[2],y-=C,(!p||2*y>=m)&&(y=Math.max(Math.min(y,f/2),m/2),d=new Piechart_Icon,d.hwidth=y,d.hheight=y,d.inside=!0,I.iconOffset?(d.x=0,d.y=0,this.applyOffset(d,I.iconOffset,D,L,i,n)):"center"===g?(d.x=0,d.y=0,this.applyOffset(d,[0,0,0,0],D,L,i,n)):(d.x=R,d.y=z))),I.currentIcon=d);
return P.computeOutsideLabelLocations(w,A)},t.prototype.applyOffset=function(t,e,i,n,s,o){var r,a,l,h,c,u;return e.length>=2&&(r=e[0],a=e[1]),e.length>=4?(h=e[2],l=e[3]):(h=0,l=0),u=i+(n-i)*(h+1)/2,c=s+(o-s)*(l+1)/2,r+=Math.cos(c)*u,a+=Math.sin(c)*u,t.x+=r,t.y+=a},t}(),Piechart_LabelLayout=function(t){function e(t,i,n,s,o,r,a,l){this.left=n,this.right=s,this.top=o,this.bottom=r,this.config=l,e.__super__.constructor.call(this,t,a),this.rr=i+l.connectorLength,this.interLabelSpacing=Math.max(l.interLabelSpacing*this.lineHeight,this.margin)}return __extends(e,t),e.prototype.placeOutsideLabelInitial=function(t,e){var i,n,s;return n=this.rr*Math.cos(e),s=this.rr*Math.sin(e),i=1,s<this.top&&(i=Math.min(i,this.top/s)),s>this.bottom&&(i=Math.min(i,this.bottom/s)),n<this.left&&(i=Math.min(i,this.left/n)),n>this.right&&(i=Math.min(i,this.right/n)),t.x=n*i,t.y=s*i},e.prototype.computeOutsideLabelLocations=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F;for(s=this.bottom-this.margin,m=this.top+this.margin,c=this.interLabelSpacing,t.sort(function(t,e){return e.y-t.y}),e.sort(function(t,e){return t.y-e.y}),v=0,S=t.length;S>v;v++)l=t[v],l.originX=l.x;for(_=0,w=e.length;w>_;_++)l=e[_],l.originX=l.x;for(i="wrap"===this.config.placement?[!1]:[!0,!1],F=[],b=0,C=i.length;C>b;b++){for(n=i[b],y=100,r=!1,A=[t,e],x=0,k=A.length;k>x;x++){for(d=A[x],D=0,P=d.length;P>D;D++)l=d[D],l.prop=this.fitLabelOutside(l,n);for(p=s-m,g=[],a=0,L=0,M=d.length;M>L;L++)l=d[L],l.visible&&(o=2*l.hheight+c,p>a+o?(g.push(l),a+=o):(l.visible=l.userPlaced,y=.5));for(h=s,u=m,d===t?u+=a:h-=a,B=0,T=g.length;T>B;B++)l=g[B],d===t?u-=2*l.hheight+c:h+=2*l.hheight+c,!l.userPlaced&&(l.y+l.hheight>h||l.y-l.hheight<u)?(l.y=Math.min(Math.max(l.y,u+l.hheight),h-l.hheight),f=this.fitLabelOutside(l,n),y=Math.min(f,y),r||(r=(null!=(I=l.rows)?I[0][l.rows[0].length-1].row:void 0)>0)):y=Math.min(y,l.prop),d===t?h=l.y-l.hheight-c:u=l.y+l.hheight+c}if(y>=1||!r)break;F.push(void 0)}return F},e.prototype.fitLabelOutside=function(t,e){var i;return null==e&&(e=!1),i=function(i){return function(n){return t.userPlaced?i.getOutsideMaxWidth(t.x,t.y,n,!1):i.placeOutsideMaxWidth(t.originX,t.y,n,e)}}(this),this.fitLabelInRect(t,t.align,t.align,i)},e.prototype.fitLabelInSlice=function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;return o=Math.cos(n),a=Math.cos(s),c=Math.min(o,a),d=Math.max(o,a),u=0>c&&0>d||-c>2*d?"right":c>0&&d>0||d>2*-c?"left":"center",t.userPlaced?(v=t.x,_=t.y):(f=2*e>=i?.5:.5+(i-2*e)/i/4,p=e+(i-e)*f,r=(n+s)/2,h=Math.cos(r),m=Math.sin(r),v=p*h,_=p*m),y=_-this.rayIntersectsSlice(v,_,0,-1,e,i,n,s),l=_+this.rayIntersectsSlice(v,_,0,1,e,i,n,s),g=function(t){return function(o,r){var a,h;return!(i>0)||y>=r||r>=l?[1e-5,1e-5]:(a=t.rayIntersectsSlice(o,r,-1,0,e,i,n,s),h=t.rayIntersectsSlice(o,r,1,0,e,i,n,s),[a,h])}}(this),this.fitLabelInLines(t,v,_,"center",u,g)},e.prototype.placeOutsideMaxWidth=function(t,e,i,n){var s,o,r,a,l,h,c;return c=this.rr,h=e-i/2,r=h+i,h<this.top&&(s=this.top-h,h+=s,r+=s),r>this.bottom&&(s=this.bottom-r,h+=s,r+=s),a=this.left,l=this.right,o=n?c:h>c||-c>r?0:h>0?Math.sqrt(c*c-h*h):0>r?Math.sqrt(c*c-r*r):c,t>0?a=Math.max(o,t):l=Math.min(t,-o),[(a+l)/2,(h+r)/2,1,0,l-a]},e.prototype.getOutsideMaxWidth=function(t,e,i,n){var s,o,r,a,l,h,c;return h=e-i/2,r=h+i,a=this.left,l=this.right,c=this.rr,o=n?c:h>c||-c>r?0:h>0?Math.sqrt(c*c-h*h):0>r?Math.sqrt(c*c-r*r):c,t>0?a=o:l=-o,s=Math.min(Math.abs(t-a),Math.abs(t-l)),[t,e,1,0,2*s]},e.prototype.fitBoxInSlice=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g,y,v,_;return g=.5+(n-i)/n/4,m=i+(n-i)*g,r=(s+o)/2,a=Math.cos(r),y=Math.sin(r),v=m*a,_=m*y,d=t,p=e,l=this.rayIntersectsSlice(v,_,d,p,i,n,s,o),h=this.rayIntersectsSlice(v,_,-d,p,i,n,s,o),c=this.rayIntersectsSlice(v,_,-d,-p,i,n,s,o),u=this.rayIntersectsSlice(v,_,d,-p,i,n,s,o),f=Math.min(l,h,c,u),[v,_,f]},e.prototype.rayIntersectsSlice=function(t,e,i,n,s,o,r,a){var l,h,c;return h=Base_Geometry.rayIntersectsCircle(t,e,i,n,s),h=Math.min(h,Base_Geometry.rayIntersectsCircle(t,e,i,n,o)),l=Math.cos(r),c=Math.sin(r),h=Math.min(h,Base_Geometry.rayIntersectsLine(t,e,i,n,s*l,s*c,o*l,o*c)),l=Math.cos(a),c=Math.sin(a),h=Math.min(h,Base_Geometry.rayIntersectsLine(t,e,i,n,s*l,s*c,o*l,o*c))},e}(Base_LabelLayoutBase);var Piechart_PieRenderer;Piechart_PieRenderer=function(){"use strict";function Piechart_PieRenderer(t){this.chart=t,this.settings=t.settings,this.scene=t.scene,this.events=t.events}return Piechart_PieRenderer.prototype.onSceneChange=function(t){return t.changes.settings?this.buildSeries():void 0},Piechart_PieRenderer.prototype.buildSeries=function(){var c,e,theme;theme=this.settings.pie.theme,c="PieChart_Renderer_"+theme.charAt(0).toUpperCase()+theme.slice(1);try{return eval("this.renderer = new "+c+"(this);")}catch(_error){throw e=_error,"Renderer "+theme+" is not available: "+e}},Piechart_PieRenderer.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l;for(e=t.context,n=t.labelRenderer,i=t["export"]?this.settings.pie.showInnerPiesExport:this.settings.pie.showInnerPies,l=this.scene.pies,o=r=0,a=l.length;a>r;o=++r)s=l[o],(i||!s.background)&&this.paintPie(e,n,s);(Base_Helpers.arrayContains(this.scene.pies,this.scene.hoverPie)||this.scene.settings.advanced.backAlwaysVisible)&&this.paintBackArrow(t)},Piechart_PieRenderer.prototype.paintBackArrow=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p;if(!t["export"]&&this.scene.pies.length>1&&(r=this.scene.settings.getAssetImage(this.scene.settings.advanced.backImage),r&&r.width))return h=this.scene.pies[this.scene.pies.length-1],a=.707106781186547,u=h.x,d=h.y,e=this.settings.pie.depth,d+=(this.scene.pies.length-1)*e,o=r.width/2,s=r.height/2,l=h.innerRadius*a,c=Math.min(o,Math.max(l,o/2))/o,n=Math.min(s,Math.max(l,s/2))/s,p=Math.min(c,n),i=t.context,i.globalAlpha=.5,i.drawImage(r,u-o*p,d-s*p,2*o*p,2*s*p),i.globalAlpha=1},Piechart_PieRenderer.prototype.paintPie=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X,J,Q,K,$,te,ee;if(A=this.settings.slice.margin,z=i.x,j=i.y,r=this.scene.currentInnerRadius,x=this.scene.currentRadius-r,P=Math.max(i.currentInnerRadius*x+r,A/2),M=i.currentRadius*x+r,N=i.currentStartAngle,d=i.currentEndAngle,c=d-N,h=N+i.scrollOffset*c,M>0&&c>0){for(C=P>0?1/P:0,k=1/M,I=A/2*C,F=A/2*k,B=[],K=i.allSlices,W=0,q=K.length;q>W;W++)D=K[W],L=D.currentFraction*c,L>0&&(l=h,h+=L,O=P+D.currentCutoutDistance,E=M+D.currentCutoutDistance,4*F>=L?(b=(l+h)/2,o=L/4,S=b-o,w=b+o):(S=l+F,w=h-F),g=l+I,y=h-I,g>y&&(g=y=(g+y)/2),N>w||S>d||(S=Math.max(S,N),w=Math.min(w,d),g=Math.max(g,N),y=Math.min(y,d),g>y&&(g=y=(g+y)/2),D.renderParams=[O,E,S,w,g,y],D.fillColor_b=D.fillColor,D.lineColor_b=D.lineColor,D.fillColor=D.currentFillColor,D.lineColor=D.currentLineColor,B.push(D)));for(z=i.x,j=i.y,this.renderer.paintPie(t,z,j,P,M,i.currentStartAngle,i.currentEndAngle,i),this.renderer.paintSlices(t,z,j,B),i===this.scene.peek()&&this.renderer.paintExpandableHilights(t,z,j,B),V=0,X=B.length;X>V;V++)D=B[V],D.fillColor=D.fillColor_b,D.lineColor=D.lineColor_b;if(!i.removed){for(Base_Graphics.clearShadow(t),$=i.allSlices,G=0,J=$.length;J>G;G++)D=$[G],D.currentIcon&&(m=this.scene.settings.getAssetImage(D.icon),m&&(f=D.currentIcon,U=z+f.x,Y=j+f.y,R=Math.min(m.width/2,f.hwidth),p=Math.min(m.height/2,f.hheight),t.drawImage(m,U-R,Y-p,2*R,2*p)));for(H=this.settings.labels.textStyle,v=this.settings.labels.insideTextStyle,u=this.settings.labels.backgroundStyle,h=N+i.scrollOffset*c,te=i.allSlices,ee=[],Z=0,Q=te.length;Q>Z;Z++)D=te[Z],L=D.currentFraction*c,l=h,h=l+L,n=Math.max(l,N),s=Math.min(h,d),a=(n+s)/2,_=D===this.scene.hoverSlice,T=M+D.currentCutoutDistance,D.currentInsideLabel&&D.currentInsideLabel.visible&&(D.currentInsideLabel.id=null,this.paintLabel(t,e,z,j,T,a,D.currentInsideLabel,D.insideLabelStyle,_)),D.currentLabel&&D.currentLabel.visible?(D.currentLabel.id=null,ee.push(this.paintLabel(t,e,z,j,T,a,D.currentLabel,D.labelStyle,_))):ee.push(void 0);return ee}}},Piechart_PieRenderer.prototype.paintLabel=function(t,e,i,n,s,o,r,a,l){var h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N;if(b=this.scene.y0+3,c=b+this.scene.height-6,m=this.settings.labels,L=r.x,N=r.y,w=r.hwidth,f=r.hheight,y=s+m.connectorLength,0>L+w?(M=L+w,F=N):L+w>=0?(M=L-w,F=N):(M=L,F=N>0?N-f:N+f),m.connectors&&M*M+F*F>s*s){if(v=Math.sin(o),d=Math.cos(o),t.beginPath(),C=i+s*d,B=n+s*v,t.moveTo(C,B),k=i+y*d,A=n+y*v,A=Math.min(Math.max(A,b),c),M+=i,F+=n,F=Math.min(Math.max(F,b),c),g=(s+y)/2,_=Base_Geometry.rayIntersectsCircle(M-i,F-n,C-M,B-F,s),h=Base_Geometry.lineTouchingCircle(M-i,F-n,k-i,A-n,y),.9>_&&h){for(D=h[0],E=h[1],x=Math.atan2(E,D);x-o>Math.PI;)x-=2*Math.PI;for(;x-o<-Math.PI;)x+=2*Math.PI;p=x-o,D+=i,E+=n,k=i+g*d,A=n+g*v,A=Math.min(Math.max(A,b),c),P=i+g*Math.cos(o+.2*p),I=n+g*Math.sin(o+.2*p),I=Math.min(Math.max(I,b),c),t.quadraticCurveTo(k,A,P,I),T=i+y*Math.cos(x),O=n+y*Math.sin(x),O=Math.min(Math.max(O,b),c),Base_Graphics.arcBetweenTwoPoints(t,i,n,g,P,I,T,O),t.lineTo(M,F)}else t.quadraticCurveTo(k,A,M,F);u=this.settings.slice.connectorStyle,S=u.lineWidth,l&&(u.lineWidth+=2),Base_Graphics.stroke(t,u),u.lineWidth=S}return e.paintWithStyle(t,i+r.x,n+r.y,1,r,a),Base_Graphics.clearShadow(t)},Piechart_PieRenderer}();var Piechart_PieBuilder;Piechart_PieBuilder=function(){"use strict";function t(t){this.chart=t,this.scene=t.scene,this.loading=!1}return t.prototype.updatePie=function(t){var e,i,n,s,o,r,a,l;return e=this.getPieData(t),a=this.getForwardCount(t.id,e,t.offset),n=a[0],r=a[1],t.data=e,t.loading=!r,r&&(l=this.buildSlices(t,t.offset,n),i=l[0],s=l[1],o=l[2],this.applyNewSlices(t,i,s,o)),r},t.prototype.scrollForward=function(t,e){var i,n,s,o,r,a,l,h,c,u;return i=this.getPieData(t),t.data=i,l=!0,null==e&&(h=this.getForwardCount(t.id,i,t.offset),a=h[0],l=h[1],e=t.offset+a),l&&(c=this.getForwardCount(t.id,i,e),a=c[0],l=c[1]),l?(u=this.buildSlices(t,e,a),o=u[0],n=u[1],s=u[2],t.othersSlice&&(r=Math.min(o.length,Math.max(0,t.offset+t.count-e)),this.fitSlicesInOrigin(t.othersSlice,o.slice(r),n),n||(n=t.othersSlice,n.fraction=0,n.currentFraction=0,n.removed=!0)),t.offset=e,this.applyNewSlices(t,o,n,s),t.loading=!1,!0):(t.loading=!0,!1)},t.prototype.scrollBackward=function(t,e){var i,n,s,o,r,a,l,h,c,u;return i=this.getPieData(t),t.data=i,l=!0,null==e&&(h=this.getBackOffset(t.id,i,t.offset),e=h[0],l=h[1]),l&&(c=this.getForwardCount(t.id,i,e),a=c[0],l=c[1]),l?(u=this.buildSlices(t,e,a),o=u[0],n=u[1],s=u[2],t.previousSlice&&(r=Math.min(o.length,Math.max(0,t.offset-e)),this.fitSlicesInOrigin(t.previousSlice,o.slice(0,r),s),s||(s=t.previousSlice,s.fraction=0,s.currentFraction=0,s.removed=!0)),t.offset=e,this.applyNewSlices(t,o,n,s),t.loading=!1,!0):(t.loading=!0,!1)},t.prototype.fitSlicesInOrigin=function(t,e,i){var n,s,o,r,a,l,h,c;for(s=Math.max(1e-6,t.currentFraction),r=0,a=0,h=e.length;h>a;a++)o=e[a],r+=o.fraction;for(i&&(r+=i.fraction),n=s/r,l=0,c=e.length;c>l;l++)o=e[l],o.currentFraction=o.fraction*n,o.currentFillColor=t.currentFillColor,o.currentLineColor=t.currentLineColor;i&&(i.currentFraction=i.fraction*n,i.currentFillColor=t.currentFillColor,i.currentLineColor=t.currentLineColor)},t.prototype.getForwardCount=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;if(!e||e.offset>i||e.offset+e.values.length<=i)return!e||!e.done||e.offset>i?(this.scene.mainData.requestPieData(t,i),[0,!1]):[0,!0];if(o=e.offset,s=o+e.values.length,d=this.scene.settings.interaction.others,!d.enabled)return e.done||this.scene.mainData.requestMorePieData(t),[Math.max(s-i,0),e.done];for(p=e.afterFraction,a=v=i,_=s-1;_>=v;a=v+=1)p+=e.values[a-o].fraction;for(c=d.minSliceFraction,l=d.maxOthersFraction,h=d.maxSlicesVisible,n=0,g=0,r=e.done;s>n+i;)if(n++,y=e.values[i+n-o-1].fraction,g+=y,p-=y,u=p/(p+g),f=Math.min(u,l),m=y/g*(1-f),n>h||c>m){e.done&&n+i!==s&&n--,r=!0;break}return r||this.scene.mainData.requestMorePieData(t),[n,r]},t.prototype.getBackOffset=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b;if(!e||e.offset>=i||!e.done&&e.offset+e.values.length<i)return this.scene.mainData.requestPieData(t,Math.max(0,i-this.scene.mainData.dataSettings.itemsToLoad),this.scene.mainData.dataSettings.itemsToLoad),[0,!1];if(e.done&&i>e.offset+e.values.length&&(i=e.offset+e.values.length),0===i)return[0,!0];for(d=this.scene.settings.interaction.others,o=e.offset,s=o+e.values.length,p=e.afterFraction,a=_=i,b=s-1;b>=_;a=_+=1)p+=e.values[a-o].fraction;for(c=d.minSliceFraction,l=d.maxOthersFraction,h=d.maxSlicesVisible,f=i,y=e.values[i-o-1].fraction,m=0,r=0===e.offset;f>e.offset;)if(f--,n=i-f,v=e.values[f-o].fraction,m+=v,u=Math.min(p/(p+m),l),g=y/m*(1-u),0===f||n>h||c>g){0!==f&&f++,r=!0;break}return r||this.scene.mainData.requestLessPieData(t),[f,r]},t.prototype.buildSlices=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N;if(n=t.data,!n)throw"Internal error";for(b=0,_=[],a=S=e,I=e+i-1;I>=S;a=S+=1)y=new Piechart_Slice(t,a),y.data=n.values[a-n.offset],y.id=y.data.__id,b+=y.data.fraction,_.push(y);for(c=this.scene.settings.interaction.others,h=n.afterFraction,d=n.afterSum,a=w=F=e+i,O=n.offset+n.values.length-1;O>=w;a=w+=1)d+=n.values[a-n.offset].value,h+=n.values[a-n.offset].fraction;if(h>0?(u=new Piechart_Slice(t,1/0),u.data={value:d,fraction:h,name:this.scene.settings.localization.othersLabel}):u=null,g=null,m=0,e>0){for(f=n.beforeSum,a=C=E=n.offset,N=Math.min(e,n.offset+n.values.length)-1;N>=C;a=C+=1)f+=Math.abs(n.values[a-n.offset].value);g=new Piechart_Slice(t,-1),m=c.navigationFraction,g.data={value:f,name:this.scene.settings.localization.previousLabel},g.fraction=m}for(o=(1-m)/(b+h),h*=o,(e>0||h>c.maxOthersFraction)&&(h=Math.min(h,c.navigationFraction)),u&&(u.fraction=h),o=(1-m-h)/b,b=1-m-h,k=0,P=_.length;P>k;k++)v=_[k],v.fraction=v.data.fraction*o;if(l=this.scene.settings.slice.minFraction,l>0)for(p=0;;){for(x=0,r=0,L=0,M=_.length;M>L;L++)v=_[L],v.fraction<=l&&(x+=1,r+=v.fraction);if(x===_.length){for(s=b/_.length,B=0,T=_.length;T>B;B++)v=_[B],v.fraction=s;break}for(o=(b-x*l)/(b-r),A=0,D=_.length;D>A;A++)v=_[A],v.fraction=v.fraction<=l?l:v.fraction*o;if(x===p)break;p=x}return[_,u,g]},t.prototype.applyNewSlices=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m;for(a=t.slices,d=0===a.length,u=[],s=[],o=0,r=0;o<a.length||r<e.length;)l=a[o],h=e[r],null!=l&&null!=h&&l.id===h.id?(l.removed=!1,l.fraction=h.fraction,l.data=h.data,h.currentFraction&&(l.currentFraction=h.currentFraction,l.animatorF=null),u.push(l),s.push(l),o++,r++):!h||l&&l.index<h.index?(l.removed=!0,l.fraction=0,s.push(l),o++):(h.currentFraction||d||(h.currentFraction=0),u.push(h),s.push(h),r++);for(t.total=t.data?t.data.total:0,t.count=e.length,t.slices=u,t.allSlices=s,i?(t.othersSlice?(t.othersSlice.removed=i.removed,t.othersSlice.data=i.data,t.othersSlice.fraction=i.fraction,t.othersSlice.value=i.value,null!=i.currentFraction&&(t.othersSlice.currentFraction=i.currentFraction,t.othersSlice.animatorF=null)):(d||(i.currentFraction=0),t.othersSlice=i),t.allSlices.push(t.othersSlice)):t.othersSlice&&(t.allSlices.push(t.othersSlice),t.othersSlice.removed=!0,t.othersSlice.fraction=0),n?(t.previousSlice?(t.previousSlice.removed=n.removed,t.previousSlice.data=n.data,t.previousSlice.fraction=n.fraction,t.previousSlice.value=n.value,null!=n.currentFraction&&(t.previousSlice.currentFraction=n.currentFraction,t.previousSlice.animatorF=null)):(d||(n.currentFraction=0),t.previousSlice=n),t.allSlices.unshift(t.previousSlice)):t.previousSlice&&(t.previousSlice.removed=!0,t.previousSlice.fraction=0,t.allSlices.unshift(t.previousSlice)),m=t.allSlices,p=0,f=m.length;f>p;p++)c=m[p],c.value=c.data.value;return this.scene.updateOnPieChanged(t)},t.prototype.getPieData=function(t){var e,i,n,s,o,r,a,l,h;if(e=this.scene.mainData.getPieData(t.id),!e)return null;if(i=e.total,i>0)for(l=e.values,s=0,r=l.length;r>s;s++)n=l[s],n.fraction=n.value/i;else for(i=e.values.length,h=e.values,o=0,a=h.length;a>o;o++)n=h[o],n.fraction=1/i;return e.afterFraction=e.afterSum>0?e.afterSum/i:0,e.beforeFraction=e.beforeSum>0?e.beforeSum/i:0,e},t}();var Base_Bar_UserButton,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_UserButton=function(t){function e(t,i){this.chart=t,this.options=i,e.__super__.constructor.call(this,t),this.createButton(i)}return __extends(e,t),e.prototype.onClick=function(t){return this.options.onClick&&this.options.onClick(t,this.chart.api),Base_Helpers.stopPropagation(t)},e}(Base_Bar_Button);var Base_Bar_Dropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_Dropdown=function(t){"use strict";function e(t,i){this.options=i,e.__super__.constructor.call(this,t,i),this.items=[],this.listeners=[]}return __extends(e,t),e.prototype.buildDropdownList=function(){var t,e,i,n;for(this.items=[],this.listeners=[],n=this.options.items,e=0,i=n.length;i>e;e++)t=n[e],Base_Helpers.listen(t.domElement,"click",this.hideDropdown),this.items.push(t.domElement);return this.items},e.prototype.onHideDropdown=function(){var t,e,i,n;for(n=this.items,e=0,i=n.length;i>e;e++)t=n[e],t.parentNode.removeChild(t),Base_Helpers.unlisten(t,"click",this.hideDropdown);return this.items=[],this.listeners=[]},e}(Base_Bar_DropdownBase);var Base_Bar_Combobox,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_Combobox=function(t){"use strict";function e(t,i){this.options=i,e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.prototype.onSelectionChange=function(t){return t},e.prototype.getItems=function(){return[]},e.prototype.buildDropdownList=function(){var t,e,i,n,s,o,r;for(i=[],r=this.getItems(),s=0,o=r.length;o>s;s++)e=r[s],n=Base_Helpers.createDom("li",null,null,null),t=Base_Helpers.createDom("a",null,e.name,n),e.selected&&(t.className="DVSL-bar-dropdown-active"),e.disabled?t.className="DVSL-bar-dropdown-disabled":!function(i){return function(){var n;return n=e,Base_Helpers.listen(t,"click",function(){return i.userSelected(n)})}}(this)(),i.push(n);return i},e.prototype.userSelected=function(t){return this.hideDropdown(),this.setSelectedItem(t),this.onSelectionChange(t)},e.prototype.setSelectedItem=function(t){return this.options.showLabels!==!1?this.p.innerHTML=t.name||"":void 0},e}(Base_Bar_DropdownBase);var Base_Bar_ToggleButton,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_ToggleButton=function(t){function e(t,e){this.chart=t,this.options=e,this.createButton(e),this.curState=!1}return __extends(e,t),e.prototype.onSceneChange=function(){var t;return t=this.options.getChartState(),t!==this.curState&&(this.curState=t,this.a.className=this.curState&&this.options.cssClassEnabled?this.options.cssClassEnabled:this.options.cssClass,this.options.showLabels!==!1)?this.p.innerHTML=this.curState&&this.options.labelEnabled?this.options.labelEnabled:this.options.label:void 0},e.prototype.onClick=function(t){return this.curState?this.options.onDisable():this.options.onEnable(),this.onSceneChange(),Base_Helpers.stopPropagation(t)},e}(Base_Bar_Button);var Netchart_Navigator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Navigator=function(t){function e(t){this.chart=t,this.layer=this.chart.layer,this.graph=this.chart.graph,this.scene=this.chart.scene,this.nodes={},this.lastExpandTime=0,this.nextId=0,this.hasData=!1}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=5,e.prototype.updateOrder=1500,e.settings={mode:"showall",initialNodes:null,focusNodeExpansionRadius:2,focusNodeTailExpansionRadius:.3,focusAutoFadeout:!0,numberOfFocusNodes:3,expandDelay:400,expandOnClick:!0,autoZoomOnFocus:!1,nodeAutoExpandFilter:null},e.prototype.FocusNode=function(){function t(){this.id=null,this.relevance=-1,this.initial=!1,this.stopped=!1,this.hidden=!1,this.expanded=!1,this.collapsed=!1,this.actionId=0}return t}(),e.prototype.otherEnd=Netchart_Data.otherEnd,e.prototype.clear=function(t){return this.chart.events.notifySceneChanges({navigation:!0}),this.nodes={},this.chart.notifyChartUpdate(t)},e.prototype.addAction=function(t,e,i){var n;return this.chart.events.notifySceneChanges({navigation:!0}),n=new this.FocusNode,n.id=t,n.actionId=this.nextId,this.nextId+=1,Base_Helpers.extend(n,e),this.nodes[t]=n,this.chart.notifyChartUpdate(i),n},e.prototype.updateAction=function(t,e,i){var n;return this.chart.events.notifySceneChanges({navigation:!0}),n=this.nodes[t],n.actionId=this.nextId,this.nextId+=1,Base_Helpers.extend(n,e),this.chart.notifyChartUpdate(i),n},e.prototype.hideNode=function(t,e){return this.addAction(t,{hidden:!0},e)},e.prototype.collapseNode=function(t,e){return this.addAction(t,{collapsed:!0,expanded:!1},e)},e.prototype.addFocusNode=function(t,e,i){return this.addAction(t,{relevance:e,initial:!0},i)},e.prototype.expandNode=function(t,e){return this.nodes[t]&&this.nodes[t].initial?this.updateAction(t,{expanded:!0},e):this.addAction(t,{expanded:!0},e)},e.prototype.unexpandNode=function(t,e){return this.nodes[t]?this.updateAction(t,{initial:!1},e):void 0},e.prototype.removeNode=function(t){return delete this.nodes[t]},e.prototype.save=function(){return this.nodes},e.prototype.restore=function(t){var e,i,n;this.nodes={};for(e in t)n=t[e],i=new this.FocusNode,Base_Helpers.extend(i,n),this.nodes[e]=i,this.nextId=Math.max(i.actionId,this.nextId);return this.chart.events.notifySceneChanges({navigation:!0}),this.chart.notifyChartUpdate("restore")},e.prototype.getInitialNodes=function(){var t;return t=this.scene.settings.navigation.initialNodes,Base_Helpers.isString(t)?t=[t]:Base_Helpers.isArray(t)||(t=[]),t},e.prototype.onNewDataObject=function(){var t,e,i,n,s;if(this.hasData=!1,"showall"===this.scene.settings.navigation.mode){if(e=this.getInitialNodes(),0===e.length)return this.scene.loading=this.scene.mainData.requestAllNodes();for(s=[],i=0,n=e.length;n>i;i++)t=e[i],s.push(this.scene.mainData.getNodeData(t));return s}return this.scene.loading=!1},e.prototype.showInitialNodes=function(){var t,e,i,n,s,o,r;if(this.clear(),i=this.scene.settings.navigation,e=this.getInitialNodes(),"focusnodes"===i.mode)for(n=0,o=e.length;o>n;n++)t=e[n],this.addFocusNode(t,-1);else if("manual"===i.mode)for(s=0,r=e.length;r>s;s++)t=e[s],this.addFocusNode(t,1);return this.chart.notifyChartUpdate("init")},e.prototype.commitChanges=function(t){return this.onSceneChange({changes:t})},e.prototype.onSceneChange=function(t){var e,i,n,s,o,r,a,l,h,c;if(t.changes.navigation||t.changes.dataArrived||this.layer.hasTopologyChanges()||t.changes.settings||t.changes.filters||t.changes.data){if(this.scene.settings.navigation.expandDelay&&this.lastExpandTime>t.timeStamp-this.scene.settings.navigation.expandDelay&&!t.changes.filters&&this.hasData&&!this.dataArrived)return void this.chart.events.notifySceneChanges({navigation:!0});if(t.changes.dataArrived&&(this.hasData=!0,this.scene.loading=!1),this.resolveConflicts(),c=this.computeRelevances(),l=c[0],i=c[1],s=c[2],n=c[3],r=c[4],h=l,this.hasData)return e=!0,n&&this.scene.settings.navigation.expandDelay&&(e=!1,this.lastExpandTime=t.timeStamp,this.chart.events.notifySceneChanges({navigation:!0})),t.changes.dataArrived?(a=t.changes.dataNodesIds,o=t.changes.dataLinksIds):(a={},o={}),t.changes.newGraph=this.updateGraph(h,s,a,o),this.applyRelevances(l,i,r),e?this.cleanupInivisibleNodes():void 0}},e.prototype.resolveConflicts=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f;d=this.nodes;for(a in d)if(t=d[a],t.expanded)for(o=this.scene.mainData.getNodeCollectedLinks(a),c=0,u=o.length;u>c;c++)s=o[c],h=this.otherEnd(s,a),l=this.nodes[h],l&&l.actionId<t.actionId&&l.hidden&&delete this.nodes[h];if("focusnodes"===this.scene.settings.navigation.mode){r=this.scene.settings.navigation.numberOfFocusNodes,e=[],p=this.nodes;for(n in p)t=p[n],t.initial&&e.push(t);for(e.sort(function(t,e){return t.actionId-e.actionId}),i=0,f=[];e.length-i>r;)e[i].initial=!1,f.push(i++);return f}},e.prototype.cleanupInivisibleNodes=function(){var t,e,i,n;i=this.nodes,n=[];for(e in i)t=i[e],"focusnodes"!==this.scene.settings.navigation.mode&&this.scene.mainData.isFilteredNode(e)?delete this.nodes[e]:t.initial||t.hidden||this.graph.idToNode.hasOwnProperty(e)?n.push(void 0):delete this.nodes[e];return n},e.prototype.computeRelevances=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E;if(this.changes=!1,p=this.graph.idToNode,o=this.scene.mainData.nodes,w=this.scene.mainData.dataSettings.preloadNodeLinks,u={},c={},h={},y={},k={},a=!!this.scene.settings.navigation.expandDelay&&"focusnodes"===b,l=!1,e=this.scene.settings.navigation.nodeAutoExpandFilter,b=this.scene.settings.navigation.mode,"focusnodes"===b){d=[],I=this.nodes;for(f in I)t=I[f],t.initial&&d.push(t);for(d.sort(function(t,e){return e.actionId-t.actionId}),v=1+parseFloat(this.scene.settings.navigation.focusNodeExpansionRadius),_=1+parseFloat(this.scene.settings.navigation.focusNodeTailExpansionRadius),n=(v-_)/Math.max(1,this.scene.settings.navigation.numberOfFocusNodes-1),i=0,D=0,B=d.length;B>D;D++)t=d[D],f=t.id,P=t.relevance,0>P&&(P=v),P=Math.max(0,P-i),i+=n,u[f]=P,k[f]=!0}else if("manual"===b){d=[],F=this.nodes;for(f in F)t=F[f],d.push(t);d.sort(function(t,e){return e.actionId-t.actionId}),O=this.nodes;for(f in O)t=O[f],t.collapsed||(k[f]=!0,u[f]=t.relevance);!Base_Helpers.hasProperties(k)&&d.length>0&&(k[d[0].id]=!0,u[d[0].id]=1)}else{E=this.scene.mainData.getNodes();for(f in E)s=E[f],k[f]=!0,u[f]=1.01}for(;Base_Helpers.hasProperties(k);){C={};for(f in k){if(T=k[f],M=u[f],t=this.nodes[f]){if(t.hidden){delete u[f];continue}t.expanded&&2>M&&(M=2,u[f]=Math.max(1,u[f])),r=t.expanded||M>1&&!t.collapsed&&!c.hasOwnProperty(f)}else r=M>1;if(this.scene.mainData.getNodeData(f)){if(r&&a&&!p.hasOwnProperty(f)&&(o.hasOwnProperty(f)&&(l=!0),r=!1),!c.hasOwnProperty(f))if(r)for(c[f]=!0,g=this.scene.mainData.getNodeLinks(f),g||(y[f]=!0,g=this.scene.mainData.getNodeCollectedLinks(f)),h[f]=g,S=M-1,L=0,A=g.length;A>L;L++)m=g[L],x=this.otherEnd(m,f),(!u.hasOwnProperty(x)||S>u[x])&&(u[x]=S,C[x]=!0);else w?(g=this.scene.mainData.getNodeLinks(f),g||(y[f]=!0,g=this.scene.mainData.getNodeCollectedLinks(f)),h[f]=g):h[f]=this.scene.mainData.getNodeCollectedLinks(f)}else this.scene.loading=!0,delete u[f]}k=C}return[u,c,h,l,y]},e.prototype.updateGraph=function(t,e,i,n){var s;return s=this.graph.replaceGraph(t,e),this.graph.updateGraphWithNewData(i,n),s},e.prototype.applyRelevances=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v;f=this.scene.mainData.nodes,r="focusnodes"===this.scene.settings.navigation.mode,l=null,h=0;for(p in t)m=t[p],d=this.graph.idToNode[p],d&&(n=this.nodes[p],s=e.hasOwnProperty(p),o=r&&n&&n.initial,a=i.hasOwnProperty(p),(s!==d.expanded||o!==d.focused||d.relevance!==m||d.loading!==a)&&(d.expanded=s,d.focused=o,d.relevance=m,d.loading=a,this.layer.touchNode(d)),o&&(null===l||h<n.actionId)&&(l=d,h=n.actionId));this.scene.lastFocusNode=l,Base_Helpers.hasProperties(i)&&(this.scene.loading=!0),y=this.graph.idToLink,v=[];for(u in y)c=y[u],g=Math.min(c.from.relevance,c.to.relevance),g!==c.relevance?(c.relevance=g,v.push(this.layer.touchLink(c))):v.push(void 0);return v},e}(Base_ChartElement);var Netchart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Scene=function(t){function e(){e.__super__.constructor.call(this),this.autoZoomMode=!1,this.layoutActive=!0,this.lastFocusNode=null}return __extends(e,t),e}(Itemschart_Scene);var Netchart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Scrolling=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.settings=this.scene.settings,this.pointer1=null,this.pointer2=null,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.centerX=0,this.centerY=0,this.centerDistance=1,this.numPointers=0}return __extends(e,t),e.prototype.animationOrder=800,e.prototype.paintOrder=15,e.prototype.updateOrder=1300,e.prototype.onWheel=function(t){var e;if(this.scene.xyInChart(t.x,t.y)&&this.scene.settings.interaction.zooming.wheel)return e=Math.pow(1+this.scene.settings.interaction.zooming.sensitivity,.004*t.wheely),this.chart.autoZoom.manualZoom(e,t.x,t.y),t.consumed=!0,t.changes.position=!0},e.prototype.previewPointerDown=function(){return this.numPointers+=1},e.prototype.previewPointerUp=function(){return this.numPointers-=1},e.prototype.previewPointerCancel=function(){return this.numPointers-=1},e.prototype.onPointerDown=function(t){var e,i,n,s,o,r;if(null===this.pointer1){if(this.pointer1=t.identifier,s=[t.x,t.y],this.x1=s[0],this.y1=s[1],this.settings.interaction.panning.enabled)return t.consumed=!0;if(this.settings.interaction.zooming.fingers)return t.capture=!0}else if(null===this.pointer2&&this.settings.interaction.zooming.fingers)return this.pointer2=t.identifier,o=[t.x,t.y],this.x2=o[0],this.y2=o[1],r=this.scene.fromDisplay((this.x1+this.x2)/2,(this.y1+this.y2)/2),this.centerX=r[0],this.centerY=r[1],e=this.x1-this.x2,i=this.y1-this.y2,n=Math.sqrt(e*e+i*i),this.centerDistance=n/this.scene.zoom,t.consumed=!0},e.prototype.onPointerDrag=function(t){return t.identifier===this.pointer1&&null===this.pointer2?this.settings.interaction.panning.enabled?(this.scene.centerX-=t.dx/this.scene.zoom,this.scene.centerY-=t.dy/this.scene.zoom,this.scene.autoZoomMode=!1,t.changes.position=!0,t.consumed=!0):t.capture=!0:t.identifier===this.pointer1&&this.settings.interaction.zooming.fingers?(this.twoFingerDrag(t.x,t.y,this.x2,this.y2),t.changes.position=!0,t.consumed=!0):t.identifier===this.pointer2&&this.settings.interaction.zooming.fingers?(this.twoFingerDrag(this.x1,this.y1,t.x,t.y),t.changes.position=!0,t.consumed=!0):void 0},e.prototype.onPointerUp=function(t){return this.pointer2===t.identifier?this.pointer2=null:this.pointer1===t.identifier?null!==this.pointer2?(this.pointer1=this.pointer2,this.pointer2=null,this.x1=this.x2,this.y1=this.y2):this.pointer1=null:void 0},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.onDoubleClick=function(t){var e;return e=this.settings.interaction.zooming.doubleClickZoom,e&&this.settings.interaction.zooming.zoomInOnDoubleClick?(this.chart.autoZoom.manualZoom(e,t.x,t.y),t.changes.position=!0,t.consumed=!0):void 0},e.prototype.twoFingerDrag=function(t,e,i,n){var s,o,r,a,l,h,c,u,d;return c=i-t,u=n-e,a=Math.sqrt(c*c+u*u)/this.scene.zoom,s=(i+t)/2,o=(n+e)/2,d=this.scene.fromDisplay(s,o),l=d[0],h=d[1],this.scene.centerX+=this.centerX-l,this.scene.centerY+=this.centerY-h,r=a/this.centerDistance,this.chart.autoZoom.manualZoom(r,s,o),this.x1=t,this.y1=e,this.x2=i,this.y2=n},e}(Base_ChartElement);var Netchart_Renderer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Renderer=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.layer=this.chart.layer,this.events=t.events}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=35,e.prototype.updateOrder=1800,e.prototype.scene=null,e.prototype.events=null,e.prototype.doAnimations=function(t){return this.layer.doAnimations(t)
},e.prototype.paintScene=function(t){return Base_Graphics.pushClip(t.context,this.scene.x0,this.scene.y0,this.scene.width,this.scene.height),this.layer.setBounds(this.scene.x0,this.scene.y0,this.scene.x0+this.scene.width,this.scene.y0+this.scene.height),this.layer.paint(t),Base_Graphics.popClip(t.context)},e.prototype.paintLinks=function(t,e,i,n){return this.layer.paintLinksImpl(t,e,i,n)},e.prototype.paintNodes=function(t,e,i,n){return this.layer.paintNodesImpl(t,e,i,n)},e.prototype.findObjectAt=function(t,e,i){return this.layer.findObjectAt(t,e,i)},e}(Base_ChartElement);var Netchart_Layers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Layers=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.container=Base_Helpers.createDom("div","DVSL-container"),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="100%",this.background=Base_Helpers.createDom("div","DVSL-background",null,this.container),this.setContainerStyle(this.background),this.canvas=Base_Helpers.createDom("canvas","DVSL-canvas",null,this.container),this.setContainerStyle(this.canvas),this.outerBorder=Base_Helpers.createDom("div","DVSL-border",null,this.container),this.setContainerStyle(this.outerBorder),this.resizerBar=Base_Helpers.createDom("div","DVSL-resizer",null,this.container),this.mouseTrackLayer=Base_Helpers.createDom("div",null,null,this.container),this.setContainerStyle(this.mouseTrackLayer),this.updateSettings(this.scene.settings,"init")}return __extends(e,t),e.prototype.animationOrder=900,e.prototype.paintOrder=50,e.prototype.updateOrder=600,e.prototype.scene=null,e.prototype.container=null,e.prototype.background=null,e.prototype.canvas=null,e.prototype.outerBorder=null,e.prototype.mouseTrackLayer=null,e.prototype.updateSettings=function(t){return Base_Helpers.hasProp(t,"advanced.themeCSSClass")?(null!=this.curTheme&&Base_Helpers.removeClass(this.container,this.curTheme),this.curTheme=this.scene.settings.advanced.themeCSSClass,Base_Helpers.addClass(this.container,this.curTheme)):void 0},e.prototype.doAnimations=function(t){var e,i;if(t.changes.bounds)return i=this.scene.settings.width,e=this.scene.settings.height,this.scene.chartWidth>this.scene.settings.container.clientWidth&&(i=this.scene.chartWidth),this.scene.chartHeight>this.scene.settings.container.clientHeight&&(e=this.scene.chartHeight),i&&(this.container.style.width=""+i+"px"),e&&(this.container.style.height=""+e+"px"),this.resizerBar.style.width=""+this.scene.width+"px",this.resizerBar.style.left=""+this.scene.x0+"px"},e.prototype.setContainerStyle=function(t){return t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px"},e}(Base_ChartElement);var Netchart_AutoZoom,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_AutoZoom=function(t){function e(t){this.chart=t,this.scene=t.scene,this.layer=t.layer,this.events=t.events,this.settings=this.scene.settings,this.animatorX=new Base_Animator(0,0,this.settings.interaction.animation.scrollDuration,"="),this.animatorY=new Base_Animator(0,0,this.settings.interaction.animation.scrollDuration,"="),this.animatorZ=new Base_Animator(0,0,this.settings.interaction.animation.scrollDuration,"="),this.numPointers=0,this.resetZoom=!1}return __extends(e,t),e.prototype.animationOrder=700,e.prototype.paintOrder=20,e.prototype.updateOrder=2e3,e.prototype.setZoom=function(t,e){var i,n;return null==e&&(e=!0),n=1+this.scene.settings.interaction.zooming.sensitivity,"auto"===t?(this.scene.autoZoomMode=!0,this.autoZoom(e)):"overview"===t?(this.scene.autoZoomMode="overview",this.autoZoom(e)):("in"===t?i=this.animatorZ.to*n:"out"===t?i=this.animatorZ.to/n:Base_Helpers.isNumber(t)?i=parseFloat(t):(this.chart.error("Invalid zoom value: "+t),i=this.animatorZ.to),this.manualZoom(i/this.scene.zoom,void 0,void 0,e)),this.chart.events.notifySceneChanges({position:!0})},e.prototype.previewPointerDown=function(){return this.numPointers+=1},e.prototype.previewPointerUp=function(){return this.numPointers-=1},e.prototype.previewPointerCancel=function(){return this.numPointers-=1},e.prototype.doAnimations=function(t){var e,i,n,s;return Base_Helpers.hasProp(t,"changes.settingsChanges.interaction.zooming")&&(this.scene.autoZoomMode=this.scene.settings.interaction.zooming.initialAutoZoom),this.resetZoom||t.changes.newGraph?(this.resetZoom=!1,this.setZoom("overview",!1)):0===this.numPointers&&this.layer.nodes().length>0?(this.scene.autoZoomMode&&this.autoZoom(!0)&&(t.changes.position=!0),n=t.timeStamp,e=this.animatorX.get(n),i=this.animatorY.get(n),s=this.animatorZ.get(n),(e!==this.scene.centerX||i!==this.scene.centerY||s!==this.scene.zoom)&&(this.scene.centerX=e,this.scene.centerY=i,this.scene.zoom=s,t.changes.position=!0),this.animatorX.finished(n)&&this.animatorY.finished(n)&&this.animatorZ.finished(n)?void 0:t.animating=!0):(this.animatorX.jump(this.scene.centerX),this.animatorY.jump(this.scene.centerY),this.animatorZ.jump(this.scene.zoom))},e.prototype.autoZoom=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p;return s=!1,p=this.computeAutoZoom("overview"===this.scene.autoZoomMode),o=p[0],r=p[1],u=p[2],i=.01,n=1+i,e=1-i,d=this.animatorZ.to/u,(d>n||e>d)&&(t?this.animatorZ.retargetColor(u):(this.animatorZ.jump(u),this.scene.zoom=u),s=!0),l=this.scene.width,h=(this.animatorX.to-o)*u/l,(h>i||-i>h)&&(t?this.animatorX.retargetColor(o):(this.animatorX.jump(o),this.scene.centerX=o),s=!0),a=this.scene.height,c=(this.animatorY.to-r)*u/a,(c>i||-i>c)&&(t?this.animatorY.retargetColor(r):(this.animatorY.jump(r),this.scene.centerY=r),s=!0),s},e.prototype.getOnscreenBounds=function(t){var e,i,n,s,o,r;return null==t&&(t=1),r=this.scene.width*t,e=this.scene.height*t,i=this.scene.settings.area.paddingLeft,n=this.scene.settings.area.paddingRight,s=this.scene.settings.area.paddingTop,o=this.scene.settings.area.paddingBottom,1>=i&&(i=r*i),n=1>=n?r*(1-n):r-n,1>=s&&(s=e*s),o=1>=o?e*(1-o):e-o,[i,s,n,o]},e.prototype.computeAutoZoom=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D;return M=this.layer.getGraphBounds(),S=M[0],C=M[1],w=M[2],k=M[3],S===w&&C===k&&(S=0,w=1,C=0,k=1),x=this.scene.width*this.scene.settings.interaction.zooming.autoZoomSize,l=this.scene.height*this.scene.settings.interaction.zooming.autoZoomSize,T=this.getOnscreenBounds(this.scene.settings.interaction.zooming.autoZoomSize),y=T[0],_=T[1],v=T[2],b=T[3],P=Math.min((v-y)/(w-S),(b-_)/(k-C)),a=this.scene.settings.interaction.zooming.autoZoomExtent,h=this.scene.lastClickedNode,P=Math.min(a[1],P),t?(c=(S+w)/2-x*(this.scene.settings.area.centerX-.5)/P,u=(C+k)/2-l*(this.scene.settings.area.centerY-.5)/P):(P=Math.max(P,a[0]),h?h.expanded&&h.links.length>1?(D=this.layer.getNodeNeighborsBounds(h),d=D[0],f=D[1],p=D[2],m=D[3],g=Math.min((v-y)/(p-d),(b-_)/(m-f)),c=(d+p)/2,u=(f+m)/2,P=Math.min(g,P)):(c=h.x,u=h.y):(c=this.scene.centerX,u=this.scene.centerY)),i=S-(y-x/2)/P,e=w-(v-x/2)/P,s=C-(_-l/2)/P,n=k-(b-l/2)/P,o=this.scene.centerX,r=this.scene.centerY,t?(o=Math.min(i,Math.max(e,c)),r=Math.min(s,Math.max(n,u))):(e>o&&c>o?o=Math.min(e,c):o>i&&o>c&&(o=Math.max(i,c)),n>r&&u>r?r=Math.min(n,u):r>s&&r>u&&(r=Math.max(s,u))),[o,r,P*this.scene.settings.interaction.zooming.autoZoomSize]},e.prototype.manualZoom=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A;if(null==n&&(n=!1),h=this.settings.interaction.zooming.zoomExtent,D=this.layer.getGraphBounds(),b=D[0],w=D[1],x=D[2],C=D[3],t>1?d=Math.max(this.scene.zoom,Math.min(h[1],this.scene.zoom*t)):1>t?(L=this.getOnscreenBounds(),g=L[0],v=L[1],y=L[2],_=L[3],c=Math.min((y-g)/(x-b),(_-v)/(C-w)),d=Math.min(this.scene.zoom,Math.max(Math.min(h[0],c),this.scene.zoom*t))):d=this.scene.zoom,t=d/this.scene.zoom,void 0!==e&&void 0!==i)B=this.scene.fromDisplay(e,i),f=B[0],m=B[1];else if(this.scene.selection.length>0){for(S=0,k=0,u=0,A=this.scene.selection,M=0,T=A.length;T>M;M++)p=A[M],p.isNode&&(S+=p.x,k+=p.y,u+=1);u>0&&(f=S/u,m=k/u)}return f&&m?(o=(this.scene.centerX-f)/t+f,r=(this.scene.centerY-m)/t+m):(o=f=this.scene.centerX,r=m=this.scene.centerY),P=this.scene.zoom*t,s=this.scene.getVisibleBounds(),(b>f||f>x)&&(a=s.x0>b&&s.x1>x?Math.max(x-s.x1,b-s.x0):s.x1<x&&s.x0<b?Math.min(x-s.x1,b-s.x0):0,o+=a),(w>m||m>C)&&(l=s.y0>w&&s.y1>C?Math.max(C-s.y1,w-s.y0):s.y1<C&&s.y0<b?Math.min(C-s.y1,w-s.y0):0,r+=l),n&&P!==this.scene.zoom?this.animatorZ.retargetColor(P):(this.animatorZ.jump(P),this.scene.zoom=P),!n||o===this.scene.centerX&&r===this.scene.centerY?(this.scene.centerX=o,this.scene.centerY=r,this.animatorX.jump(o),this.animatorY.jump(r)):(this.animatorX.retargetColor(o),this.animatorY.retargetColor(r)),this.scene.autoZoomMode=!1},e}(Base_ChartElement);var Base_Export;Base_Export=function(){function t(){}return t.exportToImage=function(e,i,n,s){var o,r,a,l,h,c,u,d,p,f;return null==i&&(i="png"),void 0===s&&(s="png"===i),d={png:"image/png",jpeg:"image/jpeg"},u=d[i],f=t.exportToImageGetDimensions(e,n),a=f[0],r=f[1],p=f[2],h=f[3],l=f[4],o=document.createElement("canvas"),o.width=a,o.height=r,c=o.getContext("2d"),s||(c.fillStyle="#fff",c.fillRect(0,0,o.width,o.height)),e.events.exportToContext(c,(a-h*p)/2,(r-l*p)/2,p),o.toDataURL(u)},t.exportToPdf=function(e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y;return m=e.events.exportToImageGetDimensions(),d=[10,10,10,10],s=[],f=p=0,l=o=0,a=72,g=1,y=h=0,m[0]>=m[1]?(s=[297,210],c="l"):(s=[210,297],c="p"),f=s[0]/25.4*a,p=s[1]/25.4*a,g=Math.min(p/m[1],f/m[0]),"l"===c?(y=m[0]*g/f*s[0]-d[1]-d[3],l=(s[0]-y-d[1]-d[3])/2,h=m[1]/m[0]*y,o=(s[1]-d[0]-d[2]-h)/2):(h=m[1]*g/p*s[1]-d[0]-d[2],o=(s[1]-h-d[0]-d[2])/2,y=m[0]/m[1]*h,l=(s[0]-d[1]-d[3]-y)/2),u=t.exportToImage(e,"jpeg",{scaling:3*g},n),r=new jsPDF(c,"mm","a4"),r.addImage(u,"JPEG",d[3]+l,d[0]+o,y,h),r.output("datauristring")},t.exportAndStartDownload=function(e,i,n,s){var o,r,a,l,h;return null==i&&(i="png"),null==n&&(n={}),a={png:"image/png",jpeg:"image/jpeg",csv:"text/csv",xls:"application/vnd.ms-excel"},r=a[i],("csv"===i||"xls"===i)&&(h=JSON.stringify(e.exportVisibleData()),this.proxyExport(e,r,h,"json",{})),"png"===i||"jpeg"===i?(l=t.exportToImage(e,i,n,s),this.proxyExport(e,r,l,"base64",n)):"pdf"!==i?e.error("Unrecognized export type: "+i):(o=function(i){return function(){var o;return o=t.exportToPdf(e,n,s),i.proxyExport(e,"application/pdf",o,"base64",{})}}(this),e.assetsLoader.load(e.settings.advanced.pdfExportAssets,o)?void 0:o())},t.exportToImageGetDimensions=function(t,e){var i,n,s,o,r,a,l;if(l=t.events.exportToImageGetDimensions(),n=l[0],i=l[1],a=parseFloat(e.width),s=parseFloat(e.height),a>0&&s>0?r=Math.min(a/n,s/i):a>0?(r=a/n,s=i*r):s>0?(r=s/i,a=n*r):(r=e.scaling>0?parseFloat(e.scaling):1,r*=Math.max(t.events.scaleX,t.events.scaleY),a=n*r,s=i*r),"mm"===e.unit){if(!(e.dpi>0&&e.width>0&&e.height>0))throw"Invalid export configuration. If unit = mm, dpi, width and height must be supplied";o=parseFloat(e.dpi)/25.4,r*=o,a*=o,s*=o}return[a,s,r,n,i]},t.proxyExport=function(t,e,i,n,s){var o,r,a,l,h,c,u;return a=Base_Helpers.createDom("form"),a.setAttribute("action",t.settings.advanced.exportProxyURL),a.setAttribute("method","POST"),a.setAttribute("style","display:none"),l=Base_Helpers.createDom("input",null,null,a),l.setAttribute("type","hidden"),l.setAttribute("name","type"),l.setAttribute("value",e),h=Base_Helpers.createDom("input",null,null,a),h.setAttribute("type","hidden"),h.setAttribute("name","encoding"),h.setAttribute("value",n),c=Base_Helpers.createDom("input",null,null,a),c.setAttribute("type","hidden"),c.setAttribute("name","data"),c.setAttribute("value",i),r=parseInt(s.dpi),r>0&&(u=Base_Helpers.createDom("input",null,null,a),u.setAttribute("type","hidden"),u.setAttribute("name","setdpi"),u.setAttribute("value",r)),o=document.getElementsByTagName("body")[0],o.appendChild(a),a.submit(),o.removeChild(a)},t}();var Timechart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Scrolling=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t),this.s=new Timechart_TimeSetup(this.scene.settings)}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=10,e.prototype.updateOrder=1400,e.settings={limitMode:"snapBack",limitFrom:"oldestData",limitTo:"newestData",overscrollProportion:0},e.prototype.animationUnit=null,e.prototype.targetUnit=null,e.prototype.dragStartBar0=null,e.prototype.dragStartBar1=null,e.prototype.dragStartUnit=null,e.prototype.setTimeRangeSnap=function(t,e,i,n,s,o,r,a){var l,h,c,u;return u=this.snap(t,e,i,n,r,a),t=u[0],e=u[1],c=u[2],h=u[3],l=u[4],this.setTimeRange(t,e,c,s,o,l,h)},e.prototype.computeDisplayPeriod=function(t,e,i,n,s){var o,r,a,l;return l=this.s.tryComputeDisplayPeriod(t,e,i,n,s,this.scene,this.scene.getCurTime()),o=l[0],r=l[1],a=l[2],null===o||null===r?[null,null,null]:this.computeTimeRangeExtend(o,r,a)},e.prototype.computeTimeRangeExtend=function(t,e,i){var n;return null==i&&(i=this.s.computeDisplayUnit(this.scene.timeStart,this.scene.timeEnd,this.scene.displayUnit,t,e,this.scene)),t=i.roundTimeDown(t),e=i.roundTimeUp(e),e===t&&(e=i.add(e,1)),n=this._preventOverscroll(t,e,i,!0),t=n[0],e=n[1],[t,e,i]},e.prototype.computeDisplayUnit=function(t,e){var i,n,s;return n=null!==this.dragStartFrom?this.dragStartFrom:this.scene.timeStart,i=null!==this.dragStartTo?this.dragStartTo:this.scene.timeEnd,s=this.dragStartUnit?this.dragStartUnit:this.scene.displayUnit,this.s.computeDisplayUnit(n,i,s,t,e,this.scene)},e.prototype.setTimeRange=function(t,e,i,n,s,o,r){return null==o&&(o=null),null==r&&(r=null),e>t||i?(t=Math.round(t),e=Math.round(e),null==i&&e>t&&(i=this.computeDisplayUnit(t,e)),t===this.getFrom()&&e===this.getTo()&&i.isEqual(this.scene.displayUnit)||(this.scene.anchor=o,this.scene.period=r,this.targetUnit=i,this.animationUnit=null==i||this.scene.displayUnit&&i.toString()!==this.scene.displayUnit.toString()?null:i,this.goToPosition(t,e,n),this.events.notifySceneChanges({time:!0}),!s)?void 0:this.chart.notifyTimeChanged(t,e,i,s)):void 0},e.prototype.zoomOut=function(t,e,i,n,s){var o,r;return o=(e+i)/2,r=this.computeZoomOut(e,i,t),e=r[0],i=r[1],this.setTimeRangeSnap(e,i,o,null,n,s,!1,!0)},e.prototype.zoomIn=function(t,e,i,n,s,o){var r;return null===e&&(e=(i+n)/2),r=this.onZoomIn(i,n,e,.5),i=r[0],n=r[1],this.setTimeRangeSnap(i,n,e,t,s,o,!1,!0)},e.prototype.xyInArea=function(t,e){return this.scene.xyInChart(t,e)},e.prototype.xyToPosition=function(t){return this.scene.xToTime(t)},e.prototype.onZoomOut=function(t,i,n,s){return null==s&&(s=null),s?e.__super__.onZoomOut.call(this,t,i,n,s):this.computeZoomOut(t,i,null)},e.prototype.onZoomIn=function(t,i,n,s){var o;return null==s&&(s=null),s?e.__super__.onZoomIn.call(this,t,i,n,s):(this.dragStartBar0&&(t=this.dragStartBar0,i=this.dragStartBar1,i-t>this.scene.timeEnd-this.scene.timeStart&&(o=this.scene.getClickBar(n),t=o[0],i=o[1])),[t,i])},e.prototype.onScroll=function(t,e,i){return this.s.scroll(t,e,this.scene.displayUnit,i,1,"page")},e.prototype.onGoHome=function(t,e){var i,n;return i=this.scene.getDisplayLimits()[1],null===i?[t,e]:(this.scene.anchor="newestData",n=e-t,[i-n,i,i])},e.prototype.onStartDragging=function(t,e,i){var n;return this.animationUnit=null,this.scene.anchor=null,this.dragStartUnit=this.scene.displayUnit,n=this.scene.getClickBar(i),this.dragStartBar0=n[0],this.dragStartBar1=n[1],n},e.prototype.onSnapWhileDragging=function(t,e,i){var n,s,o;return this._minDisplayRange=this.scene.settings.area._minDisplayRange,s=this._preventOverscale(t,e,null,i,!1),t=s[0],e=s[1],n=this.computeDisplayUnit(t,e),o=this._preventOverscroll(t,e,n,!1),t=o[0],e=o[1],this.events.notifySceneChanges({time:!0}),[t,e]},e.prototype.onSnapAfterDragging=function(t,e,i,n,s){var o,r,a,l,h,c;return l=this.snap(t,e,i,a,n,s),t=l[0],e=l[1],a=l[2],r=l[3],o=l[4],this.targetUnit=a,this.animationUnit=!s||a&&this.scene.displayUnit.isEqual(a)?this.scene.displayUnit:null,this.scene.period=r,this.scene.anchor=o,h=[null,null],this.dragStartBar0=h[0],this.dragStartBar1=h[1],c=[null,null,null],this.dragStartFrom=c[0],this.dragStartTo=c[1],this.dragStartUnit=c[2],this.events.notifySceneChanges({time:!0}),this.chart.notifyTimeChanged(t,e,a,"user"),[t,e]},e.prototype.onPositionChanged=function(t,e){var i;return i=null!=this.animationUnit?this.animationUnit:this.computeDisplayUnit(t,e),this.scene.setTimeRange(t,e,i),this.events.notifySceneChanges({time:!0})},e.prototype.onAnimationDone=function(t,e){var i;return this.targetUnit&&(i=null!=this.targetUnit?this.targetUnit:this.computeDisplayUnit(t,e),this.scene.setTimeRange(t,e,i)),this.targetUnit=null,this.animationUnit=null,this.chart.notifyAnimationDone()},e.prototype.computeZoomOut=function(t,e,i){var n;return null==i&&(n=this.s.getBiggerDisplayPeriod(this.scene.timeStart,this.scene.timeEnd),null!=n&&(i=n.displayPeriod)),null==i?[t,e]:(t=i.roundTimeDown(t),e=i.roundTimeUp(e),[t,e])},e.prototype.snap=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k;return null==n&&(n=null),null!=this.scene.settings.interaction.scrolling.limitMode&&o&&o&&(S=this._preventOverscale(t,e,n,i,!0),t=S[0],e=S[1]),x=n?n:o?this.computeDisplayUnit(t,e):this.scene.displayUnit,(s||o)&&(h=e-t,w=this._preventOverscroll(t,e,x,!1),t=w[0],e=w[1],C=this._preventOverscroll(t,e,x,!0),t=C[0],e=C[1],o||(o=e-t!==h)),!n&&o?(x=this.computeDisplayUnit(t,e),this.snap(t,e,i,x,s,o)):(u=t,b=e,f=o?null:this.scene.period,r=this.scene.anchor,g=this.scene.settings.interaction.snapMode,g?(d="y"===this.scene.majorTimeUnit.unit,"displayUnit"===g?y=x:("multiperiod"===g||"period"===g)&&(m=e-t,k=this.scene.getDisplayLimits(),a=k[0],l=k[1],null!=a&&(m=Math.min(m,l-a)),v=this.s.getClosestDisplayPeriod(m,this.scene.majorTimeUnit,"multiperiod"===g||d),null!=v.displayUnit&&(x=v.displayUnit),y=v.displayPeriod,f=v.displayPeriod,r=v.displayAnchor||r),"period"!==g||d?o?(t=y.roundTimeRound(t),e=y.roundTimeRound(e)):(p=Math.max(y.numberOfUnits(t,e),1),c=Math.abs(y.roundTimeRound(t)-t),_=Math.abs(y.roundTimeRound(e)-e),_>c?(t=y.roundTimeRound(t),e=y.add(t,p)):(e=y.roundTimeRound(e),t=y.sub(e,p))):(t=y.roundTimeDown(i),e=y.add(t,1))):(t=Math.round(t),e=Math.round(e)),[t,e,x,f,r])},e.prototype._snapToAnchor=function(t,e,i){var n,s,o;return"now"===this.scene.anchor?(o=this.scene.getCurTime(),n=-1):"newestData"===this.scene.anchor&&(o=this.scene.mainData.dataTo,n=-1),null!=o&&-1===n&&e>o&&(s=o-e,e=i.roundTimeUp(e+s),t=i.roundTimeUp(t+s)),[t,e]},e.prototype._preventOverscroll=function(t,e,i,n){var s,o,r;return r=this.scene.getDisplayLimits(),s=r[0],o=r[1],this.s.preventOverscroll(i,t,e,s,o,this.scene.getCurTime(),n)},e.prototype._preventOverscale=function(t,e,i,n,s){var o,r,a,l;return l=this.scene.getDisplayLimits(),o=l[0],r=l[1],i?a=[i]:(i=this.scene.displayUnit,a=this.scene.settings.area._displayUnitsParsed),this.s.preventOverscale(this.scene,a,n,t,e,i,o,r,this.scene.getCurTime(),s)},e}(Linearchart_Scrolling);var Timechart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Selection=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.selectStart=null,this.selectingPointer=null,this.isSelecting=!1,this.lastX=0,this.lastY=0,this.roundAround=!1,this.selectionRemoved=!1}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=15,e.prototype.updateOrder=1300,e.settings={enabled:!0,tolerance:6},e.prototype.onSceneChange=function(t){return(t.changes.time||t.changes.bounds)&&null!=this.selectStart?(t.x=this.lastX,t.y=this.lastY,t.identifier=this.selectingPointer,this.onPointerDrag(t)):void 0},e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;if(this.scene.selectionStart&&this.scene.selectionEnd)return u=Math.round(this.scene.x0),d=Math.round(u+this.scene.width),y=Math.round(this.scene.y0),v=Math.round(y+this.scene.height+this.scene.bottomAxisSize),p=Math.round(this.scene.timeToX(this.scene.selectionStart)),f=Math.round(this.scene.timeToX(this.scene.selectionEnd)),i=this.scene.height+this.scene.bottomAxisSize,s=moment(this.scene.selectionStart).utc().format(this.scene.minorTimeFormat),a=moment(Math.max(this.scene.selectionStart,this.scene.selectionEnd-1)).utc().format(this.scene.minorTimeFormat),e=t.context,Base_Graphics.pushClip(e,u,y,this.scene.width,i),Base_Graphics.rectStyle(e,this.scene.settings.area.style.selection),e.fillRect(p,y,f-p,i),e.beginPath(),e.moveTo(p,y),e.lineTo(p,v),e.moveTo(f,y),e.lineTo(f,v),Base_Graphics.stroke(e,this.scene.settings.area.style.selection),n=t.labelRenderer,h=e.measureText(s).width,c=e.measureText(a).width,o=new Base_Label,l=new Base_Label,o.text=s,l.text=a,o.textStyle=l.textStyle=this.scene.settings.area.style.selectionLabel,_=10,m=5,r=this.chart.toolbar?this.chart.toolbar.getTopInsidePanelBoundingRectangles():[],u>p&&(p=u),f>d&&(f=d),f-p>h+c+20?(p+=m,f=f-c-m):(p=p-h-m,f+=m),g=this.testLabelOverlapWithToolbar(r,p,h)||y,n.paintWithStyle(e,p+h/2,g+_,1,o,o),g=this.testLabelOverlapWithToolbar(r,f,c)||y,n.paintWithStyle(e,f+c/2,g+_,1,l,l),Base_Graphics.popClip(e)},e.prototype.testLabelOverlapWithToolbar=function(t,e,i){var n,s,o;for(s=0,o=t.length;o>s;s++)if(n=t[s],!(n.x0>e+i||n.x1<e))return n.y1;return null},e.prototype.onPointerMove=function(t){var e,i;if(this.scene.settings.interaction.selection.enabled&&(this.scene.xyInBottom(t.x,t.y)&&(t.cursor="text"),this.scene.selectionStart&&this.scene.selectionEnd&&this.scene.xyInChartOrBottom(t.x,t.y)&&this.scene.timeStart<this.scene.timeEnd)){if(e=this.scene.timeToX(this.scene.selectionStart),i=this.scene.timeToX(this.scene.selectionEnd),Math.abs(i-t.x)<=this.scene.settings.interaction.selection.tolerance)return t.cursor="e-resize",t.consumed=!0;if(Math.abs(e-t.x)<=this.scene.settings.interaction.selection.tolerance)return t.cursor="w-resize",t.consumed=!0}},e.prototype.onPointerDown=function(t){var e,i,n,s;if(this.scene.xyInChartOrBottom(t.x,t.y)&&null==this.selectingPointer&&this.scene.settings.interaction.selection.enabled){if(this.selectionRemoved=!1,this.lastX=t.x,this.lastY=t.y,null!=this.scene.selectionStart||null!=this.scene.selectionEnd){if(n=this.scene.timeToX(this.scene.selectionStart),s=this.scene.timeToX(this.scene.selectionEnd),e=Math.abs(n-t.x),i=Math.abs(s-t.x),e<this.scene.settings.interaction.selection.tolerance&&i>=e)return this.selectingPointer=t.identifier,this.selectStart=this.scene.selectionEnd,this.selectingPointer=t.identifier,t.consumed=!0,this.roundAround=!0,void(this.isSelecting=!0);if(i<this.scene.settings.interaction.selection.tolerance&&e>=i)return this.selectStart=this.scene.selectionStart,this.selectingPointer=t.identifier,t.consumed=!0,this.roundAround=!0,void(this.isSelecting=!0)}return this.scene.xyInBottom(t.x,t.y)?(this.selectingPointer=t.identifier,this.selectStart=this.scene.xToTime(t.x),t.capture=!0,this.roundAround=!0,t.x>=n&&t.x<=s?this.isSelecting=!1:(null!=this.scene.selectionStart&&(this.selectionRemoved=!0,this.scene.selectionStart=null,this.scene.selectionEnd=null,t.changes.selection=!0),this.isSelecting=!1)):void 0}},e.prototype.onPointerDrag=function(t){var e,i,n,s,o,r,a;if(null!=this.selectStart&&this.selectingPointer===t.identifier)return this.isSelecting=!0,this.lastX=t.x,this.lastY=t.y,a=this.scene.xToTime(t.x),i=Math.abs(this.selectStart-a),s=this.scene.snapTimeRound(this.selectStart),e=s-this.selectStart,n=Base_Helpers.sign(e),s=this.selectStart+Math.min(e*n,.9*i)*n,this.selectStart<a?(o=s,r=a):(o=a,r=s),this.scene.selectionStart=o,this.scene.selectionEnd=r,t.changes.selection=!0,t.consumed=!0},e.prototype.onPointerUp=function(t){var e,i,n;if(null!=this.selectStart&&this.selectingPointer===t.identifier)return this.isSelecting&&(n=this.snapSelection(),i=n[0],e=n[1],i===e&&(i=null,e=null),this.scene.selectionStart=i,this.scene.selectionEnd=e,this.chart.notifySelectionChanged("user"),t.changes.selection=!0),(this.isSelecting||this.selectionRemoved)&&(t.consumed=!0),this.isSelecting=!1,this.selectStart=null,this.selectingPointer=null},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.snapSelection=function(){var t,e;return this.scene.selectionStart?this.roundAround?(e=this.scene.snapTimeRound(this.scene.selectionStart),t=this.scene.snapTimeRound(this.scene.selectionEnd)):(e=this.scene.snapTimeDown(this.scene.selectionStart),t=this.scene.snapTimeUp(this.scene.selectionEnd)):(e=null,t=null),[e,t]},e}(Base_ChartElement);var Timechart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Scene=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.settings=null,e.prototype.timeStart=0,e.prototype.timeEnd=0,e.prototype.anchor=null,e.prototype.period=null,e.prototype.displayUnit=null,e.prototype.data={},e.prototype.mainData=null,e.prototype.selectionStart=null,e.prototype.selectionEnd=null,e.prototype.minorTimeFormat=null,e.prototype.minorTimeUnit=null,e.prototype.majorTimeFormat=null,e.prototype.majorTimeUnit=null,e.prototype.hoverFrom=null,e.prototype.hoverTo=null,e.prototype.setTimeRange=function(t,e,i){return i||Base_Helpers.error("Scene.setTimeRange: no display unit"),this.timeStart=t,this.timeEnd=e,this.displayUnit=i},e.prototype.pixelsPerTime=function(){return this.width/(this.timeEnd-this.timeStart)},e.prototype.getScale=function(){return(this.timeEnd-this.timeStart)/this.width},e.prototype.timeToX=function(t){return this.x0+this.width*(t-this.timeStart)/(this.timeEnd-this.timeStart)},e.prototype.timeToXCoefs=function(){return[this.x0-this.timeStart*this.width/(this.timeEnd-this.timeStart),this.width/(this.timeEnd-this.timeStart)]},e.prototype.xToTime=function(t){return this.timeStart+(this.timeEnd-this.timeStart)*(t-this.x0)/this.width},e.prototype.xToFraction=function(t){return(t-this.x0)/this.width},e.prototype.dxToDtime=function(t){return t/this.width*(this.timeEnd-this.timeStart)},e.prototype.snapTimeDown=function(t){return this.displayUnit.roundTimeDown(t)},e.prototype.snapTimeUp=function(t){return this.displayUnit.roundTimeUp(t)},e.prototype.snapTimeRound=function(t){return this.displayUnit.roundTimeRound(t)},e.prototype.getDataLimits=function(){var t,e;return t=this.mainData.dataLimitFrom,e=this.mainData.dataLimitTo,null==t||null==e?[null,null]:(this.displayUnit&&(t=this.displayUnit.roundTimeDown(t),e=this.displayUnit.roundTimeUp(e)),[t,e])},e.prototype.getDisplayLimits=function(){var t,e,i,n,s,o,r;if(o=this.getDataLimits(),t=o[0],i=o[1],null===t)return[null,null];for(r=this.markers,n=0,s=r.length;s>n;n++)e=r[n],t=Math.min(t,e.time),i=Math.max(i,e.time);return[t,i]},e.prototype.getClickBar=function(t){return[this.displayUnit.roundTimeDown(t),this.displayUnit.roundTimeUp(t+1)]},e.prototype.getCurTime=function(){return(new Date).getTime()+this.settings.currentTime._computedTimeOffset},e}(Linearchart_Scene);var Timechart_ClickNotifier,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_ClickNotifier=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=20,e.prototype.updateOrder=1200,e.prototype.chart=null,e.prototype.scene=null,e.prototype.pointer=null,e.prototype.previewPointerMove=function(t){return this.pointer=null,this.updateHover(t)},e.prototype.onPointerOut=function(t){return this.scene.hoverSeriesItem=null,this.hoverEvent=null,t.changes.hover=!0,this.chart.notifyHoverChanged(t)},e.prototype.previewPointerDown=function(t){return this.pointer=t.identifier,this.updateHover(t)},e.prototype.updateHover=function(t){var e,i,n,s,o,r,a,l,h,c;if(e=this.getClickRange(t.x,t.y),i=null,s=null,n=null,e&&(i=e[0],s=e[1],r=e[2],n=this.chart.renderer.hitTest(t.x,t.y)),this.chart.legend&&!n)for(o=this.chart.legend.findItemAt(t.x,t.y),l=this.scene.settings._computedSeries,a=h=0,c=l.length;c>h;a=h+=1)o===l[a]&&(n={seriesIndex:a},t.cursor="pointer");return i!==this.scene.hoverFrom||s!==this.scene.hoverTo||!n!=!this.scene.hoverSeriesItem||n&&(n.seriesIndex!==this.scene.hoverSeriesItem.seriesIndex||n.x0!==this.scene.hoverSeriesItem.x0)?(this.scene.hoverFrom=i,this.scene.hoverTo=s,this.scene.hoverSeriesItem=n,t.changes.hover=!0,this.chart.notifyHoverChanged(t)):void 0},e.prototype.onClick=function(t){var e;return t.identifier===this.pointer&&null!=this.scene.hoverFrom?(e=this.scene.xToTime(t.x),null!=this.scene.selectionStart&&(this.scene.selectionStart>e||this.scene.selectionEnd<e)?(this.scene.selectionStart=null,this.scene.selectionEnd=null,this.chart.notifySelectionChanged("user"),t.changes.selection=!0,t.consumed=!0):(this.buildClickEvent(t),this.chart.notifyClick(t),t.consumed=!0)):void 0},e.prototype.onRightClick=function(t){var e;return null!=this.scene.hoverFrom&&(this.buildClickEvent(t),e=this.chart.notifyRightClick(t),e.defaultPrevented)?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){return null!=this.scene.hoverFrom?(this.buildClickEvent(t),this.chart.notifyDoubleClick(t),t.consumed=!0):void 0},e.prototype.getClickRange=function(t,e){var i,n,s,o,r,a,l;return this.scene.xyInChartOrBottom(t,e)?(a=this.scene.xToTime(t),null!=this.scene.selectionStart&&a>=this.scene.selectionStart&&a<this.scene.selectionEnd?(o=this.scene.selectionStart,r=this.scene.selectionEnd,s=Math.max(2,this.scene.displayUnit.numberOfUnits(o,r))):this.scene.displayUnit?(l=!0,null!=this.scene.majorTimeUnit&&(i=this.scene.majorTimeUnit.roundTimeDown(a),n=this.scene.majorTimeUnit.roundTimeUp(a+1),e>this.scene.y0+this.scene.height&&(i>this.scene.timeStart||n<this.scene.timeEnd)&&(o=i,r=n,s=this.scene.displayUnit.numberOfUnits(o,r),l=!1)),l&&(o=this.scene.displayUnit.roundTimeDown(a),r=this.scene.displayUnit.roundTimeUp(a+1),s=1)):(o=null,r=null,s=null),[o,r,s]):null},e.prototype.buildClickEvent=function(t){return t.clickStart=this.scene.hoverFrom,t.clickEnd=this.scene.hoverTo,null!==this.scene.hoverSeriesItem?(t.clickSeries=this.scene.settings.series[this.scene.hoverSeriesItem.seriesIndex],t.clickMarker=this.scene.hoverSeriesItem.isMarker):void 0},e}(Base_ChartElement);var Timechart_Navigator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Navigator=function(t){function e(t){this.chart=t,this.scene=t.scene,this.settings=t.settings,this.reinitializePeriod=!0}return __extends(e,t),e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.navigation&&(this.reinitializePeriod=!0),this.reinitializePeriod?this.setupInitialDisplayPeriod():void 0},e.prototype.onNewDataObject=function(){return 1},e.prototype.setupInitialDisplayPeriod=function(){var t,e,i;if(this.scene.width)return this.reinitializePeriod=!1,t=this.settings.navigation.initialDisplayAnchor,e=this.settings.navigation.initialDisplayPeriod,i=this.settings.navigation.initialDisplayUnit,this.computeDisplayPeriod(e,t,i,function(i){return function(n,s,o){return i.scene.setMessage("impl",null),i.scene.loading=!1,null!=i.scene.displayUnit&&(o=i.scene.displayUnit),i.scene.timeStart||i.scene.timeEnd?void 0:i.chart.scrolling.setTimeRange(n,s,o,!1,"init",t,e)}}(this))},e.prototype.computeDisplayPeriod=function(t,e,i,n){var s,o,r,a,l;
return l=this.chart.scrolling.computeDisplayPeriod(t,e,i,this.scene.mainData.dataFrom,this.scene.mainData.dataTo),o=l[0],r=l[1],a=l[2],null!=o&&null!=r&&a&&null!=o&&null!=r?n(o,r,a):null==this.scene.mainData.dataSettings.dataFunction&&null==this.scene.mainData.dataSettings.url&&null==this.scene.mainData.dataSettings.urlByUnit&&null==this.scene.mainData.dataSettings.preloaded?void this.error("Cannot compute data dependant display period, no data given. DisplayPeriod = "+t+", DisplayAnchor = "+e):(s=function(a){return function(l,h,c,u,d,p){var f,m;if(!a.chart.removed)return null===l||null===h||0===l&&0===h&&a.scene.mainData.noData?void n(u,d,p):(m=a.chart.scrolling.computeDisplayPeriod(t,e,i,l,h),o=m[0],r=m[1],f=m[2],null==o||null==r?void a.error("Could not setup display time interval. Check your configuration."):Timechart_TimeSetup.isSmallerOrEqualUnit(c,f.unit)?n(o,r,f):a.scene.mainData.determineDataLimits(f.unit,!0,!0,function(t,e,i){return s(t,e,i,l,h,f)}))}}(this),this.scene.mainData.determineDataLimits(null,!0,!0,function(){return function(t,e,i){return s(t,e,i,0,0,null)}}(this)))},e}(Base_ChartElement);var Base_Resizer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Resizer=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.options=this.scene.settings.interaction.resizing,this.layers=this.chart.layers,this.oh=0,this.sy=0,this.barVisible=!1,this.resizing=!1,this.aspect=null,this.layers.resizerBar&&this.chart.events.addContainer(this.layers.resizerBar)}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=65,e.prototype.updateOrder=300,e.settings={enabled:!0,fixedAspect:!1,visibilityDistance:45,grabDistance:10},e.prototype.onSceneChange=function(){return this.options.enabled?void 0:this.hideUI()},e.prototype.onPointerOut=function(){return this.options.enabled?this.hideUI():void 0},e.prototype.onPointerMove=function(t){var e;if(this.options.enabled)if(e=this.scene.chartHeight-t.y,e<this.options.visibilityDistance){if(this.barVisible||this.showUI(),e<this.options.grabDistance)return t.consumed=!0,t.cursor="ns-resize"}else if(this.barVisible)return this.hideUI()},e.prototype.onPointerDown=function(t){var e;if(this.options.enabled)return this.sy=t.y,e=this.scene.chartHeight-t.y,this.resizing=e<this.options.grabDistance&&t.y<=this.scene.chartHeight,this.resizing?(this.aspect=this.options.fixedAspect?Math.max(1,this.chart.scene.chartWidth)/Math.max(1,this.chart.scene.chartHeight):0,this.oh=this.scene.chartHeight,this.showUI(),t.cursor="ns-resize",t.consumed=!0):void 0},e.prototype.onDoubleClick=function(){return this.resizing?this.chart.setFullscreen(!this.chart.isFullscreen()):void 0},e.prototype.onPointerDrag=function(t){return this.options.enabled?this.chart.isFullscreen()?(this.chart.setFullscreen(!1),this.hideUI(),t.consumed=!0):this.resizing?(t.consumed=!0,this.wasMaximized=!1,this.scene.settings.height=Math.min(this.scene.settings.maxHeight,Math.max(this.scene.settings.minHeight,this.oh+(t.y-this.sy))),this.aspect&&(this.scene.settings.width=this.scene.settings.height*this.aspect),this.chart.updateSize()):void 0:void 0},e.prototype.showUI=function(){return this.barVisible?void 0:(this.barVisible=!0,Base_Helpers.fadeIn(this.layers.resizerBar))},e.prototype.hideUI=function(){return this.barVisible?(this.barVisible=!1,this.resizing=!1,Base_Helpers.fadeOut(this.layers.resizerBar)):void 0},e}(Base_ChartElement);var Base_MessagesOverlay,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_MessagesOverlay=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=70,e.prototype.updateOrder=200,e.prototype.scene=null,e.prototype.loadingTime=null,e.prototype.doAnimations=function(t){return this.scene.loading?t.animating=!0:void 0},e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f;return h=this.scene,a=this.scene.getMessage(),r=this.scene.loading,r||(this.loadingTime=null),null!=a||r?(null==this.loadingTime&&(this.loadingTime=t.timeStamp),i=this.scene.settings.advanced.style.loadingArcStyle,n=t.context,"corner"===i.location?(d=h.x0+h.width,p=h.y0):(d=h.x0+h.width/2,p=h.y0+h.height/2),null!=a&&(Base_Graphics.textStyle(n,this.scene.settings.advanced.style.messageTextStyle),n.textBaseline="middle",n.textAlign="center",o=Base_Graphics.getTextHeight(n,this.scene.settings.advanced.style.messageTextStyle.font),u=n.measureText(a).width,"corner"===i.location&&(d-=u,p+=1.5*o),this.scene.loading?(p-=o,f=p+i.r+o):f=p,n.fillText(a,d,f)),this.scene.loading?(l=i.r,c=i.lineWidth,a||"corner"!==i.location||(d-=1.2*(l+c),p+=1.2*(l+c)),n.save(),n.lineCap="round",n.lineWidth=c,e=(t.timeStamp-this.loadingTime)/700*Math.PI,s=n.createLinearGradient(d+l*Math.cos(e+Math.PI),p+l*Math.sin(e+Math.PI),d+l*Math.cos(e),p+l*Math.sin(e)),s.addColorStop(0,i.lineColor),s.addColorStop(1,"transparent"),n.strokeStyle=s,n.beginPath(),n.arc(d,p,l,e,e+Math.PI),n.stroke(),n.restore()):void 0):void 0},e}(Base_ChartElement);var Base_Title,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Title=function(t){"use strict";function e(t){this.chart=t,this.computePanelSize=__bind(this.computePanelSize,this),this.scene=t.scene,this.settings=this.scene.settings.title,this.lines=[],this.lineSpacing=0,this.panel=new Base_ChartPanel,this.panel.packingOrder=10,this.panel.side="top",this.panel.align="fill",this.panel.visible=!1,this.panel.computeSize=this.computePanelSize}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=55,e.prototype.updateOrder=500,e.settings={enabled:!0,enabledOnExport:!0,align:"center",margin:25,style:{font:"20px Arial",fillColor:"#000"},text:""},e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.title?e.bounds=!0:void 0},e.prototype.getPanels=function(t){var e;return this.panel.visible=t?this.settings.enabledOnExport:this.settings.enabled,(e=this.panel).visible&&(e.visible=!!this.settings.text),this.panel.margin=this.settings.margin,this.panel.visible?(this.panel.location=t&&!this.settings.enabled?"external":"outsideFill",[this.panel]):[]},e.prototype.computePanelSize=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f;if(this.lines=[],h=this.settings.text,i.save(),Base_Graphics.textStyle(i,this.settings.style),c=i.measureText(h).width,n=Base_Graphics.getTextHeight(i,this.settings.style.font),this.lineSpacing=1.15*n,c>t){for(u=0,d=h.split(" "),o=d[0],l=i.measureText(o).width,s=p=1,f=d.length-1;f>=p;s=p+=1)r=o+" "+d[s],a=i.measureText(r).width,t>=a?(o=r,l=a):(this.lines.push(o),c=Math.max(c,l),o=d[s],l=i.measureText(o).width);this.lines.push(o),c=Math.max(u,l)}else this.lines.push(h);return i.restore(),n=(this.lines.length-1)*this.lineSpacing+n,[c,n]},e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u;if(this.panel.visible){for(o=this.settings,e=t.context,i=this.panel.left,s=this.panel.right,a=this.panel.top,Base_Graphics.textStyle(e,o.style),e.textBaseline="top","left"===o.align?(e.textAlign="start",r=i):"right"===o.align?(e.textAlign="end",r=s):(e.textAlign="center",r=(i+s)/2),c=this.lines,u=[],l=0,h=c.length;h>l;l++)n=c[l],e.fillText(n,r,a),u.push(a+=this.lineSpacing);return u}},e}(Base_ChartElement);var Base_Legend,Base_Legend_Entry,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Legend_Entry=function(){function t(){this.data=null,this.label=null,this.markerStyle={},this.textColor=null}return t}(),Base_Legend=function(t){"use strict";function e(t){this.chart=t,this.computePanelSize=__bind(this.computePanelSize,this),this.scene=t.scene,this.settings=this.scene.settings.legend,this.panel=new Base_ChartPanel,this.panel.packingOrder=50,this.panel.location="outside",this.panel.computeSize=this.computePanelSize,this.entries=[],this.hoverObject=null,this.selectedObjects=[],this.entryWidth=0,this.entryHeight=0,this.textHeight=0,this.columns=null,this.rows=null,this.contentWidth=0,this.contentHeight=0,this.baseTextColor=null,this.markerSize=0,this.drawingEntries=0,this.orientation="left"===this.settings.panel.side||"right"===this.settings.panel.side?"vertical":"horizontal",this.lastInsensitive=!1}return __extends(e,t),e.prototype.animationOrder=300,e.settings={enabled:!1,width:null,height:null,numberOfRows:null,numberOfColumns:null,margin:1,padding:5,maxLineSymbols:15,lineSpacing:.2,text:{font:"12px Arial",fillColor:"#000"},marker:{size:20,alignment:"left",lineColor:"#fff"},equalizeRowsColumns:!0,panel:{margin:1,padding:0,align:"fill",side:"left"},advanced:{selectedBackground:"rgba(208,233,255,0.3)",selectedBorder:"rgba(208,233,255,0.3)",disabledSeries:{fillColor:"rgba(191,187,185,0.3)",lineColor:"rgba(64,62,62,0.3)",textColor:"rgba(64,62,62,0.3)"}}},e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.legend?(e.bounds=!0,this.settings.enabled||(this.entries=[]),this.labelStyle={textStyle:this.settings.text,align:"left",lineSpacing:this.settings.lineSpacing,padding:0}):void 0},e.prototype.setItems=function(t){var e,i,n,s,o,r;if(this.settings.enabled){for(this.entries=[],r=[],s=0,o=t.length;o>s;s++)i=t[s],e=new Base_Legend_Entry,e.data=i.data,n=e.label=new Base_Label,n.text=i.label,n.align="left",e.textColor=i.textColor,r.push(this.entries.push(e));return r}},e.prototype.getPanels=function(){var t;return Base_Helpers.extend(this.panel,this.settings.panel),t=this.settings.enabled?[this.panel]:[]},e.prototype.computePanelSize=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b;if(0===this.entries.length)return[0,0];for(Base_Graphics.textStyleNoShadow(i,this.labelStyle.textStyle),this.lastInsensitive=!1,g=this.labelStyle.maxWidth=i.measureText("M").width*this.settings.maxLineSymbols,c=0,d=this.settings.numberOfRows,u=this.settings.numberOfColumns,m=2*(this.settings.margin+this.settings.padding),f=2*(this.settings.panel.margin+this.settings.panel.padding),b=this.entries,v=0,_=b.length;_>v;v++)l=b[v],n.measure(i,l.label,this.labelStyle),c=Math.max(c,2*l.label.hheight);return this.textHeight=this.entries[0].label.lineHeight,this.markerSize=this.settings.marker.size||this.textHeight,c=Math.max(c,this.markerSize),this.entryHeight=Math.max(c,this.markerSize)+m,this.entryWidth=g+this.markerSize+this.settings.padding+m,a=(null!=this.settings.width?Math.min(t,Math.max(this.settings.width,this.entryWidth)+f):t)-f,r=(null!=this.settings.height?Math.min(e,Math.max(this.settings.height,this.entryHeight)+f):e)-f,"vertical"===this.orientation&&(this.rows=Math.floor(r/this.entryHeight),s=Math.min(Math.ceil(this.entries.length/this.rows),Math.floor(a/this.entryWidth)),this.columns=null!=u?Math.min(u,s):s,this.drawingEntries=Math.min(Math.floor(r/this.entryHeight)*this.columns,this.entries.length),y=this.columns*this.entryWidth,this.drawingEntries>this.rows?(this.settings.equalizeRowsColumns&&(this.rows=Math.ceil(this.drawingEntries/this.columns)),h=this.rows*this.entryHeight):h=this.drawingEntries*this.entryHeight),"horizontal"===this.orientation&&(this.columns=Math.floor(a/this.entryWidth),o=Math.min(Math.ceil(this.entries.length/this.columns),Math.floor(r/this.entryHeight)),this.rows=null!=d?Math.min(d,o):o,this.drawingEntries=Math.min(Math.floor(a/this.entryWidth)*this.rows,this.entries.length),h=this.rows*this.entryHeight,this.drawingEntries>this.columns?(this.settings.equalizeRowsColumns&&(this.columns=Math.ceil(this.drawingEntries/this.rows)),y=this.columns*this.entryWidth):y=this.drawingEntries*this.entryWidth),this.contentHeight=h,this.contentWidth=y,p=this.settings.panel.padding,[y+2*p,h+2*p]},e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S;if(!this.settings.enabled||0===this.entries.length||0===this.drawingEntries)return null;for(r=t.context,a=t.labelRenderer,d=this.panel.top,l=this.panel.left,h=this.settings.margin,c=this.settings.padding,u=this.settings.panel.padding,s=0,n=0,i=0,Base_Graphics.textStyleNoShadow(r,this.settings.text),S=[],s=b=0,x=this.drawingEntries;x>=0?x>b:b>x;s=x>=0?++b:--b){if(p=u+h,f=l+p+n*this.entryWidth,y=d+p+i*this.entryHeight,o=this.entries[s],o.label.lineSpacing=this.settings.lineSpacing,"right"===this.settings.marker.alignment?(g=f+c+o.label.hwidth,m=f+this.entryWidth-2*(h+c)-this.markerSize/2):(g=f+this.markerSize+2*c+o.label.hwidth,m=f+c+this.markerSize/2),e=o.label.hheight>this.markerSize/2?0:this.markerSize/2-this.textHeight/2,v=y+c+this.markerSize/2,_=y+e+c+o.label.hheight,this.drawingEntries<this.entries.length&&s+1===this.drawingEntries){this.lastInsensitive=!0,r.fillStyle="#000",r.textAlign="left",r.font="bold 12px Arial",r.fillText(". . .",g-o.label.hwidth,_);break}if((o.data===this.hoverObject||Base_Helpers.arrayContains(this.selectedObjects,o.data))&&this.rect(r,f,y,this.settings.advanced.selectedBorder,this.settings.advanced.selectedBackground,this.entryWidth-2*h,this.entryHeight-2*h),this.labelStyle.textStyle.fillColor=o.textColor,a.paintWithStyle(r,g,_,1,o.label,this.labelStyle),this.paintMarker(r,m,v,this.markerSize/2,o),s+=1,"vertical"===this.orientation){if(i+=1,i===this.rows&&(i=0,n+=1),n===this.columns)break;S.push(void 0)}else{if(n+=1,n===this.columns&&(n=0,i+=1),i===this.rows)break;S.push(void 0)}}return S},e.prototype.findItemAt=function(t,e){var i,n,s,o,r,a,l;if(this.entries.length>0)return l=this.panel.top+this.settings.panel.padding,o=this.panel.left+this.settings.panel.padding,(r=o>t||t>o+this.contentWidth||l>e||e>l+this.contentHeight)?null:(n=Math.abs("vertical"===this.orientation?this.contentHeight/this.entryHeight:this.contentWidth/this.entryWidth),"vertical"===this.orientation?(i=Math.floor((t-o)/this.entryWidth),a=Math.floor((e-l)/this.entryHeight)):(i=Math.floor((e-l)/this.entryHeight),a=Math.floor((t-o)/this.entryWidth)),s=Math.floor(n*i+a),s>this.drawingEntries-1?null:this.lastInsensitive&&s===this.drawingEntries-1?null:this.entries[s].data)},e.prototype.rect=function(t,e,i,n,s,o,r){return t.beginPath(),t.rect(e,i,o,r),t.fillStyle=s,t.fill(),t.lineWidth=0,t.strokeStyle=n,t.stroke()},e.prototype.paintMarker=function(){return 1},e.prototype.shape=function(t,e,i,n,s,o){return null==o&&(o=null),t.lineWidth=1,t.beginPath(),t.rect(e,i,n,s),t.strokeStyle=null!==o?o:"black",t.stroke()},e}(Base_ChartElement);var Base_Credits,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Credits=function(t){"use strict";function e(t,e){this.chart=t,this.settings=e,this.imageLoaded=__bind(this.imageLoaded,this),this.scene=this.chart.scene,(this.settings.enabledOnExport||this.settings.enabled)&&(this.scene.settings.getAssetImage(this.settings.image,this.imageLoaded),this.settings.imageExport&&this.scene.settings.getAssetImage(this.settings.imageExport)),this.panel=new Base_ChartPanel,this.panel.packingOrder=0,this.panel.side="bottom",this.panel.align="right",this.panel.visible=!1,this.panel.margin=3}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=60,e.prototype.updateOrder=400,e.settings={enabled:!1,enabledOnExport:!1,url:"http://zoomcharts.com",image:"builtin://logo",imageScaling:.5,location:"outside"},e.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&e.settingsChanges.credits?e.bounds=!0:void 0},e.prototype.getPanels=function(t){var e,i;return e=t?this.settings.enabledOnExport:this.settings.enabled,e&&(this.panel.location="outside","outside"===this.settings.location?(this.panel.floating=!1,t&&!this.settings.enabled&&(this.panel.location="external")):this.panel.floating=!0,i=this.scene.settings.getAssetImage(this.settings.image,this.imageLoaded))?(this.panel.desiredWidth=i.width*this.settings.imageScaling,this.panel.desiredHeight=i.height*this.settings.imageScaling,this.panel.visible=!0,[this.panel]):(this.panel.visible=!1,[])},e.prototype.paintScene=function(t){var e,i;if(this.panel.visible)return i=this.scene.settings.getAssetImage(this.settings.image),e=this.settings.imageExport?this.scene.settings.getAssetImage(this.settings.imageExport):i,t["export"]&&(i=e),i?t.context.drawImage(i,0,0,i.width,i.height,this.panel.left,this.panel.top,this.panel.right-this.panel.left,this.panel.bottom-this.panel.top):void 0},e.prototype.onPointerMove=function(t){var e,i;return e=t.x,i=t.y,this.panel.visible&&e>=this.panel.left&&i>=this.panel.top&&e<=this.panel.right&&i<=this.panel.bottom&&this.settings.url?t.cursor="pointer":void 0},e.prototype.onClick=function(t){var e,i;return e=t.x,i=t.y,this.panel.visible&&e>=this.panel.left&&i>=this.panel.top&&e<=this.panel.right&&i<=this.panel.bottom&&this.settings.url?(Base_Helpers.openUrl(this.settings.url),t.consumed=!0):void 0},e.prototype.imageLoaded=function(){return this.chart.updateSize(!0)},e}(Base_ChartElement);var Piechart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Selection=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.dragPointers={}}return __extends(e,t),e.prototype.animationOrder=400,e.prototype.paintOrder=10,e.prototype.updateOrder=1200,e.prototype.scene=null,e.prototype.events=null,e.prototype.currentSlice=null,e.prototype.currentLabel=null,e.prototype.currentPie=null,e.prototype.draggedLabelSlice=null,e.prototype.draggedLabel=null,e.prototype.hoverEvent=null,e.prototype.doAnimations=function(){return this.hoverEvent?this.onPointerMove(this.hoverEvent):void 0},e.prototype.previewPointerDrag=function(t){return this.hoverEvent=t},e.prototype.onPointerMove=function(t){return this.hoverEvent=t,this.updateCurrentObject(t)},e.prototype.onPointerOut=function(t){return this.switchCurrentSlice(null,null,t),this.hoverEvent=null},e.prototype.onPointerDown=function(t){var e;return this.updateCurrentObject(t),(this.currentSlice||this.currentPie)&&(t.consumed=!0),e=this.scene.findLabelAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.draggedLabelSlice=e[0],this.draggedLabel=e[1],this.draggedLabel&&this.scene.settings.interaction.dragging.enabled?t.consumed=!0:(this.draggedLabel=null,this.draggedLabelSlice=null)},e.prototype.onPointerUp=function(t){return this.draggedLabel?(this.draggedLabel=null,t.consumed=!0):void 0},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.onPointerDrag=function(t){var e;return this.draggedLabel?(e=this.draggedLabel,e.userPlaced=!0,e.x+=t.dx,e.y+=t.dy,t.consumed=!0,t.changes.pie=!0):void 0},e.prototype.onClick=function(t){var e;return this.onPointerMove(t),this.fillClickParams(t),e=this.chart.notifyClick(t),(this.currentSlice||this.currentPie)&&(t.consumed=!0),e.defaultPrevented?void 0:this.updateSelection(t,t.slice,!1)},e.prototype.onRightClick=function(t){var e;return this.onPointerMove(t),this.fillClickParams(t),(this.currentSlice||this.currentPie)&&(t.consumed=!0),e=this.chart.notifyRightClick(t),e.defaultPrevented?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){return this.onPointerMove(t),this.fillClickParams(t),this.chart.notifyDoubleClick(t),t.consumed=!0},e.prototype.fillClickParams=function(t){var e,i;return e=this.scene.findSliceAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),i=this.scene.findPieAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickPie=e?e.pie:i,e?t.cursor="pointer":void 0},e.prototype.updateSelection=function(t,e,i){var n,s;if(this.scene.settings.interaction.selection.enabled)if(n=t.shiftKey,s="toggle"===this.scene.settings.interaction.mode||t.ctrlKey,e){if(!(n||i&&e.selected||s&&!e.selected))return s&&e.selected?(Base_Helpers.removeFromArray(this.scene.selection,e),e.selected=!1,this.setSelection(this.scene.selection,this.scene.selectionIds,!0)):this.setSelection(!e.selected||this.scene.selection.length>1?[e]:[]);if(!e.selected)return this.scene.selection.push(e),e.selected=!0,this.setSelection(this.scene.selection,this.scene.selectionIds,!0)}else if(!n&&!s)return this.setSelection([])},e.prototype.switchCurrentSlice=function(t,e,i){return t!==this.currentSlice||e!==this.currentLabel?(i.changes.current=!0,this.scene.hoverSlice&&(this.scene.hoverSlice.active=!1),this.scene.hoverPie&&(this.scene.hoverPie.active=!1),this.scene.hoverSlice=t,this.scene.hoverPie=null,this.scene.hoverLabel=e,this.currentSlice=t,this.currentLabel=e,this.currentPie=null,this.currentSlice&&(this.scene.hoverSlice.active=!0,i.hoverSlice=this.currentSlice),this.events.notifySceneChanges({pie:!0}),this.chart.notifyHoverChanged(i)):void 0},e.prototype.switchCurrentPie=function(t,e){return t!==this.currentPie?(e.changes.current=!0,this.scene.hoverSlice&&(this.scene.hoverSlice.active=!1),this.scene.hoverPie&&(this.scene.hoverPie.active=!1),this.scene.hoverPie=t,this.scene.hoverSlice=null,this.currentSlice=null,this.currentPie=t,this.currentPie&&(this.scene.hoverPie.active=!0,e.hoverPie=this.currentPie),this.events.notifySceneChanges({pie:!0}),this.chart.notifyHoverChanged(e)):void 0},e.prototype.onSceneChange=function(t){return t.changes.pie&&this.updateSelectionIds()?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged("")):void 0},e.prototype.updateSelectionIds=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f;for(n=[],d=this.scene.selectionIds,s=0,l=d.length;l>s;s++)for(t=d[s],p=this.scene.pies,o=0,h=p.length;h>o;o++)if(e=p[o],!e.background)for(f=e.slices,r=0,c=f.length;c>r;r++)if(i=f[r],i.id===t){n.push(i);break}if(n.length>0)for(a=0,u=n.length;u>a;a++)i=n[a],i.selected||(i.selected=!0,this.scene.selection.push(i)),Base_Helpers.removeFromArray(this.scene.selectionIds,i.id);return n.length>0},e.prototype.setSelection=function(t,e,i,n){var s,o,r,a,l,h,c,u;if(null==e&&(e=[]),null==i&&(i=!1),null==n&&(n="user"),this.scene.selectionIds=e,i)o=!0;else{for(u=this.scene.selection,a=0,h=u.length;h>a;a++)r=u[a],Base_Helpers.arrayContains(t,r)||(r.selected=!1,o=!0);for(l=0,c=t.length;c>l;l++)r=t[l],r.selected||(r.selected=!0,o=!0);this.scene.selection=t}return s=this.updateSelectionIds(),o||(o=s),o?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(n)):void 0},e.prototype.updateCurrentObject=function(t){var e,i,n;return n=this.findSliceAt(t.x,t.y),e=this.scene.findLabelAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),e=e?e[1]:null,n&&(t.cursor="pointer"),this.switchCurrentSlice(n,e,t),i=this.scene.findPieAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),i&&i.background&&!n?(t.cursor="pointer",this.switchCurrentPie(i,t)):this.switchCurrentPie(null,t)},e.prototype.findSliceAt=function(t,e){var i;return i=this.scene.findSliceAt(t,e,this.scene.settings.interaction.selection.tolerance),!i&&this.chart.legend&&(i=this.chart.legend.findItemAt(t,e)),i},e}(Base_ChartElement);var Piechart_Styles,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Styles=function(t){function e(t){this.chart=t,this.scene=t.scene}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=25,e.prototype.updateOrder=900,e.prototype.onSceneChange=function(t){var e,i,n,s,o,r,a;if(t.changes.settings||t.changes.pie||t.changes.selection||t.changes.style){for(this.insideLabelBase=this.scene.settings.slice.insideLabelStyle,this.labelBase=this.scene.settings.slice.labelStyle,r=this.scene.pies,a=[],s=0,o=r.length;o>s;s++)e=r[s],this.updatePie(e),this.computePieColors(e),a.push(function(){var t,s,o,r;for(o=e.allSlices,r=[],n=t=0,s=o.length;s>t;n=++t)i=o[n],r.push(this.updateSlice(i,n));return r}.call(this));return a}},e.prototype.updatePie=function(t){return Base_Helpers.extend(t,this.scene.settings.pie.style),0===t.slices.length&&Base_Helpers.extend(t,this.scene.settings.pie.noDataStyle),t.background&&Base_Helpers.extend(t,this.scene.settings.pie.backgroundStyle),this.scene.hoverPie===t&&Base_Helpers.extend(t,this.scene.settings.pie.backgroundHoveredStyle),this.scene.settings.pie.styleFunction?this.scene.settings.pie.styleFunction(t):void 0},e.prototype.computePieColors=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M;for(r=t.sliceColors,o=t.colorDistribution,d=0,x=t.slices,p=0,y=x.length;y>p;p++)u=x[p],u.removed||(d+=1);if(1===d)return void(t.slices[0].fillColor=r[0]);if(1===r.length&&(n=r[0],r=[n,Base_Graphics.blendColors(n,"#fff",.8)]),s=r.length,"gradient"===o){for(h=0,S=t.slices,k=[],f=0,v=S.length;v>f;f++)u=S[f],u.removed||(e=r[h*(s-1)|0],i=r[h*(s-1)+1|0],a=h*(s-1),a-=Math.floor(a),n=Base_Graphics.blendColors(e,i,a),u.fillColor=n,k.push(h+=1/(d-.9)));return k}if("gradientProportional"===o){for(h=0,w=t.slices,P=[],m=0,_=w.length;_>m;m++)u=w[m],u.removed||(e=r[h*(s-1)|0],i=r[h*(s-1)+1|0],a=h*(s-1),a-=Math.floor(a),n=Base_Graphics.blendColors(e,i,a),u.fillColor=n,P.push(h+=u.fraction));return P}for(C=t.slices,M=[],l=g=0,b=C.length;b>g;l=++g)u=C[l],u.removed||(n=r[l%s],c=l/s|0,1===c?n=Base_Graphics.deriveColor(n,1.5,1):c>=2&&(n=Base_Graphics.deriveColor(n,.5,1)),M.push(u.fillColor=n));return M},e.prototype.updateSlice=function(t,e){var i,n,s,o,r,a;return s=t.pie,o=this.scene.settings.slice.styleFunction,t.removed?void 0:(t.labelStyle=this.labelBase,t.insideLabelStyle=this.insideLabelBase,t.expandable=this.scene.mainData.canExpand(t.id),Base_Helpers.extend(t,this.scene.settings.slice.style),t===s.othersSlice&&Base_Helpers.extend(t,this.scene.settings.slice.othersStyle),t===s.previousSlice&&Base_Helpers.extend(t,this.scene.settings.slice.previousStyle),t.percent=s.total>0?t.value/s.total*100:0,o||(t.label=""+t.percent.toFixed(1)+"%",!t.percent,t.data.name&&(t.label=t.data.name+" "+t.label)),t.selected&&Base_Helpers.extend(t,this.scene.settings.slice.selectedStyle),this.scene.hoverSlice===t&&Base_Helpers.extend(t,this.scene.settings.slice.hoverStyle),t.data.style&&Base_Helpers.extend(t,t.data.style),o&&(o(t,t.data),t.label&&!Base_Helpers.isString(t.label)&&(t.label=""+t.label),t.insideLabel&&!Base_Helpers.isString(t.insideLabel)&&(t.insideLabel=""+t.insideLabel)),s.background&&(s.activeSliceId!==t.id?(Base_Helpers.extend(t,this.scene.settings.slice.backgroundStyle),e%2===1&&(t.fillColor=t.fillColor2)):Base_Helpers.extend(t,this.scene.settings.slice.backgroundActiveStyle)),r=t.fillColor?t.fillColor:"rgba(255,255,255,0)",a=t.lineColor?t.lineColor:t.lineBrightness?Base_Graphics.deriveColor(r,t.lineBrightness,1):"rgba(255,255,255,0)",i=t.brightness*s.brightness,1!==i&&(r=Base_Graphics.deriveColor(r,i,1),a=Base_Graphics.deriveColor(a,i,1),-1!==r.indexOf("rgba(255,255,255")&&-1!==a.indexOf("rgba(255,255,255")&&(a="rgba(200,200,200,1.000)")),t.labelStyle!==this.labelBase&&(n=Base_Helpers.realClone(this.labelBase),Base_Helpers.extendDeep(n,t.labelStyle),t.labelStyle=n),t.insideLabelStyle!==this.insideLabelBase&&(n=Base_Helpers.realClone(this.insideLabelBase),Base_Helpers.extendDeep(n,t.insideLabelStyle),t.insideLabelStyle=n),s.removed&&s.parentSlice?(t.targetFillColor=s.parentSlice.targetFillColor,t.targetLineColor=s.parentSlice.targetLineColor):(t.targetFillColor=Base_Graphics.normalizeColor(r),t.targetLineColor=Base_Graphics.normalizeColor(a)))},e}(Base_ChartElement);var Piechart_Layers,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Layers=function(t){function e(t){this.chart=t,this.scene=t.scene,this.container=Base_Helpers.createDom("div","DVSL-container"),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="100%",this.background=Base_Helpers.createDom("div","DVSL-background",null,this.container),this.setContainerStyle(this.background),this.backgroundImage=Base_Helpers.createDom("div","DVSL-PC-background-image",null,this.container),this.backgroundImage.style.position="absolute",this.backgroundImage.style.overflow="hidden",this.canvas=Base_Helpers.createDom("canvas","DVSL-canvas",null,this.container),this.setContainerStyle(this.canvas),this.outerBorder=Base_Helpers.createDom("div","DVSL-border",null,this.container),this.setContainerStyle(this.outerBorder),this.resizerBar=Base_Helpers.createDom("div","DVSL-resizer",null,this.container),this.mouseTrackLayer=Base_Helpers.createDom("div",null,null,this.container),this.setContainerStyle(this.mouseTrackLayer),this.updateSettings(this.scene.settings,"init")}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=35,e.prototype.updateOrder=600,e.prototype.scene=null,e.prototype.container=null,e.prototype.background=null,e.prototype.canvas=null,e.prototype.outerBorder=null,e.prototype.mouseTrackLayer=null,e.prototype.backgroundImage=null,e.prototype.updateSettings=function(t){var e;return Base_Helpers.hasProp(t,"area.style.image")&&(e=t.area.style.image,this.backgroundImage.style.backgroundImage=e?"url("+e+")":""),Base_Helpers.hasProp(t,"advanced.themeCSSClass")?(null!=this.curTheme&&Base_Helpers.removeClass(this.container,this.curTheme),this.curTheme=this.scene.settings.advanced.themeCSSClass,Base_Helpers.addClass(this.container,this.curTheme)):void 0},e.prototype.doAnimations=function(t){var e,i,n,s,o;return t.changes.bounds&&(n=this.scene.settings.width,i=this.scene.settings.height,this.scene.chartWidth>this.scene.settings.container.clientWidth&&this.container&&""!==this.container.style.display&&(n=this.scene.chartWidth),this.scene.chartHeight>this.scene.settings.container.clientHeight&&this.container&&""!==this.container.style.display&&(i=this.scene.chartHeight),n&&(this.container.style.width=""+n+"px"),i&&(this.container.style.height=""+i+"px"),this.resizerBar.style.width=""+this.scene.width+"px",this.resizerBar.style.left=""+this.scene.x0+"px"),t.changes.position&&this.scene.settings.area.style.image&&this.scene.pies.length>0?(e=this.scene.currentInnerRadius-this.scene.settings.pie.margin,s=this.scene.pies[0].x,o=this.scene.pies[0].y,this.backgroundImage.style.left=s-e+"px",this.backgroundImage.style.top=o-e+"px",this.backgroundImage.style.width=2*e+"px",this.backgroundImage.style.height=2*e+"px"):void 0},e.prototype.setContainerStyle=function(t){return t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px"},e}(Base_ChartElement);var Piechart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Scrolling=function(t){function e(t,e){this.chart=t,this.view=e,this.scene=t.scene,this.events=t.events,this.pie=null,this.slice=null,this.fraction=null,this.offset=null}return __extends(e,t),e.prototype.animationOrder=200,e.prototype.paintOrder=5,e.prototype.updateOrder=1300,e.prototype.doAnimations=function(){},e.prototype.onPointerDown=function(t){return this.pie=this.scene.view.findPieAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.slice=this.scene.view.findSliceAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.slice&&(this.pie=this.slice.pie),this.mode=null
},e.prototype.onPointerDrag=function(t){var e,i,n,s;if(this.pie||this.slice)return null===this.mode&&(this.pie&&this.scene.settings.interaction.scrolling.enabled?this.mode="scroll":this.slice&&this.scene.settings.interaction.dragging.enabled&&(this.mode="drag")),s=this.scene.view.getMovement(this.pie,t),e=s[0],i=s[1],"scroll"===this.mode?(this.pie.scrollOffset+=e,this.updatePieScrolling(this.pie),t.consumed=!0,t.changes.pie=!0):"drag"===this.mode?(this.slice.userPlaced=!0,n=this.slice.currentCutoutDistance+i,0>n?(this.slice.currentCutoutDistance=0,this.slice.userPlaced=!1):(this.slice.currentCutoutDistance=n,this.slice.userPlaced=!0),t.consumed=!0,t.changes.pie=!0):void 0},e.prototype.onPointerUp=function(t){return"scroll"===this.mode?(this.updatePieAfterScroll(this.pie),t.consumed=!0):"drag"===this.mode&&(t.consumed=!0),this.pie=null,this.slice=null,this.mode=null},e.prototype.onPointerCancel=function(t){return this.onPointerUp(t)},e.prototype.updatePieScrolling=function(t){var e,i,n,s;if(i=!1,t.scrollOffset<0){for(n=t.scrollOffset,e=0,s=0;t.slices.length>e+1&&t.slices[e].fraction<-(t.scrollOffset+s);)e+=1,s+=t.slices[s].fraction;t.offset+=e,t.scrollOffset+=s,i=!0}else t.scrollOffset>0&&0===t.offset&&(t.scrollOffset=0);return i?this.scene.view.updatePie(this.pie):void 0},e.prototype.updatePieAfterScroll=function(){return 1},e}(Base_ChartElement);var Piechart_Navigator,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Navigator=function(t){"use strict";function e(t){this.chart=t,this.scene=t.scene,this.events=t.events}return __extends(e,t),e.prototype.animationOrder=250,e.prototype.paintOrder=30,e.prototype.updateOrder=650,e.prototype.onNewDataObject=function(){return 1},e.prototype.setPie=function(t,e,i){var n,s;for(Base_Helpers.isArray(t)||(t=[t]),this.scene.pendingAction=null,n=0;this.scene.length()>t.length;)this.scene.pop(),n++;for(;this.scene.length()>0&&this.scene.peek().id!==t[this.scene.length()-1];)this.scene.pop(),n++;for(;this.scene.length()<t.length;)s=new Piechart_Pie,s.id=t[this.scene.length()],s.offset=this.scene.length()+1===t.length?e:0,this.scene.push(s),this.scene.view.updatePie(s),n++;return s=this.scene.peek(),s.offset!==e?(this.scroll(s,e),n++):n&&s&&this.scene.view.updatePie(s),n?(this.chart.notifyChartUpdate(i),this.events.notifySceneChanges({pie:!0})):void 0},e.prototype.getPie=function(){var t,e,i,n,s;for(n=this.scene.stack,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.id);return s},e.prototype.getPieOffset=function(){return this.scene.peek().offset},e.prototype.goBack=function(t){return this.scene.length()>1?(this.scene.pop(),this.scene.pendingAction=null,this.updateAndNotifyCurrent(t)):void 0},e.prototype.goCenter=function(t){var e;return e=this.scene.peek(),e.offset>0&&this.scene.settings.interaction.others.centerGoesToPrevious?this.goPrevious(e,t):this.scene.length()>1?(this.scene.pop(),this.scene.pendingAction=null,this.updateAndNotifyCurrent(t)):void 0},e.prototype.drillDown=function(t,e){var i;return this.scene.pendingAction=null,i=new Piechart_Pie,i.id=t,i.offset=0,this.scene.push(i),this.updateAndNotifyCurrent(e)},e.prototype.goOthers=function(t,e){var i;return t.othersStack||(t.othersStack=[]),t.othersStack.push(t.offset),i=this.scene.view.scrollForward(t,t.offset+t.count),i||(this.scene.pendingAction="forward",this.scene.pendingOffset=null),this.events.notifySceneChanges({pie:!0}),this.chart.notifyChartUpdate(e)},e.prototype.goPrevious=function(t,e){var i;if(t.offset>0)return i=this.scene.view.scrollBackward(t),i||(this.scene.pendingAction="back",this.scene.pendingOffset=null),this.chart.notifyChartUpdate(e),this.events.notifySceneChanges({pie:!0})},e.prototype.scroll=function(t,e){var i;if(i=!0,t.offset>e){if(i=this.scene.view.scrollBackward(t,e),!i)return this.scene.pendingAction="back",this.scene.pendingOffset=e}else if(t.offset<e&&(i=this.scene.view.scrollForward(t,e),!i))return this.scene.pendingAction="forward",this.scene.pendingOffset=e},e.prototype.updateAndNotifyCurrent=function(t){var e;return e=this.scene.peek(),this.scene.view.updatePie(e),this.chart.notifyChartUpdate(t),this.events.notifySceneChanges({pie:!0})},e.prototype.expandSlice=function(t,e){var i,n;return n=t.pie,n!==this.scene.peek()?(this.chart.setSelection([]),this.goBack(e),!0):t===n.othersSlice?(this.chart.setSelection([]),this.goOthers(n,e),!0):t===n.previousSlice?(this.chart.setSelection([]),this.goPrevious(n,e),!0):(i=t.id,t.expandable&&this.scene.mainData.canExpand(i)?(this.chart.setSelection([]),this.drillDown(i,e),!0):!1)},e.prototype.onSceneChange=function(t){var e,i,n,s,o,r,a,l,h,c,u;if(i=!1,e=this.scene.peek(),t.changes.dataArrived)for(n=t.changes.dataArrivedIds,c=this.scene.pies,r=0,l=c.length;l>r;r++)s=c[r],n.hasOwnProperty(s.id)&&(s===e?(o="forward"===this.scene.pendingAction?this.scene.view.scrollForward(s,this.scene.pendingOffset):"back"===this.scene.pendingAction?this.scene.view.scrollBackward(s,this.scene.pendingOffset):this.scene.view.updatePie(s),o&&(this.scene.pendingAction=null,this.scene.pendingOffset=null),i=o):this.scene.view.updatePie(s),t.changes.pie=!0);if(t.changes.data)for(u=this.scene.stack,a=0,h=u.length;h>a;a++)s=u[a],(!s.data||s===e||t.changes.dataDeep)&&(s===e?(o="forward"===this.scene.pendingAction?this.scene.view.scrollForward(s,this.scene.pendingOffset):"back"===this.scene.pendingAction?this.scene.view.scrollBackward(s,this.scene.pendingOffset):this.scene.view.updatePie(s),o&&(this.scene.pendingAction=null,this.scene.pendingOffset=null),i=o):this.scene.view.updatePie(s),t.changes.pie=!0);return i?this.chart.notifyChartUpdate("data",!0):void 0},e}(Base_ChartElement);var Piechart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_InfoPopup=function(t){function e(t){this.chart=t,this.scene=t.scene,this.options=this.scene.settings,this.events=t.events,this.currentSlice=null,this.x=null,this.y=null,this.popup=new Base_InfoPopup(t)}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=15,e.prototype.updateOrder=1100,e.prototype.previewPointerMove=function(t){return this.onMove(t.x,t.y)},e.prototype.doAnimations=function(){return null!==this.x&&null!==this.y?this.onMove(this.x,this.y):void 0},e.prototype.previewPointerDown=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.previewPointerDrag=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onPointerOut=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onMove=function(t,e){var i,n;return this.x=t,this.y=e,this.options.info.enabled?(n=this.scene.findSliceAt(t,e,this.scene.settings.interaction.selection.tolerance),i=this.scene.findPieAt(t,e,this.scene.settings.interaction.selection.tolerance),i&&!n&&(n=i.getActiveSlice()),this.setCurrentObject(t,e,n)):void 0},e.prototype.setCurrentObject=function(t,e,i){var n;return i?(i!==this.currentSlice?(n=this.buildContents(i),this.popup.show(t,t,e,n)):this.popup.updateXY(t,t,e),this.currentSlice=i):(this.currentSlice=null,this.popup.hide())},e.prototype.buildContents=function(t){var e;return this.options.info.contentsFunction?(e=function(e){return function(i){return t===e.currentSlice?e.popup.updateContents(i):void 0}}(this),this.options.info.contentsFunction.call(this.scene.api,t.data,t,e)):t.label},e}(Base_ChartElement);var Piechart_PieView,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_PieView=function(t){function e(t){this.chart=t,this.scene=this.chart.scene,this.renderer=new Piechart_PieRenderer(t),this.animator=new Piechart_Animations(t),this.layout=new Piechart_PieLayout(t,this),this.builder=new Piechart_PieBuilder(t)}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=30,e.prototype.updateOrder=700,e.prototype.updatePie=function(t){return this.builder.updatePie(t)},e.prototype.scrollForward=function(t,e){return this.builder.scrollForward(t,e)},e.prototype.scrollBackward=function(t,e){return this.builder.scrollBackward(t,e)},e.prototype.onSceneChange=function(t){return this.renderer.onSceneChange(t)},e.prototype.doAnimations=function(t){var e,i,n,s,o;for((t.changes.settings||t.changes.pie||t.changes.bounds)&&(n=!1,i=this.scene.peek(),null!=i&&(n=this.layout.placeStack(i,t.context))),e=this.animator.doAnimations(t),s=0,o=e.length;o>s;s++)i=e[s],this.layout.placeLabels(i,t.context);return n||e?t.changes.position=!0:void 0},e.prototype.paintScene=function(t){return this.renderer.paintScene(t)},e.prototype.getMovement=function(t,e){var i,n,s,o,r,a,l,h,c,u;return l=e.x-e.dx-t.x,c=e.y-e.dy-t.y,h=e.x-t.x,u=e.y-t.y,i=Math.atan2(c,l),n=Math.atan2(u,h),i-n>Math.PI&&(n+=2*Math.PI),n-i>Math.PI&&(i+=2*Math.PI),a=(n-i)/(t.currentEndAngle-t.currentStartAngle),s=Math.sqrt(l*l+c*c),o=Math.sqrt(h*h+u*u),r=o-s,[a,r]},e.prototype.findPieAt=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y;for(n=this.scene.currentInnerRadius,l=this.scene.currentRadius-n,a=g=y=this.scene.pies.length-1;g>=0;a=g+=-1)if(h=this.scene.pies[a],p=h.x,m=h.y,c=h.currentInnerRadius*l+n,u=h.currentRadius*l+n,f=Math.max(0,c-i),f=u+i,d=f*f,o=t-p,r=e-m,s=o*o+r*r,h.background&&d>=s)return h;return null},e.prototype.findSliceAt=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A;for(o=this.scene.currentInnerRadius,m=this.scene.currentRadius-o,x=this.scene.settings.interaction.selection.cutoutDistance,f=T=B=this.scene.pies.length-1;T>=0;f=T+=-1)if(g=this.scene.pies[f],!(g.background||(k=g.x,M=g.y,y=g.currentInnerRadius*m+o,_=g.currentRadius*m+o,P=Math.max(0,y-i),v=P*P,P=_+i+x,b=P*P,d=t-k,p=e-M,h=d*d+p*p,v>h||h>b)))for(l=Math.sqrt(h),d/=l,p/=l,n=g.currentStartAngle,s=g.currentEndAngle-n,n+=s*g.scrollOffset,a=Math.cos(n),w=Math.sin(n),A=g.allSlices,D=0,L=A.length;L>D;D++)if(C=A[D],r=a,S=w,n+=s*C.currentFraction,a=Math.cos(n),w=Math.sin(n),l>=y+C.cutoutDistance&&l<=_+C.cutoutDistance){if(c=S*d-r*p,u=w*d-a*p,0>c&&u>0)return C;if(Math.abs(s*C.currentFraction)>Math.PI&&(0>c&&0>u||c>0&&u>0))return C}return this.findLabelAt(t,e,i)[0]},e.prototype.findLabelAt=function(t,e){var i,n,s,o,r,a,l,h,c,u,d;for(i=l=u=this.scene.pies.length-1;l>=0;i=l+=-1)for(s=this.scene.pies[i],r=t-s.x,a=e-s.y,d=s.allSlices,h=0,c=d.length;c>h;h++){if(o=d[h],o.currentLabel&&(n=o.currentLabel,n.visible&&n.x-n.hwidth<=r&&n.x+n.hwidth>=r&&n.y-n.hheight<=a&&n.y+n.hheight>=a))return[o,n];if(o.currentInsideLabel&&(n=o.currentInsideLabel,n.visible&&n.x-n.hwidth<=r&&n.x+n.hwidth>=r&&n.y-n.hheight<=a&&n.y+n.hheight>=a))return[o,n]}return[null,null]},e}(Piechart_View);var Facetchart_FacetAxis;Facetchart_FacetAxis=function(){function t(t,e){this.chart=t,this.facet=e,this.scene=this.chart.scene,this.options=this.scene.settings.facetAxis,this.currentItemWidth=1,this.currentItemHeight=1,this.panel=new Base_ChartPanel,this.panel.side="bottom",this.panel.packingOrder=100}return t.settings={enabled:!0,size:40,defaultUnitWidth:50,maxUnitWidth:400,labels:{enabled:!0,angle:0,lineSpacing:.2,interLabelSpacing:.6,textStyle:{fillColor:"#000000",font:"12px Arial"},margin:4,padding:0}},t.prototype.getPanel=function(){return this.options.enabled&&this.options.size>0?(this.panel.desiredHeight=this.options.size,this.panel.visible=!0,this.scene.bottomAxisSize=this.options.size):(this.panel.desiredHeight=0,this.panel.visible=!1,this.scene.bottomAxisSize=0),this.panel},t.prototype.paint=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b;if(n.length>1&&this.panel.visible&&(a=t.context,p=t.labelRenderer,s=e+i,u=n[1]-n[0],m=this.panel.top,c=this.panel.bottom-this.panel.top,this.options.labels.enabled)){for(f=!1,(Math.abs(1-this.currentItemWidth/u)>.01||Math.abs(1-this.currentItemHeight/c)>.01)&&(this.currentItemWidth=u,this.currentItemHeight=c,f=!0),t.changes.settings&&(f=!0),this.layout=new Base_LabelLayoutBase(a,this.options.labels),_=this.facet.items,b=[],l=y=0,v=_.length;v>y;l=++y)h=_[l],g=n[l],h.label?(null===h.currentLabel||f||h.currentLabel.text!==h.label?(d=this.buildLabel(h.label,u,c),h.currentLabel=d):d=h.currentLabel,o=Math.max(g+1,e),r=Math.min(g+u-2,s),Base_Graphics.pushClip(a,o,m,r-o,c),p.paintWithStyle(a,g+d.x,m+d.y,1,d,this.options.labels),b.push(Base_Graphics.popClip(a))):b.push(h.currentLabel=null);return b}},t.prototype.buildLabel=function(t,e,i){var n,s,o,r,a,l,h,c;return r=new Base_Label,r.text=t,s=r.angle=this.layout.angle,n=this.options.labels.align,n?r.align=n:n=r.align=s>0?"left":0>s?"right":"center",l=e/2,c=Math.sin(s),o=Math.cos(s),a=function(t){var n,r,a,h,u;return h=t*o,0!==c?(a=i-2*t*o,u=Math.max(0,a/Math.abs(c))):u=i>=2*t?e:0,s>0?(n=l+u/2*o,r=t*o+u/2*c):0>s?(n=l-u/2*o,r=t*o-u/2*c):(n=l,r=t),[n,r,o,c,u]},h=this.layout.fitLabelInRect(r,n,n,a),r},t}();var Facetchart_Selection,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Selection=function(t){function e(t){this.chart=t,this.scene=t.scene,this.events=t.events,this.dragPointers={}}return __extends(e,t),e.prototype.animationOrder=2e3,e.prototype.paintOrder=15,e.prototype.updateOrder=1e3,e.settings={enabled:!0,tolerance:2},e.prototype.scene=null,e.prototype.events=null,e.prototype.currentItem=null,e.prototype.currentFacet=null,e.prototype.draggedLabelItem=null,e.prototype.draggedLabel=null,e.prototype.hoverEvent=null,e.prototype.doAnimations=function(){return this.hoverEvent?this.onPointerMove(this.hoverEvent):void 0},e.prototype.previewPointerDrag=function(t){return this.hoverEvent=t},e.prototype.onPointerMove=function(t){var e,i,n,s,o,r,a;if(this.hoverEvent=t,i=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),i&&(t.cursor="pointer"),e=this.chart.renderer.hitTest(t.x,t.y),!e&&this.chart.legend&&(n=this.chart.legend.findItemAt(t.x,t.y)))for(o=this.scene.settings._computedSeries,s=r=0,a=o.length;a>r;s=r+=1)n===o[s]&&(e={seriesIndex:s},t.cursor="pointer");return(!e!=!this.scene.hoverSeriesItem||e&&(e.seriesIndex!==this.scene.hoverSeriesItem.seriesIndex||e.x0!==this.scene.hoverSeriesItem.x0))&&(this.scene.hoverSeriesItem=e,t.changes.hover=!0),this.switchcurrentItem(i,t)},e.prototype.onPointerOut=function(t){return this.hoverEvent=this.scene.hoverSeriesItem=null,this.events.notifySceneChanges({selection:!0}),this.switchcurrentItem(null,t)},e.prototype.onPointerDown=function(t){var e;return this.onPointerMove(t),e=this.scene.findLabelAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),this.draggedLabelItem=e[0],this.draggedLabel=e[1],this.draggedLabel?t.consumed=!0:void 0},e.prototype.onPointerUp=function(t){return this.draggedLabel?(this.draggedLabel=null,t.consumed=!0):void 0},e.prototype.onPointerCancel=function(){return this.draggedLabel?this.draggedLabel=null:void 0},e.prototype.onPointerDrag=function(t){var e;return this.draggedLabel?(e=this.draggedLabel,e.userPlaced=!0,e.x+=t.dx,e.y+=t.dy,t.consumed=!0,t.changes.label=!0):void 0},e.prototype.onClick=function(t){var e,i;return e=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickItem=e,t.clickFacet=e?e.facet:null,t.consumed=!0,e&&(t.cursor="pointer"),i=this.chart.notifyClick(t),i.defaultPrevented?void 0:this.updateSelection(t,e,!1)},e.prototype.onRightClick=function(t){var e,i;return e=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickItem=e,t.clickFacet=e?e.facet:null,i=this.chart.notifyRightClick(t),e&&(t.cursor="pointer"),i.defaultPrevented?t.consumed=!0:void 0},e.prototype.onDoubleClick=function(t){var e;return e=this.scene.findItemAt(t.x,t.y,this.scene.settings.interaction.selection.tolerance),t.clickItem=e,e&&(t.cursor="pointer"),this.chart.notifyDoubleClick(t),t.consumed=!0},e.prototype.updateSelection=function(t,e,i){if(this.scene.settings.interaction.selection.enabled){if(!(t.shiftKey||e&&!e.selected))return this.setSelection([]);if(e&&t.shiftKey||i&&e.selected){if(!e.selected)return this.scene.selection.push(e),e.selected=!0,this.setSelection(this.scene.selection,this.scene.selectionIds,!0)}else if(e)return this.setSelection([e])}},e.prototype.switchcurrentItem=function(t,e){return t!==this.currentItem?(e.changes.current=!0,this.scene.hoverItem&&(this.scene.hoverItem.active=!1),this.scene.hoverItem=t,this.currentItem=t,this.currentFacet=null,this.currentItem&&(this.scene.hoverItem.active=!0,e.hoverItem=this.currentItem),this.events.notifySceneChanges({items:!0}),this.chart.notifyHoverChanged(e)):void 0},e.prototype.onSceneChange=function(t){return t.changes.items&&this.updateSelectionIds()?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(null)):void 0},e.prototype.updateSelectionIds=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f;for(n=[],d=this.scene.selectionIds,s=0,l=d.length;l>s;s++)for(e=d[s],p=this.scene.activeFacet,o=0,h=p.length;h>o;o++)for(t=p[o],f=t.items,r=0,c=f.length;c>r;r++)if(i=f[r],i.id===e){n.push(i);break}if(n.length>0)for(a=0,u=n.length;u>a;a++)i=n[a],i.selected||(i.selected=!0,this.scene.selection.push(i)),Base_Helpers.removeFromArray(this.scene.selectionIds,i.id);return n.length>0},e.prototype.setSelection=function(t,e,i,n){var s,o,r,a,l,h,c,u;if(null==e&&(e=[]),null==i&&(i=!1),null==n&&(n="user"),this.scene.selectionIds=e,i)o=!0;else{for(u=this.scene.selection,a=0,h=u.length;h>a;a++)r=u[a],Base_Helpers.arrayContains(t,r)||(r.selected=!1,o=!0);for(l=0,c=t.length;c>l;l++)r=t[l],r.selected||(r.selected=!0,o=!0);this.scene.selection=t}return s=this.updateSelectionIds(),o||(o=s),o?(this.events.notifySceneChanges({selection:!0}),this.chart.notifySelectionChanged(n)):void 0},e}(Base_ChartElement);var Facetchart_Facet,Facetchart_Item,Facetchart_ItemValue,Facetchart_Scene,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Facet=function(){function t(){this.id=null,this.data=null,this.items=[],this.parentItem=null,this.activeItemId=null,this.offset=0,this.count=0,this.totalCount=0,this.from=0,this.to=0,this.left=0,this.right=1,this.opacity=1}return t.prototype.getActiveItem=function(){var t,e,i,n;if(!this.activeItemId)return null;for(n=this.items,e=0,i=n.length;i>e;e++)if(t=n[e],t.id===this.activeItemId)return t;return null},t}(),Facetchart_Item=function(){function t(t,e,i,n){this.facet=t,this.id=e,this.index=i,this.data=n,this.expandable=!0,this.selected=!1,this.active=!1,this.url=null,this.values=[],this.innerFacet=null,this.label=null,this.currentLabel=null}return t}(),Facetchart_ItemValue=function(){function t(t,e,i,n){this.facet=t,this.id=e,this.index=i,this.data=n}return t.prototype.value=0,t.prototype.fillColor=null,t.prototype.lineColor=null,t.prototype.lineWidth=1,t.prototype.label=null,t.prototype.previewContents=!1,t.prototype.previewData=null,t.prototype.currentLabel=null,t}(),Facetchart_Scene=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t),this.data=null,this.stack=[],this.selection=[],this.selectionIds=[],this.activeFacet=null,this.hoverItem=null}return __extends(e,t),e.prototype.xToPosition=function(t){var e,i,n,s;return e=this.activeFacet,i=this.x0+e.left*this.width,s=this.x0+e.right*this.width,n=e.from+(t-i)/(s-i)*(e.to-e.from)},e.prototype.positionToX=function(t){var e,i,n;return e=this.activeFacet,i=this.x0+e.left*this.width,n=this.x0+e.right*this.width,i+(t-e.from)*(n-i)/(e.to-e.from)},e.prototype.timeToX=function(t){return this.positionToX(t)},e.prototype.xToTime=function(t){return this.xToPosition(t)},e.prototype.length=function(){return this.stack.length},e.prototype.peek=function(){return 0===this.stack.length?null:this.stack[this.stack.length-1]},e.prototype.push=function(t,e){var i,n,s,o,r,a,l,h;if(o=this.peek(),o&&!e)for(l=o.items,r=0,a=l.length;a>r;r++)if(s=l[r],s.data.__id===t.id){e=s;break}return e?(t.parentItem=e,e.innerFacet=t,h=this.getItemPlacement(e),i=h[0],n=h[1],t.left=i,t.right=n,o.activeItemId=e.id):o&&(o.activeItemId=null),this.stack.push(t),this.activeFacet=t},e.prototype.pop=function(){var t;return this.stack.length>0&&(t=this.stack.pop(),t.parentItem&&(t.parentItem.facet.activeItemId=null)),this.activeFacet=this.stack.length>0?this.peek():null,this.activeFacet},e.prototype.getParent=function(t){var e,i,n,s,o;for(i=null,o=this.stack,n=0,s=o.length;s>n;n++){if(e=o[n],e===t)return i;i=e}return null},e.prototype.getChild=function(t){var e,i,n,s,o;for(i=null,o=this.stack,n=0,s=o.length;s>n;n++){if(e=o[n],i===t)return e;i=e}return null},e.prototype.updateLinks=function(t){var e,i,n,s,o,r,a,l,h,c;if(n=this.getParent(t),e=this.getChild(t),n&&!t.parentItem)for(l=n.items,s=0,r=l.length;r>s;s++)if(i=l[s],i.id===t.id){t.parentItem=i,n.activeItemId=i.id;break}if(e&&!e.parentItem){for(h=t.items,c=[],o=0,a=h.length;a>o;o++){if(i=h[o],i.id===e.id){e.parentItem=i,t.activeItemId=i.id;break}c.push(void 0)}return c}},e.prototype.getItemPlacement=function(t){var e,i,n,s,o,r;return n=t.facet,s=t.index,i=n.to-n.from,e=n.from,o=(s-e)/i,r=(s-e+1)/i,[n.left+o*(n.right-n.left),n.left+r*(n.right-n.left)]},e.prototype.getFacetPlacementFromItem=function(t,e,i){var n,s,o,r,a,l,h;return o=t.facet,r=t.index,a=r+1,n=(r-o.from)/(o.to-o.from),s=(a-o.from)/(o.to-o.from),l=e-n*(e-i)/(n-s),h=l+(e-i)/(n-s),[l,h]},e.prototype.findFacetAt=function(){return null},e.prototype.findItemAt=function(t,e){var i,n;return i=this.activeFacet,this.xyInChart(t,e)&&i?(n=Math.floor(this.xToPosition(t)),n>=i.offset&&n<i.offset+i.count?i.items[n-i.offset]:null):null},e.prototype.findLabelAt=function(){return[null,null]},e}(Linearchart_Scene);var Facetchart_Scrolling,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Scrolling=function(t){"use strict";function e(t){e.__super__.constructor.call(this,t),this.facet=null,this.animatingFacet=null,this.leftAnimator=null,this.rightAnimator=null,this.activePieReady=!1}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=10,e.prototype.updateOrder=1100,e.prototype.setState=function(t,e,i,n){var s,o,r,a,l;if(Base_Helpers.isArray(t)||(t=[t]),0===t.length)return void this.chart.error("setPie - array needs at least one item.");for(s=0;this.scene.length()>t.length;)this.scene.pop(),s++;for(;this.scene.length()>0&&this.scene.peek().id!==t[this.scene.length()-1];)this.scene.pop(),s++;for(;this.scene.length()<t.length;)a=t[this.scene.length()],this.drillDown(a,null),s++;return o=this.scene.peek(),this.facet=o,s&&this.goToPositionDragging(o.from,o.to),o.offset!==e||i&&o.count!==i?(r=e,l=i>0?r+i:e+o.count,s?(this.goToPositionDragging(r,l),this.animateFillChart()):this.goToPosition(r,l,!0)):s&&this.animateFillChart(),this.chart.notifyChartUpdate(n),s?this.events.notifySceneChanges({navigation:!0}):void 0},e.prototype.getState=function(){var t;return[function(){var e,i,n,s;for(n=this.scene.stack,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.id);return s}.call(this),this.scene.peek().offset,this.scene.peek().count]},e.prototype.goUp=function(t){var e;return this.scene.length()>1?(this.scene.pop(),this.facet=e=this.scene.peek(),this.goToPositionDragging(e.from,e.to),this.animateFillChart(),this.events.notifySceneChanges({navigation:!0}),this.updateAndNotifyCurrent(t)):this.goToPosition(0,this.getMaxItems(),!0)},e.prototype.getMaxItems=function(){var t;return t=this.scene.width/this.scene.settings.facetAxis.defaultUnitWidth,this.facet.data.totalCount&&(t=Math.min(t,this.facet.data.totalCount)),t},e.prototype.drillDown=function(t,e){var i;return this.stopAnimations(),i=new Facetchart_Facet,i.id=t,this.scene.push(i),this.chart.builder.updateFacet(i),this.facet=i,this.currentFrom=i.from,this.currentTo=i.to,this.animateFillChart(),this.events.notifySceneChanges({navigation:!0}),this.updateAndNotifyCurrent(e)},e.prototype.updateAndNotifyCurrent=function(t){return this.chart.builder.updateFacet(this.facet),this.chart.notifyChartUpdate(t)},e.prototype.onSceneChange=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p;if(e=this.facet,t.changes.settings&&t.changes.settingsChanges.series)for(t.changes.items=!0,u=this.scene.stack,o=0,l=u.length;l>o;o++)i=u[o],this.chart.builder.rebuildValues(i);if(t.changes.dataArrived||t.changes.data){if(this.activePieReady=!1,t.changes.dataArrived)for(n=t.changes.dataArrivedIds,d=this.scene.stack,r=0,h=d.length;h>r;r++)s=d[r],n.hasOwnProperty(s.id)&&(this.chart.builder.updateFacet(s,t),t.changes.items=!0,this.activePieReady||(this.activePieReady=s===e&&!s.loading));if(t.changes.data)for(p=this.scene.stack,a=0,c=p.length;c>a;a++)i=p[a],(!i.data||i===e||t.changes.dataDeep)&&(i.rebuild=!0,this.chart.builder.updateFacet(i,t),t.changes.items=!0,this.activePieReady||(this.activePieReady=i===e&&!i.loading))}return this.activePieReady&&this.scene.width>0?(this.activePieReady=!1,this.currentFrom===this.currentTo&&e.from<e.to&&(this.currentFrom=e.from,this.currentTo=e.to,this.animateFillChart()),this.chart.notifyChartUpdate(null)):void 0},e.prototype.doAnimations=function(t){var i,n,s,o,r,a,l;for(n=this.facet,this.animatingFacet?(n.left=this.leftAnimator.get(t.timeStamp),n.right=this.rightAnimator.get(t.timeStamp),n.opacity=this.opacityAnimator.get(t.timeStamp),i=this.leftAnimator.finished(t.timeStamp)||this.rightAnimator.finished(t.timeStamp),i&&(this.animatingFacet=null,this.leftAnimator=null,this.rightAnimator=null,this.opacityAnimator=null),this.events.notifySceneChanges({position:!0}),t.animating=!0):(o=n.right-n.left,s=Math.min(1,Math.abs(o)),n.opacity=1),this.layoutFacets(),l=this.scene.stack,r=0,a=l.length;a>r;r++)n=l[r],this.chart.builder.updateFacet(n);return e.__super__.doAnimations.call(this,t)},e.prototype.xyInArea=function(t,e){return this.scene.xyInChartOrBottom(t,e)},e.prototype.xyToPosition=function(t){return this.scene.xToPosition(t)},e.prototype.onZoomOut=function(t,i,n,s){return null==s&&(s=null),e.__super__.onZoomOut.call(this,t,i,n,s)},e.prototype.onZoomIn=function(t,i,n,s){return null==s&&(s=null),e.__super__.onZoomIn.call(this,t,i,n,s)},e.prototype.onScroll=function(t,i,n){return e.__super__.onScroll.call(this,t,i,n)},e.prototype.onGoHome=function(t,e){return[0,e-t,0]},e.prototype.onStartDragging=function(){return this.stopAnim()},e.prototype.onSnapWhileDragging=function(t,e){var i,n,s,o,r,a,l,h,c,u;return s=e-t,n=(t+e-(this.dragStartFrom+this.dragStartTo))/2,r=0,l=1,c=this.facet.totalCount,this.dragStartFrom<=0&&0>n?this.scene.stack.length>1?(r=Math.min(.19,-n/s/3),l=1-4*r,t=this.dragStartFrom,e=this.dragStartTo):(u=s*Math.pow(3,-n/s),a=-n/5,c>0&&(u=Math.min(c,u)),t=-a,e=u+a):0>t?(o=Math.max(-s,t/2),t=o,e=o+s):c>0&&e>c&&(i=c,h=i+Math.min(s,(e-i)/2),t=h-s,e=h),0>t&&(r-=t*(l-r)/(e-t),t=0),this.facet.left=r,this.facet.right=l,[t,e]},e.prototype.onSnapAfterDragging=function(t,e,i,n,s){var o;return this.shouldZoomOut()?(this.goUp("user"),null):(o=this.snap(t,e,i,n,s),t=o[0],e=o[1],this.animateFillChart(),this.chart.notifyChartUpdate("user"),[t,e])},e.prototype.shouldZoomOut=function(){return this.facet.right-this.facet.left<.5&&this.scene.stack.length>1&&0===this.dragStartFrom},e.prototype.onPositionChanged=function(t,e){var i;return i=this.facet,i.from=t,i.to=e,this.chart.builder.updateFacet(i),this.events.notifySceneChanges({position:!0})},e.prototype.onAnimationDone=function(){return this.chart.notifyChartUpdate(null),this.chart.notifyAnimationDone()},e.prototype.snap=function(t,e,i,n,s){var o,r,a;return o=this.scene.width/(e-t),r=Math.min(this.scene.settings.facetAxis.maxUnitWidth,o),this.facet.totalCount>0&&(r=Math.max(r,this.scene.width/this.facet.totalCount)),s=o/r,t=i+(t-i)*s,e=i+(e-i)*s,t=Math.round(t),e=Math.round(e),0>t?(e-=t,t=0):this.facet.totalCount>0&&e>this.facet.totalCount&&(a=Math.max(0,this.facet.totalCount-(e-t)),e=e-t+a,t=a),[t,e]},e.prototype.animateFillChart=function(){return 0!==this.facet.left||1!==this.facet.right||this.animatingFacet!==this.facet?(this.animatingFacet=this.facet,this.leftAnimator=new Base_Animator(this.facet.left,0,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.rightAnimator=new Base_Animator(this.facet.right,1,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.opacityAnimator=new Base_Animator(this.facet.opacity,1,this.scene.settings.interaction.animation.scrollDuration,"<>"),this.events.notifySceneChanges({animating:!0})):void 0},e.prototype.stopAnim=function(){return this.animatingFacet=null,this.leftAnimator=null,this.rightAnimator=null},e.prototype.layoutFacets=function(){var t,e,i,n,s,o,r;for(t=this.facet,i=t.left>0||t.right<1?.5:0,e=s=o=this.scene.stack.length-2;s>=0;e=s+=-1)n=this.scene.stack[e],t.parentItem&&(r=this.scene.getFacetPlacementFromItem(t.parentItem,t.left,t.right),n.left=r[0],n.right=r[1]),n.opacity=i,i=n.left>0||n.right<1?.2:0,t=n;return this.shouldZoomOut()?(this.facet.opacity=.5,this.facet.parentItem.facet.opacity=1):this.facet.opacity=1},e}(Linearchart_Scrolling);var Facetchart_Builder;Facetchart_Builder=function(){"use strict";function t(t){this.chart=t,this.scene=t.scene,this.loading=!1}return t.prototype.updateFacet=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;if(o=this.chart.getData("default"),s=o.getPieData(t.id),t.data=s,!s)return t.loading=!0,void o.requestPieData(t.id,Math.floor(t.from));if(i=!1,!this.scene.width||t.from<t.to&&!t.rebuild||(t.rebuild=!1,u=Math.max(1,Math.floor(this.scene.width/this.scene.settings.facetAxis.maxUnitWidth)),c=Math.max(1,Math.floor(this.scene.width/this.scene.settings.facetAxis.defaultUnitWidth)),h=s.totalCount?Math.min(s.totalCount,c):c,t.offset=Math.floor(t.from),t.count=0,t.to=t.from+Math.round(h),t.items=[]),s.totalCount&&(t.totalCount=s.totalCount),a=Math.max(0,Math.floor(t.from)),m=Math.ceil(t.to),f=s.values.length+s.offset,r=s.offset,t.loading=!1,r>a&&(a=r,o.requestLessPieData(t.id),t.loading=!0),m>f&&(m=f,s.done||(o.requestMorePieData(t.id),t.loading=!0)),n=t.offset+t.items.length,(m<t.offset||a>n)&&(t.offset=a,t.items=[],n=a),a>t.offset)t.items=t.items.slice(a-t.offset),t.offset=a;else if(a<t.offset){for(d=[],l=g=a,v=t.offset-1;v>=g;l=g+=1)d.push(this.buildItem(t,s,l));t.items=d.concat(t.items),t.offset=a,i=!0}if(n>m)t.items=t.items.slice(0,m-t.offset);else if(m>n){for(l=y=n,_=m-1;_>=y;l=y+=1)t.items.push(this.buildItem(t,s,l));i=!0}return t.count=t.items.length,i&&(e?(e.changes.items=!0,e.changes.changedItems||(e.changes.changedItems={}),e.changes.changedItems[t.id]=!0):(p=[],p[t.id]=!0,this.chart.events.notifySceneChanges({items:!0,changedItems:p}))),this.scene.updateLinks(t)},t.prototype.rebuildValues=function(t){var e,i,n,s,o;for(s=t.items,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(this.updateItem(e));return o},t.prototype.buildItem=function(t,e,i){var n;return e=e.values[i-e.offset],n=new Facetchart_Item(t,e.__id,i,e),this.updateItem(n),n},t.prototype.updateItem=function(t){var e,i,n,s,o,r;for(n=[],r=this.scene.settings._computedSeries,s=0,o=r.length;o>s;s++)e=r[s],i=new Facetchart_ItemValue(t.facet,t.id,t.index,t.data),i.value=t.data?this.getSeriesValue(t.data,e):null,n.push(i);return t.values=n},t.prototype.getSeriesValue=function(t,e){var i,n;return n=e.data.valueFunction,n?parseFloat(n(t)):(i=e.data.field||"value",parseFloat(t[i]))},t.prototype.buildPreviewData=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f;if(s=t.id,r=this.scene.mainData,i=r.getPieData(s),o=null,i)if(i.offset>0)r.requestLessPieData(t.id,0,i.offset);else{for(o=[],a=0,f=i.values,c=0,d=f.length;d>c;c++)h=f[c],l=this.getSeriesValue(h,e),o.push(l),a+=l;
if(a>0)for(a=1/a,n=u=0,p=o.length;p>u;n=++u)h=o[n],o[n]=h*a;else o=null}else t.expandable&&r.canExpand(s)&&r.requestPieData(t.id,0);return o},t}();var Facetchart_Styles,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Styles=function(t){function e(t){this.chart=t,this.scene=t.scene}return __extends(e,t),e.prototype.animationOrder=200,e.prototype.paintOrder=20,e.prototype.updateOrder=900,e.prototype.doAnimations=function(t){var e,i;if((t.changes.settings||t.changes.items||t.changes.selection||t.changes.navigation)&&(e=this.scene.activeFacet)){for(this.computeFacetStyleRec(e),i=[];e&&e.parentItem;)e=e.parentItem.facet,i.push(this.computeFacetStyleRec(e));return i}},e.prototype.computeFacetStyleRec=function(t){var e,i,n,s,o,r;for(this.computeFacetStyle(t),o=t.items,r=[],e=n=0,s=o.length;s>n;e=++n)i=o[e],this.computeItemStyle(t,i),r.push(i.innerFacet?this.computeFacetStyleRec(i.innerFacet):void 0);return r},e.prototype.computeFacetStyle=function(){return 1},e.prototype.computeItemStyle=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m;if(s=this.scene.settings._computedSeries,Base_Helpers.extend(e,this.scene.settings.items.style),e.data.style&&Base_Helpers.extend(e,e.data.style),e.id===e.facet.activeItemId)for(d=e.values,i=r=0,h=d.length;h>r;i=++r)o=d[i],o.fillColor=null,o.lineColor=null;else for(p=e.values,i=a=0,c=p.length;c>a;i=++a)o=p[i],Base_Helpers.extend(o,s[i].style);if(this.scene.settings.items.styleFunction?(this.scene.settings.items.styleFunction(e,e.data),e.label&&!Base_Helpers.isString(e.label)&&(e.label=""+e.label)):e.data.name&&(e.label=e.data.name),e.id!==e.facet.activeItemId){for(f=e.values,m=[],i=l=0,u=f.length;u>l;i=++l)o=f[i],n=s[i],n.styleFunction&&n.styleFunction(o,e.data),m.push(o.previewContents?o.previewData=this.chart.builder.buildPreviewData(e,n):o.previewData=null);return m}return o.previewData=null},e}(Base_ChartElement);var Itemschart_ItemsStyle;Itemschart_ItemsStyle=function(){function t(t){this.styleSettings=t,this.time=null,this.nodeClasses=Base_Helpers.arrayToMap(this.styleSettings.nodeClasses,"className"),this.linkClasses=Base_Helpers.arrayToMap(this.styleSettings.linkClasses,"className"),this.nodeRules=this.sortRules(this.styleSettings.nodeRules),this.linkRules=this.sortRules(this.styleSettings.linkRules),this.itemBase=this.styleSettings.item,this.nodeLabelBase=this.styleSettings.nodeLabel,this.linkLabelBase=this.styleSettings.linkLabel}return t.settings={nodeRules:{},linkRules:{},nodeClasses:[],linkClasses:[],node:{fillColor:"#c7dae0",lineColor:null,lineWidth:null,radius:30,shadowColor:null,lineDash:null},link:{fillColor:"#333",shadowColor:null,fromDecoration:null,toDecoration:null,label:null,radius:1,length:1,strength:1,lineDash:null,toPieValue:0,toPieColor:null},item:{align:"center",aspectRatio:4,borderRadius:1e3,textStyle:{fillColor:"black",font:"12px Arial"},backgroundStyle:{fillColor:"rgba(255,255,255,0.7)"}},linkLabel:{scaleWithZoom:!0,scaleWithSize:!1,padding:0,margin:0,align:"center",aspectRatio:4,borderRadius:1e3,textStyle:{fillColor:"black",font:"12px Arial"},backgroundStyle:{fillColor:"#FFF",lineColor:"gray"}},nodeLabel:{scaleWithZoom:!1,scaleWithSize:!0,align:"center",aspectRatio:4,borderRadius:1e3,padding:0,textStyle:{fillColor:"black",font:"12px Arial"},backgroundStyle:{fillColor:"rgba(255,255,255,0.7)"}},nodeLocked:{},nodeExpanded:{},nodeFocused:{fillColor:"#09c"},nodeNotLoaded:{fillColor:"#fff"},nodeHovered:{shadowOffsetX:0,shadowOffsetY:0,shadowBlur:12,shadowColor:"blue"},linkHovered:{shadowOffsetX:0,shadowOffsetY:0,shadowBlur:12,shadowColor:"blue"},removedColor:"#EEE",nodeBackground:{},nodeDetailMinZoom:.2,nodeDetailMinSize:5,linkDetailMinZoom:.5,linkDetailMinSize:12,linkDecorationScale:4,linkDecorationMinSize:4,nodeLabelScaleBase:30,linkLabelScaleBase:1,scaleObjectsWithZoom:!0},t.prototype.updateItems=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f;if(this.isIncremental=null!=i?i:!1,this.linksUpdated={},t.changes.style){for(this.isIncremental=!1,d=e.nodes(),l=0,c=d.length;c>l;l++)r=d[l],e.touchNode(r);for(p=e.links(),h=0,u=p.length;u>h;h++)s=p[h],e.touchLink(s)}a=e.modifiedNodes,o=e.modifiedLinks;for(n in a)r=a[n],this.updateNode(r);if(o){for(n in o)s=o[n],this.updateLink(s),this.linksUpdated[s.id]=!0;if(i){f=[];for(n in a)r=a[n],f.push(function(){var t,e,i,n;for(i=r.links,n=[],t=0,e=i.length;e>t;t++)s=i[t],this.linksUpdated[s.id]?n.push(void 0):(this.updateLink(s),n.push(this.linksUpdated[s.id]=!0));return n}.call(this));return f}}},t.prototype.postprocessItems=function(t){var e,i,n,s,o,r,a;for(e=t.currentItems,r=t.items,a=[],s=0,o=r.length;o>s;s++)n=r[s],i=new Base_Label(this.itemBase),Base_Helpers.extendCopy(i,n),i.data=n,null!=i.text&&(i.text=i.text.toString()),a.push(e.push(i));return a},t.prototype.sortRules=function(t){var e,i,n;return i=function(){var i;i=[];for(e in t)n=t[e],i.push(e);return i}(),i.sort(),function(){var n,s,o;for(o=[],n=0,s=i.length;s>n;n++)e=i[n],o.push(t[e]);return o}()},t.prototype.updateNode=function(t){var e,i,n,s,o,r,a;if(o=this.styleSettings,e=t.hovered,t.radius||(t.radius=10),t.label=null,Base_Helpers.extend(t,o.node),t.labelStyle=this.nodeLabelBase,t.userLock&&Base_Helpers.extend(t,o.nodeLocked),t.expanded&&Base_Helpers.extend(t,o.nodeExpanded),t.focused&&Base_Helpers.extend(t,o.nodeFocused),t.background&&Base_Helpers.extend(t,o.nodeBackground),t.data.loaded||Base_Helpers.extend(t,o.nodeNotLoaded),t.data){if(null!=t.data.error&&(t.label=t.data.error,t.fillColor="red"),t.data.type&&(t.display=t.data.type),t.data.style&&Base_Helpers.extend(t,t.data.style),this.applyStyleRules(t,this.nodeRules),t.data.className)for(s=this.getClassSequence(t.data.className,this.nodeClasses),r=0,a=s.length;a>r;r++)i=s[r],Base_Helpers.extend(t,this.styleSettings.nodeClasses[i].style);t.labelStyle!==this.nodeLabelBase&&(n=Base_Helpers.realClone(this.nodeLabelBase),Base_Helpers.extendDeep(n,t.labelStyle),t.labelStyle=n)}return t.removed&&(t.fillColor=this.styleSettings.removedColor),e&&Base_Helpers.extend(t,o.nodeHovered),!0},t.prototype.updateLink=function(t){var e,i,n,s,o,r;if(Base_Helpers.extend(t,this.styleSettings.link),t.label=null,t.labelStyle=this.linkLabelBase,t.radius=1,e=t.hovered||t.from.hovered||t.to.hovered,t.data.style&&Base_Helpers.extend(t,t.data.style),this.applyStyleRules(t,this.linkRules),t.data.className)for(s=this.getClassSequence(t.data.className,this.linkClasses),o=0,r=s.length;r>o;o++)i=s[o],Base_Helpers.extend(t,this.styleSettings.linkClasses[i].style);return t.labelStyle!==this.linkLabelBase&&(n=Base_Helpers.realClone(this.linkLabelBase),Base_Helpers.extendDeep(n,t.labelStyle),t.labelStyle=n),e&&(Base_Helpers.extend(t,this.styleSettings.linkHovered),t.from.hovered&&(t.toPieColor=t.fillColor)),t.removed?t.fillColor=this.styleSettings.removedColor:void 0},t.prototype.applyStyleRules=function(t,e){var i,n,s,o;for(o=[],n=0,s=e.length;s>n;n++)i=e[n],o.push(i(t));return o},t.prototype.getClassSequence=function(t,e){var i,n,s,o,r;for(t=t.replace(/^\s+|\s+$/g,"").split(/\s+/g),n=[],o=0,r=t.length;r>o;o++)i=t[o],s=e[i],null!=s?n.push(s.index):this.chart.error("class "+i+" undefined");return n.sort(function(t,e){return t-e})},t}();var Base_Toolbar,Base_ToolbarPanel,ToolbarItemNames,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ToolbarItemNames={},Base_Toolbar=function(t){"use strict";function e(t,e){this.chart=t,this.options=e,this.scene=this.chart.scene,this.panels={},this.panelList=[],this.items=[],this.hideLabels=!1,this.itemBuilders={},this.addItems(),this.chart.events.addElement(this),this.chart.events.notifySceneChanges({bounds:!0})}return __extends(e,t),e.prototype.animationOrder=2e3,e.itemSettings={location:"outside",side:"top",align:"right",showLabel:void 0,item:null,itemConstructor:null,label:null,title:null,image:null,onClick:null,cssClass:null},e.settings={enabled:!1,location:"inside",side:"top",align:"right",showLabels:!0,cssClass:"DVSL-bar-infobar",items:[],extraItems:[],back:!0,"export":!0,zoomOut:!1},e.prototype.rebuildItems=function(){return this.removeItems(),this.addItems()},e.prototype.addItems=function(){var t,e,i,n,s,o,r,a;if(this.options.enabled){for(o=this.options.items,e=0,n=o.length;n>e;e++)t=o[e],this.addItem(t);for(r=this.options.extraItems,a=[],i=0,s=r.length;s>i;i++)t=r[i],a.push(this.addItem(t));return a}},e.prototype.removeItems=function(){var t,e,i,n,s,o,r,a;for(r=this.items,i=0,s=r.length;s>i;i++)t=r[i],t.remove();for(a=this.panelList,n=0,o=a.length;o>n;n++)e=a[n],e.clear();return this.items=[]},e.prototype.remove=function(){var t,e,i,n;for(this.removeItems(),n=this.panelList,e=0,i=n.length;i>e;e++)t=n[e],t.remove();return this.chart.events.removeElement(this)},e.prototype.addItem=function(t){var e,i,n,s,o,r,a;if(t=Base_Helpers.isString(t)?{item:t}:Base_Helpers.clone(t),t.showLabels=(void 0!==t.showLabels?t.showLabels:this.options.showLabels)&&!this.hideLabels,Base_Helpers.isString(t.item)){if(s=t.item||t,this.options.hasOwnProperty(s)&&this.options[s]===!1)return;if(!ToolbarItemNames.hasOwnProperty(s))return void this.chart.error("Toolbar item name '"+s+"' not recognized.");i=ToolbarItemNames[s](this.chart,t)}else i=t.itemConstructor?new t.itemConstructor(this.chart,t):new Base_Bar_UserButton(this.chart,t);return n=t.location||this.options.location,a=t.side||this.options.side,e=t.align||this.options.align,r=n+a,this.panels.hasOwnProperty(r)||(o=new Base_ToolbarPanel(this,n,a),this.panelList.push(o),this.panels[r]=o),o=this.panels[r],o.addItem(i,e),this.items.push(i)},e.prototype.getPanels=function(){return this.panelList},e.prototype.onSceneChange=function(t){var e,i,n,s,o;for(s=this.items,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.onSceneChange(t.changes));return o},e.prototype.doAnimations=function(t){var e,i,n,s,o;for(s=this.items,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.doAnimations(t));return o},e.prototype.getTopInsidePanelBoundingRectangles=function(){var t,e,i,n,s,o,r,a,l;for(t=this.chart.events.canvas.getBoundingClientRect(),e=t.left,i=t.top,o=[],l=this.panelList,r=0,a=l.length;a>r;r++)n=l[r],"inside"===n.location&&"top"===n.side&&(s=n.left.getBoundingClientRect(),(s.height>0||s.width>0)&&o.push(new Base_Rect(s.left-e,s.top-i,s.right-e,s.bottom-i)),s=n.right.getBoundingClientRect(),(s.height>0||s.width>0)&&o.push(new Base_Rect(s.left-e,s.top-i,s.right-e,s.bottom-i)));return o},e.prototype.previewGlobalPointerDown=function(t){var e,i,n,s,o;for(s=this.items,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.previewPointerDown?e.previewPointerDown(t):void 0);return o},e}(Base_ChartElement),Base_ToolbarPanel=function(t){function e(t,e,i){this.toolbar=t,this.location=e,this.side=i,this.packingOrder="inside"===e?1e3:-1,this.container=this.toolbar.chart.layers.container,this.floating=!1,this.align="fill","top"===this.side?(this.vertical=!1,this.left=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-top DVSL-bar-horizontal",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-top DVSL-bar-horizontal",null,this.container)):"bottom"===this.side?(this.vertical=!1,this.left=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-bottom DVSL-bar-horizontal",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-bottom DVSL-bar-horizontal",null,this.container)):"left"===this.side?(this.vertical=!0,this.left=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-top DVSL-bar-vertical",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-left DVSL-bar-bottom DVSL-bar-vertical",null,this.container)):"right"===this.side?(this.vertical=!0,this.left=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-top DVSL-bar-vertical",null,this.container),this.right=Base_Helpers.createDom("ul","DVSL-bar-right DVSL-bar-bottom DVSL-bar-vertical",null,this.container)):this.chart.error("Unrecognized side: '"+this.side+"'"),this.left.style.visibility="hidden",this.right.style.visibility="hidden"}return __extends(e,t),e.prototype.addItem=function(t,e){return"left"===e||"top"===e?this.left.appendChild(t.domElement):"right"===e||"bottom"===e?this.right.appendChild(t.domElement):this.chart.error("Unrecognized align: '"+e+"'")},e.prototype.clear=function(){for(var t,e;t=this.left.firstChild;)this.left.removeChild(t);for(e=[];t=this.right.firstChild;)e.push(this.right.removeChild(t));return e},e.prototype.computeSize=function(t){var e;return this.vertical||(this.toolbar.hideLabels||(this.contentWidthWithLabels=this.left.offsetWidth+this.right.offsetWidth),e=this.contentWidthWithLabels>t,e!==this.toolbar.hideLabels&&(this.toolbar.hideLabels=e,this.toolbar.rebuildItems())),this.vertical?[Math.max(this.left.offsetWidth,this.right.offsetWidth),0]:[0,Math.max(this.left.offsetHeight,this.right.offsetHeight)]},e.prototype.placePanel=function(t,e,i,n){return this.vertical?(this.left.style.width=i-t+"px",this.right.style.width=i-t+"px",this.left.style.top=e+"px",this.right.style.bottom=this.toolbar.scene.chartHeight-n+"px","left"===this.side?(this.left.style.left=t+"px",this.right.style.left=t+"px"):(this.left.style.right=this.toolbar.scene.chartWidth-i+"px",this.right.style.right=this.toolbar.scene.chartWidth-i+"px")):(this.left.style.left=t+"px",this.left.style.height=n-e+"px",this.right.style.right=this.toolbar.scene.chartWidth-i+"px",this.right.style.height=n-e+"px","top"===this.side?(this.left.style.top=e+"px",this.right.style.top=e+"px"):(this.left.style.bottom=this.toolbar.scene.chartHeight-n+"px",this.right.style.bottom=this.toolbar.scene.chartHeight-n+"px")),this.left.style.visibility="visible",this.right.style.visibility="visible"},e.prototype.remove=function(){return this.container.removeChild(this.left),this.container.removeChild(this.right)},e}(Base_ChartPanel),ToolbarItemNames.fullscreen=function(t,e){return new Base_Bar_ToggleButton(t,{label:t.settings.localization.toolbar.fullscreenButton,title:t.settings.localization.toolbar.fullscreenTitle,cssClass:"DVSL-bar-btn-fullscreen",cssClassEnabled:"DVSL-bar-btn-fullscreen-active",showLabels:e.showLabels,onEnable:function(){return t.setFullscreen(!0)},onDisable:function(){return t.setFullscreen(!1)},getChartState:function(){return t.isFullscreen()}})},ToolbarItemNames.back=function(t,e){return new Base_Bar_UserButton(t,{label:t.settings.localization.toolbar.backButton,cssClass:"DVSL-bar-btn-back",title:t.settings.localization.toolbar.backTitle,showLabels:e.showLabels,onClick:function(){return function(){return t.back(!0,"user")}}(this)})};var Netchart_Bar_ZoomControl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Bar_ZoomControl=function(t){function e(t,e){var i,n,s;this.chart=t,this.options=e,this.zoomMove=__bind(this.zoomMove,this),this.zoomDown=__bind(this.zoomDown,this),this.scene=t.scene,this.events=t.events,this.scrolling=this.chart.scrolling,i=Base_Helpers.createDom("li",null,null,null),s=Base_Helpers.createDom("span","DVSL-NC-zoom",null,i),this.handle=Base_Helpers.createDom("em",null,null,s),n=Base_Helpers.createDom("nav",null,null,this.cont),this.mouse=new Base_MouseEvents(i,this.scene.settings.advanced.pointer),this.mouse.listen("drag",this.zoomMove),this.mouse.listen("down",this.zoomDown),this.domElement=i}return __extends(e,t),e.prototype.zoomDown=function(t){return t.y<100?this.zoomMove(t):void 0},e.prototype.zoomMove=function(t){var e,i;return i=t.y-10,i=Math.max(0,Math.min(80,i)),this.handle.style.top=""+i+"px",e=this.getZoomValue(i/80),this.chart.autoZoom.manualZoom(e/this.scene.zoom),this.events.notifySceneChanges({position:!0}),t.consumed=!0},e.prototype.getSliderPosition=function(){var t,e,i,n;return n=this.scene.settings.interaction.zooming.zoomExtent,e=n[0],t=n[1],i=Math.log(Math.max(e,Math.min(t,this.scene.zoom))),e=Math.log(e),t=Math.log(t),1-(i-e)/(t-e)},e.prototype.getZoomValue=function(t){var e,i,n,s;return s=this.scene.settings.interaction.zooming.zoomExtent,i=s[0],e=s[1],i=Math.log(i),e=Math.log(e),n=(1-t)*(e-i)+i,Math.exp(n)},e.prototype.doAnimations=function(){var t;return t=this.getSliderPosition(),this.handle.style.top=""+80*t+"px"},e.prototype.remove=function(){return this.mouse.remove()},e}(Base_Bar_Item),ToolbarItemNames.zoomcontrol=function(t,e){return new Netchart_Bar_ZoomControl(t,e)};var Itemschart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_InfoPopup=function(t){function e(t){this.chart=t,this.scene=t.scene,this.options=this.scene.settings,this.item=null,this.x=null,this.y=null,this.popup=new Base_InfoPopup(t)}return __extends(e,t),e.prototype.animationOrder=800,e.prototype.paintOrder=45,e.prototype.updateOrder=2e3,e.prototype.previewPointerMove=function(t){return this.onMove(t.x,t.y)},e.prototype.doAnimations=function(){return null!==this.x&&null!==this.y?this.onMove(this.x,this.y):void 0},e.prototype.previewPointerDown=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.previewPointerDrag=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onPointerOut=function(){return this.x=this.y=null,this.setCurrentObject(0,0,null)},e.prototype.onMove=function(t,e){var i;return this.x=t,this.y=e,this.options.info.enabled?(i=this.scene.hoverNode?this.scene.hoverNode:this.scene.hoverLink,this.setCurrentObject(t,e,i)):void 0},e.prototype.setCurrentObject=function(t,e,i){var n;return i?(i!==this.item?(n=this.buildContents(i),this.popup.show(t,t,e,n)):this.popup.updateXY(t,t,e),this.item=i):(this.item=null,this.popup.hide())},e.prototype.buildContents=function(t){var e,i;return i=null,t instanceof Itemschart_Node?i=this.options.info.nodeContentsFunction:t instanceof Itemschart_Link&&(i=this.options.info.linkContentsFunction),i?(e=function(e){return function(i){return t===e.item?e.popup.updateContents(i):void 0}}(this),i.call(this.scene.api,t.data,t,e)):t.label},e}(Base_ChartElement);var Itemschart_NodesLayer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_NodesLayer=function(t){"use strict";function e(t,i,n){this.scene=t,this.layerSettings=i,this.useFadeout=n,e.__super__.constructor.call(this,this.scene,this.layerSettings),this.style=this.layerSettings.style,this.scaleObjectsWithZoom=this.style.scaleObjectsWithZoom,this.imageCache={},this.imageLoading={},this.multilinks={},this.labelRenderer=null,this.event=null}var i;return __extends(e,t),e.prototype.createStyleUpdater=function(t){return new Itemschart_NodesStyle(t,this.useFadeout)},e.prototype.doAnimations=function(t){return this.updateStyle(t),this.animateSize(t)},e.prototype.updateStyle=function(t){var e;return e=!t.changes.newGraph,this.styleUpdater.updateItems(t,this,e)},e.prototype.animateSize=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D;if(p=t.timeStamp,r=t.changes.newGraph,i=t.dtime,e=!1,s=this.style.fadeTime,r||(r=!(s>0)||i>s),d=[],h=[],r){for(P=this.nodes(),f=0,v=P.length;v>f;f++)u=P[f],u.removed?d.push(u):u.targetHWidth!==u.hWidth&&(u.added=!1,u.hHeight=u.targetHHeight,u.hWidth=u.targetHWidth);for(M=this.links(),m=0,_=M.length;_>m;m++)l=M[m],l.removed?h.push(l):l.targetRadius!==l.currentRadius&&(l.added=!1,l.currentRadius=l.targetRadius)}else{for(n=s>0?Math.max(0,Math.pow(.2,i/s)):0,o=.01,T=this.nodes(),g=0,b=T.length;b>g;g++)u=T[g],u.added===!0&&(u.added=p),u.added+s<p&&(u.added=!1),u.removed===!0&&(u.removed=p),u.removed?(e=!0,u.hHeight=u.hHeight*n,u.hWidth=u.hWidth*n,u.removed+s<p&&d.push(u)):u.targetHWidth!==u.hWidth&&(e=!0,u.hHeight=u.hHeight*n+u.targetHHeight*(1-n),u.hWidth=u.hWidth*n+u.targetHWidth*(1-n),Math.abs(u.hHeight-u.targetHHeight)<o*u.targetHHeight&&(u.hHeight=u.targetHHeight,u.hWidth=u.targetHWidth));for(D=this.links(),y=0,x=D.length;x>y;y++)l=D[y],l.added===!0&&(l.added=p),l.added+s<p&&(l.added=!1),l.removed===!0&&(l.removed=p),l.removed?(e=!0,l.currentRadius=l.currentRadius*n,l.removed+s<p&&h.push(l)):l.targetRadius!==l.currentRadius&&(e=!0,l.currentRadius=l.currentRadius*n+l.targetRadius*(1-n),Math.abs(l.currentRadius-l.targetRadius)<o*l.targetRadius&&(l.currentRadius=l.targetRadius))}for(C=0,S=h.length;S>C;C++)a=h[C],this.deleteLink(a);for(k=0,w=d.length;w>k;k++)c=d[k],this.deleteNode(c);return e?(t.changes.position=!0,t.animating=!0):void 0},e.prototype.paintPrepare=function(){return this.computeNodeRenderRadii(),this.multilinks=this.updateMultilinks()},e.prototype.paintSelection=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y;for(Y=this.getGeometry(),_=Y[0],v=Y[1],x=Y[2],b=Y[3],H=Y[4],k=Y[5],T=Y[6],I=Y[7],E=Y[8],P=Y[9],F=Y[10],D=Y[11],N=Y[12],l=t.context,y=this.style.selection,m=y.sizeProportional,n=y.sizeConstant,l.beginPath(),R=0,U=e.length;U>R;R++)d=e[R],g=d.renderHheight*(1+m)+n,S=d.renderHwidth-d.renderHheight+g,w=d.x*_+v,B=d.y*x+b,L=w+S-g,l.moveTo(L,B-g),l.arc(L,B,g,-Math.PI/2,Math.PI/2,!1),L=w-S+g,l.lineTo(L,B+g),l.arc(L,B,g,Math.PI/2,-Math.PI/2,!1),l.closePath();for(z=0,j=i.length;j>z;z++)d=i[z],g=(d.currentRadius*(1+m)+n)*H,c=d.from,u=d.to,C=c.x*_+v,A=c.y*x+b,M=u.x*_+v,O=u.y*x+b,r=C-M,a=A-O,h=1/Math.sqrt(r*r+a*a),s=r*h,o=a*h,0!==d.currentCenterOffset&&(p=o*d.currentCenterOffset*H,f=-s*d.currentCenterOffset*H,C+=p,A+=f,M+=p,O+=f),s*=g,o*=g,l.moveTo(C+o,A-s),l.lineTo(C-o,A+s),l.lineTo(M-o,O+s),l.lineTo(M+o,O-s),l.closePath();return Base_Graphics.paint(l,y)},e.prototype.paintLinks=function(t,e){var i;return this.labelRenderer=t.labelRenderer,i=this.getGeometry(),this.paintLinksImpl(t.context,e,this.multilinks,{geometry:i,paintDetails:i[4]>this.style.linkDetailMinZoom})},e.prototype.paintNodes=function(t,e){var i;return this.labelRenderer=t.labelRenderer,this.event=t,i=this.getGeometry(),t.animating|=this.paintNodesImpl(t.context,e,{geometry:i,paintDetails:i[4]>this.style.nodeDetailMinZoom},t.timeStamp),this.event=null},e.prototype.updateMultilinks=function(){var t,e,i,n,s,o,r;if(!this.hasTopologyChanges())return this.multilinks;for(i=this.links(),s={},o=0,r=i.length;r>o;o++)e=i[o],n=e.multiId,s.hasOwnProperty(n)?(t=s[n],Base_Helpers.isArray(t)?t.push(e):s[n]=[s[n],e]):s[n]=e;return s},e.prototype.getNodeImage=function(t){var e,i,n,s,o;return t.image?(o=t.tintImage&&t.fillColor,e=t.imageCropping,n=t.image,s=n,o&&(n+="##"+t.fillColor),null!=this.imageCache[n]?this.imageCache[n]:this.imageLoading[n]?!1:(i=function(i){return function(s){return e&&(s=Base_Graphics.cropImageToCircle(s,e)),o&&(s=Base_Graphics.applyColorToImage(s,t.fillColor,!1)),i.imageCache[n]=s,delete i.imageLoading[n],i.event?i.event.changes.repaint=!0:void 0}}(this),this.imageLoading[n]=!0,this.scene.settings.getAssetImage(s,i),!1)):null},e.prototype.computeNodeRenderRadii=function(){var t,e,i,n,s,o,r,a;for(n=this.getGeometry()[4],r=this.nodes(),a=[],s=0,o=r.length;o>s;s++)t=r[s],e=t.hHeight*n,i=t.hWidth*n,t.lineWidth&&(e+=t.lineWidth/2,i+=t.lineWidth/2),t.renderHheight=e,a.push(t.renderHwidth=i);return a},e.prototype.paintLinksImpl=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X,J,Q,K,$,te,ee,ie,ne,se,oe,re,ae,le,he,ce,ue,de,pe,fe,me,ge,ye,ve,_e,be,xe,Se,we,Ce,ke,Pe,Me,Te,De;for(ke=n.geometry,q=ke[0],Z=ke[1],J=ke[2],X=ke[3],ge=ke[4],ne=ke[5],re=ke[6],ue=ke[7],fe=ke[8],se=ke[9],de=ke[10],ae=ke[11],me=ke[12],_=1/ge,t.textAlign="center",t.textBaseline="middle",Y=this.style,P=Y.linkDetailMinSize*Y.linkDetailMinSize,F=n.paintDetails,T=Y.multilinkSpacing*ge,u=Y.linkDecorationScale,c=Y.linkDecorationMinSize,M=Y.linkLabelScaleBase,R=2,N=5,H=.1,_e=0,we=e.length;we>_e;_e++)if(k=e[_e],te=k.from.x,le=k.from.y,oe=k.to.x,pe=k.to.y,!(Math.max(te,oe)<se||Math.min(te,oe)>ae||Math.max(le,pe)<de||Math.min(le,pe)>me))if(te=te*q+Z,le=le*J+X,oe=oe*q+Z,pe=pe*J+X,m=oe-te,g=pe-le,C=m*m+g*g,z=Math.max(.25,k.currentRadius*ge*.5),s=k.hovered||k.from.hovered||k.to.hovered,I=s||F&&C>P,C>25){if(U=k.from.renderHheight,j=k.to.renderHheight,Q=k.from.renderHwidth,K=k.to.renderHwidth,w=Math.sqrt(C),k.toPieValue>0&&(O=j+R,E=O+N+H*j,this.paintLinkPie(t,oe,pe,O,E,k.toPie0,k.toPie1,k.toPieColor),j=E),U+j>w)continue;if(v=1/w,l=m*v,h=g*v,W=Base_Geometry.distanceToBalloon(U,Q,l,h),V=Base_Geometry.distanceToBalloon(j,K,l,h),W+V>=w)continue;if(d=Math.min((w-W-V)/4,Math.max(c,z*u)),k.fromDecoration&&(W+=d),k.toDecoration&&(V+=d),te+=l*W,le+=h*W,oe-=l*V,pe-=h*V,m=oe-te,g=pe-le,w=w-W-V,v=1/w,L=k.multiId,D=i[L],Base_Helpers.isArray(D)?(o=D.length,$=Math.min(T*(o-1),1.5*U,1.5*j),A=$*(Base_Helpers.indexOf(D,k)-(o-1)/2)/(o-1),k.from.id>k.to.id&&(A=-A),k.currentCenterOffset=A*_,te-=h*A,oe-=h*A,le+=l*A,pe+=l*A):k.currentCenterOffset=0,t.beginPath(),k.fromDecoration&&this.paintLinkDecoration(t,te,le,l,h,d,k.fromDecoration,k.fillColor),k.toDecoration&&this.paintLinkDecoration(t,oe,pe,-l,-h,d,k.toDecoration,k.fillColor),k.lineDash)if(ee=te+h*z,he=le-l*z,ie=te-h*z,ce=le+l*z,k.lineDash.length>0)for(r=k.lineDash,p=r.length,f=r.reduce(function(t,e){return t+e})*ge,B=0,y=be=0,Pe=w/f;Pe>=be;y=be+=1){for(b=xe=0,Me=p-1;Me>=xe&&(x=y*f+B,!(x>w-z));b=xe+=2)G=x+r[b]*ge,S=G>=w-z?w-z:G,t.moveTo(ee+x*l,he+x*h),t.lineTo(ie+x*l,ce+x*h),t.lineTo(ie+S*l,ce+S*h),t.lineTo(ee+S*l,he+S*h),t.closePath(),B+=ge*(r[b]+r[b+1]);B=0}else for(a=Math.max(5,3*z),y=Se=0,Te=w/a;Te>=Se;y=Se+=2)x=y*a,S=Math.min((y+1)*a,w),t.moveTo(ee+x*l,he+x*h),t.lineTo(ie+x*l,ce+x*h),t.lineTo(ie+S*l,ce+S*h),t.lineTo(ee+S*l,he+S*h),t.closePath();else t.moveTo(te+h*z,le-l*z),t.lineTo(te-h*z,le+l*z),t.lineTo(oe-h*z,pe+l*z),t.lineTo(oe+h*z,pe-l*z),t.closePath();Base_Graphics.fill(t,k),I&&k.currentItems&&!k.removed&&(s?(ve=Math.max(1,ge),ye=Math.max(1,z/M)):(ve=ge,ye=z/M),this.paintLinkItems(t,ve,ye,te,le,l,h,w,z,k.currentItems))}else if(k.fillColor){if(t.beginPath(),t.lineWidth=Math.max(.1,2*z),t.strokeStyle=k.fillColor,k.dashed)for(w=Math.sqrt(C),v=1/w,l=m*v,h=g*v,a=Math.max(5,3*z),y=Ce=0,De=w/a;De>=Ce;y=Ce+=2)x=y*a,S=Math.min((y+1)*a,w),t.moveTo(te+x*l,le+x*h),t.lineTo(te+S*l,le+S*h);else t.moveTo(te,le),t.lineTo(oe,pe);t.stroke()}return!1},e.prototype.paintNodesImpl=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X,J,Q,K,$,te,ee,ie,ne,se,oe,re,ae,le,he,ce,ue,de,pe;for(s=2*Math.PI,a=!1,pe=i.geometry,Y=pe[0],j=pe[1],V=pe[2],W=pe[3],re=pe[4],X=pe[5],Q=pe[6],ie=pe[7],se=pe[8],J=pe[9],ne=pe[10],K=pe[11],oe=pe[12],y=1/Y,I=i.paintDetails,M=this.style.nodeDetailMinSize*this.style.nodeDetailMinSize*y*y,d=this.style.hiddenLinks,T=this.style.nodeLabelScaleBase,t.textAlign="center",t.textBaseline="middle",Base_Graphics.textStyle(t,this.style.nodeLabel),E=this.style.removedColor,he=0,ue=e.length;ue>he;he++)P=e[he],P.data&&(Z=P.x,te=P.y,F=P.hHeight,G=P.hWidth,J>Z+G||Z-G>K||ne>te+F||te-F>oe||(Z=Z*Y+j,te=te*V+W,F*=re,G*=re,c=P.display,L=P.opacity,h=P.bRight-P.bLeft,l=P.bBottom-P.bTop,A=I&&h*l>M||P.hovered,1>L&&(t.globalAlpha=L),A&&!P.removed&&(p=P.dataLinksFiltered.length-P.links.length,p>0&&(P.relevance<1?(D=d.lineColor,d.lineColor=Base_Graphics.blendColors(E,D,P.relevance),this.paintHiddenLinks(t,P,Z,te,F,G,p,d,d.size*re),d.lineColor=D):this.paintHiddenLinks(t,P,Z,te,F,G,p,d,d.size*re))),z=Base_Graphics.beginStrokeAndFill(t,P),F!==G?($=Z+G-F,z.moveTo($,te-F),z.arc($,te,F,-Math.PI/2,Math.PI/2,!1),$=Z-G+F,z.lineTo($,te+F),z.arc($,te,F,.5*Math.PI,1.5*Math.PI,!1),z.closePath()):(z.moveTo(Z+F,te),z.arc(Z,te,F,0,s)),Base_Graphics.endStrokeAndFill(t,z,P),A&&(m=this.getNodeImage(P),x=P.currentLabel,N="roundtext"===c,u=N||"text"===c,u&&x?u&&null!=x&&F>2&&(this.labelRenderer.measure(t,x),w=x.hwidth,S=x.hheight,k=x.lineHeight,C=0,N?(O=Math.sqrt(w*w+S*S),null!=m&&($=k+2*w,B=($*$+S*S)/2/$,B>O&&(C=B-O,O=B)),R=F/O,C*=R):R=F/S,m&&(N?g=k*R:(C=F,g=2*F),q=Z-G,ee=te-g/2,P.imageSlicing?(H=P.imageSlicing,t.drawImage(m,H[0],H[1],H[2],H[3],q,ee,g,g)):t.drawImage(m,0,0,m.width,m.height,q,ee,g,g)),this.labelRenderer.paintWithStyle(t,Z+C,te,R,x,x),Base_Graphics.clearShadow(t)):m&&(P.imageSlicing?(H=P.imageSlicing,_=H[0],b=H[1],v=H[2],f=H[3]):(_=0,b=0,v=m.width,f=m.height),Base_Graphics.drawImageInSquare(t,m,_,b,v,f,Z-G+F,te,F)),P.removed||(P.hovered?(le=Math.max(1,re),ae=Math.min(F,T)):(le=re,ae=T),this.paintNodeDetails(P,Z,te,G,F,le,ae,this.event,"text"!==P.display&&"roundtext"!==P.display))),1>L&&(t.globalAlpha=1)));if(this.scene.settings.advanced.perNodeLoadingIndicator){for(U=this.scene.settings.advanced.style.loadingArcStyle,t.save(),t.lineCap="round",t.lineWidth=U.lineWidth,t.strokeStyle=U.lineColor,o=n/1400,o=2*(o-Math.floor(o))*Math.PI,r=o+Math.PI/2,ce=0,de=e.length;de>ce;ce++)if(P=e[ce],P.loading||this.getNodeImage(P)===!1){if(Z=P.x*Y+j,te=P.y*V+W,F=P.renderHheight,X>Z-F||Z+F>Q||ie>te-F||te+F>se)continue;a=!0,t.beginPath(),t.arc(Z,te,F,o,r),t.stroke()}t.restore()}return a},e.prototype.paintLinkDecoration=function(t,e,i,n,s,o,r,a){return t.fillStyle=a,"circle"===r?(t.moveTo(e+o,i),t.arc(e,i,o,0,2*Math.PI,!0)):"arrow"===r?(t.moveTo(e-n*o,i-s*o),t.lineTo(e+n*o-s*o,i+s*o+n*o),t.lineTo(e+n*o+s*o,i+s*o-n*o)):void 0},e.prototype.paintLinkPie=function(t,e,i,n,s,o,r,a){var l,h;return l=(n+s)/2,h=s-n,t.beginPath(),t.arc(e,i,l,o,r),Base_Graphics.paint(t,{lineColor:a,lineWidth:h})},e.prototype.paintLinkItems=function(t,e,i,n,s,o,r,a,l,h){var c,u,d,p,f,m,g,y,v,_,b,x;for(b=0,x=h.length;x>b;b++)d=h[b],c=d.x||0,u=d.y||0,p=d.px||0,f=d.py||0,m=d.lx||0,g=d.ly||0,p=a*(p+1)*.5+m,f=f*l+g,v=n+o*p-r*f+c,_=s+r*p+o*f+u,y=0,y=d.scaleWithSize?i:d.scaleWithZoom?e:1,this.labelRenderer.paint(t,v,_,y,d)},e.prototype.paintHiddenLinks=function(t,e,i,n,s,o,r,a,l){var h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D;if(h=2*Math.PI,y=.73*l/s,v=(s-.1*l)/s,e.links.length>0){for(S=0,k=0,D=e.links,P=0,T=D.length;T>P;P++)g=D[P],S+=g.otherEnd(e).x,k+=g.otherEnd(e).y;S=e.x-S/e.links.length,k=e.y-k/e.links.length,m=1/Math.sqrt(S*S+k*k),u=S*m,p=k*m}else u=1,p=0;for(c=h/r/3,x=Math.cos(-c*(r-1)/2),C=Math.sin(-c*(r-1)/2),d=u*x-p*C,w=u*C+p*x,b=d,x=Math.cos(c),C=Math.sin(c),t.beginPath(),f=M=1;r>=M;f=M+=1)_=Base_Geometry.distanceToBalloon(s,o,b,w),t.moveTo(i+b*_,n+w*_),t.lineTo(i+b*(_+l),n+w*(_+l)),d=b*x-w*C,w=b*C+w*x,b=d;return t.strokeStyle=a.lineColor,t.lineWidth=a.lineWidth,t.stroke()},i=function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p;return c=t.renderHheight*n,d=t.renderHwidth*n,l=t.x,h=t.y,d>c&&(r=d-c,p=Base_Geometry.closestPointToLine(l-r,h,l+r,h,e,i),l=p[0],h=p[1]),o=(e-l)*(e-l)+(i-h)*(i-h),u=(c+s)*(c+s),u>o?(a=c*c,a>o?0:Math.sqrt(o)-c):s},e.prototype.findObjectAt=function(t,e,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L;if(P=this.scene.fromDisplay(t,e),y=P[0],b=P[1],h=1/this.scene.zoom,u=n*h,s=null,(null!=(M=this.scene.hoverNode)?M.layer:void 0)===this&&(d=this.scene.hoverNode,p=i(d,y,b,h,u),0>=p))return d;for(f=this.nodes(),l=w=T=f.length-1;w>=0;l=w+=-1)if(d=f[l],!d.removed){if(p=i(d,y,b,h,u),0===p)return d;u>p&&(u=p,s=d)}for(D=this.links(),C=0,k=D.length;k>C;C++)c=D[C],c.removed||(m=c.targetRadius,v=c.from.x,x=c.from.y,_=c.to.x,S=c.to.y,L=Base_Geometry.closestPointToLine(v,x,_,S,y,b),o=L[0],r=L[1],a=(y-o)*(y-o)+(b-r)*(b-r),g=(m+u)*(m+u),g>a&&(u=Math.sqrt(a)-m,s=c));return s},e.prototype.getGraphBounds=function(){var t,e,i,n,s,o,r,a,l,h,c;if(e=this.nodes(),0===e.length)return[0,0,0,0];for(n=1/0,s=-1/0,r=1/0,a=-1/0,l=this.scene.zoom,h=0,c=e.length;c>h;h++)t=e[h],t.removed||(i=t.x,o=t.y,n=Math.min(n,t.bLeft+i),s=Math.max(s,t.bRight+i),r=Math.min(r,t.bTop+o),a=Math.max(a,t.bBottom+o));return[n,r,s,a]},e.prototype.getNodeNeighborsBounds=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p;
if(n=this.nodes(),0===n.length)return[0,0,0,0];for(o=1/0,r=-1/0,l=1/0,h=-1/0,c=this.scene.zoom,i=t,s=i.x,a=i.y,o=Math.min(o,i.bLeft+s),r=Math.max(r,i.bRight+s),l=Math.min(l,i.bTop+a),h=Math.max(h,i.bBottom+a),p=t.links,u=0,d=p.length;d>u;u++)e=p[u],i=e.otherEnd(t),i.removed||(s=i.x,a=i.y,o=Math.min(o,i.bLeft+s),r=Math.max(r,i.bRight+s),l=Math.min(l,i.bTop+a),h=Math.max(h,i.bBottom+a));return[o,l,r,h]},e}(ItemsChart_ItemsLayer);var Linearchart_Legend,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Legend=function(t){"use strict";function e(t){this.chart=t,this.onClick=__bind(this.onClick,this),e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.paintOrder=75,e.prototype.updateOrder=100,e.settings={panel:{side:"bottom",align:"left",packingOrder:95}},e.prototype.onSceneChange=function(t){var i;return e.__super__.onSceneChange.call(this,t),i=t.changes,i.settings&&(this.updateSettings(i.settingsChanges),Base_Helpers.hasProp(i,"settingsChanges._computedSeries"))?(this.rebuildItems(),i.bounds=!0):void 0},e.prototype.updateSettings=function(t){return Base_Helpers.hasProp(t,"legend.text.fillColor")?this.baseTextColor=this.settings.text.fillColor:void 0},e.prototype.doAnimations=function(){return this.hoverObject=this.scene.hoverSeriesItem?this.scene.settings._computedSeries[this.scene.hoverSeriesItem.seriesIndex]:null},e.prototype.paintMarker=function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x;return _=this.settings.marker.size,y=s.data,l=e-_/2,h=e,c=e+_/2,u=_/2.1,d=_/2,p=3*_/4,t.beginPath(),x=i+_/2,v={},v=Base_Helpers.realClone(y),y.enabled||(r=this.settings.advanced.disabledSeries,v.style.fillColor=y.style.fillColor?r.fillColor:null,v.style.lineColor=r.lineColor),"line"===v.type?(b=[u,d,p],o=[l,h,c],g=[o,[x-u,x-d,x-p]],v.style.marker.width*=.8,a=x-d,m=new Linearchart_Renderer_Line([v]),m.paintLines(t,[v],[{segments:g}],[null],b,x),m.paintMarkers(t,v,[h],[d],[a])):(b=[_,_],f=_/2,o=[e],m=new Linearchart_Renderer_Columns(this.scene,[v]),m.paintStack(t,o,[f],[b],[null],x))},e.prototype.rebuildItems=function(){var t,e,i,n,s,o,r,a;for(i=[],s=this.scene.settings._computedSeries,t=this.settings.advanced.disabledSeries,r=0,a=s.length;a>r;r++)n=s[r],e=n.enabled?n.style.fillColor:t.fillColor,o=n.enabled?this.baseTextColor:t.textColor,i.push({fillColor:e,textColor:o,label:n.name,data:n});return this.setItems(i)},e.prototype.onClick=function(t){var e,i,n,s,o,r;if(e=this.findItemAt(t.x,t.y)){for(s=this.scene.settings._computedSeries,n=o=0,r=s.length;r>o;n=o+=1)i=s[n],i===e&&(i.enabled=!i.enabled,this.chart.events.notifySceneChanges({settings:!0,settingsChanges:{_computedSeries:{}}}));return t.preventDefault()}},e}(Base_Legend),ToolbarItemNames.zoomOut=function(t,e){return new Base_Bar_UserButton(t,{label:t.settings.localization.toolbar.zoomoutButton,cssClass:"DVSL-bar-btn-zoomout",title:t.settings.localization.toolbar.zoomoutTitle,showLabels:e.showLabels,onClick:function(){return function(){return t.zoomOut(null,!0,"user")}}(this)})};var Linearchart_Bar_LinLogButton,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Bar_LinLogButton=function(t){function e(t,i){this.chart=t,this.options=i,e.__super__.constructor.call(this,t),this.linClass="DVSL-bar-btn-lin",this.logClass="DVSL-bar-btn-log",i.cssClass=this.linClass,i.title=this.chart.settings.localization.toolbar.linLogTitle,i.label=this.chart.settings.localization.toolbar.linButton,this.createButton(i),this.logScale=!1}return __extends(e,t),e.prototype.onClick=function(){return this.chart.setLogScale(!this.chart.scene.settings.valueAxisDefault.logScale,"user")},e.prototype.onSceneChange=function(t){if(t.toolbar||t.settings&&this.chart.scene.settings.valueAxisDefault.logScale!==this.logScale)if(this.logScale=this.chart.scene.settings.valueAxisDefault.logScale,this.logScale){if(Base_Helpers.removeClass(this.a,this.linClass),Base_Helpers.addClass(this.a,this.logClass),this.options.showLabels)return this.p.innerHTML=this.chart.settings.localization.toolbar.logButton}else if(Base_Helpers.removeClass(this.a,this.logClass),Base_Helpers.addClass(this.a,this.linClass),this.options.showLabels)return this.p.innerHTML=this.chart.settings.localization.toolbar.linButton},e}(Base_Bar_Button),ToolbarItemNames.logScale=function(t,e){return new Linearchart_Bar_LinLogButton(t,e)};var Timechart_Bar_DisplayPeriodDropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Bar_DisplayPeriodDropdown=function(t){function e(t,i){this.chart=t,this.custom={name:t.settings.localization.toolbar.customPeriod},i={cssClass:"DVSL-bar-btn-month",title:this.chart.settings.localization.toolbar.periodDropdownTitle,name:"",showLabels:i.showLabels},e.__super__.constructor.call(this,t,i),this.updateSelectedItem()}return __extends(e,t),e.prototype.onSelectionChange=function(t){return this.chart.setDisplayPeriod(t.displayPeriod,t.displayAnchor,t.displayUnit,!0,"user")},e.prototype.onSceneChange=function(t){var e,i;return(null!=(e=t.settingsChanges)?e.area:void 0)||(null!=(i=t.settingsChanges)?i.toolbar:void 0)||t.time||t.toolbar?this.updateSelectedItem():void 0},e.prototype.updateSelectedItem=function(){var t,e,i,n;for(n=this.chart.settings.toolbar.periods,e=0,i=n.length;i>e;e++)if(t=n[e],this.chart.isThisDisplayPeriod(t.displayPeriod,t.displayAnchor))return void this.setSelectedItem(t);return this.setSelectedItem(this.custom)},e.prototype.getItems=function(){var t,e,i,n,s,o,r,a;for(n=[],t=this.chart.settings.area._minUnit,a=this.chart.settings.toolbar.periods,o=0,r=a.length;r>o;o++)e=a[o],i=Base_TimeStep.parse(e.displayPeriod),s=Base_TimeStep.parse(e.displayUnit),s&&s.isSmaller(t)||i&&i.isSmallerOrEqual(t)||(e.selected=this.chart.isThisDisplayPeriod(e.displayPeriod,e.displayAnchor),n.push(e));return n},e}(Base_Bar_Combobox),ToolbarItemNames.displayPeriod=function(t,e){return new Timechart_Bar_DisplayPeriodDropdown(t,e)};var Timechart_Bar_DisplayUnitDropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Bar_DisplayUnitDropdown=function(t){function e(t,i){this.chart=t,i={cssClass:"DVSL-bar-btn-bars",title:this.chart.settings.localization.toolbar.unitDropdownTitle,name:"",showLabels:i.showLabels},e.__super__.constructor.call(this,t,i),this.updateSelectedItem()}return __extends(e,t),e.prototype.onSelectionChange=function(t){return this.chart.setDisplayUnit(t.value,!0,!0,"user")},e.prototype.onSceneChange=function(t){var e;return(null!=(e=t.settingsChanges)?e.area:void 0)||t.time||t.toolbar?this.updateSelectedItem():void 0},e.prototype.updateSelectedItem=function(){var t,e,i,n,s;if(e=this.chart.displayUnit){for(s=this.chart.settings.area._displayUnitsParsed,i=0,n=s.length;n>i;i++)if(t=s[i],t.isEqual(e))return void this.setSelectedItem(t);return this.setSelectedItem({name:e.name,value:e})}},e.prototype.getItems=function(){var t,e,i,n,s,o,r;for(t=[],i=this.chart.scene.displayUnit,e=this.chart.getMinSelectableUnit(),r=this.chart.settings.area._displayUnitsParsed,s=0,o=r.length;o>s;s++)n=r[s],t.push({name:n.name,value:n,disabled:n.approxTime()<e.approxTime(),selected:n.isEqual(i)});return t},e}(Base_Bar_Combobox),ToolbarItemNames.displayUnit=function(t,e){return new Timechart_Bar_DisplayUnitDropdown(t,e)};var Timechart_TimeSlicer;Timechart_TimeSlicer=function(){function t(t,e,i,n,s,o,r){this.scene=t,this.step=e,null==i&&(i=[]),this.uniform=null!=o?o:!0,this.extraSteps=null!=r?r:2,n=n||this.scene.timeStart,s=s||this.scene.timeEnd,this.extraArrays=i.slice(0),this.arrays=i.slice(0),this.arrays.push("xes"),this.arrays.push("times"),this.uniformTolerance=Math.min(1,this.step.count-2),this.approxExtraTime=this.extraSteps*e.approxTime(),this.init(n-this.approxExtraTime,s+this.approxExtraTime)}return t.prototype.scene=null,t.prototype.step=null,t.prototype.uniform=!1,t.prototype.currentFrom=0,t.prototype.currentTo=0,t.prototype.fromBar=null,t.prototype.toBar=null,t.prototype.fromIndex=0,t.prototype.toIndex=0,t.prototype.times=[],t.prototype.xes=[],t.prototype.oldMul=0,t.prototype.oldAdd=0,t.prototype.arrays=[],t.prototype.extraArrays=[],t.prototype.bufExpandSize=100,t.prototype.extraSteps=2,t.prototype.uniformTolerance=0,t.prototype.approxExtraTime=0,t.prototype._getOrigin=function(t){var e,i;return 1===this.step.count||this.uniform?this.step.roundTimeDown(t):(e=this.step.getBigger().roundTimeDown(t),i=this.step.numberOfUnits(e,t),this.step.add(e,i))},t.prototype._add=function(t){var e,i;return this.uniform||1===this.step.count||"d"!==this.step.unit?t.add(this.step.count,this.step.unit):(i=t.daysInMonth(),e=t.date(),e+2*this.step.count>i+1+this.uniformTolerance?t.add(i-e+1,"d"):t.add(this.step.count,this.step.unit))},t.prototype._sub=function(t){var e,i,n;return this.uniform||1===this.step.count||"d"!==this.step.unit?t.subtract(this.step.count,this.step.unit):(e=t.date(),e<=this.step.count?(t.subtract(1,"M"),i=t.daysInMonth()-1,n=i+1-this.step.count+this.uniformTolerance,t.date(1+n-(n%this.step.count|0))):t.subtract(this.step.count,this.step.unit))},t.prototype.init=function(t,e){var i,n,s,o,r,a,l,h,c,u,d;for(c=this.arrays,r=0,l=c.length;l>r;r++)i=c[r],this[i]=[];if(t>=e)return this.fromIndex=0,this.toIndex=0,this.fromBar=null,void(this.toBar=null);for(this.fromBar=moment(this._getOrigin(t)).utc(),this.fromIndex=0,s=moment(this.fromBar).utc(),this.times.push(s.valueOf());s.valueOf()<e;)this._add(s),this.times.push(s.valueOf());for(this.toIndex=this.times.length,this.toBar=s,this.currentFrom=t,this.currentTo=e,this.xes=function(){var t,e,i,n;for(i=this.times,n=[],t=0,e=i.length;e>t;t++)s=i[t],n.push(this.scene.timeToX(s));return n}.call(this),u=this.extraArrays,d=[],a=0,h=u.length;h>a;a++)n=u[a],o=[],o.length=this.times.length,d.push(this[n]=o);return d},t.prototype.makeMiniSlice=function(t){var e,i,n,s,o,r,a,l;return l=this.scene.timeToXCoefs(),s=l[0],o=l[1],e=moment(this._getOrigin(t)).utc(),i=e.valueOf(),r=s+i*o,this._add(e),n=e.valueOf(),a=s+n*o,[i,r,n,a]},t.prototype.update=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T;if(null==t&&(t=this.scene.timeStart),null==e&&(e=this.scene.timeEnd),t-=this.approxExtraTime,e+=this.approxExtraTime,t===this.currentFrom&&e===this.currentTo)return this.updateXes(this.fromIndex,this.toIndex),[0,this.fromIndex,this.toIndex];if(null===this.fromBar||t>this.toBar.valueOf()||e<this.fromBar.valueOf())return this.init(t,e),[0,this.toIndex,this.toIndex];if(u=0,c=this.fromIndex,h=this.toIndex,C=this.scene.timeToXCoefs(),f=C[0],m=C[1],o=this.fromBar.valueOf()-t,o>0){if(s=(o/this.step.approxTime()|0)+2,this.fromIndex<s){for(i=[],i.length=s+this.bufExpandSize,k=this.arrays,g=0,b=k.length;b>g;g++)n=k[g],this[n]=i.concat(this[n]);u+i.length,c+=i.length,h+=i.length,this.fromIndex+=i.length,this.toIndex+=i.length}for(p=this.fromBar.valueOf();p>t;)this._sub(this.fromBar),this.fromIndex-=1,p=this.fromBar.valueOf(),this.times[this.fromIndex]=p,this.xes[this.fromIndex]=f+p*m}if(a=e-this.toBar.valueOf(),a>0){if(s=(a/this.step.approxTime()|0)+2,this.times.length<this.toIndex+s)for(l=this.toIndex+s+this.bufExpandSize,P=this.arrays,y=0,x=P.length;x>y;y++)n=P[y],this[n].length=l;for(p=this.toBar.valueOf();e>p;)this._add(this.toBar),p=this.toBar.valueOf(),this.times[this.toIndex]=p,this.xes[this.toIndex]=f+p*m,this.toIndex+=1}for(this._add(this.fromBar);this.fromBar.valueOf()<t;)this.fromIndex+=1,this._add(this.fromBar);for(this._sub(this.fromBar),this._sub(this.toBar);this.toBar.valueOf()>=e;)this.toIndex-=1,this._sub(this.toBar);if(this._add(this.toBar),r=this.toIndex-this.fromIndex+this.bufExpandSize,this.fromIndex>r){for(d=this.fromIndex-this.bufExpandSize,M=this.arrays,v=0,S=M.length;S>v;v++)n=M[v],this[n].splice(0,d);u-=d,c-=d,h-=d,this.fromIndex-=d,this.toIndex-=d}if(this.toIndex<this.times.length-r)for(T=this.arrays,_=0,w=T.length;w>_;_++)n=T[_],this[n].length=this.toIndex+this.bufExpandSize;return this.updateXes(c,h),this.currentFrom=t,this.currentTo=e,[u,c,h]},t.prototype.updateXes=function(t,e){var i,n,s,o,r,a,l;if(r=this.scene.timeToXCoefs(),n=r[0],s=r[1],this.oldAdd!==n||this.oldMul!==s){for(this.oldAdd=n,this.oldMul=s,l=[],i=o=t,a=e-1;a>=o;i=o+=1)l.push(this.xes[i]=n+this.times[i]*s);return l}},t}();var Linearchart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_InfoPopup=function(t){"use strict";function e(t){this.chart=t,this.container=t.layers.container,this.scene=t.scene,this.events=t.events,this.popup=new Base_InfoPopup(this.chart)}return __extends(e,t),e.prototype.animationOrder=10,e.prototype.t0=0,e.prototype.t1=0,e.prototype.object=null,e.prototype.popup=null,e.prototype.visible=!1,e.prototype.activePointer=null,e.prototype.pointerX=0,e.prototype.pointerY=0,e.prototype.getPopupAreaMouseMoved=function(){return null},e.prototype.buildHeader=function(){return""},e.prototype.popupHidden=function(){return null},e.prototype.show=function(t){return this.scene.settings.info.enabled?(this.pointerX=t.x,this.pointerY=t.y,this.updatePopup(t)):void 0},e.prototype.previewPointerMove=function(t){return this.scene.settings.info.enabled&&(null===this.activePointer||(this.activePointer=t.identifier))?(this.pointerX=t.x,this.pointerY=t.y,this.updatePopup(t)):void 0},e.prototype.previewPointerDrag=function(t){return!this.scene.settings.info.enabled||null!==this.activePointer&&this.activePointer!==t.identifier?void 0:(this.activePointer=t.identifier,this.pointerX=t.x,this.pointerY=t.y)},e.prototype.previewPointerCancel=function(t){return null!==this.activePointer&&this.activePointer===t.identifier?this.activePointer=null:void 0},e.prototype.previewPointerUp=function(t){return null!==this.activePointer&&this.activePointer===t.identifier?this.activePointer=null:void 0},e.prototype.previewPointerOut=function(t){return null!==this.activePointer&&this.activePointer!==t.identifier||t.touch?void 0:(this.activePointer=null,this.pointerX=null,this.pointerY=null,Base_Helpers.isParentOf(this.popup,t.target)?void 0:this.hideInfoPopup(t))},e.prototype.previewPointerDown=function(t){return null===this.activePointer?(this.activePointer=t.identifier,t.touch?this.previewPointerMove(t):this.hideInfoPopup(t)):void 0},e.prototype.updatePopup=function(t){var e,i,n,s,o;return this.pointerX||this.pointerY?(i=this.getPopupMouseMoved(this.pointerX,this.pointerY,this.t0,this.t1,this.object,this.contents),i?(s=i[0],o=i[1],n=i[2],e=i[3],this.showInfoPopup(s,o,n,e,t)):this.hideInfoPopup(t)):void this.hideInfoPopup(t)},e.prototype.showInfoPopup=function(t,e,i,n,s){var o;if(!this.popup.visible||t!==this.t0||e!==this.t1||i!==this.object)return this.t0=t,this.t1=e,this.object=i,this.contents=n,this.scene.setHighlight("infoRange",t,e,this.scene.settings.info.style.highlight),o=this.scene.y0,this.popup.show(this.scene.timeToX(this.t0),this.scene.timeToX(this.t1),o,n),s.changes.infoLabel=!0,s.changes.highlight=!0},e.prototype.hideInfoPopup=function(t){return this.popup.visible?(this.popupHidden(t),this.popup.hide(),this.t0=0,this.t1=0,this.scene.removeHighlight("infoRange"),t.changes.infoLabel=!0,t.changes.highlight=!0):void 0},e.prototype.paintScene=function(){return this.popup.visible?this.updateXY():void 0},e.prototype.updateXY=function(){var t;return t=this.scene.y0,this.popup.updateXY(this.scene.timeToX(this.t0),this.scene.timeToX(this.t1),t)},e.prototype.getPopupMouseMoved=function(t,e,i,n,s,o){var r,a,l,h,c,u,d,p,f,m;return this.scene.displayUnit&&!this.scene.xyInChartOrBottom(t,e)?null:(a=this.getPopupAreaMouseMoved(t,e))?(f=a[0],m=a[1],p=null,u=null,d=this.scene.hoverSeriesItem,l=this.scene.settings.info.advanced.scope,h=f,c=m,null!=d&&(u=d.seriesIndex,("stack"===l||"value"===l||"auto"===l&&null!=u)&&(h=this.scene.xToTime(d.x0),c=this.scene.xToTime(d.x1)),p=d.stack),null==h?null:h===i&&c===n&&u===s?[i,n,s,o]:(r=this.buildContent(f,m,u,p),[h,c,u,r])):null},e.prototype.buildContent=function(t,e,i,n){var s,o,r,a;return s=this.buildHeader(t,e),o=this.chart.renderer.exportData(t,e),this.scene.settings.info.advanced.contentsFunction?(r=null,null!==i&&this.scene.settings.series.length>i&&(r=this.scene.settings.series[i]),a=this.scene.settings.info.advanced.contentsFunction.call(this.chart.api,o,r)):a=this.buildValues(o,i,n),s+a},e.prototype.buildValues=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;for(a=this.scene.settings.localization.noDataLabel,f=this.scene.settings.info.valueFormatterFunction,c=this.scene.settings.info.advanced.showOnlyHoveredSeries?this.scene.settings.info.advanced.scope:null,p=i&&("stack"===c||"value"===c)||"auto"===c&&null!=e,r="value"===c,l="",m=0,_=t.length;_>m;m++){if(s=t[m],p){for(o=!1,x=s.data,g=x.length-1;g>=0;g+=-1)d=x[g],d.config.showInLegend&&(d.values||this.chart.scene.settings.info.showNoData)&&(o|=null!==e&&d.config===this.scene.settings._computedSeries[e]||i===s.stack);if(!o)continue}for(s.name&&s.data.length>1&&(l+="<h3>"+s.name+"</h3>"),l+='<table cellspacing="0">',S=s.data,y=S.length-1;y>=0;y+=-1)if(d=S[y],u=null!==e&&d.config===this.scene.settings._computedSeries[e],d.config.showInLegend&&(d.values||this.chart.scene.settings.info.showNoData)&&(!r||u)){if(l+="<tr><td",n=d.config.style.lineColor||d.config.style.fillColor,n&&(l+=' style="color: '+n+'"'),l+=">",u&&(l+="<div class='DVSL-info-selected' style='background-color: "+n+"'></div>"),l+=""+(d.name||s.name),l+="</td><td>",f)l+=f.call(this.chart.api,d.values,d.config);else if(d.values)if(d.values.count>1&&this.scene.settings.info.aggregations&&this.scene.settings.info.aggregations.length>0)for(w=this.scene.settings.info.aggregations,v=0,b=w.length;b>v;v++)h=w[v],l+=""+Base_Helpers.numberFormat(d.values[h])+("&nbsp;("+h+")");else l+=Base_Helpers.numberFormat(d.values.sum);else l+=a;l+="</td></tr>"}l+="</table>"}return l},e}(Base_ChartElement);var Base_Bar_ExportDropdown,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Base_Bar_ExportDropdown=function(t){function e(t,i){var n,s;this.chart=t,s=this.chart.settings.localization.toolbar,n=[new Base_Bar_UserButton(t,{label:s.exportJpeg,onClick:function(){return Base_Export.exportAndStartDownload(t,"jpeg",{scaling:1})}}),new Base_Bar_UserButton(t,{label:s.exportPNG,onClick:function(){return Base_Export.exportAndStartDownload(t,"png",{scaling:3})}}),new Base_Bar_UserButton(t,{label:s.exportPDF,onClick:function(){return Base_Export.exportAndStartDownload(t,"pdf")}})],window.JSON&&t.exportVisibleData&&(n.push(new Base_Bar_UserButton(t,{label:s.exportCSV,onClick:function(){return Base_Export.exportAndStartDownload(t,"csv")}})),n.push(new Base_Bar_UserButton(t,{label:s.exportXLS,onClick:function(){return Base_Export.exportAndStartDownload(t,"xls")}}))),i={showLabels:i.showLabels,title:s.exportTitle,label:s.exportButton,cssClass:"DVSL-bar-btn-export",items:n},e.__super__.constructor.call(this,t,i)}return __extends(e,t),e}(Base_Bar_Dropdown),ToolbarItemNames["export"]=function(t,e){return new Base_Bar_ExportDropdown(t,e)};var Base_Api;Base_Api=function(){function t(){}return t.themes={},t.prototype.customize=function(t){var e;if(e=this.constructor.themes,!e||!e.hasOwnProperty(t))throw"No customization named "+t;return this.updateSettings(e[t])},t.prototype.saveState=function(){return this._impl.save()},t.prototype.restoreState=function(t,e){return null==e&&(e=!1),this._impl.restore(t,e)},t.prototype.fullscreen=function(t){return t===!0?this._impl.setFullscreen(!0):t===!1&&this._impl.setFullscreen(!1),this._impl.isFullscreen()},t.prototype.updateSettings=function(t){return null==t&&(t={}),this._impl.updateSettings(t,"api"),this},t.prototype.updateFilters=function(){return this._impl.updateFilters()},t.prototype.updateStyle=function(){return this._impl.updateStyle()},t.prototype.on=function(t,e){return this._impl.on(t,e)},t.prototype.off=function(t,e){return this._impl.off(t,e)},t.prototype.updateSize=function(){return this._impl.updateSize(!0),this},t.prototype.reloadData=function(){return this._impl.reloadData()},t.prototype.addData=function(t,e){return null==e&&(e="default"),this._impl.addData(t,e)},t.prototype.removeData=function(t,e){return null==e&&(e="default"),this._impl.removeData(t,e)},t.prototype.replaceData=function(t,e){return null==e&&(e="default"),this._impl.replaceData(t,e)},t.prototype.remove=function(){return this._impl.remove()},t.prototype.saveAsImage=function(t,e,i){return this.exportImageAsString(t,e,i)},t.prototype.exportGetDimensions=function(t){return this.exportImageGetDimensions(t)},t.prototype.exportImageAsString=function(t,e,i){return Base_Export.exportToImage(this._impl,t,e,i)},t.prototype.exportImageGetDimensions=function(t){return Base_Export.exportToImageGetDimensions(this._impl,t)},t.prototype["export"]=function(t,e,i){return Base_Export.exportAndStartDownload(this._impl,t,e,i)},t.prototype.addSubchartContainer=function(t){return this._impl.layers.mouseTrackLayer.appendChild(t)},t.prototype.paintNow=function(t){return null==t&&(t=!1),this._impl.events.paintNow(t),this},t.prototype.hideMenu=function(){return this._impl.hideMenu(),this},t.prototype.back=function(){return this._impl.back(),this},t.prototype.home=function(){return this._impl.goHome()},t.prototype.clearHistory=function(){return this._impl.clearHistory(),this},t.prototype.closePopup=function(){return this._impl.log("closePopup is deprecated, use hideMenu"),this.hideMenu(),this},t.prototype.profiler=function(){return this._impl.events.profiler},t.prototype.measureFps=function(t,e){return this._impl.deprecated(),this.profiler().measureFps(t,e)},t}();var Netchart_Legend,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Legend=function(t){"use strict";function e(t){this.chart=t,e.__super__.constructor.call(this,t),this.classes=[],this.renderer=t.renderer}return __extends(e,t),e.prototype.paintOrder=51,e.prototype.updateOrder=100,e.settings={panel:{side:"bottom",align:"left"},marker:{size:30},padding:15},e.prototype.onSceneChange=function(t){var i;return e.__super__.onSceneChange.call(this,t),i=t.changes,i.settings&&(this.updateSettings(i.settingsChanges),i.settingsChanges.legend)?(this.rebuildItems(),i.bounds=!0):void 0},e.prototype.updateSettings=function(t){var e,i,n,s,o,r,a,l,h,c,u,d;if(Base_Helpers.hasProp(t,"style.nodeClasses")||Base_Helpers.hasProp(t,"style.linkClasses")){for(r=this.scene.settings.style,i=Base_Helpers.extend({},r.node),e=Base_Helpers.extend({},r.link),u=r.nodeClasses,a=0,h=u.length;h>a;a++)o=u[a],s=Base_Helpers.clone(i),this.classes.push({className:o.className,itemType:"node",style:Base_Helpers.extend(s,o.style)});for(d=r.linkClasses,l=0,c=d.length;c>l;l++)n=d[l],s=Base_Helpers.clone(e),this.classes.push({className:o.className,itemType:"link",style:Base_Helpers.extend(s,n.style)})}return Base_Helpers.hasProp(t,"legend.text.fillColor")?this.baseTextColor=this.settings.text.fillColor:void 0},e.prototype.doAnimations=function(){return 1},e.prototype.paintMarker=function(t,e,i,n,s){var o,r;return r={},s.data instanceof Itemschart_Node?(r.geometry=this.getGeometry(e,i,.6),r.paintDetails=!1,this.renderer.paintNodes(t,[s.data],r,0)):s.data instanceof Itemschart_Link?(r.geometry=this.getGeometry(e,i,1),r.paintDetails=!0,o=s.multiId,this.renderer.paintLinks(t,[s.data],{id:s},r)):void 0},e.prototype.rebuildItems=function(){var t,e,i,n,s,o;n=[],e=this.settings.marker.size/2,o=this.classes;for(s in o)__hasProp.call(o,s)&&(t=this.classes[s],i="node"===t.itemType?new Itemschart_Node(null,null):new Itemschart_Link(null,null),i instanceof Itemschart_Node?(i.data={},i.hHeight=e,i.hWidth=e,i.renderHheight=e,i.renderHwidth=e):(i.from={x:2*-e,y:0,renderHheight:e,renderHwidth:e},i.to={x:e+e/2,y:0,renderHheight:e,renderHwidth:e}),i=Base_Helpers.extend(i,t.style),n.push({textColor:this.baseTextColor,label:t.className,data:i}));return this.setItems(n)},e.prototype.getGeometry=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m;return n=this.settings.marker.size,h=-n,u=n,p=-n,m=n,o=i,a=i,s=t,r=e,l=t-n,c=t+n,d=e-n,f=e+n,[o,s,a,r,i,l,c,d,f,h,p,u,m]},e.prototype.onClick=function(){return 1},e}(Base_Legend);var Netchart_Layout,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Layout=function(t){function e(t){this.chart=t,this.scene=t.scene,this.settings=this.scene.settings.layout,this.layer=this.chart.layer,this.idleSince=null,this.noMovementSince=null,this.random=new Base_Random(1),this.springs=new Netchart_Layout_TimedSpringEmbedder(this.random),this.layoutMovement=0}return __extends(e,t),e.prototype.animationOrder=600,e.prototype.paintOrder=10,e.prototype.updateOrder=1600,e.settings={mode:"dynamic",nodeSpacing:16,incrementalLayoutMaxTime:300,initialLayoutMaxTime:2e3,layoutFreezeTimeout:1e4,layoutFreezeMinTimeout:1500,aspectRatio:!1,globalLayoutOnChanges:!0,advanced:{adaptiveFreezeTreshold:1.2}},e.prototype.onSceneChange=function(t){var e;return(null!=(e=t.settingsChanges)?e.layout:void 0)||this.layer.hasTopologyChanges()||t.changes.navigation?this.updateBackgroundLinks():void 0},e.prototype.doAnimations=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f;return o=this.settings.layoutFreezeTimeout,c=this.settings.layoutFreezeMinTimeout,p=this.layer.hasTopologyChanges(),u=this.layer.hasStyleChanges(),i=t.dtime,(null===this.idleSince||t.animating||p||t.changes.coordinates||t.changes.layout||t.changes.bounds)&&(this.idleSince=t.timeStamp,this.noMovementSince=null),l=!1,"radial"===this.settings.mode?(this.layoutMovement=this.doLayout(t.timeStamp,i*e,p|t.changes.layout,u,a,0,!1,!1),l=!0):(a={},r=!1,n="dynamic"===this.settings.mode,p?(this.random=new Base_Random(1),f=this.placeNewNodes(),a=f[0],r=f[1],l=!0,e=1):n&&(e=1,s=t.timeStamp-this.idleSince,this.layoutMovement<this.settings.advanced.adaptiveFreezeTreshold&&(this.noMovementSince?(h=t.timeStamp-this.noMovementSince,e=Math.min((c-h)/c,e)):this.noMovementSince=t.timeStamp),e=Math.min((o-s)/c,e)),e>0&&(d=r?this.settings.initialLayoutMaxTime:this.settings.incrementalLayoutMaxTime,this.layoutMovement=this.doLayout(t.timeStamp,i*e,p|t.changes.layout,u,a,d,r,n),t.animating=!0,l=!0)),l?(this.placePies(),t.changes.position=!0):void 0},e.prototype.resetLayout=function(){var t,e,i,n,s;for(this.random=new Base_Random(1),this.springs.random=this.random,e={},s=this.layer.nodes(),i=0,n=s.length;n>i;i++)t=s[i],e[t.id]=t,t.x=0,t.y=0,t.userLock=!1;return this.doLayout(this.idleSince||(new Date).getTime(),1,!0,!0,e,1e4,!0),this.idleSince=null},e.prototype.placeNewNodes=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D;for(d={},l=!1,P=this.layer.nodes(),v=0,S=P.length;S>v;v++)h=P[v],(null===h.x||null===h.y)&&(d[h.id]=!0);for(M=this.layer.nodes(),_=0,w=M.length;w>_;_++)if(h=M[_],y=1,d.hasOwnProperty(h.id)){for(u=0,e=0,i=0,y=1,T=h.links,b=0,C=T.length;C>b;b++)a=T[b],p=a.otherEnd(h),d.hasOwnProperty(p.id)||(c=p,e+=p.x,i+=p.y,u+=1);if(u>1)m=e/u,g=i/u,y=.5;else if(1===u){for(t=0,n=0,s=0,D=c.links,x=0,k=D.length;k>x;x++)a=D[x],f=a.otherEnd(c),f===h||d.hasOwnProperty(f.id)||(n+=f.x-c.x,s+=f.y-c.y,t+=1);t>0?(r=Math.sqrt(n*n+s*s),r>0?(o=1/(r*t),n*=o,s*=o,m=c.x-n*c.hHeight*1.2,g=c.y-s*c.hHeight*1.2,y=.2):(m=c.x,g=c.y)):(l=!0,m=c.x,g=c.y)}else l=!0,m=0,g=0;h.x=m+(this.random.get()-.5)*y*(h.hHeight+1),h.y=g+(this.random.get()-.5)*y*(h.hHeight+1)}return[d,l]},e.prototype.placePies=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;for(t=2*Math.PI,a=[],y=this.layer.nodes(),_=[],h=0,p=y.length;p>h;h++){for(s=y[h],l=0,v=s.links,c=0,f=v.length;f>c;c++)i=v[c],i.to===s&&i.toPieValue>0&&(l+=i.toPieValue,a.push(i),i._angle=Math.atan2(i.to.y-i.from.y,i.to.x-i.from.x));if(l>0){for(a.sort(function(t,e){return t._angle-e._angle}),n=t/l,e=0,r=0,u=0,m=a.length;m>u;u++)i=a[u],i.toPie0=e,e+=i.toPieValue*n,i.toPie1=e,o=i._angle-(i.toPie0+i.toPie1)/2,0>o&&(o+=2*Math.PI),r+=o;for(r/=a.length,r-=Math.PI,d=0,g=a.length;g>d;d++)i=a[d],i.toPie0+=r,i.toPie1+=r;_.push(a=[])}else _.push(void 0)}return _},e.prototype.doLayout=function(t,e,i,n,s,o,r,a){return null==r&&(r=!1),null==a&&(a=!0),"radial"===this.settings.mode?this.doRadialLayout(t,e,i,n,s,o,r,a):this.doForceLayout(t,e,i,n,s,o,r,a)},e.prototype.updateBackgroundLinks=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d;if(n=this.layer.links(),o=this.layer.nodes(),"radial"===this.settings.mode){for(r=this.scene.lastFocusNode?this.scene.lastFocusNode:o[0],r?(e=new RadialLayout,s=e.getMainLinks(r)):s={},u=[],a=0,h=n.length;h>a;a++)i=n[a],t=!s.hasOwnProperty(i.id),i.background!==t?(i.background=t,u.push(this.layer.touchLink(i))):u.push(void 0);return u}for(d=[],l=0,c=n.length;c>l;l++)i=n[l],i.background?(i.background=!1,d.push(this.layer.touchLink(i))):d.push(void 0);return d},e.prototype.doRadialLayout=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m;for(null==r&&(r=!1),null==a&&(a=!0),d=this.layer.nodes(),c=this.layer.links(),l=this.scene.settings.style.fadeTime,f=0,m=d.length;m>f;f++)u=d[f],u.locked=u.userLock||u.locks>0,u.visibility=u.added?(t-u.added)/l:u.removed?1-(t-u.removed)/l:1;return p=this.scene.lastFocusNode?this.scene.lastFocusNode:d[0],p&&(h=new RadialLayout,h.setParams(0,0,this.settings.nodeSpacing,.5*-Math.PI,1.5*Math.PI),h.layoutGraph(p)),0},e.prototype.doForceLayout=function(t,e,i,n,s,o,r,a){var l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O;for(d=this.scene.settings.style.fadeTime,h=(this.scene.width+1)/(this.scene.height+1),h>0||(h=null),u=this.scene.settings.layout.aspectRatio?h:null,x=this.settings.nodeSpacing,c=1,S=this.layer.nodes(),l=!1,p=!1,M=0,B=S.length;B>M;M++)b=S[M],b.locked=b.userLock||b.locks>0,p||(p=b.locked),l||(l=b.added||b.removed),b.visibility=b.added?1-.8*(t-b.added)/d:b.removed?.2+.8*(t-b.removed)/d:1;for(_={},w=[],O=this.layer.links(),T=0,A=O.length;A>T;T++)m=O[T],v=m.multiId,k=m.targetStrength,g=m.targetLength,P=1,(m.removed||m.added)&&(f=m.from.links.length>1&&m.to.links.length>1,C=f||m.removed?.2:k,m.removed&&(P=1-(t-m.removed)/d),m.added&&(P=(t-m.added)/d,g=.2+(g-.2)*P),k=k*P+C*(1-P)),_.hasOwnProperty(v)?(y=_[v],y.strength=Math.max(k,y.strength),y.length=Math.max(g,y.length),y.visibility=Math.max(P,y.visibility)):(y={from:m.from,to:m.to,strength:k,length:g,visibility:P,direction:m.direction},_[v]=y,w.push(y));if(this.springs.updateParams(x,c,u),r||Base_Helpers.hasProperties(s)){for(D=0,I=S.length;I>D;D++)b=S[D],b.locked||(b.locked=!s.hasOwnProperty(b.id));this.springs.updateGraph(S,w,i),r||this.scene.settings.layout.globalLayoutOnChanges?(this.springs.updateParams(x,c,h),this.springs.globalLayout(S,o,r&&!p),this.springs.updateParams(x,c,u)):this.springs.timedLayout(S,.001*e)}if(a||l){if(!a)for(L=0,F=S.length;F>L;L++)b=S[L],b.locked||(b.locked=!b.removed&&!b.added);this.springs.updateGraph(S,w,i),this.springs.timedLayout(S,.001*e)}return this.springs.stability},e}(Base_ChartElement);var Netchart_Toolbar;ToolbarItemNames.rearrange=function(t,e){return new Base_Bar_UserButton(t,{label:t.settings.localization.toolbar.rearrangeButton,cssClass:"DVSL-bar-btn-rearrange",title:t.settings.localization.toolbar.rearrangeTitle,showLabels:e.showLabels,onClick:function(){return function(){return t.resetLayout()
}}(this)})},ToolbarItemNames.freeze=function(t,e){return new Base_Bar_ToggleButton(t,{label:t.settings.localization.toolbar.freezeButton,cssClass:"DVSL-bar-btn-lock-all",cssClassEnabled:"DVSL-bar-btn-lock-all-active",title:t.settings.localization.toolbar.freezeTitle,titleActive:t.settings.localization.toolbar.unfreezeTitle,showLabels:e.showLabels,getChartState:function(){return"static"===t.scene.settings.layout.mode},onEnable:function(){return t.scene.settings.layout.mode="static",t.events.notifySceneChanges({layout:!0})},onDisable:function(){return t.scene.settings.layout.mode="dynamic",t.events.notifySceneChanges({layout:!0})}})},ToolbarItemNames.fit=function(t,e){return new Base_Bar_ToggleButton(t,{label:t.settings.localization.toolbar.fitButton,cssClass:"DVSL-bar-btn-fit",cssClassEnabled:"DVSL-bar-btn-fit-active",title:t.settings.localization.toolbar.fitTitle,showLabels:e.showLabels,getChartState:function(){return"overview"===t.scene.autoZoomMode},onEnable:function(){return t.autoZoom.setZoom("overview")},onDisable:function(){return t.autoZoom.setZoom("auto")}})},Netchart_Toolbar=function(){function t(){}return t.settings={enabled:!0,side:"bottom",align:"left",showLabels:!1,align:"left",items:[{item:"fit"},{item:"rearrange"},{item:"freeze"},{item:"back"},{item:"fullscreen"},{item:"zoomcontrol",side:"left",align:"bottom"}]},t}();var Timechart_TimeAxis,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_TimeAxis=function(t){function e(t){this.chart=t,this.computeSize=__bind(this.computeSize,this),this.scene=this.chart.scene,this.tt=new Timechart_TimeSetup(this.scene),this.options=this.scene.settings.timeAxis,this.context=null,this.tt=null,this.curSceneScale=0,this.minorFormat=null,this.majorFormat=null,this.minorTimeUnit=null,this.majorTimeUnit=null,this.minorLabelHeight=null,this.majorLabelHeight=null,this.minorLabelWidths=null,this.minorLabelBallonWidths=null,this.majorLabelWidths=null,this.fullLabelWidths=null,this.multiYearWidth=null,this.majorSlices=null,this.minorSlices=null,this.panel=new Base_ChartPanel,this.panel.side="bottom",this.panel.packingOrder=100,this.panel.computeSize=this.computeSize}return __extends(e,t),e.prototype.animationOrder=610,e.prototype.paintOrder=30,e.prototype.updateOrder=1e3,e.settings={enabled:!0,vgrid:!0,minUnitWidth:12,maxUnitWidth:200,showHolidays:!0,miniTimeRuler:!0,unitSizePolicy:"auto",style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,minorTimeBalloonStyle:{fillColor:"#FFF"},majorTimeBalloonStyle:{fillColor:"AAA"},minorTimeLabel:{fillColor:"#000000",font:"12px Arial"},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial"},dateLighten:{fillColor:"rgba(255,255,255,0.2)"},dateHolidays:{fillColor:"rgba(230,230,230,0.2)"},minorTimeRuler1:{lineColor:"rgba(0,0,0,0.2)"},minorTimeRuler2:{lineColor:"rgba(255,255,255,0.1)"},vgrid:{lineColor:"rgba(0,0,0,0.1)"}}},e.prototype.computeSize=function(t,e,i){var n,s,o,r,a,l,h,c,u,d;if(!this.options.enabled)return this.scene.bottomAxisSize=0,[t,0];for(r=moment(0xc694d6e77ef8).utc(),i.save(),Base_Graphics.textStyle(i,this.options.style.minorTimeLabel),this.minorLabelHeight=.8*Base_Graphics.getTextHeight(i,this.options.style.minorTimeLabel.font),this.minorLabelWidths={},this.minorLabelBallonWidths={},u=Base_TimeStep.knownUnits,a=0,h=u.length;h>a;a++)s=u[a],o=i.measureText(r.format(this.scene.settings.localization.timeAxisDates.minorLabelTimeFormats[s])).width,this.minorLabelWidths[s]=o,this.minorLabelBallonWidths[s]=o+this.minorLabelHeight;for(Base_Graphics.textStyle(i,this.options.style.majorTimeLabel),this.majorLabelHeight=.8*Base_Graphics.getTextHeight(i,this.options.style.majorTimeLabel.font),this.majorLabelWidths={},this.fullLabelWidths={},d=Base_TimeStep.knownUnits,l=0,c=d.length;c>l;l++)s=d[l],this.majorLabelWidths[s]=i.measureText(r.format(this.scene.settings.localization.timeAxisDates.majorLabelTimeFormats[s])).width+this.majorLabelHeight,this.fullLabelWidths[s]=i.measureText(r.format(this.scene.settings.localization.timeAxisDates.majorLabelFullTimeFormats[s])).width+this.majorLabelHeight;return this.multiYearWidth=i.measureText("8888 - 8888").width+this.majorLabelHeight,i.restore(),n=Math.round(Math.min(2.3913043*(this.minorLabelHeight+this.majorLabelHeight),e)),this.scene.bottomAxisSize=n,[t,n]},e.prototype.onSceneChange=function(t){return t.changes.settings&&t.changes.settingsChanges.timeAxis?t.changes.bounds=!0:void 0},e.prototype.getPanels=function(){return this.panel},e.prototype.multiples={s:[1,2,5,15,30],m:[1,2,5,15,30],h:[1,3,6,12,24],d:[1,2,5,10],w:[1,5,10,20],M:[1,3,6],y:[1,10,100,1e3]},e.prototype.getMajorLabelWidth=function(t,e){return"y"===t.unit&&t.count>1?this.multiYearWidth:e?this.majorLabelWidths[t.unit]:this.fullLabelWidths[t.unit]},e.prototype.computeLabels=function(t){var e,i,n,s,o,r,a,l,h,c;if(a=new Timechart_TimeSetup(this.scene.settings),i=this.scene.timeEnd-this.scene.timeStart,r=a.toBiggerDisplayPeriod(t),null!=r)for(e=new Base_TimeStep("s",1),s=r.isSmaller(e)?e:r,o=this.computeMinorUnit(s),r=a.toBiggerDisplayPeriod(s);r&&(r.approxTime()<=.5*i||s.approxTime()<this.scene.dxToDtime(this.getMajorLabelWidth(s,o)));)s=r,o=this.computeMinorUnit(s),r=a.toBiggerDisplayPeriod(r);if(null==r)for(s="y"===t.unit?t:new Base_TimeStep("y",1),c=this.multiples.y,l=0,h=c.length;h>l&&(n=c[l],s=new Base_TimeStep("y",n),o=this.computeMinorUnit(s),!(s.approxTime()>this.scene.dxToDtime(this.getMajorLabelWidth(s,o))));l++);return[o,s]},e.prototype.computeMinorUnit=function(t){var e,i,n,s,o,r,a,l,h;for(n=this.scene.displayUnit.clone(),s=new Base_TimeStep(Base_TimeStep.toSmallerUnit[t.unit],1),s.unit&&s.isBigger(n)&&(n=s),o=n.approxTime(),i=null,r=1.5*this.scene.dxToDtime(this.minorLabelWidths[n.unit]),h=this.multiples[n.unit],a=0,l=h.length;l>a;a++)if(e=h[a],e<n.count&&(e=n.count),n.count=e,o=n.approxTime(),o>=r){i=n;break}return i&&i.isEqual(t)&&(i=null),i},e.prototype.doAnimations=function(){var t,e,i,n;if(null!=this.scene.displayUnit&&this.options.enabled&&this.scene.timeStart<this.scene.timeEnd)return i=this.scene.getScale(),Math.abs(1-this.curSceneScale/i)<.001||(this.curSceneScale=i,n=this.computeLabels(this.scene.displayUnit),e=n[0],t=n[1],null!=e?(this.minorFormat=this.scene.settings.localization.timeAxisDates.minorLabelTimeFormats[e.unit],this.majorFormat=this.scene.settings.localization.timeAxisDates.majorLabelTimeFormats[t.unit]):(this.minorFormat=null,this.majorFormat=this.scene.settings.localization.timeAxisDates.majorLabelFullTimeFormats[t.unit]),this.minorTimeUnit=e,this.majorTimeUnit=t,(null===this.majorSlices||t.approxTime()!==this.majorSlices.step.approxTime())&&(this.majorSlices=new Timechart_TimeSlicer(this.scene,t)),null==e||null!==this.minorSlices&&e.approxTime()===this.minorSlices.step.approxTime()?null===e&&(this.minorSlices=null):this.minorSlices=new Timechart_TimeSlicer(this.scene,e,[],null,null,!1)),this.majorSlices.update(),this.minorSlices&&this.minorSlices.update(),this.scene.minorTimeFormat=this.minorFormat,this.scene.minorTimeUnit=this.minorTimeUnit,this.scene.majorTimeFormat=this.majorFormat,this.scene.majorTimeUnit=this.majorTimeUnit},e.prototype.paintScene=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A,I,F,O,E,N,H,R,z,U,j,Y,W,V,G,Z,q,X,J,Q,K,$,te,ee,ie,ne,se,oe,re,ae,le,he,ce,ue,de,pe,fe,me,ge,ye,ve,_e,be,xe,Se,we,Ce,ke,Pe;if(null!=this.scene.displayUnit&&this.options.enabled&&this.scene.timeStart<this.scene.timeEnd){for(l=t.context,y=t.labelRenderer,G=this.scene.x0,Z=G+this.scene.width,$=this.panel.top+1,ee=this.panel.bottom,c=ee-$,te=this.scene.y0,u=this.scene.height,ie=ee-1.8*this.majorLabelHeight,Base_Graphics.pushClip(l,G,te,this.scene.width,c+u),Q=this.majorSlices.xes,E=this.majorSlices.times,a=this.majorSlices.fromIndex,N=this.majorSlices.toIndex,T=this.majorSlices.step.numberOfUnits(0,E[a]),m=(0|T)%2===0,l.beginPath(),p=ne=a,pe=N-2;pe>=ne;p=ne+=1)m=!m,m||(X=(0|Math.max(Q[p],G))+1,J=0|Math.min(Q[p+1],Z),l.rect(X,$,J-X,c));if(Base_Graphics.fill(l,this.scene.settings.timeAxis.style.dateLighten),this.options.showHolidays&&this.minorSlices&&("d"===this.minorSlices.step.unit||"h"===this.minorSlices.step.unit)){for(fe=this.scene.timeToXCoefs(),H=fe[0],R=fe[1],s=864e5,D=this.scene.timeStart,D=Math.round(D-D%s),o=moment(D).utc().weekday(),d=this.scene.settings.localization.holidayWeekdays,l.beginPath(),X=D*R+H;Z>=X;)J=X+R*s,Base_Helpers.arrayContains(d,o)&&l.rect(X,te,J-X,Math.min(5,c)+u),o=(o+1)%7,X=J;Base_Graphics.fill(l,this.scene.settings.timeAxis.style.dateHolidays)}if(this.options.vgrid){for(h=Base_Graphics.beginStrokeAndFill(l,this.options.style.vgrid),p=se=_e=a+1,be=N-2;be>=se&&(V=(0|Q[p])+.5,!(V>=Z));p=se+=1)h.moveTo(V,te),h.lineTo(V,ee);Base_Graphics.endStrokeAndFill(l,h,this.options.style.vgrid)}if(g="y"===this.majorSlices.step.unit&&this.majorSlices.step.count>1,A=this.getMajorLabelWidth(this.majorSlices.step,this.minorFormat),!this.minorSlices||this.majorSlices.step.unit!==this.minorSlices.step.unit){if(this.scene.settings.timeAxis.style.showMajorTimeBalloons){for(l.beginPath(),p=oe=a,xe=N-2;xe>=oe;p=oe+=1)z=Q[p],U=Q[p+1],z>=Z||G>=U||(D=E[p],I=(z+U)/2,G>z&&(z=G,I=Math.min((z+U)/2,U-A)),U>Z&&(U=Z,I=Math.max((z+U)/2,z+A)),Base_Graphics.strokeBalloon2(l,I,ie+1,A,this.majorLabelHeight));Base_Graphics.paint(l,this.scene.settings.timeAxis.style.majorTimeBalloonStyle)}for(p=re=a,Se=N-2;Se>=re;p=re+=1)z=Q[p],U=Q[p+1],z>=Z||G>=U||(D=E[p],g?(L=E[p+1],B=moment(D).utc().format(this.majorFormat)+" - "+moment(L).utc().format(this.majorFormat)):B=moment(D).utc().format(this.majorFormat),I=(z+U)/2,G>z&&(z=G,I=Math.min((z+U)/2,U-A)),U>Z&&(U=Z,I=Math.max((z+U)/2,z+A)),W=new Base_Label,W.text=B,W.textStyle=this.scene.settings.timeAxis.style.majorTimeLabel,W.aspectRatio=0,y.paintWithStyle(l,I,ie,1,W,W))}if(this.minorSlices){if(E=this.minorSlices.times,Q=this.minorSlices.xes,a=this.minorSlices.fromIndex,N=this.minorSlices.toIndex,A=this.minorLabelWidths[this.minorSlices.step.unit],x=$+.4*this.minorLabelHeight|0,_=$-1,b=x+1.6*this.minorLabelHeight|0,this.scene.settings.timeAxis.style.showMinorTimeBalloons){for(l.beginPath(),F=null,p=ae=a,we=N-1;we>=ae;p=ae+=1)V=Q[p],F=Base_Graphics.strokeBalloon(l,V,$-5,A,this.minorLabelHeight);Base_Graphics.paint(l,this.scene.settings.timeAxis.style.minorTimeBalloonStyle)}else{for(r=this.majorSlices.fromIndex,O=this.majorSlices.toIndex,q=this.majorSlices.xes,l.beginPath(),f=r,p=le=a,Ce=N-1;Ce>=le;p=le+=1){for(V=Q[p];V>q[f];)f+=1;if(q[f]!==V){if(V>=Z)break;V=(0|V)-.5,l.moveTo(V,_),l.lineTo(V,b)}}for(Base_Graphics.stroke(l,this.scene.settings.timeAxis.style.minorTimeRuler1),l.beginPath(),f=r,p=he=a,ke=N-1;ke>=he;p=he+=1){for(V=Q[p];V>q[f];)f+=1;if(q[f]!==V){if(V>=Z)break;V=(0|V)+.5,l.moveTo(V,_),l.lineTo(V,b)}}Base_Graphics.stroke(l,this.scene.settings.timeAxis.style.minorTimeRuler2)}for(e=this.scene.settings.timeAxis.style.showMinorTimeBalloons?"center":"left",K=this.scene.settings.timeAxis.style.showMinorTimeBalloons?0:3,p=ce=a,Pe=N-1;Pe>=ce;p=ce+=1)V=Q[p],D=E[p],B=moment(D).utc().format(this.minorFormat),W=new Base_Label,W.text=B,W.textStyle=this.scene.settings.timeAxis.style.minorTimeLabel,W.align=e,W.baseLine="top",y.measure(l,W,W),v=V+K+W.hwidth,y.paintWithStyle(l,v,x+W.hheight,1,W,W)}if(i=null,this.scene.settings.timeAxis.style.miniTimeRuler&&null!=i&&i.xes[i.fromIndex+1]-i.xes[i.fromIndex]>2){for(j=$-1,Y=$+3,Q=i.xes,w=this.majorSlices.fromIndex,P=null!=this.minorSlices?this.minorSlices.fromIndex:w,C=this.majorSlices.xes,M=null!=this.minorSlices?this.minorSlices.xes:C,l.beginPath(),S=w,k=P,n=0,p=ue=me=i.fromIndex,ge=i.toIndex-2;ge>=me?ge>=ue:ue>=ge;p=ge>=me?++ue:--ue){for(V=Q[p];V>C[S];)S+=1;if(C[S]!==V){for(;V>M[k];)k+=1;if(M[k]!==V){if(V>=Z)break;V=(0|V)-.5,l.moveTo(V,j),l.lineTo(V,Y),n++}}}for(n&&Base_Graphics.stroke(l,this.scene.settings.timeAxis.style.minorTimeRuler1),n=0,l.beginPath(),S=w,k=P,p=de=ye=i.fromIndex,ve=i.toIndex-2;ve>=ye?ve>=de:de>=ve;p=ve>=ye?++de:--de){for(V=Q[p];V>C[S];)S+=1;if(C[S]!==V){for(;V>M[k];)k+=1;if(M[k]!==V){if(V>=Z)break;V=(0|V)+.5,l.moveTo(V,j),l.lineTo(V,Y),n++}}}n&&Base_Graphics.stroke(l,this.scene.settings.timeAxis.style.minorTimeRuler2)}Base_Graphics.popClip(l)}},e}(Base_ChartElement);var Timechart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_InfoPopup=function(t){function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.animationOrder=700,e.prototype.paintOrder=25,e.prototype.updateOrder=1100,e.prototype.doAnimations=function(t){var e,i;return this.chart.selection.isSelecting&&this.scene.selectionStart?(e=this.scene.selectionStart,i=this.scene.selectionEnd,this.showInfoPopup(e,i,null,this.buildContent(e,i,null),t)):void 0},e.prototype.getPopupAreaMouseMoved=function(t,e){var i,n;return this.scene.displayUnit&&this.scene.xyInChartOrBottom(t,e)?(i=this.scene.hoverFrom,n=this.scene.hoverTo,[i,n]):null},e.prototype.buildHeader=function(t,e){var i,n,s,o,r,a,l,h,c,u,d;return u=this.scene.displayUnit,n=Math.ceil(u.numberOfUnits(t,e)),d=n*u.count===1?this.scene.settings.localization.timeUnitsNames[u.unit]:this.scene.settings.localization.timeUnitsNamesPlural[u.unit],1===n?(a=moment(t).utc(),s=a.format(this.scene.settings.localization.infoDates.fullTimeFormats[u.unit]),o=""+s):(("d"===u.unit||"M"===u.unit||"y"===u.unit||"ms"===u.unit)&&(e-=1),a=moment(t).utc(),l=moment(e).utc(),i=u.getBigger()||u,"y"!==u.unit&&i.roundTimeDown(t)===i.roundTimeDown(e)?(c=a.format(this.scene.settings.localization.infoDates.majorTimeFormats[u.unit]),r=a.format(this.scene.settings.localization.infoDates.minorTimeFormats[u.unit]),h=l.format(this.scene.settings.localization.infoDates.minorTimeFormats[u.unit]),o=""+r+" - "+h+" "+c):(r=a.format(this.scene.settings.localization.infoDates.fullTimeFormats[u.unit]),h=l.format(this.scene.settings.localization.infoDates.fullTimeFormats[u.unit]),o=""+r+" - "+h)),"<em></em><strong>"+o+("<small>("+n*u.count+" "+d+")</small></strong>")},e}(Linearchart_InfoPopup);var Timechart_DataWarehouse;Timechart_DataWarehouse=function(){function t(t){this.chart=t,this.scene=this.chart.scene,this.requests={},this.results={},this.dataSlicesCache={},this.nextRequestId=0,this.hasNewRequests=!1}return t.prototype.registerDataProcessingRequest=function(t){return this.requests[this.nextRequestId]=t,this.results[this.nextRequestId]={leadIn:null,leadOut:null,times:[],xes:[],values:[],fromIndex:0,toIndex:0,data:[],from:0,to:0,slicer:null,dataExistsFrom:null,dataExistsTo:null},this.hasNewRequests=!0,this.nextRequestId++},t.prototype.removeDataProcessingRequest=function(t){return delete this.requests[t],delete this.results[t]},t.prototype.getData=function(t){return this.results[t]},t.prototype.clear=function(){return this.requests={},this.results={}},t.prototype.process=function(t){var e,i,n,s,o,r,a,l;if(e=t.changes,e.time||e.data||e.displayUnit||e.bounds||e.settings||this.hasNewRequests)if(this.scene.timeStart>=this.scene.timeEnd){a=this.requests;for(s in a)o=a[s],r=this.results[s],r.dataExistsFrom=null,r.dataExistsTo=null}else{this.hasNewRequests=!1,this.loading=!1,this.hasSomeData=!1,n=e.data||e.time,l=this.requests;for(s in l)o=l[s],r=this.results[s],i=this.updateData(n,o,r),this.updateSlices(i,s,o,r);this.scene.loading=this.loading,this.loading?this.scene.setMessage("noData",this.scene.settings.localization.loadingLabel,10):this.hasSomeData?this.scene.setMessage("noData",null):this.scene.setMessage("noData",this.scene.settings.localization.noDataLabel,999)}},t.prototype.exportData=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f;for(c=new Timechart_TimeSlicer(this.scene,i,[],t,e,!0,0),d=c.times,h=[],p=0,f=n.length;f>p;p++)l=n[p],r=l.data,a={},u=this.chart.getData(r.source),o=u.getDataForRange(t,e,i,null),s=new Array(d.length-1),this.fillValues(o.values,c.times,s,c.fromIndex,c.toIndex,r,i),h.push(s);return{timestamps:c.times.slice(c.fromIndex,c.toIndex-1),values:h}},t.prototype.updateData=function(t,e,i){var n,s,o,r,a,l;return s=this.chart.getData(e.source),o=this.getUnitToUse(e),r=(this.scene.timeEnd-this.scene.timeStart)*s.dataSettings.prefetchRatio,(t||!i.from&&this.scene.timeStart||!i.to&&this.scene.timeEnd||i.from>=i.to||this.scene.timeStart-r<i.from||this.scene.timeEnd+r>i.to||null!=i.dataExistsFrom&&i.dataExistsFrom>this.scene.timeEnd||null!=i.dataExistsTo&&i.dataExistsTo<this.scene.timeStart)&&(t=!0,a=this.scene.timeStart-2*r,l=this.scene.timeEnd+2*r,n=s.getDataForRange(a,l,o,function(t){return function(){return t._newDataArrived()}}(this)),s.noData||(this.hasSomeData=!0),n.from>this.scene.timeEnd||n.to<this.scene.timeStart?(i.data=[],i.from=0,i.to=0,i.dataExistsFrom=null,i.datasExistsTo=null,this.loading||(this.loading=n.loading)):(this.loading||(this.loading=n.loading&&(n.from>this.scene.timeStart||n.to<this.scene.timeEnd)),i.data=n.values,i.from=a,i.to=l,i.dataExistsFrom=n.from,i.dataExistsTo=n.to)),t},t.prototype.updateSlices=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m;return a=this.getUnitToUse(i),r=i.index,o=i.valueFunction,s=n.data,h=n.slicer=this.getSlice(e,i,a),m=h.update(this.scene.timeStart,this.scene.timeEnd),d=m[0],u=m[1],c=m[2],p=n.times=h.times,n.xes=h.xes,f=n.values=h.values,s=n.data,n.fromIndex=h.fromIndex,n.toIndex=h.toIndex,s?s.length>0&&!o&&r>=s[0].length?this.chart.error("No data for this DataIndex: "+r+", only "+(s[0].length-1)+" values present"):(t?this.fillValues(s,p,f,h.fromIndex,h.toIndex,i,a):(this.fillValues(s,p,f,h.fromIndex,u+1,i,a),this.fillValues(s,p,f,c-1,h.toIndex,i,a)),this.setLeads(i,n,a)):(n.values=function(){var t,e,i;for(i=[],t=0,e=p.length;e>t;t++)l=p[t],i.push(null);return i}(),n.leadIn=null,n.leadOut=null)},t.prototype.getSlice=function(t,e,i){var n,s;return n=""+t+"-"+i.toString(),s=this.dataSlicesCache.hasOwnProperty(n)?this.dataSlicesCache[n]:this.dataSlicesCache[n]=new Timechart_TimeSlicer(this.scene,i,["values"])},t.prototype.getUnitToUse=function(){return this.scene.displayUnit},t.prototype.setLeads=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;return c=t.noDataPolicy,o=t.index,s=t.valueFunction,n=e.data,v=e.values,m=e.times,l=null,h=null,"join"===c&&n&&(a=e.fromIndex,null===v[a]&&(r=Timechart_Data.binSearch(n,m[a]),r=Timechart_Data.linSearchDown(n,r,o,s),-1!==r&&(f=n[r][0],S=e.slicer.makeMiniSlice(f),d=S[0],b=S[1],p=S[2],x=S[3],u=[d,p],_=[b,x],y=[null,null],this.fillValues(n,u,y,0,2,t,i),l={times:u,xes:_,values:y,fromIndex:0,toIndex:2})),g=e.toIndex,null===v[g-2]&&(r=Timechart_Data.binSearch(n,m[g-1]),r=Timechart_Data.linSearchUp(n,r,o,s),-1!==r&&(f=n[r][0],w=e.slicer.makeMiniSlice(f),d=w[0],b=w[1],p=w[2],x=w[3],u=[d,p],_=[b,x],y=[null,null],this.fillValues(n,u,y,0,2,t,i),h={times:u,xes:_,values:y,fromIndex:0,toIndex:2}))),e.leadIn=l,e.leadOut=h},t.prototype.fillValues=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p;if(a=o.aggregation,h=o.index,l=o.valueFunction,u=o.aggregatedValueFunction,!(n+1>=s)&&("sum"===a?this.fillValueSum(t,e,i,n,s,h,l):"min"===a?this.fillValueMin(t,e,i,n,s,h,l):"max"===a?this.fillValueMax(t,e,i,n,s,h,l):"avg"===a?this.fillValueAvg(t,e,i,n,s,h,l):"first"===a?this.fillValueFirst(t,e,i,n,s,h,l):"last"===a?this.fillValueLast(t,e,i,n,s,h,l):this.chart.error("Unrecognized aggregation function: "+a),u))for(c=d=n,p=s-2;p>=d;c=d+=1)i[c]=u(i[c],e[c],r)},t.prototype.fillValueSum=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m;for(h=t.length,c=Timechart_Data.binSearch(t,e[n]),u=f=n,m=s-2;m>=f;u=f+=1){for(d=e[u+1],a=0,l=0;h>c&&t[c][0]<d;)p=r?r(t[c]):t[c][o],c+=1,null!=p&&(a+=p,l+=1);i[u]=l>0?a:null}},t.prototype.fillValueMin=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m;for(h=t.length,c=Timechart_Data.binSearch(t,e[n]),u=f=n,m=s-2;m>=f;u=f+=1){for(d=e[u+1],a=1/0,l=0;h>c&&t[c][0]<d;)p=r?r(t[c]):t[c][o],c+=1,null!=p&&(a=Math.min(a,p),l+=1);i[u]=l>0?a:null}},t.prototype.fillValueMax=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m;for(h=t.length,c=Timechart_Data.binSearch(t,e[n]),u=f=n,m=s-2;m>=f;u=f+=1){for(d=e[u+1],a=-1/0,l=0;h>c&&t[c][0]<d;)p=r?r(t[c]):t[c][o],c+=1,null!=p&&(l+=1,a=Math.max(a,p));i[u]=l>0?a:null}},t.prototype.fillValueAvg=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m;for(h=t.length,c=Timechart_Data.binSearch(t,e[n]),u=f=n,m=s-2;m>=f;u=f+=1){for(d=e[u+1],a=0,l=0;h>c&&t[c][0]<d;)p=r?r(t[c]):t[c][o],c+=1,null!=p&&(a+=p,l+=1);i[u]=l>0?a/l:null}},t.prototype.fillValueFirst=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,m;for(l=t.length,h=Timechart_Data.binSearch(t,e[n]),c=f=n,m=s-2;m>=f;c=f+=1){for(d=e[c+1],a=null,u=!0;l>h&&t[h][0]<d;)u&&(p=r?r(t[h]):t[h][o],null!=p&&(a=p,u=!1)),h+=1;i[c]=a}},t.prototype.fillValueLast=function(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f;for(l=t.length,h=Timechart_Data.binSearch(t,e[n]),c=p=n,f=s-2;f>=p;c=p+=1){for(u=e[c+1],a=null;l>h&&t[h][0]<u;)d=r?r(t[h]):t[h][o],h+=1,null!=d&&(a=d);i[c]=a}},t.prototype._newDataArrived=function(){return this.chart.events.notifySceneChanges({data:!0})},t}();var Base_Settings;Base_Settings=function(){function t(e){var i,n,s,o,r,a,l,h,c,u,d,p;this._imageCache={},this._imageLoading={},this._imagesPendingForErrors=[],this._loadedAssets={},this._assetsLoaded=!0,this._assetsToLoad=[],this._imgAssets={},this._defaults=e,this._computedData=[],this._computedDataMap={},this.applyDefaults(e),i=Base_Helpers.detectBrowser(),n=t.perBrowserCustomizations[i],n&&this.applyRec(this,n,{},0),o=t.libName,h=[],h.push(new RegExp("((file:///|https?://)[^/]+/.*?)/?"+o+"(-dev|.min|).js")),h.push(new RegExp("((file:///|https?://)[^/]+/.*/src)/?"+o)),p=document.getElementsByTagName("script");for(s in p)if(c=p[s],c.src)for(u=0,d=h.length;d>u;u++)l=h[u],(r=c.src.match(l))&&(a="/"===r[1][r[1].length-1]?"":"/",this.assetsUrlBase=r[1]+a+"assets/")}return t.libName="zoomcharts",t.perBrowserCustomizations={safari:{advanced:{useAnimationFrame:!1}},chrome:{},opera:{},firefox:{},msie:{}},t.defaults={container:null,width:null,height:null,minHeight:165,maxHeight:2e4,minWidth:100,maxWidth:2e4,theme:null,assetsUrlBase:"",area:{style:{fillColor:"transparent",image:null,overlayColor:null}},data:Base_Data.settings,advanced:{labelCache:!0,highDPI:!0,pointer:{noClickOnDoubleClick:!0,dragSensitivity:10,doubleClickSensitivity:40,doubleClickTimeout:300,longPressTimeout:500,speedAveragingPeriod:200},useAnimationFrame:!0,showTouches:!1,showFPS:!1,logging:!1,style:{messageTextStyle:{fillColor:"#000",font:"15px Arial"},loadingArcStyle:{r:10,lineColor:"#444",lineWidth:1}},maxCanvasWidth:2047,maxCanvasHeight:2047,themeCSSClass:"DVSL-round",assets_applyMethod:"merge",assets:["assets://base.css"],builtinAssets:{logo:Base_images_logo,"error.png":Base_images_error},pdfExportAssets:["assets://jspdf/jspdf.min.js","assets://jspdf/jspdf.plugin.addimage.min.js"],exportProxyURL:"https://zoomcharts.com/developers/export"},events:{onError:null,onSettingsChange:null,onClick:null,onDoubleClick:null,onRightClick:null,onHoverChange:null,onSelectionChange:null,onChartUpdate:null,onPositionChange:null,onAnimationDone:null,chartUpdateDelay:0},interaction:{resizing:Base_Resizer.settings,animation:{scrollDuration:500,hoverDuration:200}},localization:{toolbar:{backButton:"Back",backTitle:"Move one step back in navigation",fullscreenButton:"Fullscreen",fullscreenTitle:"Toggle fullscreen mode",zoomoutButton:"Zoom-out",zoomoutTitle:"Zoom out",exportButton:"Export",exportTitle:"Export Data",exportJpeg:"For Office and Web (jpeg)",exportPNG:"For Photoshop (png)",exportPDF:"For Printer (pdf)",exportCSV:"Spreadsheet (csv)",exportXLS:"Spreadsheet (xls)"},loadingLabel:"Loading...",dataRequestFailed:"Data request failed"},toolbar:Base_Toolbar.settings,title:Base_Title.settings,credits:Base_Credits.settings,legend:Base_Legend.settings},t.prototype.applyCompatibility=function(t,e){var i,n,s,o,r,a,l;for(l=[],r=0,a=e.length;a>r;r++)if(n=e[r],i=n.from,s=n.to,o=Base_Helpers.getProp(t,i),void 0!==o){if(n.filter&&!n.filter(o))continue;s?(n.transform&&(o=n.transform(o)),l.push(this.applyRec(t,Base_Helpers.wrapValue(o,s),{}))):l.push(console.error("Zoomcharts: Setting "+i+" no longer supported. Consider using "+n.alternative+" instead."))}else l.push(void 0);return l},t.prototype.apply=function(t){var e,i,n,s,o,r,a,l;if(null!=t){if(e={},r=null,null!=t.theme&&(r=t.theme,delete t.theme),r&&(this.applyRec(this,r,e,0),t.theme=r),t.data&&(s=!0,Base_Helpers.isArray(t.data)?(n=t.data,delete t.data):n=null),this.applyRec(this,t,e,0),s)if(e.data=!0,this._computedData=[],this._computedDataMap={},n)for(t.data=n,a=0,l=n.length;l>a;a++)i=n[a],o={},this.applyRec(o,this._defaults.data,{}),this.applyRec(o,i,{}),null!=o.name&&(o.id=o.name),this._computedData.push(o),this._computedDataMap[o.id]=o;else null!=this.data.name&&(this.data.id=this.data.name),this.data.id||(this.data.id="default"),this._computedData.push(this.data),this._computedDataMap[this.data.id]=this.data;return e}},t.prototype.applyDefaults=function(t){var e;return e=t.theme,e?(delete t.theme,this.apply(t),this.apply(e),t.theme=e):this.apply(t)},t.applyRec=function(t,e,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v;if(null==n&&(n=0),n>10)throw"Stack depth greater than 10, seems like recursive settings";if(void 0===t)throw console.error(n,t,e),"Tried to applyRec on undefined";for(r in e)if(m=e[r],d=t[r],(void 0===d||m!==d)&&(s=Base_Helpers.isArray(m),h=Base_Helpers.isObject(m),c=Base_Helpers.isArray(d),u=Base_Helpers.isObject(d),o=Base_Helpers.isFunction(m),p=!1,c&&!s&&(console.error("Applying settings: Setting expected to be array but got something else: "+r+" = "+m),p=!0),null===m||!u||h||o||(console.error("Applying settings: Setting expected to be object but got something else: "+r+" = "+m),p=!0),!p))if(h)if(null==d&&(s?(t[r]=[],i[r]=[],u=!0):(t[r]={},i[r]={},u=!0)),(null===m||void 0===m)&&(t[r]=m,i[r]=m),h&&!u&&(t[r]={},i[r]={}),"container"===r)t[r]=m,i[r]=m;else if(s){if(l=r+"_applyMethod",a=e[l]||t[l],"merge"===a)for(f=t[r],y=0,v=m.length;v>y;y++)g=m[y],Base_Helpers.arrayContains(f,g)||f.push(g);else t[r]=m;i[r]=m}else i.hasOwnProperty(r)||(i[r]={}),this.applyRec(t[r],m,i[r],n+1);else void 0===m?(delete t[r],i[r]=m):(t[r]=m,i[r]=m);return 1},t.extendDefaults=function(e,i){var n;return n=Base_Helpers.realClone(e),t.applyRec(n,i,{},0),n},t.prototype.applyRec=t.applyRec,t.prototype.applyById=function(t,e,i){var n,s,o,r,a,l,h,c,u;for(u=[],a=0,h=e.length;h>a;a++){if(n=e[a],o=!1,n.id)for(l=0,c=t.length;c>l;l++)if(r=t[l],r.id===n.id){s={},this.applyRec(r,n,s,0),i.push(s),o=!0;break}o?u.push(void 0):(t.push(n),u.push(i.push(n)))}return u},t.prototype.applySeries=function(t,e,i){var n,s,o,r,a,l,h;for(r=0===t.length?[{}]:t,n=[],l=0,h=r.length;h>l;l++)if(o=r[l],Base_Helpers.isObject(o)){if(s={},this.applyRec(s,i,{}),a=o.type||s.type,!e.hasOwnProperty(a))throw"Settings: Unrecognized type = "+a;this.applyRec(s,e[a],{}),this.applyRec(s,o,{}),n.push(s)}return n},t.prototype.getAssetUrl=function(t){var e;return 0===t.indexOf("builtin://")?this.advanced.builtinAssets[t.slice(10)]:0===t.indexOf("assets://")?(e="/"===this.assetsUrlBase[this.assetsUrlBase.length-1]?this.assetsUrlBase:this.assetsUrlBase+"/",e+t.slice(9)):t},t.prototype.hasPendingRequests=function(){return Base_Helpers.hasProperties(this._imageLoading)},t.prototype.getAssetImage=function(t,e){var i,n,s;return this._imageCache.hasOwnProperty(t)?this._imageCache[t]:this._imageLoading.hasOwnProperty(t)?null:(s=this.getAssetUrl(t))?(n=function(i){return function(n){return delete i._imageLoading[t],i._imageCache[t]=n,e?e(n):void 0}}(this),i=function(t){return function(){var e,i,s,o;return s="builtin://error.png",e=t._imageCache[s],e?n(e):(t._imagesPendingForErrors.push(n),t._imageLoading.hasOwnProperty(s)||(i=function(e){var i,n,o,r;for(delete t._imageLoading[s],t._imageCache[s]=e,r=t._imagesPendingForErrors,n=0,o=r.length;o>n;n++)(i=r[n])(e);return t._imagesPendingForErrors=null},o=Base_Helpers.buildImage(t.getAssetUrl(s),i,function(){return 1}),t._imageCache.hasOwnProperty(s))?void 0:t._imageLoading[s]=!0)}}(this),this._imageLoading[t]=!0,Base_Helpers.buildImage(s,n,i),this._imageCache.hasOwnProperty(t)?this._imageCache[t]:null):null},t}();var Piechart_Legend,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Legend=function(t){"use strict";function e(t){this.chart=t,e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.paintOrder=20,e.prototype.updateOrder=1e3,e.settings={marker:{shape:"rect"}},e.prototype.onSceneChange=function(t){var i;return e.__super__.onSceneChange.call(this,t),i=t.changes,i.pie?(this.rebuildItems(),i.bounds=!0):void 0},e.prototype.doAnimations=function(){return this.hoverObject=this.scene.hoverSlice,this.selectedObjects=this.scene.selection},e.prototype.paintMarker=function(t,e,i,n,s){var o,r;return r=s.data,o={fillColor:r.currentFillColor,lineColor:this.settings.marker.lineColor},t.beginPath(),Base_Graphics.strokeMarker(t,this.settings.marker.shape,e,i,n),Base_Graphics.paint(t,o)},e.prototype.rebuildItems=function(){var t,e,i,n,s,o;if(e=[],t=this.scene.peek())for(n=t.slices,s=0,o=n.length;o>s;s++)i=n[s],e.push({textColor:this.settings.text.fillColor,label:i.label||i.data.name,data:i});return this.setItems(e)},e}(Base_Legend);var Base_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty;Base_Impl=function(){function t(t,e){var i,n,s,o;if(this.settings=t,this.scene=e,this.notifyAssetsLoaded=__bind(this.notifyAssetsLoaded,this),this.defaultError=__bind(this.defaultError,this),this.chartUpdateNotify=__bind(this.chartUpdateNotify,this),this._containerResize=__bind(this._containerResize,this),!t.container)throw"Chart container not set";if(!Base_Helpers.isDomObject(t.container))throw"Chart container is not a DOM object";this.container=this.settings.container,this.scene.settings=t,this.data={},this.layers=null,this.toolbar=null,this.removed=!1,this.curState=null,this.goingBack=!1,this.chartUpdateOrigin=null,this.currentNavigationState=null,this.fullScreenMode=!1,this.fullscreenBeforeW=0,this.fullscreenBeforeH=0,this.previousSizeW=0,this.previousSizeH=0,this.EVENT_NAMES={},o=t.events;for(n in o)s=o[n],0===n.indexOf("on")&&(i=n.charAt(2).toLowerCase()+n.slice(3),this.EVENT_NAMES[n]=i,this.EVENT_NAMES[i]=i)}return t.prototype.bigfoot=[1428221819366, "https://zoomcharts.com/logo-e1ff9daf54184f6db63db86eec54f74a790e582705dcabd7222d0f96c1db0a8d888.png", "https://zoomcharts.com/92d94ae14acc678193d7c2d0b6420bd1/upgrade?ph=e1ff9daf54184f6db63db86eec54f74a790e582705dcabd7222d0f96c1db0a8d888"],t.prototype.smallfish="92d94ae14acc678193d7c2d0b6420bd1",t.prototype.onRemove=function(){return Base_Helpers.error("Need to override onRemove")},t.prototype.onSettingsChanged=function(){return Base_Helpers.error("Need to override onSettingsChanged")},t.prototype.createDataObj=function(){return Base_Helpers.error("Need to override createDataObj")},t.prototype.removeData=function(){return Base_Helpers.error("Remove data not implemented for this chart")},t.prototype.hideMenu=function(){return 1},t.prototype.updateFilters=function(){return this.events.notifySceneChanges({filters:!0})},t.prototype.updateStyle=function(){return this.events.notifySceneChanges({style:!0})},t.prototype.initialize=function(t){return this.api=t,this.eventListeners={},this.assetsLoaded=!0,this.assetsLoader=new Base_AssetsLoader(this),this.assetsLoader.load(this.settings.advanced.assets,this.notifyAssetsLoaded)&&(this.assetsLoaded=!1),this.container=this.settings.container,void 0!==this.container._DVSL_ChartInstance&&null!==this.container._DVSL_ChartInstance&&this.container._DVSL_ChartInstance.remove(),this.container.innerHTML="",this.container._DVSL_ChartInstance=this,this.container.appendChild(this.layers.container),"undefined"!=typeof G_vmlCanvasManager&&(G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.layers.canvas)),this.events=new Base_ChartEvents(this.layers.mouseTrackLayer,this.layers.canvas,this),this.clearData(),this.title=new Base_Title(this),this.credits=new Base_Credits(this,this.scene.settings.credits),this.api._impl=this
},t.prototype.finalInitialize=function(){var t,e,i,n,s,o;return this.events.addElement(new Base_KeyShortcuts(this)),this.events.addElement(this.layers),this.events.addElement(this.title),this.events.addElement(this.credits),this.events.addElement(new Base_Resizer(this)),this.events.addElement(new Base_MessagesOverlay(this)),this.events.addElement(new Base_TouchMarkers(this.scene)),i=this.bigfoot,o=(new Date).getTime(),i[0]>0?(t=o-i[0],t>0?(n=["Trial expired","Trial expired","It expired "+moment.duration(t).humanize()+" ago","Use the link at bottom-right to upgrade"],this.scene.setMessage("d",n[0],1e3),this._xcount=0,e=function(t){return function(){return t._xcount<n.length-1?t._xcount+=1:Base_Helpers.openUrl(i[2]),t.scene.setMessage("d",n[t._xcount],1e3),t.updateSettings({area:{style:{fillColor:"rgba(255,230,230, "+Math.min(1,t._xcount/n.length)+")"}},advanced:{style:{messageTextStyle:{font:""+(15+5*t._xcount)+"px Arial"}}}})}}(this),this.events.addElement({previewPointerUp:e})):t>-6048e5&&this.scene.setMessage("d","Trial ending soon, "+moment.duration(-t).humanize()+" remaining",1e3),s={url:i[2],image:i[1]+"?t="+o,imageExport:Base_images_logo,imageScaling:1,location:"inside",enabled:!0,enabledOnExport:!0},this.events.addElement(new Base_Credits(this,s))):-2===i[0]?(s={url:i[2],image:i[1]+"?t="+o,imageExport:Base_images_logo,imageScaling:1,location:"outside",enabled:!0,enabledOnExport:!0},this.events.addElement(new Base_Credits(this,s))):i[0]<0&&this.scene.getAssetImage(i[1]+"?t="+o),this.events.notifySceneChanges({settings:!0,settingsChanges:this.scene.settings,data:!0}),this.updateSize(),this.updateEvents({},this.settings.events),Base_Helpers.listenResize(this.container,this._containerResize),Base_Helpers.listen(window,"resize",this._containerResize)},t.prototype.updateSettings=function(t,e){var i,n,s;return null==e&&(e=null),t.container&&t.container!==this.container&&(this.error("updateSettings() cannot change the container element"),t.container=this.container),n=Base_Helpers.clone(this.settings.events),i=this.settings.apply(t),s={settings:!0,settingsChanges:i},this.removed?void 0:(i.events&&this.updateEvents(n,this.settings.events),i.advanced&&i.advanced.assets&&this.assetsLoader.load(this.settings.advanced.assets,this.notifyAssetsLoaded)&&(this.assetsLoaded=!1),i.data&&(this.clearData(),s.data=!0,s.dataDeep=!0,this.navigator&&this.navigator.onNewDataObject()),this.layers.updateSettings(i),this.onSettingsChanged(i),i.toolbar&&this.assetsLoaded&&(this.toolbar&&this.toolbar.remove(),this.toolbar=new Base_Toolbar(this,this.settings.toolbar)),this.events.notifySceneChanges(s),(i.width||i.height||i.maxWidth||i.minWidth||i.minHeight||i.maxHeight)&&this.updateSize(!0),e?this.notifySettingsChanged(i,e):void 0)},t.prototype.getData=function(t){var e,i;if(null!=this.data[t])return this.data[t];if(i=this.settings._computedDataMap[t])return e=this.createDataObj(i),e.applyPreloadedData(),this.data[t]=e,e;throw"No data configured for source ID "+t},t.prototype.addData=function(t,e){return this.removed?void 0:this.getData(e).addData(t)},t.prototype.reloadData=function(t,e){return null==t&&(t=null),this.removed?void 0:(this.log("Reload data"),t?this.data[t]&&(this.data[t].remove(),delete this.data[t]):this.clearData(),this.scene.mainData=this.getData(this.settings._computedData[0].id),this.events.notifySceneChanges({data:!0,dataDeep:e}),this.navigator?this.navigator.onNewDataObject():void 0)},t.prototype.replaceData=function(t,e){var i;return null==e&&(e="default"),this.removed?void 0:(this.events.clearSceneChanges({dataArrived:!0}),this.data[e]&&this.data[e].remove(),this.data[e]=i=this.createDataObj(this.settings._computedDataMap[e]),i.addData(t),this.scene.mainData=this.getData(this.settings._computedData[0].id),this.events.notifySceneChanges({data:!0}),this.navigator?this.navigator.onNewDataObject():void 0)},t.prototype.clearData=function(t){var e,i,n;null==t&&(t=!1),n=this.data;for(e in n)i=n[e],i.remove();return this.events.clearSceneChanges({dataArrived:!0}),this.data={},this.scene.mainData=null,t?void 0:this.scene.mainData=this.getData(this.settings._computedData[0].id)},t.prototype.hasPendingRequests=function(){var t,e,i;if(this.settings.hasPendingRequests())return!0;i=this.data;for(e in i)if(t=i[e],t.hasPendingRequests())return!0;return!1},t.prototype.remove=function(){return this.cancelChartUpdateNotify(),this.removed=!0,this.toolbar&&this.toolbar.remove(),this.events.remove(),this.container.removeChild(this.layers.container),this.clearData(!0),this.onRemove(),this.layers=null,this.scene=null,this.events=null,this.container._DVSL_ChartInstance=void 0,Base_Helpers.unlistenResize(this.container,this._containerResize),Base_Helpers.unlisten(window,"resize",this._containerResize)},t.prototype._containerResize=function(){return this.updateSize(!1)},t.prototype.setFullscreen=function(t){return t!==this.fullScreenMode?(this.fullScreenMode=t,t?(Base_Helpers.addClass(this.layers.container,"DVSL-fullscreen"),this.fullscreenBeforeW=this.scene.chartWidth,this.fullscreenBeforeH=this.scene.chartHeight):Base_Helpers.removeClass(this.layers.container,"DVSL-fullscreen"),this.updateSize(!0)):void 0},t.prototype.isFullscreen=function(){return this.fullScreenMode},t.prototype.updateSize=function(t){var e,i,n,s;return null==t&&(t=!1),this.removed?void 0:(i=this.settings.width,e=this.settings.height,s=0,n=0,""!==this.layers.container.style.display&&(s=this.settings.minWidth,n=this.settings.minHeight),i||(i=parseInt(Math.max(s,Math.min(this.settings.maxWidth,this.scene.settings.container.clientWidth)))),e||(e=parseInt(Math.max(n,Math.min(this.settings.maxHeight,this.scene.settings.container.clientHeight)))),this.fullScreenMode?(i=window.innerWidth,e=window.innerHeight):this.fullscreenBeforeW>0&&(i=this.fullscreenBeforeW,e=this.fullscreenBeforeH,this.fullscreenBeforeW=0,this.fullscreenBeforeH=0),(t||i>=2&&i!==this.previousSizeW||e>=2&&e!==this.previousSizeH)&&(this.layers.container.style.height=e+"px",this.layers.container.style.width=i+"px",this.log("Update size, "+e+", "+i),this.previousSizeH=e,this.previousSizeW=i,this.scene.chartWidth=i,this.scene.chartHeight=e,null!=this.events&&this.events.notifySceneChanges({bounds:!0})),Base_Helpers.updateResize(this.container))},t.prototype.on=function(t,e){return(t=this.EVENT_NAMES[t])?(this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(e)):void this.error("Unrecognized event name: "+t)},t.prototype.off=function(t,e){return t=this.EVENT_NAMES[t],t?null!=this.eventListeners[t]?Base_Helpers.removeFromArray(this.eventListeners[t],e):void 0:void this.error("Unrecognized event name: "+t)},t.prototype.updateEvents=function(t,e){var i,n,s,o;s=this.EVENT_NAMES,o=[];for(n in s)i=s[n],null!=t[n]&&this.off(i,t[n]),o.push(null!=e[n]?this.on(i,e[n]):void 0);return o},t.prototype.notifyHoverChanged=function(t){return t.origin="user",this.dispatchEventParams("hoverChange",this.extendEventParams(t),null)},t.prototype.notifyDoubleClick=function(t){return t.origin="user",this.dispatchEvent("doubleClick",this.extendEventParams(t),this.defaultDoubleClick)},t.prototype.notifyRightClick=function(t){return t.origin="user",this.dispatchEvent("rightClick",this.extendEventParams(t),this.defaultRightClick)},t.prototype.notifyClick=function(t){return t.origin="user",this.dispatchEvent("click",this.extendEventParams(t),this.defaultClick)},t.prototype.notifyAnimationDone=function(){return this.dispatchEventParams("animationDone",this.extendEventParams({}),null)},t.prototype.notifySelectionChanged=function(t){return this.dispatchEventParams("selectionChange",this.extendEventParams({origin:t}),null)},t.prototype.notifySettingsChanged=function(t,e){return this.dispatchEventParams("settingsChange",this.extendEventParams({changes:t,origin:e}),null)},t.prototype.notifyPositionChange=function(t){return t.origin="user",this.dispatchEventParams("positionChange",this.extendEventParams(t),null)},t.prototype.notifyChartUpdate=function(t,e){var i,n;return null==e&&(e=!1),n=this.scene.settings.events.chartUpdateDelay,i=(new Date).getTime(),e&&(this.chartUpdateForce=!0),t&&(this.chartUpdateWasBack=this.goingBack,this.chartUpdateOrigin=t,this.chartUpdateTime=i),n=this.chartUpdateTime+n-i,n>0?this.chartUpdateTimeout=setTimeout(this.chartUpdateNotify,n):this.chartUpdateNotify()},t.prototype.cancelChartUpdateNotify=function(){return this.chartUpdateOrigin=null,this.chartUpdateTimeout?(clearTimeout(this.chartUpdateTimeout),this.chartUpdateTimeout=null):void 0},t.prototype.chartUpdateNotify=function(){var t,e;if(this.chartUpdateOrigin)return e=this.saveNavigation(),!e||this.curState&&JSON.stringify(e)===JSON.stringify(this.curState)?this.chartUpdateForce?(this.chartUpdateForce=!1,t=this.chartUpdateOrigin,this.chartUpdateOrigin=null,this.doChartUpdateNotify(t)):void 0:(this.chartUpdateForce=!1,!this.chartUpdateWasBack&&this.curState&&this.scene.pushBack(this.curState),this.curState=e,t=this.chartUpdateOrigin,this.chartUpdateOrigin=null,this.doChartUpdateNotify(t))},t.prototype.back=function(t,e){var i;return null==t&&(t=!0),null==e&&(e="api"),0===this.scene.backStack.length?!1:(i=this.scene.backStack.pop(),this.goingBack=!0,this.restoreNavigation(i,t,e),this.goingBack=!1,!0)},t.prototype.goHome=function(t,e){var i;return null==t&&(t=!0),null==e&&(e="api"),0===this.scene.backStack.length?!1:(i=this.scene.backStack[0],this.restoreNavigation(i,t,e),!0)},t.prototype.clearHistory=function(){return this.scene.backStack=[],!0},t.prototype.saveNavigation=function(){return Base_Helpers.error("Need to override saveNavigation")},t.prototype.restoreNavigation=function(){return Base_Helpers.error("Need to override restoreNavigation")},t.prototype.doChartUpdateNotify=function(t){return this.dispatchEventParams("chartUpdate",this.extendEventParams({origin:t}),null)},t.prototype.dispatchEventParams=function(t,e,i){var n,s,o;if(!(i||null!=this.eventListeners[t]&&this.eventListeners[t].length>0))return{};n=Base_Helpers.createEvent(t);for(s in e)__hasProp.call(e,s)&&(o=e[s],void 0===n[s]&&(n[s]=o));return this.dispatchEvent(t,n,i)},t.prototype.dispatchEvent=function(t,e,i){var n,s,o,r;if(!(i||null!=this.eventListeners[t]&&this.eventListeners[t].length>0))return e;if(e.chart=this.api,null!=this.eventListeners[t])for(r=this.eventListeners[t],s=0,o=r.length;o>s;s++)n=r[s],this.log("Call user event handler, "+t,e),n.call(this.api,e);return e.defaultPrevented||null==i||(this.log("Call default event handler, "+t),i.call(this.api,e)),e},t.prototype.error=function(t,e){return this.dispatchEventParams("error",{message:t,arg:e},this.defaultError)},t.prototype.log=function(t,e){return this.settings.advanced.logging?Base_Helpers.log(t,e):void 0},t.prototype.deprecated=function(t){var e;return e="Deprecated: "+arguments.callee.caller.name+".",t&&(e+=" Use "+t+" instead"),this.log(e)},t.prototype.defaultError=function(t){return this.settings.events.onError&&this.settings.events.onError(t),Base_Helpers.error(t.message,t.arg?t.arg:null)},t.prototype.notifyAssetsLoaded=function(){return this.assetsLoaded=!0,this.toolbar||(this.toolbar=new Base_Toolbar(this,this.settings.toolbar),this.events.notifySceneChanges({toolbar:!0}),this.updateSize(!0)),Base_Helpers.updateResize(this.container)},t}();var Facetchart_InfoPopup,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_InfoPopup=function(t){function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.prototype.animationOrder=500,e.prototype.paintOrder=25,e.prototype.updateOrder=800,e.settings={enabled:!0,contentsFunction:null},e.prototype.doAnimations=function(t){return t.changes.position||t.changes.navigation?this.updatePopup(t):void 0},e.prototype.getPopupAreaMouseMoved=function(t,e){var i,n,s,o;return this.scene.xyInChartOrBottom(t,e)&&this.scene.activeFacet?(i=this.scene.activeFacet,n=this.scene.xToPosition(t),s=Math.floor(n),o=Math.ceil(n),s===o&&(o=s+1),s<i.offset||s>=i.items.length+i.offset?null:[s,o]):null},e.prototype.buildHeader=function(t){var e,i,n;return e=this.scene.activeFacet,i=e.items[t-e.offset],n=i.label||"","<em></em><strong>"+n+"</strong>"},e}(Linearchart_InfoPopup);var Linearchart_Toolbar;Linearchart_Toolbar=function(){function t(){}return t.settings=Base_Settings.extendDefaults(Base_Toolbar.settings,{enabled:!0,"export":!0,back:!0,zoomOut:!0,logScale:!0}),t}();var Piechart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Settings=function(t){function e(t){e.__super__.constructor.call(this,e.defaults),this.apply(t)}return __extends(e,t),e.FlatTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"flat"}},e.BevelTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"bevel"}},e.GradientTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"smoothy"}},e.CanTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},pie:{theme:"can",depth:8}},e.defaults=Base_Settings.extendDefaults(Base_Settings.defaults,{theme:e.FlatTheme,data:Piechart_Data.settings,legend:Piechart_Legend.settings,navigation:{initialDrilldown:"",initialOffset:0,initialSelection:[]},pie:{radius:null,adaptiveRadius:!0,outerMargin:1,margin:2,centerMargin:5,showInnerPiesExport:!0,showInnerPies:!0,innerRadius:.3,innerRadiusWhenDrilldown:.2,startAngle:-Math.PI/2,endAngle:1.5*Math.PI,theme:"flat",depth:0,x:null,y:null,style:{fillColor:"transparent",sliceColors:["#2fc32f","#b0dc0b","#eab404","#de672c","#ec2e2e","#d5429b","#6f52b8","#1c7cd5","#56b9f7","#0ae8eb"],colorDistribution:"list",brightness:1},noDataStyle:{fillColor:"#ddd"},backgroundStyle:{},backgroundHoveredStyle:{brightness:.7},styleFunction:null},slice:{margin:2,minFraction:0,style:{lineBrightness:0,brightness:1,cutoutDistance:0,lineColor:null,lineWidth:1,label:null,insideLabel:null,url:null,icon:null,lineDash:null},hoverStyle:{brightness:1.2,lineBrightness:2,lineWidth:.35},selectedStyle:{cutoutDistance:15},backgroundStyle:{fillColor:"#e2e2e2",fillColor2:"#e0e0e0"},backgroundActiveStyle:{brightness:1.3},othersStyle:{fillColor:"#ccc",lineDecoration:"zigzag"},previousStyle:{fillColor:"#ccc",lineDecoration:"zigzag"},connectorStyle:{lineColor:"#333",lineWidth:1},labelStyle:{backgroundStyle:null,textStyle:{fillColor:"#000",font:"12px Arial"},lineSpacing:.2,margin:4,padding:0,borderRadius:999},insideLabelStyle:{textStyle:{fillColor:"#fff",font:"12px Arial"},lineSpacing:.2,margin:4,padding:0,borderRadius:0},expandableMarkStyle:{lineWidth:1,lineColor:"rgba(255,255,255,0.8)",distance:4,lineDash:null},styleFunction:null},filters:{sliceFilter:null},labels:{enabled:!0,connectors:!0,connectorLength:20,angle:0,insideLabel:"append",insideLabelVisibilityFraction:.8,interLabelSpacing:.6,placement:"aligned"},icons:{sizeExtent:[16,64],placement:"auto",autohideWhenTooSmall:!0},advanced:{initialAnimation:!0,renderQuality:1,backImage:"builtin://piechart-back",backAlwaysVisible:!1,assets:["assets://piechart.css"],labelInsideTreshold:1,pointer:{noClickOnDoubleClick:!1},builtinAssets:{"piechart-back":Piechart_images_back}},events:{onPieChange:null,onPieReadyStateChanged:null},interaction:{mode:"drilldown",selection:{enabled:!0,tolerance:2},others:{enabled:!0,centerGoesToPrevious:!1,navigationFraction:.15,maxSlicesVisible:15,maxOthersFraction:.6,minSliceFraction:.01},scrolling:{enabled:!1},dragging:{enabled:!1}},info:{enabled:!0,contentsFunction:null},toolbar:{enabled:!1,items:["back","export"]},localization:{othersLabel:"Others",previousLabel:"Previous"}}),e.prototype.apply=function(t){var i;return this.applyCompatibility(t,[{from:"labels.connectorStyle",to:"slice.connectorStyle"},{from:"labels.textStyle",to:"slice.labelStyle.textStyle"},{from:"labels.backgroundStyle",to:"slice.labelStyle.backgroundStyle"},{from:"labels.insideTextStyle",to:"slice.insideLabelStyle.textStyle"},{from:"labels.padding",to:"slice.labelStyle.padding"},{from:"labels.borderRadius",to:"slice.labelStyle.borderRadius"},{from:"area.initialPieId",to:"navigation.initialDrilldown"},{from:"area.initialPieOffset",to:"navigation.initialOffset"},{from:"area.initialSelection",to:"navigation.initialSelection"},{from:"area.initialAnimation",to:"advanced.initialAnimation"}]),i=e.__super__.apply.call(this,t)},e}(Base_Settings);var Piechart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Piechart_Impl=function(t){"use strict";function e(t,i){this.defaultDoubleClick=__bind(this.defaultDoubleClick,this),this.defaultClick=__bind(this.defaultClick,this),e.__super__.constructor.call(this,new Piechart_Settings(t),new Piechart_Scene),this.scene.loading=!1,this.layers=new Piechart_Layers(this,this.scene),this.initialize(i),this.events.addElement(new Piechart_Scrolling(this)),this.selection=this.events.addElement(new Piechart_Selection(this)),this.scene.view=new Piechart_PieView(this),this.popup=this.events.addElement(new Piechart_InfoPopup(this)),this.legend=this.events.addElement(new Piechart_Legend(this)),this.events.addElement(new Piechart_Styles(this)),this.navigator=this.events.addElement(new Piechart_Navigator(this)),this.events.addElement(this.scene.view),this.finalInitialize(),this.navigator.setPie(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset,"init")}return __extends(e,t),e.prototype.api=null,e.prototype.createDataObj=function(t){return new Piechart_Data(this,t)},e.prototype.onRemove=function(){return this.layers=null,this.renderer=null,this.scene=null},e.prototype.onSettingsChanged=function(t){var e;return e={},t.area&&t.navigation&&this.navigator.setPie(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset),(t.labels||t.icons||t.pie||t.slice||t.interaction)&&(e.pie=!0),this.events.notifySceneChanges(e)},e.prototype.save=function(){var t;return t=this.saveSelection(),JSON.stringify({pie:this.navigator.getPie(),offset:this.navigator.getPieOffset(),selection:t})},e.prototype.restore=function(t,e){var i;if(t)return i=JSON.parse(t),this.setPie(i.pie,i.offset,e),this.setSelection(i.selection)},e.prototype.updateFilters=function(){return this.updateFilter(!0)},e.prototype.updateFilter=function(t){return this.log("Update filter"),this.events.notifySceneChanges({data:!0,dataDeep:t})},e.prototype.setSelection=function(t){var e,i,n,s,o;for(this.log("Set selection"),i=[],n=[],s=0,o=t.length;o>s;s++)e=t[s],e instanceof Piechart_Slice?i.push(e):Base_Helpers.isString(e)?n.push(e):this.error("SetSelection: Selection contents must be Piechart_Slice object or string, got "+e);return this.selection.setSelection(i,n,!1,"api")},e.prototype.saveSelection=function(){var t,e,i,n,s;for(e=this.scene.selectionIds.splice(0),s=this.scene.selection,i=0,n=s.length;n>i;i++)t=s[i],e.push(t.id);return e},e.prototype.setPie=function(t,e,i,n){return null==i&&(i=!0),null==n&&(n="api"),this.log("Set pie"),this.navigator.setPie(t,e,n)},e.prototype.setPieOffset=function(t,e,i){return null==e&&(e=!0),null==i&&(i="api"),this.log("Set pie offset"),this.navigator.setPie(this.getPie(),t,i)},e.prototype.getPie=function(){return this.navigator.getPie()},e.prototype.getActiveSlices=function(){var t,e,i,n,s;for(e=[],s=this.scene.stack,i=0,n=s.length;n>i;i++)t=s[i],t.parentSlice&&e.push(t.parentSlice);return e},e.prototype.getActivePies=function(){return this.scene.stack},e.prototype.expandSlice=function(t,e){return this.navigator.expandSlice(t,e)},e.prototype.getSliceDimensions=function(t,e){var i,n,s,o,r,a,l,h,c,u,d;if(!Base_Helpers.isArray(t))return this.error("getSliceDimensions: slice Id must be an array"),null;if(t.length<2)return null;if(!e&&this.scene.stack.length+1<t.length)return null;for(n=0,u=this.scene.stack,a=0,h=u.length;h>a;a++){if(i=u[a],i.id!==t[n])return null;if(n+=1,n===t.length-1)break}for(o=t[n],d=i.slices,l=0,c=d.length;c>l;l++)if(r=d[l],r.id===o)return s=r.renderParams,s?[i.x,i.y,s[0],s[1],s[2],s[3]]:null;return null},e.prototype.saveNavigation=function(){var t;return t=this.scene.peek(),!t||t.loading?null:{pie:this.navigator.getPie(),offset:this.navigator.getPieOffset()}},e.prototype.restoreNavigation=function(t,e,i){return this.navigator.setPie(t.pie,t.offset,i)},e.prototype.doChartUpdateNotify=function(t){return e.__super__.doChartUpdateNotify.call(this),this.dispatchEventParams("pieChange",this.extendEventParams({origin:t}),null),this.dispatchEventParams("pieReadyStateChanged",this.extendEventParams({origin:t}),null)},e.prototype.extendEventParams=function(t){var e;return e=this.scene.peek(),t.pie=e,t.offset=e.offset,t.count=e.count,t.slice=this.scene.hoverSlice,t.label=this.scene.hoverLabel,t.clickSlice=t.slice,t.selection=this.scene.selection,t},e.prototype.defaultClick=function(t){var e,i,n;if(n=t.slice,i=t.clickPie,e="drilldown"===this.settings.interaction.mode,e||n&&(n===n.pie.othersSlice||n===n.pie.previousSlice))if(n){if(n.url)return Base_Helpers.openUrl(n.url),t.preventDefault();if(this.navigator.expandSlice(n,"user"))return t.preventDefault()}else if(i)return this.setSelection([],"user"),this.navigator.goCenter("user"),t.preventDefault()},e.prototype.defaultDoubleClick=function(){},e}(Base_Impl);var Itemschart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Settings=function(t){function e(t){e.__super__.constructor.call(this,t)}return __extends(e,t),e.defaults=Base_Settings.extendDefaults(Base_Settings.defaults,{data:{cacheSize:1e4,random:null,randomGridLinkProbability:.6,randomNodes:0,randomLinks:0,randomTreeDensity:3,requestMaxUnits:2,preloadNodeLinks:!1},info:{enabled:!1,nodeContentsFunction:null,linkContentsFunction:null},interaction:{nodesMovable:!0,zooming:{zoomInOnDoubleClick:!0,doubleClickZoom:1.5,sensitivity:1,wheel:!0,fingers:!0},panning:{enabled:!0},selection:{enabled:!0,nodesSelectable:!0,linksSelectable:!0,tolerance:10}},nodeMenu:{enabled:!0,showData:!1,buttons:[],contentsFunction:null},linkMenu:{enabled:!0,showData:!1,contentsFunction:null},advanced:{perNodeLoadingIndicator:!0,style:{loadingArcStyle:{location:"corner"}}}}),e.prototype.apply=function(t){var i,n,s,o,r;if(this.applyCompatibility(t,[{from:"style.makeImagesCircular",to:"style.node.imageCropping"},{from:"style.nodeDecorationMinSize",to:null,alternative:"style.nodeDetailMinSize"},{from:"style.nodeLabelMinSize",to:"style.nodeDetailMinSize"}]),i=e.__super__.apply.call(this,t),t.style){if(t.style.nodeRules){o=t.style.nodeRules;for(n in o)s=o[n],this.style.nodeRules[n]=s}if(t.style.linkRules){r=t.style.linkRules;for(n in r)s=r[n],this.style.linkRules[n]=s}}return i},e}(Base_Settings);var Itemschart_NodesStyle,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_NodesStyle=function(t){function e(t,i){this.styleSettings=t,this.fadeout=i,e.__super__.constructor.call(this,this.styleSettings)}return __extends(e,t),e.settings=Base_Settings.extendDefaults(Itemschart_ItemsStyle.settings,{multilinkSpacing:10,nodeRadiusExtent:[10,150],linkRadiusExtent:[.6,30],linkStrengthExtent:[.1,1],linkLengthExtent:[.3,150],nodeAutoScaling:null,linkAutoScaling:null,linkStrengthAutoScaling:null,linkLengthAutoScaling:null,selection:{fillColor:"lightblue",sizeConstant:5,sizeProportional:.2},hiddenLinks:{fillColor:"#BBB",lineColor:"rgba(100,100,100,0.3)",lineWidth:1,size:7},fadeTime:600}),e.prototype.updateItems=function(t,i,n){var s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_;null==n&&(n=!1),this.nodeRadiusChanged=Base_Helpers.hasProperties(i.newNodes)||Base_Helpers.hasProperties(i.deletedNodes),this.linkRadiusChanged=Base_Helpers.hasProperties(i.newLinks)||Base_Helpers.hasProperties(i.deletedLinks),e.__super__.updateItems.call(this,t,i,n),f=this.styleSettings.removedColor,s=t.context,this.itemRenderer=t.labelRenderer,y=i.modifiedLinks;for(a in y)l=y[a],this.fadeout&&l.relevance<1&&(l.fillColor&&(l.fillColor=Base_Graphics.blendColors(f,l.fillColor,l.relevance)),l.lineColor&&(l.lineColor=Base_Graphics.blendColors(f,l.lineColor,l.relevance)),l.length=.2+(l.length-.2)*l.relevance),this.postprocessLink(l,s);v=i.modifiedNodes;for(o in v)u=v[o],this.fadeout&&u.relevance<1&&(u.fillColor&&(u.fillColor=Base_Graphics.blendColors(f,u.fillColor,u.relevance)),u.lineColor&&(u.lineColor=Base_Graphics.blendColors(f,u.lineColor,u.relevance)));if(p=i.nodes(),this.nodeRadiusChanged||this.fadeout&&t.changes.navigation)for(this.computeNodeSize(p,this.styleSettings.nodeAutoScaling,this.styleSettings.nodeRadiusExtent),m=0,g=p.length;g>m;m++)c=p[m],this.postprocessNode(c,s);else{_=i.modifiedNodes;for(r in _)d=_[r],this.postprocessNode(d,s)}return(this.linkRadiusChanged||t.changes.navigation)&&(h=i.links(),this.computeRadii(h,this.styleSettings.linkAutoScaling,this.styleSettings.linkRadiusExtent),this.computeStrengths(h,this.styleSettings.linkStrengthAutoScaling,this.styleSettings.linkStrengthExtent),this.computeLengths(h,this.styleSettings.linkLengthAutoScaling,this.styleSettings.linkLengthExtent),Base_Helpers.sort(h,function(t,e){return t.targetRadius===e.targetRadius?0:t.targetRadius>e.targetRadius?1:-1})),Base_Helpers.sort(p,function(t,e){return t.zindex-e.zindex})},e.prototype.updateLink=function(t){var i;return i=t.radius,e.__super__.updateLink.call(this,t),i!==t.radius?this.linkRadiusChanged=!0:void 0},e.prototype.updateNode=function(t){var i;return i=t.radius,e.__super__.updateNode.call(this,t),i!==t.radius&&(this.nodeRadiusChanged=!0),null==t.label&&t.data?t.label=t.data.id:void 0},e.prototype.computeNodeSize=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C;if(r=i[0],s=i[1],"linear"===e||"logarithmic"===e||"square"===e){for(o=1/0,n=-1/0,c=0,f=t.length;f>c;c++)l=t[c],l.removed||(h=l.radius,Base_Helpers.isNumber(h)?(o=Math.min(o,h),n=Math.max(n,h)):l.targetHHeight=r);if(o>=n)for(u=0,m=t.length;m>u;u++)l=t[u],l.removed||(l.targetHHeight=r);else if("linear"===e)for(a=s/n,d=0,g=t.length;g>d;d++)l=t[d],l.removed||(h=l.radius,Base_Helpers.isNumber(h)&&(l.targetHHeight=Math.max(r,h*a)));else if("square"===e)for(a=s/Math.sqrt(n),p=0,y=t.length;y>p;p++)l=t[p],l.removed||(h=l.radius,Base_Helpers.isNumber(h)&&(l.targetHHeight=Math.max(r,Math.sqrt(h)*a)));else for(o=Math.max(1e-4,o),n=Math.max(o+1e-4,n),a=s/Math.log(n),x=0,v=t.length;v>x;x++)l=t[x],!l.removed&&Base_Helpers.isNumber(l.radius)&&(l.targetHHeight=Math.max(r,Math.log(Math.max(1e-4,l.radius))*a))}else for(S=0,_=t.length;_>S;S++)l=t[S],l.removed||(l.targetHHeight=Base_Helpers.isNumber(l.radius)?Math.min(Math.max(1e-6,l.radius),1e30):r);if(this.fadeout){for(C=[],w=0,b=t.length;b>w;w++)l=t[w],C.push(l.relevance<1?l.targetHHeight=l.targetHHeight*l.relevance:void 0);return C}},e.prototype.computeRadii=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C;if(r=i[0],s=i[1],"linear"===e||"logarithmic"===e||"square"===e){for(o=1/0,n=-1/0,c=0,f=t.length;f>c;c++)l=t[c],l.removed||(h=l.radius,Base_Helpers.isNumber(h)?(o=Math.min(o,h),n=Math.max(n,h)):l.targetRadius=r);if(o>=n)for(u=0,m=t.length;m>u;u++)l=t[u],l.removed||(l.targetRadius=r);else if("linear"===e)for(a=s/n,d=0,g=t.length;g>d;d++)l=t[d],l.removed||(h=l.radius,Base_Helpers.isNumber(h)&&(l.targetRadius=Math.max(r,h*a)));else if("square"===e)for(a=s/Math.sqrt(n),p=0,y=t.length;y>p;p++)l=t[p],l.removed||(h=l.radius,Base_Helpers.isNumber(h)&&(l.targetRadius=Math.max(r,Math.sqrt(h)*a)));else for(o=Math.max(1e-4,o),n=Math.max(o+1e-4,n),a=s/Math.log(n),x=0,v=t.length;v>x;x++)l=t[x],!l.removed&&Base_Helpers.isNumber(l.radius)&&(l.targetRadius=Math.max(r,Math.log(Math.max(1e-4,l.radius))*a))}else for(S=0,_=t.length;_>S;S++)l=t[S],l.removed||(l.targetRadius=Base_Helpers.isNumber(l.radius)?Math.min(Math.max(1e-6,l.radius),1e30):r);if(this.fadeout){for(C=[],w=0,b=t.length;b>w;w++)l=t[w],C.push(l.relevance<1?l.targetRadius=l.targetRadius*l.relevance:void 0);return C}},e.prototype.computeStrengths=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P;if(r=i[0],s=i[1],"linear"===e||"logarithmic"===e||"square"===e){for(o=1/0,n=-1/0,c=0,f=t.length;f>c;c++)l=t[c],l.removed||(o=Math.min(o,l.strength),n=Math.max(n,l.strength));if(o>=n){for(S=[],u=0,m=t.length;m>u;u++)l=t[u],S.push(l.removed?void 0:l.targetStrength=r);return S}if("linear"===e){for(a=s/n,w=[],d=0,g=t.length;g>d;d++)l=t[d],w.push(l.removed?void 0:l.targetStrength=Math.min(r,l.strength*a));return w}if("square"===e){for(a=s/Math.sqrt(n),C=[],p=0,y=t.length;y>p;p++)l=t[p],l.removed?C.push(void 0):(h=l.strength,C.push(Base_Helpers.isNumber(h)?l.targetStrength=Math.max(r,Math.sqrt(h)*a):void 0));return C}for(o=Math.max(1e-4,o),n=Math.max(o+1e-4,n),a=s/Math.log(n),k=[],b=0,v=t.length;v>b;b++)l=t[b],k.push(l.removed?void 0:l.targetStrength=Math.max(r,Math.log(Math.max(1e-4,l.strength))*a));return k}for(P=[],x=0,_=t.length;_>x;x++)l=t[x],P.push(l.removed?void 0:l.targetStrength=Math.min(Math.max(r,l.strength),s));return P},e.prototype.computeLengths=function(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M;if(a=i[0],o=i[1],"linear"===e||"logarithmic"===e||"square"===e){for(r=1/0,s=-1/0,u=0,m=t.length;m>u;u++)h=t[u],h.removed||(r=Math.min(r,h.length),s=Math.max(s,h.length));if(r>=s){for(w=[],d=0,g=t.length;g>d;d++)h=t[d],w.push(h.removed?void 0:h.targetLength=a);return w}if("linear"===e){for(l=(o-a)/(s-r),n=o-s*l,C=[],p=0,y=t.length;y>p;p++)h=t[p],C.push(h.removed?void 0:h.targetLength=h.length*l+n);return C}if("square"===e){for(l=o/Math.sqrt(s),k=[],f=0,v=t.length;v>f;f++)h=t[f],h.removed?k.push(void 0):(c=h.length,k.push(Base_Helpers.isNumber(c)?h.targetLength=Math.max(a,Math.sqrt(c)*l):void 0));return k}for(r=Math.max(1e-4,r),s=Math.max(r+1e-4,s),l=(o-a)/Math.log(s/r),n=o-l*Math.log(s),P=[],x=0,_=t.length;_>x;x++)h=t[x],P.push(h.removed?void 0:h.targetLength=Math.log(Math.max(1e-4,h.length))*l+n);return P}for(M=[],S=0,b=t.length;b>S;S++)h=t[S],M.push(h.removed?void 0:h.targetLength=Math.min(Math.max(a,h.length),o));return M},e.prototype.postprocessNode=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w;for(n=t.display,c=null,t.targetHWidth=t.targetHHeight,u=-t.targetHWidth,p=t.targetHWidth,g=-t.targetHHeight,i=t.targetHHeight,m=t.targetHHeight/this.styleSettings.nodeLabelScaleBase,t.label&&("text"===n?(r=t.targetHHeight,c=new Base_Label(t.labelStyle),c.text=t.label.toString(),c.backgroundStyle=null,c.image=null,this.itemRenderer.measure(e,c),v=c.hwidth,a=c.hheight,y=v/a*r,t.image&&(y+=r),t.targetHWidth=Math.max(y,r),u=-t.targetHWidth,p=t.targetHWidth):"roundtext"===n?(d=t.labelStyle,d.backgroundStyle.fillColor="transparent",c=new Base_Label(d),c.text=t.label.toString(),c.aspectRatio=1,c.image=null):(c=new Base_Label(t.labelStyle),c.text=t.label.toString(),this.itemRenderer.measure(e,c),f=c.scaleWithSize?m:c.scaleWithZoom?1:1,_=0,b=t.targetHHeight+c.hheight*f*.8,u=Math.min(u,_-c.hwidth*f),p=Math.max(p,_+c.hwidth*f),g=Math.min(g,b-c.hheight*f),i=Math.max(i,b+c.hheight*f))),t.currentLabel=c,t.currentItems=[],this.postprocessItems(t),w=t.currentItems,x=0,S=w.length;S>x;x++)c=w[x],this.itemRenderer.measure(e,c),y=t.targetHWidth,r=t.targetHHeight,f=c.scaleWithSize?m:c.scaleWithZoom?1:1,s=c.x||0,o=c.y||0,l=c.px||0,h=c.py||0,_=y*l+s,b=r*h+o,u=Math.min(u,_-c.hwidth*f),p=Math.max(p,_+c.hwidth*f),g=Math.min(g,b-c.hheight*f),i=Math.max(i,b+c.hheight*f);return t.bLeft=u,t.bRight=p,t.bTop=g,t.bBottom=i},e.prototype.postprocessLink=function(t){var e,i;return i=[],t.label&&(e=new Base_Label(t.labelStyle),e.text=t.label.toString(),e.px=0,e.py=0,i.push(e)),t.currentItems=i,this.postprocessItems(t)
},e}(Itemschart_ItemsStyle);var Itemschart_Impl,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Itemschart_Impl=function(t){function e(t,i){e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.prototype.finalInitialize=function(){return this.selection=this.events.addElement(new Itemschart_Selection(this)),e.__super__.finalInitialize.call(this)},e.prototype.setSelection=function(t){var e,i,n,s,o;for(n=[],s=0,o=t.length;o>s;s++)i=t[s],i instanceof Itemschart_Node||i instanceof Itemschart_Link?n.push(i):(e=this.graph.idToNode[i])?n.push(e):this.error("SetSelection: Non chart object in selection: "+i);return this.selection.setSelection(n,"api")},e}(Base_Impl);var Linearchart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Settings=function(t){function e(t){this._computedValueAxisList=[],this._computedValueAxis={},this._computedSeries=[],e.__super__.constructor.call(this,t)}return __extends(e,t),e.defaults=Base_Settings.extendDefaults(Base_Settings.defaults,{area:{style:{noData:{fillColor:"#888",image:"builtin://linearchart-no-data-dark"},zoomHighlight:{fillColor:"rgba(30,160,220,0.15)",fadeIn:100,fadeOut:500,fadeCross:500},zoomHighlightInactive:{fillColor:"rgba(30,160,220,0.08)"}}},legend:Linearchart_Legend.settings,valueAxisDefault:Linearchart_ValueAxis.settings,valueAxis:{},chartTypes:{columns:{style:{minHeight:4,gradient:.8,lineColor:"",fillColor:"limegreen",lineWidth:1,lineDash:!1,padding:[3,3],shadowOffsetX:1,shadowOffsetY:-1,shadowBlur:3,shadowBlur:3,shadowColor:null,previewLineColor:"rgba(255,255,255,.5)",previewData:!1,depth:0,depthBrightness:.5}},line:{style:{lineColor:"#f00",lineDash:!1,fillColor:"",fillGradient:null,lineWidth:1,shadowOffsetX:1,shadowOffsetY:-1,shadowBlur:5,shadowColor:!1,smoothing:!1,steps:!1,marker:{shape:null,width:10,fillColor:""}}}},stacks:{"default":{name:"",type:"normal",separateNegativeValues:null}},seriesDefault:{enabled:!0,type:"columns",valueAxis:"default",name:null,showInLegend:!0,stack:null,cluster:null,data:{source:"default",index:1,field:null,valueFunction:null,aggregation:"sum",aggregatedValueFunction:null,noDataPolicy:"join"},style:{}},series:[],info:{enabled:!0,showNoData:!0,valueFormatterFunction:null,aggregations:[],style:{highlight:{fillColor:"rgba(30,160,220,0.15)",fadeIn:200,fadeOut:200}},advanced:{contentsFunction:null,showOnlyHoveredSeries:!1,scope:null}},interaction:{swipeSensitivity:.6,scrolling:{enabled:!0,swipePageFlipping:!0,keyboardScrollingFactor:1,kineticFriction:2},zooming:{enabled:!0,wheel:!1,swipe:!0,fingers:!0,fingersMaxZoom:10,sensitivity:1,keyboardFactor:2,upDownTreshold:10,zoomHighlightThreshold:1.5}},localization:{valueUnits:{K:1e3,M:1e6,G:1e9,T:1e12,E:1e15},toolbar:{linButton:"Lin",logButton:"Log",linLogTitle:"Switch lin/log scale"}}}),e.prototype.apply=function(t){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b;if(t.series?(l=t.series,delete t.series):l=null,this.applyCompatibility(t,[{from:"valueAxis.default",to:"valueAxisDefault"},{from:"valueAxisDefault.style.baseLineColor",to:"valueAxisDefault.style.baseLine.lineColor"},{from:"valueAxisDefault.style.baseLineWidth",to:"valueAxisDefault.style.baseLine.lineWidth"},{from:"valueAxisDefault.style.hgridLineColor",to:"valueAxisDefault.style.hgrid.lineColor"}]),n=e.__super__.apply.call(this,t),n.stacks){this._computedStacks={},g=this.stacks;for(r in g)u=g[r],h={},this.applyRec(h,e.defaults.stacks["default"],{}),this.applyRec(h,u,{}),this._computedStacks[r]=h}if(l&&(t.series=l,this.series||(this.series=[]),n.series=[],this.applyById(this.series,l,n.series)),l||n.chartTypes||n.seriesDefault){this._computedSeries=this.applySeries(this.series,this.chartTypes,this.seriesDefault),n._computedSeries=this._computedSeries,i={"default":!0},y=this.valueAxis;for(r in y)c=y[r],i[r]=!0;for(v=this._computedSeries,d=0,f=v.length;f>d;d++){if(a=v[d],!i[a.valueAxis])throw"Settings: Unrecognized value axis: "+a.valueAxis;if(0===a.data.index)throw"Settings: series.data.index = 0, not allowed"}}if(n.valueAxis||n.valueAxisDefault||!this._computedValueAxisList.length){for(o=!1,_=this._computedSeries,p=0,m=_.length;m>p;p++)a=_[p],o||(o="default"===a.valueAxis);this._computedValueAxisList=[],this._computedValueAxis={},s=this.valueAxisDefault,b=this.valueAxis;for(r in b)u=b[r],h={},this.applyRec(h,s,{}),this.applyRec(h,u,{}),h.id=r,this.applyCompatibility(h,[{from:"style.baseLineColor",to:"style.baseLine.lineColor"},{from:"style.baseLineWidth",to:"style.baseLine.lineWidth"},{from:"style.hgridLineColor",to:"style.hgrid.lineColor"}]),this._computedValueAxis[r]=h,this._computedValueAxisList.push(h);o&&!this.valueAxis["default"]&&(h={},this.applyRec(h,s,{}),h.id="default",this._computedValueAxis[r]=h,this._computedValueAxisList.push(h)),this._computedValueAxisList.sort(function(t,e){return t.id.localeCompare(e.id)}),n._computedValueAxis=this._computedValueAxis,n._computedValueAxisList=this._computedValueAxisList}return n},e}(Base_Settings);var Timechart_Toolbar;Timechart_Toolbar=function(){function t(){}return t.periodSettings={name:null,displayAnchor:null,displayPeriod:null,displayUnit:null},t.settings=Base_Settings.extendDefaults(Linearchart_Toolbar.settings,{enabled:!0,logScale:!0,displayUnit:!0,displayPeriod:!0,zoomOut:!0,periods:[{name:"Last second",displayAnchor:"now",displayPeriod:"1 s",displayUnit:"25 ms"},{name:"Last minute",displayAnchor:"now",displayPeriod:"1 m",displayUnit:"1 s"},{name:"Last hour",displayAnchor:"now",displayPeriod:"1 h",displayUnit:"1 m"},{name:"Last day",displayAnchor:"now",displayPeriod:"1 d",displayUnit:"1 h"},{name:"Last week",displayAnchor:"now",displayPeriod:"1 w",displayUnit:"6 h"},{name:"Last month",displayAnchor:"now",displayPeriod:"1 M",displayUnit:"1 d"},{name:"Last year",displayAnchor:"now",displayPeriod:"1 y",displayUnit:"1 M"},{name:"All data",displayAnchor:"newestData",displayPeriod:"max",displayUnit:"auto"}],items:[{item:"back",align:"left"},{item:"zoomOut",align:"left"},{item:"logScale",align:"right"},{item:"displayPeriod",align:"right"},{item:"displayUnit",align:"right"},{item:"export",align:"right"}]}),t}();var Timechart_TimeUpdater,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_TimeUpdater=function(t){"use strict";function e(t){var e;this.chart=t,this.dataTick=__bind(this.dataTick,this),this.timerTick=__bind(this.timerTick,this),this.settings=this.chart.settings,this.scene=this.chart.scene,this.events=this.chart.events,this.timerUnit=new Base_TimeStep(1,"ms"),this.settings.currentTime.enabled&&(e=new Linearchart_Marker,e.time=this.scene.getCurTime(),e.style=this.scene.settings.currentTime.style,e.label=this.scene.settings.currentTime.label,this.scene.markers.push(e)),this.settings.advanced.timeUpdateInterval&&(this.timeTimer=setTimeout(this.timerTick,this.settings.advanced.timeUpdateInterval)),this.settings.advanced.dataUpdateInterval&&(this.dataTimer=setTimeout(this.dataTick,this.settings.advanced.dataUpdateInterval))}return __extends(e,t),e.prototype.animationOrder=100,e.prototype.paintOrder=35,e.prototype.updateOrder=900,e.settingsCurTime={enabled:!0,label:"",style:{lineColor:"red",fillColor:"red"},serverTime:null,_computedTimeOffset:0},e.prototype.timerTick=function(){return this.timeTimer=null,this.chart.removed?void 0:(this.updateCurTime(),this.updateVisiblePeriod())},e.prototype.dataTick=function(){var t,e,i,n,s;if(this.dataTimer=null,!this.chart.removed){if(this.scene.displayUnit){e=this.scene.getCurTime(),t=function(t){return function(){return t.updateVisiblePeriod(),t.events.notifySceneChanges({data:!0})}}(this),s=this.chart.data;for(n in s)i=s[n],i.updateData(this.scene.displayUnit.unit,e,t)}return this.dataTimer=setTimeout(this.dataTick,this.settings.advanced.dataUpdateInterval)}},e.prototype.doAnimations=function(t){return this.scene.displayUnit&&!this.scene.displayUnit.isEqual(this.timerUnit)&&(this.updateCurTime(),this.timerUnit=this.scene.displayUnit),t.changes.data?this.updateVisiblePeriod():void 0},e.prototype.updateCurTime=function(){var t,e,i,n,s;return this.timeTimer&&clearTimeout(this.timeTimer),n=this.scene.displayUnit,e=this.settings.advanced.timeUpdateInterval,n&&this.settings.currentTime.enabled&&(t=this.scene.getCurTime(),this.scene.markers[0].time=t,s=this.scene.timeToX(t),i=s+200>this.scene.x0&&s-200<this.scene.x0+this.scene.width,i&&(e=Math.min(e,this.scene.dxToDtime(1)),this.events.notifySceneChanges({markers:!0}))),this.timeTimer=setTimeout(this.timerTick,e)},e.prototype.updateVisiblePeriod=function(){var t,e,i,n,s,o;if(this.scene.displayUnit&&null!=this.scene.timeEnd)return t=this.scene.getCurTime(),i=this.scene.getDataLimits()[1],n=this.scene.timeEnd,s=this.scene.timeStart,this.settings.area.followAnchor&&("now"===this.scene.anchor&&t>n&&(o=this.scene.displayUnit,e=o.roundTimeUp(t)-n,this.chart.scrolling.setTimeRangeSnap(s+e,n+e,n+e,this.scene.displayUnit,!0,"timer",!0,!1)),"newestData"===this.scene.anchor&&i>n)?(o=this.scene.displayUnit,e=o.roundTimeUp(i)-n,this.chart.scrolling.setTimeRangeSnap(s+e,n+e,n+e,this.scene.displayUnit,!0,"timer",!0,!1)):void 0},e}(Base_ChartElement);var Linearchart_Impl,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Linearchart_Impl=function(t){"use strict";function e(t,i){e.__super__.constructor.call(this,t,i)}return __extends(e,t),e.prototype.scrolling=null,e.prototype.renderer=null,e.prototype.replaceSeries=function(t){return this.settings.series=[],this.updateSettings({series:t})},e.prototype.setLogScale=function(t,e){var i,n,s,o;s={},o=this.settings.valueAxis;for(i in o)n=o[i],s[i]={logScale:t};return this.updateSettings({valueAxisDefault:{logScale:t},valueAxis:s},e)},e.prototype.finalInitialize=function(){return e.__super__.finalInitialize.call(this),this.legend=this.events.addElement(new Linearchart_Legend(this))},e}(Base_Impl);var Facetchart_Toolbar;Facetchart_Toolbar=function(){function t(){}return t.settings=Base_Settings.extendDefaults(Linearchart_Toolbar.settings,{enabled:!0,items:[{item:"back",align:"left"},{item:"zoomOut",align:"left"},{item:"logScale",align:"right"},{item:"export",align:"right"}]}),t}();var Linearchart_Renderer;Linearchart_Renderer=function(){"use strict";function t(t,e){this.chart=t,this.valueAxisSet=e,this.scene=this.chart.scene,this.clusters=[],this.buildSeries()}return t.prototype.buildSeries=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m;for(this.clusters=[],s={},e=null,o={},i=Linearchart_Settings.defaults.stacks["default"],p=this.scene.settings._computedSeries,n=h=0,u=p.length;u>h;n=++h)a=p[n],a.enabled&&(a.cluster?(t=s[a.cluster],t||(t=s[a.cluster]=new Linearchart_Series_Cluster(this.scene),this.clusters.push(t))):"line"===a.type?a.stack?o.hasOwnProperty(a.stack)?t=o[a.stack]:(t=o[a.stack]=new Linearchart_Series_Cluster(this.scene),this.clusters.push(t)):(t=new Linearchart_Series_Cluster(this.scene),this.clusters.push(t)):(e||(e=new Linearchart_Series_Cluster(this.scene),this.clusters.push(e)),t=e),l=this.scene.settings._computedStacks[a.stack]||i,t.addSeries(n,a,l,this.valueAxisSet.getAxis(a.valueAxis)));for(f=this.clusters,m=[],c=0,d=f.length;d>c;c++)r=f[c],m.push(r.afterInit());return m},t.prototype.process=function(t){var e,i,n,s,o;for(s=this.clusters,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.process(t));return o},t.prototype.afterProcess=function(){var t,e,i,n,s;for(n=this.clusters,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.afterProcess());return s},t.prototype.paint=function(t){var e,i,n,s,o,r;for(e=t.context,o=this.clusters,r=[],n=0,s=o.length;s>n;n++)i=o[n],r.push(i.paint(e));return r},t.prototype.hitTest=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f;for(a=4,o=null,n=1/0,u=this.clusters,l=u.length-1;l>=0;l+=-1)r=u[l],d=r.hitTest(t,e,a),s=d[0],i=d[1],n>i&&(o=s,n=i);if(n>a)for(n=1/0,o=null,p=this.clusters,h=0,c=p.length;c>h;h++)r=p[h],f=r.hitTestStack(t,e,a),s=f[0],i=f[1],n>i&&(o=s,n=i);return o},t.prototype.exportData=function(t,e){var i,n,s,o,r;for(n=[],r=this.clusters,s=0,o=r.length;o>s;s++)i=r[s],i.exportData(t,e,n);return n},t}();var PieChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PieChart=function(t){"use strict";function e(t){return this._impl=new Piechart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.themes={flat:Piechart_Settings.FlatTheme,bevel:Piechart_Settings.BevelTheme,gradient:Piechart_Settings.GradientTheme,raised:Piechart_Settings.CanTheme},e.settings=Piechart_Settings,e.prototype.updateFilter=function(){return this._impl.updateFilter(),this},e.prototype.selection=function(t){return null!=t&&this._impl.setSelection(t),this._scene.selection},e.prototype.getPie=function(){return this._impl.getPie()},e.prototype.getPieOffset=function(){return this._impl.navigator.getPieOffset()},e.prototype.setPie=function(t,e){return null==e&&(e=0),this._impl.setPie(t,e,"api"),this},e.prototype.setPieOffset=function(t){return this._impl.setPieOffset(t,"api"),this},e.prototype.getActiveSlices=function(){return this._impl.getActiveSlices()},e.prototype.getActivePies=function(){return this._impl.getActivePies()},e.prototype.getActivePie=function(){var t;return t=this._impl.getActivePies(),t[t.length-1]},e.prototype.expandSlice=function(t){return this._impl.expandSlice(t,"api")},e.prototype.getSliceDimensions=function(t,e){return null==e&&(e=!1),this._impl.getSliceDimensions(t,e)},e}(Base_Api);var Netchart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Settings=function(t){function e(t){e.__super__.constructor.call(this,e.defaults),this.apply(t)}return __extends(e,t),e.FlatTheme={advanced:{themeCSSClass:"DVSL-flat",assets:["assets://netchart.css"]}},e.defaults=Base_Settings.extendDefaults(Itemschart_Settings.defaults,{theme:e.FlatTheme,data:Netchart_Data.settings,area:{centerX:.5,centerY:.5,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0},style:Itemschart_NodesStyle.settings,layout:Netchart_Layout.settings,filters:{nodeFilter:null,linkFilter:null,nodeLinksProcessor:null,multilinkProcessor:null},interaction:{zooming:{autoZoomAfterClick:!1,initialAutoZoom:"overview",zoomExtent:[.5,4],autoZoomExtent:[.5,1],autoZoomSize:.98},selection:{lockNodesOnMove:!0,allowMoveNodesOffscreen:!0}},navigation:Netchart_Navigator.settings,nodeMenu:{buttons:["hide","expand","focus","lock"]},toolbar:Netchart_Toolbar.settings,localization:{closeButton:"Close",toolbar:{rearrangeButton:"Rearrange",rearrangeTitle:"Rearrange elements",freezeButton:"Freeze",freezeTitle:"Lock all",unfreezeTitle:"Unlock all",fitButton:"Fit",fitTitle:"Fit to screen"},menu:{dynaminc:"Dynamic",fixed:"Fixed",focus:"Focus",unfocus:"Unfocus",collapse:"Collapse",expand:"Expand",hide:"Hide"}},legend:Netchart_Legend.settings}),e.prototype.apply=function(t){var i;return i=e.__super__.apply.call(this,t)},e}(Itemschart_Settings);var Netchart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Netchart_Impl=function(t){"use strict";function e(t,i){this.defaultDoubleClick=__bind(this.defaultDoubleClick,this),this.defaultRightClick=__bind(this.defaultRightClick,this),this.defaultClick=__bind(this.defaultClick,this);var n;e.__super__.constructor.call(this,new Netchart_Settings(t),new Netchart_Scene),n="focusnodes"===this.settings.navigation.mode&&this.settings.navigation.focusAutoFadeout,this.layer=new Itemschart_NodesLayer(this.scene,this.settings,n),this.graph=new Netchart_Graph(this,this.layer),this.navigator=new Netchart_Navigator(this),this.scrolling=new Netchart_Scrolling(this),this.layout=new Netchart_Layout(this),this.layers=new Netchart_Layers(this),this.initialize(i),this.renderer=new Netchart_Renderer(this),this.legend=new Netchart_Legend(this),this.info=new Itemschart_InfoPopup(this),this.menu=new Itemschart_Menu(this),this.events.addElement(this.navigator),this.events.addElement(this.layout),this.events.addElement(this.scrolling),this.autoZoom=this.events.addElement(new Netchart_AutoZoom(this)),this.events.addElement(this.legend),this.events.addElement(this.renderer),this.events.addElement(this.menu),this.events.addElement(this.info),this.autoZoom.resetZoom=!0,this.scene.loading=!1,this.navigator.onNewDataObject(),this.navigator.showInitialNodes(),this.finalInitialize()}return __extends(e,t),e.prototype.api=null,e.prototype.renderer=null,e.prototype.scrolling=null,e.prototype.selection=null,e.prototype.createDataObj=function(t){return new Netchart_Data(this,t)},e.prototype.onRemove=function(){return this.renderer=null},e.prototype.onSettingsChanged=function(t){var e,i;return e={},this.layer.onSettingsChanged(t),i=t.navigation&&(t.navigation.mode||t.navigation.initialNodes),null!=t.data&&(t.data.dataFunction||t.data.format||t.data.preloaded||t.data.url||t.data.randomNodes)&&(this.navigator.onNewDataObject(),i=!0),i&&(this.navigator.showInitialNodes(),this.autoZoom.resetZoom=!0),t.filters&&(e.filters=!0),t.style&&(e.style=!0),this.events.notifySceneChanges(e)},e.prototype.save=function(){var t,e;return e=this.graph.save(),t=this.navigator.save(),JSON.stringify({xy:e,nav:t})},e.prototype.restore=function(t){var e,i,n;if(t)return i=JSON.parse(t),n=i.xy,e=i.nav,e&&this.navigator.restore(e),n&&this.graph.restore(n),this.autoZoom.resetZoom=!0},e.prototype.saveNavigation=function(){var t;return t=JSON.stringify(this.navigator.save())},e.prototype.restoreNavigation=function(t){return this.navigator.restore(JSON.parse(t))},e.prototype.getCurrentNodes=function(){var t,e,i,n,s;for(e=[],s=this.layer.nodes(),i=0,n=s.length;n>i;i++)t=s[i],t.removed||e.push(t);return e},e.prototype.getCurrentLinks=function(){var t,e,i,n,s;for(t=[],s=this.layer.links(),i=0,n=s.length;n>i;i++)e=s[i],e.removed||t.push(e);return t},e.prototype.getNodeDimensions=function(t){var e,i,n,s,o;return Base_Helpers.isObject(t)||(t=this.getNode(t)),t?(o=this.scene.toDisplay(t.x,t.y),n=o[0],s=o[1],e=t.hHeight*this.scene.zoom,i=t.hWidth*this.scene.zoom,{x:n,y:s,radius:e,hwidth:i}):null},e.prototype.lockNode=function(t,e,i){return Base_Helpers.isObject(t)&&(t=t.id),this.graph.lockNode(t,e,i)},e.prototype.unlockNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.graph.unlockNode(t)},e.prototype.addFocusNode=function(t,e){return Base_Helpers.isObject(t)&&(t=t.id),this.settings.navigation.autoZoomOnFocus&&(this.scene.autoZoomMode=!0),this.navigator.addFocusNode(t,e,"api")},e.prototype.clearFocus=function(){return this.navigator.clear("api")},e.prototype.removeFocusNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.unexpandNode(t,"api")},e.prototype.expandNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.expandNode(t,"api")},e.prototype.collapseNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.collapseNode(t,"api")},e.prototype.uncollapseNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.uncollapseNode(t,"api")},e.prototype.hideNode=function(t){return Base_Helpers.isObject(t)&&(t=t.id),this.navigator.hideNode(t,"api")},e.prototype.getNode=function(t){return this.layer.idToNode[t]},e.prototype.getLink=function(t){return this.layer.idToLink[t]},e.prototype.setZoom=function(t){return this.autoZoom.setZoom(t,!0)},e.prototype.resetLayout=function(){return this.layout.resetLayout(),this.scene.settings.layout.mode="dynamic",this.autoZoom.setZoom("overview",!1),this.events.notifySceneChanges({layout:!0})},e.prototype.removeData=function(t,e){var i,n,s,o,r;if(null==e&&(e="default"),!this.removed){if(t.nodes)for(r=t.nodes,s=0,o=r.length;o>s;s++)n=r[s],this.navigator.removeNode(n.id.toString());return i=this.getData(e),i.removeData(t),this.events.notifySceneChanges({data:!0})}},e.prototype.exportData=function(t,e){var i;return i=t?this.graph.exportData():this.scene.mainData.exportData(),e&&this.graph.exportCoordinates(i.nodes),i},e.prototype.hideMenu=function(){return this.menu.hideMenu()},e.prototype.extendEventParams=function(t){var e;return(t.x||t.y)&&(e=this.scene.fromDisplay(t.x,t.y),t.chartX=e[0],t.chartY=e[1]),t.nodes=this.layer.nodes(),t.links=this.layer.links(),t.hoverLink=this.scene.hoverLink,t.hoverNode=this.scene.hoverNode,t.hoverItem=this.scene.hoverItem,t.selection=this.scene.selection,t},e.prototype.defaultClick=function(t){var e;if(null!=t.clickNode&&(e=t.clickNode,this.scene.settings.navigation.expandOnClick)){if(!e.expanded)return this.expandNode(e.id),t.preventDefault();if(e.expanded&&"manual"===this.scene.settings.navigation.mode)return this.collapseNode(e.id),t.preventDefault()}},e.prototype.defaultRightClick=function(t){return null!=t.clickNode&&(this.scene.mainData.getNodeLinks(t.clickNode.id),this.menu.toggleNodeMenu(t.clickNode),t.preventDefault()),null!=t.clickLink?(this.menu.toggleLinkMenu(t.x,t.y,t.clickLink),t.preventDefault()):void 0},e.prototype.defaultDoubleClick=function(t){var e;return e=t.clickNode,e?(this.addFocusNode(e.id,-1),t.preventDefault()):void 0},e}(Itemschart_Impl);var Timechart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Settings=function(t){function e(t){e.__super__.constructor.call(this,e.defaults),this.area._minUnit=null,this.area._minDisplayRange=10,this.currentTime._computedTimeOffset=1e3*-(new Date).getTimezoneOffset()*60,this.apply(t)}return __extends(e,t),e.StaticChart={interaction:{zooming:{enabled:!1},selection:{enabled:!1},scrolling:{enabled:!1}}},e.FlatTheme={advanced:{themeCSSClass:"DVSL-flat",assets:[]},area:{style:{noData:{fillColor:"#DDD",image:"builtin://linearchart-no-data-light"},loadingData:{fillColor:"#EEE"}}},chartTypes:{columns:{style:{gradient:1,depth:0}}},timeAxis:{style:{showMajorTimeBalloons:!1,showMinorTimeBalloons:!1,majorTimeLabel:{fillColor:"#000",shadowColor:null},minorTimeLabel:{fillColor:"#000",shadowColor:null},dateLighten:{fillColor:"rgba(0,0,0,0.05)"}}}},e.RoundTheme={advanced:{themeCSSClass:"DVSL-round",assets:[]},valueAxisDefault:{style:{valueLabel:{fillColor:"#000000",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"}}},timeAxis:{style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,minorTimeBalloonStyle:{fillColor:"#FFF",shadowOffsetX:0,shadowOffsetY:2,shadowBlur:2,shadowColor:"#888"},majorTimeBalloonStyle:{fillColor:"AAA",shadowOffsetX:0,shadowOffsetY:-1,shadowBlur:0,shadowColor:"rgba(0,0,0,0.3)"},minorTimeLabel:{fillColor:"#000000",font:"12px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:1,shadowColor:"#7c7c7c"},dateLighten:{fillColor:"rgba(0,0,0,0.05)"},minorTimeRuler1:{lineColor:"rgba(0,0,0,0.2)"},minorTimeRuler2:{lineColor:"rgba(255,255,255,0.1)"}}},chartTypes:{columns:{style:{gradient:.8,depth:3}}},area:{style:{noData:{image:"builtin://linearchart-no-data-dark"}}}},e.GradientTheme={advanced:{themeCSSClass:"DVSL-gradient",assets:[]},valueAxisDefault:{style:{valueLabel:{fillColor:"#000000",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"}}},timeAxis:{style:{showMinorTimeBalloons:!1,showMajorTimeBalloons:!0,minorTimeBalloonStyle:{fillColor:"#FFF",shadowOffsetX:0,shadowOffsetY:2,shadowBlur:2,shadowColor:"#888"},majorTimeBalloonStyle:{fillColor:"AAA",shadowOffsetX:0,shadowOffsetY:-1,shadowBlur:0,shadowColor:"rgba(0,0,0,0.3)"},minorTimeLabel:{fillColor:"#000000",font:"12px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:0,shadowColor:"rgba(255,255,255,0.5)"},majorTimeLabel:{fillColor:"#FFF",font:"11px Arial",shadowOffsetX:0,shadowOffsetY:1,shadowBlur:1,shadowColor:"#7c7c7c"},dateLighten:{fillColor:"rgba(255,255,255,0.2)"},minorTimeRuler1:{lineColor:"rgba(0,0,0,0.2)"},minorTimeRuler2:{lineColor:"rgba(255,255,255,0.1)"}}},chartTypes:{columns:{style:{gradient:.8,depth:3}}},area:{style:{noData:{image:"builtin://linearchart-no-data-dark"}}}},e.defaults=Base_Settings.extendDefaults(Linearchart_Settings.defaults,{theme:e.FlatTheme,navigation:{initialDisplayAnchor:"newestData",initialDisplayPeriod:"max",initialDisplayUnit:"auto",followAnchor:!1},area:{displayUnits:[{unit:"1 s",name:"second"},{unit:"5 s",name:"5 seconds"},{unit:"1 m",name:"minute"},{unit:"5 m",name:"5 minutes"},{unit:"1 h",name:"hour"},{unit:"6 h",name:"6 hours"},{unit:"1 d",name:"day"},{unit:"1 M",name:"month"},{unit:"1 y",name:"year"}],displayPeriods:[{displayPeriod:"10 ms"},{displayPeriod:"100 ms"},{displayPeriod:"s"},{displayPeriod:"m"},{displayPeriod:"h"},{displayPeriod:"d"},{displayPeriod:"M"},{displayPeriod:"y"},{displayPeriod:"10 y"},{displayPeriod:"100 y"}],noData:!0,style:{loadingData:{fillColor:"#BBB"},markerText:{font:"12px Arial"},selection:{lineColor:"#000000",lineWidth:1,fillColor:"rgba(30,160,220,0.15)"},selectionLabel:{fillColor:"#000000",font:"12px Arial"}}},currentTime:Timechart_TimeUpdater.settingsCurTime,timeAxis:Timechart_TimeAxis.settings,data:Timechart_Data.settings,toolbar:Timechart_Toolbar.settings,localization:{calendar:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],week:{dow:1,doy:4}},holidayWeekdays:[0,6],toolbar:{customPeriod:"Custom",periodDropdownTitle:"Select units in which to show the data",unitDropdownTitle:"Select units in which to show the data",zoomoutButton:"Zoom-out",zoomoutTitle:"Zoom out"},timeUnitsNames:{ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},timeUnitsNamesPlural:{ms:"milliseconds",s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",y:"years"},markerDates:{timeFormats:{ms:"HH:mm:ss",s:"HH:mm:ss",m:"HH:mm:ss",h:"HH:mm",d:"D, HH:mm",w:"MMM D",M:"MMM D",y:"YYYY, MMM D"}},infoDates:{majorTimeFormats:{y:null,M:"YYYY",w:"YYYY",d:"YYYY",h:"MMM D, YYYY",m:"MMM D, YYYY",s:"MMM D, YYYY",ms:"MMM D, YYYY"},minorTimeFormats:{y:"YYYY",M:"MMM",w:"[Week] W",d:"MMM D",h:"HH:mm",m:"HH:mm",s:"HH:mm:ss",ms:"ss.SSS"},fullTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY, HH:mm",h:"MMM D, YYYY HH:00",d:"MMM D, YYYY",w:"[Week] W, YYYY",M:"MMM YYYY",y:"YYYY"}},timeAxisDates:{minorLabelTimeFormats:{ms:"ss.SSS",s:"HH:mm:ss",m:"HH:mm",h:"HH:00",d:"MMM D",w:"MMM D",M:"MMM",y:"YYYY"},majorLabelTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY",h:"MMM D, YYYY HH:00",d:"MMM D, YYYY",w:"[Week] W, YYYY",M:"MMM YYYY",y:"YYYY"},majorLabelFullTimeFormats:{ms:"MMM D, YYYY HH:mm:ss",s:"MMM D, YYYY HH:mm:ss",m:"MMM D, YYYY",h:"MMM D, YYYY HH:00",d:"MMM D, YYYY",w:"[Week] W, YYYY",M:"MMM YYYY",y:"YYYY"}},noDataLabel:"No data",determiningDataBounds:"Determining data bounds",loadingLabel:"Loading..."},events:{onTimeChange:null,chartUpdateDelay:400},interaction:{snapMode:"displayUnit",selection:Timechart_Selection.settings,scrolling:Timechart_Scrolling.settings},advanced:{timeUpdateInterval:1e3,dataUpdateInterval:null,maxUnitsToDisplay:2e4,builtinAssets:{"linearchart-no-data-light":builtinImages["no-data-light.png"],"linearchart-no-data-dark":builtinImages["no-data-dark.png"]},assets:["assets://timechart.css"]}}),e.prototype.apply=function(t){var i;return this.applyCompatibility(t,[{from:"toolbars",to:"toolbar"},{from:"toolbar.periodSelection",to:"toolbar.displayPeriod"},{from:"toolbar.zoomOutButton",to:"toolbar.zoomOut"},{from:"toolbar.backButton",to:"toolbar.back"},{from:"interaction.scrolling.noData",to:"interaction.scrolling.limitMode"},{from:"interaction.scrolling.noDataSnapBackProportion",to:"interaction.scrolling.overscrollProportion",transform:function(t){return 1-t}},{from:"area.initialDisplayPeriod",to:"navigation.initialDisplayPeriod"},{from:"area.initialDisplayAnchor",to:"navigation.initialDisplayAnchor"},{from:"area.initialDisplayUnit",to:"navigation.initialDisplayUnit"},{from:"area.followAnchor",to:"navigation.followAnchor"},{from:"timeAxis.style.vgrid",to:"timeAxis.style.vgrid.lineColor",filter:function(t){return"string"==typeof t}}]),i=e.__super__.apply.call(this,t),this._calcMinUnit(),Base_Helpers.hasProp(this,"area.displayUnits")&&(this.area._displayUnitsParsed=this._parseUnits(this.area.displayUnits)),Base_Helpers.hasProp(this,"area.displayPeriods")&&(this.area._displayPeriodsParsed=this._parsePeriods(this.area.displayPeriods)),Base_Helpers.isNumber(Base_Helpers.getProp(t,"currentTime.serverTime"))&&(this.currentTime._computedTimeOffset=t.currentTime.serverTime-(new Date).getTime()-1e3*(new Date).getTimezoneOffset()*60),i},e.prototype._parseUnits=function(t){var e,i,n,s,o;for(e=[],s=0,o=t.length;o>s;s++)i=t[s],n=Base_TimeStep.parse(i),null===n?Base_Helpers.error("Settings: unknown time unit '"+i+"'"):this.area._minUnit.isSmallerOrEqual(n)&&e.push(n);return e},e.prototype._parsePeriods=function(t){var e,i,n,s,o,r,a;for(i=[],r=0,a=t.length;a>r;r++)n=t[r],o=Base_Helpers.clone(n),o.displayUnit=s=Base_TimeStep.parse(n.displayUnit),o.displayPeriod=e=Base_TimeStep.parse(n.displayPeriod),null!==e&&!this.area._minUnit.isSmallerOrEqual(e)||null!==s&&!this.area._minUnit.isSmallerOrEqual(s)||i.push(o);return i},e.prototype._filterPeriods=function(t){var e,i,n,s,o,r;for(i=[],o=0,r=t.length;r>o;o++)n=t[o],s=Base_TimeStep.parse(n.displayUnit),e=Base_TimeStep.parse(n.displayPeriod),null!==e&&!this.area._minUnit.isSmallerOrEqual(e)||null!==s&&!this.area._minUnit.isSmallerOrEqual(s)||i.push(n);return i},e.prototype._calcMinUnit=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m;for(e=new Base_TimeStep("y",1e6),p=this.area.displayUnits,a=0,c=p.length;c>a;a++)n=p[a],s=Base_TimeStep.parse(n),s.isSmaller(e)&&(e=s);for(i=new Base_TimeStep("y",1e6),f=this._computedSeries,l=0,u=f.length;u>l;l++)if(n=f[l],t=this._computedDataMap[n.data.source],null!=t?t.units:void 0)for(m=t.units,h=0,d=m.length;d>h;h++)r=m[h],o=new Base_TimeStep(r,1),o.isSmaller(i)&&(i=o);return i.isBigger(e)&&(e=i),this.area._minUnit=e,this.area._minDisplayRange=10*e.approxTime()},e}(Linearchart_Settings);var Facetchart_Settings,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Settings=function(t){function e(t){e.__super__.constructor.call(this,e.defaults),this.apply(t)}return __extends(e,t),e.defaults=Base_Settings.extendDefaults(Linearchart_Settings.defaults,{theme:null,data:Piechart_Data.settings,filters:{sliceFilter:null},navigation:{initialDrilldown:"",initialOffset:0,initialSelection:[]},items:{style:{label:null,expandable:!0},styleFunction:null},facetAxis:Facetchart_FacetAxis.settings,events:{onPieChange:null,onPieReadyStateChanged:null},interaction:{selection:Facetchart_Selection.settings},info:Facetchart_InfoPopup.settings,toolbar:Facetchart_Toolbar.settings,legend:Linearchart_Legend.settings,localization:{toolbar:{zoomoutTitle:"Zoom-out to previous level"}}}),e.prototype.apply=function(t){var i;
return this.applyCompatibility(t,[{from:"area.initialPieId",to:"navigation.initialDrilldown"},{from:"area.initialPieOffset",to:"navigation.initialOffset"},{from:"area.initialSelection",to:"navigation.initialSelection"}]),i=e.__super__.apply.call(this,t)},e}(Linearchart_Settings);var Timechart_Renderer;Timechart_Renderer=function(){"use strict";function t(t,e){this.chart=t,this.dataWarehouse=e,this.scene=this.chart.scene,this.events=this.chart.events,this.buildSeries(),this.shades=new Linearchart_DataLimitRenderer(this)}return t.prototype.animationOrder=400,t.prototype.paintOrder=5,t.prototype.updateOrder=1500,t.prototype.buildSeries=function(){var t,e,i,n,s;for(this.valueAxis=new Linearchart_ValueAxisSet(this.chart,this.scene.settings._computedValueAxisList),this.r=new Linearchart_Renderer(this.chart,this.valueAxis),this.dataWarehouse.clear(),this.requestIds=[],n=this.scene.settings._computedSeries,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(this.requestIds.push(this.dataWarehouse.registerDataProcessingRequest(t.data)));return s},t.prototype.onSceneChange=function(t){var e;return e=t.changes,e.settings&&((e.settingsChanges._computedSeries||e.settingsChanges._computedValueAxis)&&this.buildSeries(),e.settingsChanges._computedValueAxis&&(e.bounds=!0)),e.bounds||e.settings?e.time=!0:void 0},t.prototype.getPanels=function(){return this.valueAxis.getPanels()},t.prototype.doAnimations=function(t){var e,i,n,s,o,r;if(e=t.changes,this.dataWarehouse.process(t),null!=this.scene.displayUnit){for(this.displayUnit!==this.scene.displayUnit&&(this.displayUnit=this.scene.displayUnit,e.displayUnit=!0),i=[],r=this.requestIds,s=0,o=r.length;o>s;s++)n=r[s],i.push(this.dataWarehouse.getData(n));return(e.time||e.data||e.displayUnit||e.bounds)&&this.r.process(i),this.valueAxis.updateMinMax(t),this.r.afterProcess(),this.valueAxis.doAnimations(t)}},t.prototype.paintScene=function(t){var e,i,n,s,o,r;return e=t.context,r=[this.scene.x0,this.scene.y0,this.scene.width,this.scene.height],s=r[0],o=r[1],n=r[2],i=r[3],this.valueAxis.paintUnder(t),Base_Graphics.pushClip(e,s,o,n,i),this.r.paint(t),this.shades.paint(e),Base_Graphics.popClip(e),this.valueAxis.paint(t)},t.prototype.hitTest=function(t,e){return this.scene.xyInChart(t,e)?this.r.hitTest(t,e,this.scene.settings.interaction.selection.tolerance):null},t.prototype.exportData=function(t,e){return this.r.exportData(t,e)},t}();var Facetchart_Layer,Facetchart_Renderer,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Layer=function(){function t(t,e,i){this.chart=e,this.facet=i,this.scene=this.chart.scene,this.valueAxis=new Linearchart_ValueAxisSet(this.chart,this.scene.settings._computedValueAxisList),this.xes=[],this.facetAxis=new Facetchart_FacetAxis(e,i),this.r=new Linearchart_Renderer(this.chart,this.valueAxis)}return t.prototype.getPanels=function(){var t;return t=this.valueAxis.getPanels(),t.push(this.facetAxis.getPanel()),t},t.prototype.setPanels=function(t){return this.facetAxis.panel=t[t.length-1]},t.prototype.doAnimations=function(t,e){var i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y,v,_,b,x,S,w,C,k,P,M,T,D,L,B,A;if(x=e[0],k=e[1],b=e[2],n=e[3],c=this.facet.offset,a=this.facet.left,u=this.facet.right,a=x+b*a,u=x+b*u,S=Math.max(x,a),w=Math.min(x+b,u),this.bounds=[S,k,w-S,n],i=t.changes,i.position||i.data||i.bounds||i.items){for(y=(u-a)/(this.facet.to-this.facet.from),g=a-this.facet.from*y,m=[],C=[],h=Math.max(c,Math.floor(this.facet.from-1)),l=Math.min(c+this.facet.count,Math.ceil(this.facet.to+1)),s=P=h,L=l-1;L>=P;s=P+=1)m.push(s),C.push(s*y+g);for(m.push(l),C.push(l*y+g),this.xes=C,_=[],B=this.scene.settings._computedSeries,p=M=0,D=B.length;D>M;p=++M){for(d=B[p],v=[],f=[],s=T=h,A=l-1;A>=T;s=T+=1)o=this.facet.items[s-c],r=o.values[p],v.push(r.value),f.push(r);_.push({xes:C,times:m,fromIndex:0,toIndex:m.length,values:v,style:f})}this.r.process(_)}return this.valueAxis.updateMinMax(t),this.r.afterProcess(),this.valueAxis.doAnimations(t)},t.prototype.paintScene=function(t){var e,i,n,s,o,r;return e=t.context,r=this.bounds,s=r[0],o=r[1],n=r[2],i=r[3],e.globalAlpha=this.facet.opacity,this.valueAxis.paintUnder(t),Base_Graphics.pushClip(e,s,o,n,i),this.r.paint(t),Base_Graphics.popClip(e),this.facetAxis.paint(t,this.bounds[0],this.bounds[2],this.xes),this.valueAxis.paint(t),e.globalAlpha=1},t}(),Facetchart_Renderer=function(t){"use strict";function e(t){this.chart=t,this.scene=this.chart.scene,this.events=this.chart.events,this.layers=[],this.panels=[]}return __extends(e,t),e.prototype.animationOrder=400,e.prototype.paintOrder=5,e.prototype.updateOrder=1200,e.prototype.onSceneChange=function(t){var e,i,n,s,o,r,a,l,h,c,u,d,p;if(e=t.changes,e.settings||e.navigation){for(e.settings&&(r=e.settingsChanges,(r._computedValueAxis||r._computedSeries)&&(this.layers=[]),(r._computedValueAxis||r.facetAxis)&&(e.bounds=!0),r._computedSeries&&(this.layers=[])),u=this.layers,n=a=0,h=u.length;h>a;n=++a)o=u[n],o.facet!==this.scene.stack[n]&&(this.layers=this.layers.slice(0,n));for(;this.layers.length<this.scene.stack.length;)i=this.scene.stack[this.layers.length],s=new Facetchart_Layer(t,this.chart,i),this.layers.push(s);for(0===this.layers.length&&this.layers.push(new Facetchart_Layer(t,this.chart,new Facetchart_Facet)),this.panels=[],this.panels=this.layers[0].getPanels(),d=this.layers,p=[],l=0,c=d.length;c>l;l++)s=d[l],p.push(s.setPanels(this.panels));return p}},e.prototype.getPanels=function(){return this.panels},e.prototype.doAnimations=function(t){var e,i,n,s,o,r,a,l,h;for(s=this.scene.x0,o=this.scene.y0,n=this.scene.width,e=this.scene.height,l=this.layers,h=[],r=0,a=l.length;a>r;r++)i=l[r],h.push(i.doAnimations(t,[s,o,n,e]));return h},e.prototype.paintScene=function(t){var e,i,n,s,o;for(s=this.layers,o=[],i=0,n=s.length;n>i;i++)e=s[i],o.push(e.paintScene(t));return o},e.prototype.exportData=function(t,e){return this.layers[this.layers.length-1].r.exportData(t,e)},e.prototype.hitTest=function(t,e){return this.scene.xyInChart(t,e)&&this.layers.length>0?this.layers[this.layers.length-1].r.hitTest(t,e,this.scene.settings.interaction.selection.tolerance):null},e}(Base_ChartElement);var NetChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};NetChart=function(t){"use strict";function e(t){return this._impl=new Netchart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.settings=Netchart_Settings,e.prototype.getNode=function(t){return this._impl.getNode(t)},e.prototype.getLink=function(t){return this._impl.getLink(t)},e.prototype.showNode=function(t){return this._impl.addFocusNode(t,.9)},e.prototype.hideNode=function(t){return this._impl.hideNode(t)},e.prototype.expandNode=function(t){return this._impl.expandNode(t)},e.prototype.addFocusNode=function(t,e){return null==e&&(e=-1),this._impl.addFocusNode(t,e)},e.prototype.removeFocusNode=function(t){return this._impl.removeFocusNode(t)},e.prototype.clearFocus=function(){return this._impl.clearFocus()},e.prototype.collapseNode=function(t){return this._impl.collapseNode(t)},e.prototype.lockNode=function(t,e,i){return this._impl.lockNode(t,e,i)},e.prototype.unlockNode=function(t){return this._impl.unlockNode(t)},e.prototype.zoom=function(t){return t&&this._impl.setZoom(t),this._impl.scene.zoom},e.prototype.resetLayout=function(){return this._impl.resetLayout()},e.prototype.selection=function(t){return null!=t&&this._impl.setSelection(t),this._scene.selection},e.prototype.zoomIn=function(t,e){return null==e&&(e=!0),this._impl.zoomIn(t,e)},e.prototype.nodes=function(){return this._impl.getCurrentNodes()},e.prototype.links=function(){return this._impl.getCurrentLinks()},e.prototype.getNodeDimensions=function(t){return this._impl.getNodeDimensions(t)},e.prototype.exportData=function(t,e){return null==t&&(t=!0),null==e&&(e=!0),this._impl.exportData(t,e)},e}(Base_Api);var Timechart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Timechart_Impl=function(t){"use strict";function e(t,i){this.defaultRightClick=__bind(this.defaultRightClick,this),this.defaultClick=__bind(this.defaultClick,this),e.__super__.constructor.call(this,new Timechart_Settings(t),new Timechart_Scene),this.layers=new Linearchart_Layers(this),this.initialize(i),this.dataWarehouse=new Timechart_DataWarehouse(this),this.renderer=this.events.addElement(new Timechart_Renderer(this,this.dataWarehouse)),this.scrolling=this.events.addElement(new Timechart_Scrolling(this)),this.selection=this.events.addElement(new Timechart_Selection(this)),this.navigator=this.events.addElement(new Timechart_Navigator(this)),this.events.addElement(new Timechart_ClickNotifier(this)),this.infoPopup=this.events.addElement(new Timechart_InfoPopup(this)),this.timeAxis=this.events.addElement(new Timechart_TimeAxis(this)),this.events.addElement(new Timechart_TimeUpdater(this)),this.events.addElement(new Linearchart_Markers(this)),this.events.addElement(new Linearchart_Highlights(this)),this.finalInitialize(),moment.locale("zc",this.settings.localization.calendar)}return __extends(e,t),e.prototype.timeStart=0,e.prototype.timeEnd=0,e.prototype.displayUnit=null,e.prototype.selectionStart=0,e.prototype.selectionEnd=0,e.prototype.createDataObj=function(t){return new Timechart_Data(this,t)},e.prototype.onRemove=function(){return this.layers=null,this.renderer=null,this.scene=null},e.prototype.onSettingsChanged=function(t){var e,i,n;return null!=t.data?t.toolbars=!0:Base_Helpers.hasProp(t,"area.displayUnits")&&(i=new Timechart_TimeSetup(this.settings),i.isAllowedDisplayUnit(this.scene.displayUnit)||(e=i.computeDisplayUnit(this.scene.timeStart,this.scene.timeEnd,this.scene.displayUnit,this.scene.timeStart,this.scene.timeEnd,this.scene),this.scrolling.setTimeRangeSnap(this.scene.timeStart,this.scene.timeEnd,null,e,!0,"api",!0,!0))),(null!=(n=t.localization)?n.calendar:void 0)&&moment.locale("zc",this.settings.localization.calendar),this.events.notifySceneChanges({time:!0})},e.prototype.save=function(){return JSON.stringify({from:this.timeStart,to:this.timeEnd,unit:this.displayUnit.toString(),selFrom:this.scene.selectionStart,selTo:this.scene.selectionEnd,anchor:this.scene.anchor,period:this.scene.period})},e.prototype.restore=function(t,e){var i,n;if(t)return i=JSON.parse(t),(n=Base_TimeStep.parse(i.unit))?(this.scrolling.setTimeRange(i.from,i.to,n,e,"api",i.anchor,i.period),this.setSelection(i.selFrom,i.selTo)):void this.error("Restore state: illegal display  unit: "+i.unit)},e.prototype.setSelection=function(t,e,i){return null==i&&(i="api"),this.scene.selectionStart!==t||this.scene.selectionEnd!==e?(this.scene.selectionStart=t,this.scene.selectionEnd=e,this.events.notifySceneChanges({selection:!0}),this.notifySelectionChanged(i)):void 0},e.prototype.setTimeRange=function(t,e,i,n,s){return null==s&&(s="api"),this.setSelection(null,null,s),this.scrolling.setTimeRange(t,e,i,n,s)},e.prototype.setDisplayPeriod=function(t,e,i,n,s){return null==e&&(e=null),null==i&&(i=null),null==n&&(n=!0),null==s&&(s="api"),null==e&&(e=this.scene.anchor),this.setSelection(null,null),"string"==typeof e&&(e=e.trim()),"string"==typeof t&&(t=t.trim()),this.navigator.computeDisplayPeriod(t,e,i,function(i){return function(o,r,a){return i.scrolling.setTimeRange(o,r,a,n,s,e,t)}}(this))},e.prototype.scrollIntoView=function(t,e){return null==e&&(e=.2),this.error("ScrollIntoView: not implemented")},e.prototype.scroll=function(t,e){var i,n,s,o,r,a,l,h;return l=t.trim().split(" "),3!==l.length?void this.error("Incorrect scroll format: "+t):(n=l[0],i=parseInt(l[1]),a=l[2],"<"!==n&&">"!==n||"number"!=typeof i?void this.error("Scroll:Incorrect scroll format: "+t):(o=new Timechart_TimeSetup(this.settings),h=o.scroll(this.timeStart,this.timeEnd,this.displayUnit,n,i,a),s=h[0],r=h[1],this.scrolling.setTimeRange(s,r,this.displayUnit,e,"api",null,this.scene.period)))},e.prototype.zoomOut=function(t,e,i){return null==e&&(e=!0),null==i&&(i="api"),this.setSelection(null,null),this.scrolling.zoomOut(t,this.scene.timeStart,this.scene.timeEnd,e,i),this.scene.period=null},e.prototype.zoomIn=function(t,e,i,n){return null==e&&(e=null),null==i&&(i=!0),null==n&&(n="api"),this.setSelection(null,null),this.scrolling.zoomIn(t,e,this.scene.timeStart,this.scene.timeEnd,i,n),this.scene.period=null},e.prototype.getMinSelectableUnit=function(){var t,e;return e=this.settings.advanced.maxUnitsToDisplay,t=(this.timeEnd-this.timeStart)/e,new Timechart_TimeSetup(this.settings).getMinUnitForTime(t)},e.prototype.setDisplayUnit=function(t,e,i,n){var s,o,r,a,l,h,c,u,d;return null==i&&(i=!1),null==n&&(n="api"),h=Base_TimeStep.parse(t),null!=h?(c=!1,i&&(r=this.getMinSelectableUnit(),r.approxTime()>h.approxTime()&&(h=r),d=this.scrolling.snap(this.timeStart,this.timeEnd,null,h,!1,!0),o=d[0],l=d[1],u=d[2],a=d[3],s=d[4],l-o>this.timeEnd-this.timeStart&&(c=!0)),c?this.scrolling.setTimeRange(o,l,h,e,n,a,s):this.scrolling.setTimeRange(this.timeStart,this.timeEnd,h,!1,n,this.scene.anchor,this.scene.period)):void 0},e.prototype.exportVisibleData=function(){var t,e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,y;for(a=this.settings._computedSeries,t=this.dataWarehouse.exportData(this.timeStart,this.timeEnd,this.displayUnit,a),h=this.settings.localization.infoDates.fullTimeFormats[this.displayUnit.unit],c=t.timestamps,u=t.values,e=["timestamp","time"],d=0,m=a.length;m>d;d++)r=a[d],e.push(r.name||r.id||"");for(s=[e],i=p=0,g=c.length;g>p;i=++p){for(l=c[i],o=[l,moment(l).utc().format(h)],n=f=0,y=a.length;y>f;n=++f)r=a[n],o.push(u[n][i]);s.push(o)}return s},e.prototype.isThisDisplayPeriod=function(t,e){var i,n,s,o;return this.displayUnit?(i=this.scene.mainData.dataFrom,n=this.scene.mainData.dataTo,o=this.scrolling.computeDisplayPeriod(t,e,this.displayUnit,i,n),i=o[0],n=o[1],s=o[2],i===this.timeStart&&n===this.timeEnd):!1},e.prototype.notifyTimeChanged=function(t,e,i,n){return this.timeStart=t,this.timeEnd=e,this.displayUnit=i,this.notifyChartUpdate(n)},e.prototype.saveNavigation=function(){return this.displayUnit?[this.timeStart,this.timeEnd,this.displayUnit,this.scene.anchor,this.scene.period]:null},e.prototype.restoreNavigation=function(t,e,i){var n,s;return this.timeStart=t[0],this.timeEnd=t[1],this.displayUnit=t[2],n=t[3],s=t[4],this.scrolling.setTimeRange(this.timeStart,this.timeEnd,this.displayUnit,e,i,n,s)},e.prototype.doChartUpdateNotify=function(t){return e.__super__.doChartUpdateNotify.call(this,t),this.dispatchEventParams("timeChange",this.extendEventParams({origin:t}),null)},e.prototype.extendEventParams=function(t){return t.timeStart=this.timeStart,t.timeEnd=this.timeEnd,t.displayUnit=null!=this.displayUnit?this.displayUnit.toString():null,t.selectionStart=this.scene.selectionStart,t.selectionEnd=this.scene.selectionEnd,t.hoverStart=this.scene.hoverFrom,t.hoverEnd=this.scene.hoverTo,null!==this.scene.hoverSeriesItem&&(t.hoverSeries=this.scene.settings.series[this.scene.hoverSeriesItem.seriesIndex],t.hoverMarker=this.scene.hoverSeriesItem.isMarker),t},e.prototype.defaultClick=function(t){return this.setSelection(null,null,"user"),this.scrolling.setTimeRangeSnap(t.clickStart,t.clickEnd,null,null,!0,"user",!1,!0)},e.prototype.defaultRightClick=function(t){return this.infoPopup.show(t),t.preventDefault()},e}(Linearchart_Impl);var Facetchart_Impl,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Facetchart_Impl=function(t){"use strict";function e(t,i){this.defaultDoubleClick=__bind(this.defaultDoubleClick,this),this.defaultClick=__bind(this.defaultClick,this),e.__super__.constructor.call(this,new Facetchart_Settings(t),new Facetchart_Scene),this.layers=new Linearchart_Layers(this),this.initialize(i),this.builder=new Facetchart_Builder(this),this.renderer=this.events.addElement(new Facetchart_Renderer(this)),this.scrolling=this.events.addElement(new Facetchart_Scrolling(this)),this.selection=this.events.addElement(new Facetchart_Selection(this)),this.events.addElement(new Facetchart_Styles(this)),this.events.addElement(new Facetchart_InfoPopup(this)),this.events.addElement(new Linearchart_Highlights(this)),this.finalInitialize(),this.scrolling.setState(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset,0,"init")}return __extends(e,t),e.prototype.api=null,e.prototype.createDataObj=function(t){return new Piechart_Data(this,t)},e.prototype.onRemove=function(){return this.layers=null,this.renderer=null,this.scene=null},e.prototype.onSettingsChanged=function(t){var e;return e={settings:!0,settingsChanges:t},t.navigation&&t.navigation&&this.scrolling.setState(this.settings.navigation.initialDrilldown,this.settings.navigation.initialOffset,null,"api"),(t.labels||t.series||t.interaction)&&(e.items=!0),this.events.notifySceneChanges(e),t.data||t.facetAxis||t._computedValueAxis?this.updateSize(!0):void 0},e.prototype.updateFilters=function(){return this.updateFilter(!0)},e.prototype.updateFilter=function(t){return this.log("Update filter"),this.events.notifySceneChanges({data:!0,dataDeep:t})},e.prototype.setSelection=function(t,e){var i,n,s,o,r;for(null==e&&(e="api"),this.log("Set selection"),n=[],s=[],o=0,r=t.length;r>o;o++)i=t[o],i instanceof Facetchart_Item?n.push(i):Base_Helpers.isString(i)?s.push(i):this.error("SetSelection: Selection contents must be Facetchart_Item object or string, got "+i);return this.selection.setSelection(n,s,!1,e)},e.prototype.setPie=function(t,e,i,n){return null==i&&(i=null),null==n&&(n=!0),this.log("Set pie"),this.scrolling.setState(t,e,i,"api")},e.prototype.getPie=function(){return this.scrolling.getState()[0]},e.prototype.getPieOffset=function(){return this.scrolling.getState()[1]},e.prototype.getActiveItems=function(){var t,e,i,n,s;for(e=[],s=this.scene.stack,i=0,n=s.length;n>i;i++)t=s[i],t.parentItem&&e.push(t.parentItem);return e},e.prototype.getActiveFacets=function(){return this.scene.stack},e.prototype.zoomOut=function(t,e,i){return null==e&&(e=!0),null==i&&(i="api"),this.scrolling.goUp(i)},e.prototype.expandItem=function(t,e){var i,n;return i=t.facet,i===this.scene.peek()&&(n=t.id,t.expandable&&this.scene.mainData.canExpand(n))?(this.setSelection([]),this.scrolling.drillDown(n,e),!0):!1},e.prototype.saveNavigation=function(){var t;return t=this.scene.peek(),!t||t.loading||0===t.count||this.scrolling.isActive()?null:this.scrolling.getState()},e.prototype.restoreNavigation=function(t,e,i){return this.scrolling.setState(t[0],t[1],t[2],i)},e.prototype.save=function(){var t,e,i,n,s,o;for(e=this.scene.selectionIds.splice(0),o=this.scene.selection,n=0,s=o.length;s>n;n++)t=o[n],e.push(t.id);return i=this.scrolling.getState(),JSON.stringify({pie:i[0],offset:i[1],count:i[2],selection:e})},e.prototype.restore=function(t,e){var i;if(t)return i=JSON.parse(t),this.setPie(i.pie,i.offset,i.count,e),this.setSelection(i.selection)},e.prototype.doChartUpdateNotify=function(t){return e.__super__.doChartUpdateNotify.call(this,t),this.dispatchEventParams("pieChange",this.extendEventParams({origin:t}),null),this.dispatchEventParams("pieReadyStateChanged",this.extendEventParams({origin:t}),null)},e.prototype.extendEventParams=function(t){return t.facet=this.scene.peek(),t.offset=t.facet.offset,t.count=t.facet.count,t.hoverItem=this.scene.hoverItem,t.selection=this.scene.selection,t.pie=t.facet,t.slice=t.clickItem,t.clickSlice=t.clickItem,t.clickPie=t.clickFacet,t},e.prototype.defaultClick=function(t){var e,i;if(i=t.slice,e=t.clickPie,i){if(i.url)return Base_Helpers.openUrl(i.url),t.preventDefault();if(this.expandItem(i,"user"))return t.preventDefault()}},e.prototype.defaultDoubleClick=function(){},e}(Linearchart_Impl);var TimeChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};TimeChart=function(t){"use strict";function e(t){return this._impl=new Timechart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.themes={flat:Timechart_Settings.FlatTheme,round:Timechart_Settings.RoundTheme,gradient:Timechart_Settings.GradientTheme,"static":Timechart_Settings.StaticChart},e.settings=Timechart_Settings,e.prototype.time=function(t,e,i){return null==i&&(i=!0),void 0!==t&&void 0!==e&&this._impl.setTimeRange(t,e,null,i),[this._impl.timeStart,this._impl.timeEnd]},e.prototype.setDisplayPeriod=function(t,e,i){return this._impl.setDisplayPeriod(t,e,null,i)},e.prototype.displayUnit=function(t,e,i,n){return null==e&&(e=!0),null==i&&(i=!1),null==n&&(n=null),null!=t&&this._impl.setDisplayUnit(t,e,i,n),null!=this._impl.displayUnit?this._impl.displayUnit.toString():null},e.prototype.selection=function(t,e){return void 0!==t&&void 0!==e&&this._impl.setSelection(t,e),[this._scene.selectionStart,this._scene.selectionEnd]},e.prototype.scroll=function(t,e){return null==e&&(e=!0),this._impl.scroll(t,e)},e.prototype.zoomOut=function(t,e){return null==t&&(t=null),null==e&&(e=!0),this._impl.zoomOut(t,e,"api")},e.prototype.zoomIn=function(t,e,i){return null==t&&(t=null),null==e&&(e=null),null==i&&(i=!0),this._impl.zoomIn(t,e,i,"api")},e.prototype.replaceSeries=function(t){return this._impl.replaceSeries(t)},e.prototype.exportVisibleData=function(){return this._impl.exportVisibleData()},e}(Base_Api);var FacetChart,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};FacetChart=function(t){"use strict";function e(t){return this._impl=new Facetchart_Impl(t,this),this.settings=this._impl.settings,this._scene=this._impl.scene,this}return __extends(e,t),e.settings=Facetchart_Settings,e.prototype.updateFilter=function(){return this._impl.updateFilter(),this},e.prototype.selection=function(t){return null!=t&&this._impl.setSelection(t),this._scene.selection},e.prototype.setPie=function(t,e,i){return null==e&&(e=0),null==i&&(i=null),this._impl.setPie(t,e,i,"api"),this},e.prototype.getPie=function(){return this._impl.getPie()},e.prototype.getPieOffset=function(){return this._impl.getPieOffset()},e.prototype.getActiveItems=function(){return this._impl.getActiveItems()},e.prototype.getActiveFacets=function(){return this._impl.getActiveFacets()},e.prototype.getActiveFacet=function(){var t;return t=this._impl.getActiveFacets(),t[t.length-1]},e.prototype.expandSlice=function(t){return this._impl.expandItem(t,"api")},e.prototype.replaceSeries=function(t){return this._impl.replaceSeries(t)},e}(Base_Api);
this.NetChart = NetChart;
this.TimeChart = TimeChart;
this.PieChart = PieChart;
this.FacetChart = FacetChart;
}).call(this);
